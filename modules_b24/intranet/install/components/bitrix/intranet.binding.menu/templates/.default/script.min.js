(function(){"use strict";BX.namespace("BX.Intranet.Binding.Menu");BX.Intranet.Binding.Menu=function(i,t,e){e=e||{};this.id=i||"intranet_binding_menu";this.idTop=this.id+"_top";this.items=t;this.menu=null;this.menuShowed=false;this.sections=e.sections||{}};BX.Intranet.Binding.Menu.prototype={binding:function(){if(BX(this.id)){BX.bind(BX(this.id),"click",BX.delegate(this.clickMenuButton,this));if(BX(this.idTop)&&BX(this.idTop).getAttribute("href")==="#"){BX.bind(BX(this.idTop),"click",BX.delegate(this.clickMenuButton,this))}}},buildMenu:function(){var i=false;var t=[];for(var e in this.sections){if(this.sections[e]){t.push({text:"&mdash; "+this.sections[e]+" &mdash;",className:""})}else if(i){t.push({delimiter:true})}var n=false;for(var s=0,h=this.items.length;s<h;s++){if(typeof this.items[s]["sectionCode"]!=="undefined"&&this.items[s]["sectionCode"]===e){n=true;i=true;if(typeof this.items[s]["onclick"]==="undefined"){this.items[s]["onclick"]=function(i){console.log(i)}.bind(undefined,this.items[s]["id"])}t.push(this.items[s])}}if(!n){t.pop()}}return t},clickMenuButton:function(i){if(!this.menu){this.menu=new BX.PopupMenuWindow(this.id,BX(this.id),this.buildMenu(this.items),{autoHide:true,angle:true,offsetLeft:50,events:{onClose:function(){this.menuShowed=false}.bind(this)}})}if(this.menu){if(this.menuShowed){this.menu.close()}else{this.menuShowed=true;this.menu.show()}}BX.PreventDefault(i)}}})();
//# sourceMappingURL=script.map.js