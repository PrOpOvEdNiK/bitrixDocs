{"version":3,"sources":["engine.js"],"names":["BX","namespace","Call","State","Incoming","UserState","Idle","Calling","Declined","Ready","Connecting","Connected","Failed","Type","Instant","Permanent","Provider","Plain","Voximplant","Janus","StreamTag","Main","Screen","Direction","Outgoing","Event","onUserInvited","onUserStateChanged","onUserVoiceStarted","onUserVoiceStopped","onLocalMediaReceived","onLocalMediaStopped","onDeviceListUpdated","onRTCStatsReceived","onCallFailure","onStreamReceived","onStreamRemoved","onDestroy","ajaxActions","createCall","createChildCall","getPublicChannels","getCall","__allowConstructing","Engine","this","debugFlag","Error","calls","userId","message","init","getInstance","CallEngine","prototype","addCustomEvent","__onPullEvent","bind","__onPullClientEvent","getCurrentUserId","config","self","Promise","resolve","reject","callType","type","callProvider","provider","getDefaultProvider","callParameters","entityType","entityId","userIds","isArray","batchParameters","callParams","publicChannels","USERS","rest","callBatch","response","error","getError","code","error_description","createCallResponse","data","callFields","call","callFabric","__getCallFabric","id","parseInt","instanceId","getUuidv4","direction","users","videoEnabled","enableMicAutoParameters","associatedEntity","ASSOCIATED_ENTITY","events","__onCallDestroy","debug","PULL","setPublicIds","Object","values","userData","MessengerCommon","updateUserData","isNew","parentId","newProvider","newUsers","parentCall","isVideoEnabled","getCallWithId","ajax","runAction","callId","then","answer","state","errors","replace","c","r","Math","random","v","toString","command","params","extra","handlers","Call::incoming","__onPullIncomingCall","substr","server_time_ago","console","ID","publicIds","PROVIDER","PARENT_ID","callFromMobile","isMobile","initiatorId","senderId","onCustomEvent","window","video","e","providerType","PlainCallFabric","VoximplantCallFabric","JanusCallFabric","log","text","Util","getDateForLog","arguments","i","length","JSON","stringify","desktop","ready","a","getTimeForLog","apply","concat","Array","slice","MessengerDebug","addLog","PlainCall","VoximplantCall","JanusCall"],"mappings":"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","file":"engine.map.js"}