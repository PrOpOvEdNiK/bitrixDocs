{"version":3,"file":"widget.bundle.js","sources":["../src/const.js","../src/utils/cookie.js","../src/model.js","../src/utils/restclient.js","../src/rest.handler.js","../src/pull.handler.js","../src/widget.js","../src/public.js","../src/component/bx-livechat.js","../src/component/bx-livechat-body-error.js","../src/component/bx-livechat-body-head.js","../src/component/bx-livechat-body-loading.js","../src/component/bx-livechat-body-operators.js","../src/component/bx-livechat-body-orientation-disabled.js","../src/component/bx-livechat-form-consent.js","../src/component/bx-livechat-form-history.js","../src/component/bx-livechat-form-offline.js","../src/component/bx-livechat-form-vote.js","../src/component/bx-livechat-form-welcome.js","../src/component/bx-livechat-smiles.js","../src/component/bx-livechat-footer.js","../src/registry.js"],"sourcesContent":["/**\n * Bitrix OpenLines widget\n * Widget constants\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nfunction GetObjectValues(source)\n{\n\tconst destination = [];\n\tfor (let value in source)\n\t{\n\t\tif (source.hasOwnProperty(value))\n\t\t{\n\t\t\tdestination.push(source[value]);\n\t\t}\n\t}\n\treturn destination;\n}\n\n/* region 01. Constants */\n\nexport const VoteType = Object.freeze({\n\tnone: 'none',\n\tlike: 'like',\n\tdislike: 'dislike',\n});\n\nexport const LanguageType = Object.freeze({\n\trussian: 'ru',\n\tukraine: 'ua',\n\tworld: 'en',\n});\n\nexport const FormType = Object.freeze({\n\tnone: 'none',\n\tlike: 'like',\n\tsmile: 'smile',\n\tconsent: 'consent',\n\twelcome: 'welcome',\n\toffline: 'offline',\n\thistory: 'history',\n});\n\nexport const LocationType = Object.freeze({\n\ttopLeft: 1,\n\ttopMiddle: 2,\n\ttopBottom: 3,\n\tbottomLeft: 6,\n\tbottomMiddle: 5,\n\tbottomRight: 4,\n});\n\nexport const LocationStyle = Object.freeze({\n\t1: 'top-left',\n\t2: 'top-center',\n\t3: 'top-right',\n\t6: 'bottom-left',\n\t5: 'bottom-center',\n\t4: 'bottom-right',\n});\n\nexport const SubscriptionType = Object.freeze({\n\tconfigLoaded: 'configLoaded',\n\twidgetOpen: 'widgetOpen',\n\twidgetClose: 'widgetClose',\n\tsessionStart: 'sessionStart',\n\tsessionOperatorChange: 'sessionOperatorChange',\n\tsessionFinish: 'sessionFinish',\n\toperatorMessage: 'operatorMessage',\n\tuserForm: 'userForm',\n\tuserMessage: 'userMessage',\n\tuserFile: 'userFile',\n\tuserVote: 'userVote',\n\tevery: 'every',\n});\nexport const SubscriptionTypeCheck = GetObjectValues(SubscriptionType);\n\nexport const RestMethod = Object.freeze({\n\twidgetUserRegister: 'imopenlines.widget.user.register',\n\twidgetConfigGet: 'imopenlines.widget.config.get',\n\twidgetDialogGet: 'imopenlines.widget.dialog.get',\n\twidgetUserGet: 'imopenlines.widget.user.get',\n\twidgetUserConsentApply: 'imopenlines.widget.user.consent.apply',\n\twidgetVoteSend: 'imopenlines.widget.vote.send',\n\twidgetFormSend: 'imopenlines.widget.form.send',\n\n\tpullServerTime: 'server.time',\n\tpullConfigGet: 'pull.config.get',\n});\nexport const RestMethodCheck = GetObjectValues(RestMethod);\n\nexport const RestAuth = Object.freeze({\n\tguest: 'guest',\n});\n\nexport const SessionStatus = Object.freeze({\n\tnew: 0,\n\tskip: 5,\n\tanswer: 10,\n\tclient: 20,\n\tclientAfterOperator: 25,\n\toperator: 40,\n\twaitClient: 50,\n\tclose: 60,\n\tspam: 65,\n\tduplicate: 69,\n\tsilentlyClose: 75,\n});","/**\n * Bitrix OpenLines widget\n * Cookie manager\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {LocalStorage} from \"im.tools.localstorage\";\n\nexport const Cookie =\n{\n\tget(siteId, name)\n\t{\n\t\tlet cookieName = siteId? siteId+'_'+name: name;\n\n\t\tif (navigator.cookieEnabled)\n\t\t{\n\t\t\tlet result = document.cookie.match(new RegExp(\n\t\t\t\t\"(?:^|; )\" + cookieName.replace(/([.$?*|{}()\\[\\]\\\\\\/+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t\t\t));\n\n\t\t\tif (result)\n\t\t\t{\n\t\t\t\treturn decodeURIComponent(result[1]);\n\t\t\t}\n\t\t}\n\n\t\tif (LocalStorage.isEnabled())\n\t\t{\n\t\t\tlet result = LocalStorage.get(siteId, 0, name, undefined);\n\t\t\tif (typeof result !== 'undefined')\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof window.BX.LiveChatCookie === 'undefined')\n\t\t{\n\t\t\twindow.BX.LiveChatCookie = {};\n\t\t}\n\n\t\treturn window.BX.LiveChatCookie[cookieName];\n\t},\n\tset(siteId, name, value, options)\n\t{\n\t\toptions = options || {};\n\n\t\tlet expires = options.expires;\n\t\tif (typeof(expires) == \"number\" && expires)\n\t\t{\n\t\t\tlet currentDate = new Date();\n\t\t\tcurrentDate.setTime(currentDate.getTime() + expires * 1000);\n\t\t\texpires = options.expires = currentDate;\n\t\t}\n\n\t\tif (expires && expires.toUTCString)\n\t\t{\n\t\t\toptions.expires = expires.toUTCString();\n\t\t}\n\n\t\tvalue = encodeURIComponent(value);\n\n\t\tlet cookieName = siteId? siteId+'_'+name: name;\n\t\tlet updatedCookie = cookieName + \"=\" + value;\n\n\t\tfor (let propertyName in options)\n\t\t{\n\t\t\tif (!options.hasOwnProperty(propertyName))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tupdatedCookie += \"; \" + propertyName;\n\n\t\t\tlet propertyValue = options[propertyName];\n\t\t\tif (propertyValue !== true)\n\t\t\t{\n\t\t\t\tupdatedCookie += \"=\" + propertyValue;\n\t\t\t}\n\t\t}\n\n\t\tdocument.cookie = updatedCookie;\n\n\t\tif (typeof window.BX.LiveChatCookie === 'undefined')\n\t\t{\n\t\t\tBX.LiveChatCookie = {};\n\t\t}\n\n\t\twindow.BX.LiveChatCookie[cookieName] = value;\n\t\tLocalStorage.set(siteId, 0, name, value);\n\n\t\treturn true;\n\t}\n};","/**\n * Bitrix OpenLines widget\n * Widget model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nimport {Utils} from 'im.utils';\nimport {Cookie} from './utils/cookie';\nimport {FormType, LocationStyle, LocationType, VoteType} from \"./const\";\n\nexport class WidgetModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'widget';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\tconfigId: 0,\n\t\t\t\tconfigName: '',\n\t\t\t\thost: this.getVariable('common.host', location.protocol+'//'+location.host),\n\t\t\t\tpageMode: this.getVariable('common.pageMode', false),\n\t\t\t\tcopyright: this.getVariable('common.copyright', true),\n\t\t\t\tcopyrightUrl: this.getVariable('common.copyrightUrl', 'https://bitrix24.com'),\n\t\t\t\tlocation: this.getVariable('common.location', LocationType.bottomRight),\n\t\t\t\tstyles: {\n\t\t\t\t\tbackgroundColor: this.getVariable('styles.backgroundColor', '#17a3ea'),\n\t\t\t\t\ticonColor: this.getVariable('styles.iconColor', '#ffffff')\n\t\t\t\t},\n\t\t\t\tvote: {\n\t\t\t\t\tenable: false,\n\t\t\t\t\tbeforeFinish: true,\n\t\t\t\t\tmessageText: this.getVariable('vote.messageText', ''),\n\t\t\t\t\tmessageLike: this.getVariable('vote.messageLike', ''),\n\t\t\t\t\tmessageDislike: this.getVariable('vote.messageDislike', '')\n\t\t\t\t},\n\t\t\t\ttextMessages: {\n\t\t\t\t\tbxLivechatOnlineLine1: this.getVariable('textMessages.bxLivechatOnlineLine1', ''),\n\t\t\t\t\tbxLivechatOnlineLine2: this.getVariable('textMessages.bxLivechatOnlineLine2', ''),\n\t\t\t\t\tbxLivechatOffline: this.getVariable('textMessages.bxLivechatOffline', ''),\n\t\t\t\t\tbxLivechatTitle: '',\n\t\t\t\t},\n\t\t\t\tonline: false,\n\t\t\t\toperators: [],\n\t\t\t\tconnectors: [],\n\t\t\t\tshowForm: FormType.none,\n\t\t\t\tshowed: false,\n\t\t\t\treopen: false,\n\t\t\t\tdragged: false,\n\t\t\t\ttextareaHeight: 0,\n\t\t\t\twidgetHeight: 0,\n\t\t\t\twidgetWidth: 0,\n\t\t\t\tshowConsent: false,\n\t\t\t\tconsentUrl: '',\n\t\t\t\tdialogStart: false,\n\t\t\t\twatchTyping: false,\n\t\t\t},\n\t\t\tdialog:\n\t\t\t{\n\t\t\t\tsessionId: 0,\n\t\t\t\tsessionClose: true,\n\t\t\t\tsessionStatus: 0,\n\t\t\t\tuserVote: VoteType.none,\n\t\t\t\tuserConsent: false,\n\t\t\t\toperatorChatId: 0,\n\t\t\t\toperator: {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tname: '',\n\t\t\t\t\tfirstName: '',\n\t\t\t\t\tlastName: '',\n\t\t\t\t\tworkPosition: '',\n\t\t\t\t\tavatar: '',\n\t\t\t\t\tonline: false,\n\t\t\t\t}\n\t\t\t},\n\t\t\tuser:\n\t\t\t{\n\t\t\t\tid: -1,\n\t\t\t\thash: '',\n\t\t\t\tname: '',\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\tavatar: '',\n\t\t\t\temail: '',\n\t\t\t\tphone: '',\n\t\t\t\twww: '',\n\t\t\t\tgender: 'M',\n\t\t\t\tposition: '',\n\t\t\t},\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\tcommon: {\n\t\t\t\thost: null,\n\t\t\t\tpageMode: null,\n\t\t\t\tcopyright: null,\n\t\t\t\tcopyrightUrl: null,\n\t\t\t\tstyles: null,\n\t\t\t\tdragged: null,\n\t\t\t\tshowed: null,\n\t\t\t\tshowConsent: null,\n\t\t\t\tshowForm: null,\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\n\t\t\tcommon: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.configId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.common.configId = payload.configId;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.configName === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.configName = payload.configName;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.online === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.online = payload.online;\n\t\t\t\t}\n\t\t\t\tif (Utils.types.isPlainObject(payload.vote))\n\t\t\t\t{\n\t\t\t\t\tif (typeof payload.vote.enable === 'boolean')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.vote.enable = payload.vote.enable;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.vote.beforeFinish === 'boolean')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.vote.beforeFinish = payload.vote.beforeFinish;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.vote.messageText === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.vote.messageText = payload.vote.messageText;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.vote.messageLike === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.vote.messageLike = payload.vote.messageLike;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.vote.messageDislike === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.vote.messageDislike = payload.vote.messageDislike;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Utils.types.isPlainObject(payload.textMessages))\n\t\t\t\t{\n\t\t\t\t\tif (typeof payload.textMessages.bxLivechatOnlineLine1 === 'string' && payload.textMessages.bxLivechatOnlineLine1 !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.textMessages.bxLivechatOnlineLine1 = payload.textMessages.bxLivechatOnlineLine1;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.textMessages.bxLivechatOnlineLine2 === 'string' && payload.textMessages.bxLivechatOnlineLine2 !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.textMessages.bxLivechatOnlineLine2 = payload.textMessages.bxLivechatOnlineLine2;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.textMessages.bxLivechatOffline === 'string' && payload.textMessages.bxLivechatOffline !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.textMessages.bxLivechatOffline = payload.textMessages.bxLivechatOffline;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.textMessages.bxLivechatTitle === 'string' && payload.textMessages.bxLivechatTitle !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.textMessages.bxLivechatTitle = payload.textMessages.bxLivechatTitle;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (typeof payload.dragged === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.dragged = payload.dragged;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.textareaHeight === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.common.textareaHeight = payload.textareaHeight;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.widgetHeight === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.common.widgetHeight = payload.widgetHeight;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.widgetWidth === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.common.widgetWidth = payload.widgetWidth;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.showConsent === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.showConsent = payload.showConsent;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.consentUrl === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.consentUrl = payload.consentUrl;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.showed === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.showed = payload.showed;\n\t\t\t\t\tpayload.reopen = Utils.device.isMobile()? false: payload.showed;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.reopen === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.reopen = payload.reopen;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.copyright === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.copyright = payload.copyright;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.dialogStart === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.dialogStart = payload.dialogStart;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.watchTyping === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.watchTyping = payload.watchTyping;\n\t\t\t\t}\n\t\t\t\tif (payload.operators instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tstate.common.operators = payload.operators;\n\t\t\t\t}\n\t\t\t\tif (payload.connectors instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tstate.common.connectors = payload.connectors;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.showForm === 'string' && typeof FormType[payload.showForm] !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tstate.common.showForm = payload.showForm;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.location === 'number' && typeof LocationStyle[payload.location] !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tif (state.common.location !== payload.location)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.widgetHeight = 0;\n\t\t\t\t\t\tstate.common.widgetWidth = 0;\n\t\t\t\t\t\tstate.common.location = payload.location;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.isSaveNeeded({common: payload}))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdialog: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.sessionId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.dialog.sessionId = payload.sessionId;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.sessionClose === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.dialog.sessionClose = payload.sessionClose;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.sessionStatus === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.dialog.sessionStatus = payload.sessionStatus;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.userConsent === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.dialog.userConsent = payload.userConsent;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.userVote === 'string' && typeof payload.userVote !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tstate.dialog.userVote = payload.userVote;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.operatorChatId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.dialog.operatorChatId = payload.operatorChatId;\n\t\t\t\t}\n\t\t\t\tif (Utils.types.isPlainObject(payload.operator))\n\t\t\t\t{\n\t\t\t\t\tif (typeof payload.operator.id === 'number')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.dialog.operator.id = payload.operator.id;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.operator.name === 'string' || typeof payload.operator.name === 'number')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.dialog.operator.name = payload.operator.name.toString();\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.operator.lastName === 'string' || typeof payload.operator.lastName === 'number')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.dialog.operator.lastName = payload.operator.lastName.toString();\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.operator.firstName === 'string' || typeof payload.operator.firstName === 'number')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.dialog.operator.firstName = payload.operator.firstName.toString();\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.operator.workPosition === 'string' || typeof payload.operator.workPosition === 'number')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.dialog.operator.workPosition = payload.operator.workPosition.toString();\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.operator.avatar === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!payload.operator.avatar || payload.operator.avatar.startsWith('http'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.dialog.operator.avatar = payload.operator.avatar;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.dialog.operator.avatar = state.common.host+payload.operator.avatar;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof payload.operator.online === 'boolean')\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.dialog.operator.online = payload.operator.online;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.isSaveNeeded({dialog: payload}))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tuser: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.id === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.user.id = payload.id;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.hash === 'string' && payload.hash !== state.user.hash)\n\t\t\t\t{\n\t\t\t\t\tstate.user.hash = payload.hash;\n\t\t\t\t\tCookie.set(null, 'LIVECHAT_HASH', payload.hash, {expires: 365*86400, path: '/'});\n\t\t\t\t}\n\t\t\t\tif (typeof payload.name === 'string' || typeof payload.name === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.user.name = payload.name.toString();\n\t\t\t\t}\n\t\t\t\tif (typeof payload.firstName === 'string' || typeof payload.firstName === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.user.firstName = payload.firstName.toString();\n\t\t\t\t}\n\t\t\t\tif (typeof payload.lastName === 'string' || typeof payload.lastName === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.user.lastName = payload.lastName.toString();\n\t\t\t\t}\n\t\t\t\tif (typeof payload.avatar === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.user.avatar = payload.avatar;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.email === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.user.email = payload.email;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.phone === 'string' || typeof payload.phone === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.user.phone = payload.phone.toString();\n\t\t\t\t}\n\t\t\t\tif (typeof payload.www === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.user.www = payload.www;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.gender === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.user.gender = payload.gender;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.position === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.user.position = payload.position;\n\t\t\t\t}\n\n\t\t\t\tif (this.isSaveNeeded({user: payload}))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tshow: ({ commit }) =>\n\t\t\t{\n\t\t\t\tcommit('common', {showed: true});\n\t\t\t}\n\t\t}\n\t}\n}","/**\n * Bitrix OpenLines widget\n * Rest client (base on BX.RestClient)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\n// TODO change BX.RestClient, BX.promise to import\n\nimport {Utils} from \"im.utils\";\nimport {RestAuth, RestMethod} from \"../const\";\nimport {RestClient} from \"rest.client\";\n\nexport class WidgetRestClient\n{\n\tconstructor(params)\n\t{\n\t\tthis.queryAuthRestore = false;\n\n\t\tthis.setAuthId(RestAuth.guest);\n\n\t\tthis.restClient = new RestClient({\n\t\t\tendpoint: params.endpoint,\n\t\t\tqueryParams: this.queryParams,\n\t\t\tcors: true\n\t\t});\n\t}\n\n\tsetAuthId(authId, customAuthId = '')\n\t{\n\t\tif (typeof this.queryParams !== 'object')\n\t\t{\n\t\t\tthis.queryParams = {};\n\t\t}\n\n\t\tif (\n\t\t\tauthId == RestAuth.guest\n\t\t\t|| typeof authId === 'string' && authId.match(/^[a-f0-9]{32}$/)\n\t\t)\n\t\t{\n\t\t\tthis.queryParams.livechat_auth_id = authId;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.error(`%LiveChatRestClient.setAuthId: auth is not correct (%c${authId}%c)`, \"color: black;\", \"font-weight: bold; color: red\", \"color: black\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tauthId == RestAuth.guest\n\t\t\t&& typeof customAuthId === 'string' && customAuthId.match(/^[a-f0-9]{32}$/)\n\t\t)\n\t\t{\n\t\t\tthis.queryParams.livechat_custom_auth_id = customAuthId;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetAuthId()\n\t{\n\t\tif (typeof this.queryParams !== 'object')\n\t\t{\n\t\t\tthis.queryParams = {};\n\t\t}\n\n\t\treturn this.queryParams.livechat_auth_id || null;\n\t}\n\n\tcallMethod(method, params, callback, sendCallback, logTag = null)\n\t{\n\t\tif (!logTag)\n\t\t{\n\t\t\tlogTag = Utils.getLogTrackingParams({\n\t\t\t\tname: method,\n\t\t\t});\n\t\t}\n\n\t\tconst promise = new BX.Promise();\n\n\t\t// TODO: Callbacks methods will not work!\n\t\tthis.restClient.callMethod(method, params, null, sendCallback, logTag).then(result => {\n\n\t\t\tthis.queryAuthRestore = false;\n\t\t\tpromise.fulfill(result);\n\n\t\t}).catch(result => {\n\n\t\t\tlet error = result.error();\n\t\t\tif (error.ex.error == 'LIVECHAT_AUTH_WIDGET_USER')\n\t\t\t{\n\t\t\t\tthis.setAuthId(error.ex.hash);\n\n\t\t\t\tif (method === RestMethod.widgetUserRegister)\n\t\t\t\t{\n\t\t\t\t\tconsole.warn(`BX.LiveChatRestClient: ${error.ex.error_description} (${error.ex.error})`);\n\n\t\t\t\t\tthis.queryAuthRestore = false;\n\t\t\t\t\tpromise.reject(result);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (!this.queryAuthRestore)\n\t\t\t\t{\n\t\t\t\t\tconsole.warn('BX.LiveChatRestClient: your auth-token has expired, send query with a new token');\n\n\t\t\t\t\tthis.queryAuthRestore = true;\n\t\t\t\t\tthis.restClient.callMethod(method, params, null, sendCallback, logTag).then(result => {\n\t\t\t\t\t\tthis.queryAuthRestore = false;\n\t\t\t\t\t\tpromise.fulfill(result);\n\t\t\t\t\t}).catch(result => {\n\t\t\t\t\t\tthis.queryAuthRestore = false;\n\t\t\t\t\t\tpromise.reject(result);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.queryAuthRestore = false;\n\t\t\tpromise.reject(result);\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tcallBatch(calls, callback, bHaltOnError, sendCallback, logTag)\n\t{\n\t\tlet resultCallback = (result) =>\n\t\t{\n\t\t\tlet error = null;\n\t\t\tfor (let method in calls)\n\t\t\t{\n\t\t\t\tif (!calls.hasOwnProperty(method))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet error = result[method].error();\n\t\t\t\tif (error && error.ex.error == 'LIVECHAT_AUTH_WIDGET_USER')\n\t\t\t\t{\n\t\t\t\t\tthis.setAuthId(error.ex.hash);\n\t\t\t\t\tif (method === RestMethod.widgetUserRegister)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn(`BX.LiveChatRestClient: ${error.ex.error_description} (${error.ex.error})`);\n\n\t\t\t\t\t\tthis.queryAuthRestore = false;\n\t\t\t\t\t\tcallback(result);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.queryAuthRestore)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn('BX.LiveChatRestClient: your auth-token has expired, send query with a new token');\n\n\t\t\t\t\t\tthis.queryAuthRestore = true;\n\t\t\t\t\t\tthis.restClient.callBatch(calls, callback, bHaltOnError, sendCallback, logTag);\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.queryAuthRestore = false;\n\t\t\tcallback(result);\n\n\t\t\treturn true;\n\t\t};\n\n\t\treturn this.restClient.callBatch(calls, resultCallback, bHaltOnError, sendCallback, logTag);\n\t};\n}","/**\n * Bitrix OpenLines widget\n * Widget Rest answers (Rest Answer Handler)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {BaseRestAnswerHandler} from \"im.provider.rest\";\nimport {LocalStorage} from \"im.tools.localstorage\";\nimport {SubscriptionType} from \"./const\";\n\nclass WidgetRestAnswerHandler extends BaseRestAnswerHandler\n{\n\tconstructor(props = {})\n\t{\n\t\tsuper(props);\n\n\t\tthis.widget = props.widget;\n\t}\n\n\thandleImopenlinesWidgetConfigGetSuccess(data)\n\t{\n\t\tthis.store.commit('widget/common', {\n\t\t\tconfigId: data.configId,\n\t\t\tconfigName: data.configName,\n\t\t\tvote: data.vote,\n\t\t\ttextMessages: data.textMessages,\n\t\t\toperators: data.operators || [],\n\t\t\tonline: data.online,\n\t\t\tconsentUrl: data.consentUrl,\n\t\t\tconnectors: data.connectors || [],\n\t\t\twatchTyping: data.watchTyping,\n\t\t});\n\n\t\tthis.store.commit('application/set', {disk: data.disk});\n\n\t\tthis.widget.addLocalize(data.serverVariables);\n\t\tLocalStorage.set(this.widget.getSiteId(), 0, 'serverVariables', data.serverVariables || {});\n\t}\n\n\thandleImopenlinesWidgetUserRegisterSuccess(data)\n\t{\n\t\tthis.widget.restClient.setAuthId(data.hash);\n\n\t\tlet previousData = [];\n\t\tif (typeof this.store.state.messages.collection[this.controller.getChatId()] !== 'undefined')\n\t\t{\n\t\t\tpreviousData = this.store.state.messages.collection[this.controller.getChatId()];\n\t\t}\n\t\tthis.store.commit('messages/initCollection', {chatId: data.chatId, messages: previousData});\n\n\t\tthis.store.commit('dialogues/initCollection', {dialogId: data.dialogId, fields: {\n\t\t\tentityType: 'LIVECHAT',\n\t\t\ttype: 'livechat'\n\t\t}});\n\n\t\tthis.store.commit('application/set', {dialog: {\n\t\t\tchatId: data.chatId,\n\t\t\tdialogId: 'chat'+data.chatId\n\t\t}});\n\t}\n\n\thandleImopenlinesWidgetUserGetSuccess(data)\n\t{\n\t\tthis.store.commit('widget/user', {\n\t\t\tid: data.id,\n\t\t\thash: data.hash,\n\t\t\tname: data.name,\n\t\t\tfirstName: data.firstName,\n\t\t\tlastName: data.lastName,\n\t\t\tphone: data.phone,\n\t\t\tavatar: data.avatar,\n\t\t\temail: data.email,\n\t\t\twww: data.www,\n\t\t\tgender: data.gender,\n\t\t\tposition: data.position,\n\t\t});\n\t\tthis.store.dispatch('users/set', [{\n\t\t\tid: data.id,\n\t\t\tname: data.name,\n\t\t\tfirstName: data.firstName,\n\t\t\tlastName: data.lastName,\n\t\t\tavatar: data.avatar,\n\t\t\tgender: data.gender,\n\t\t\tworkPosition: data.position,\n\t\t}]);\n\t\tthis.store.commit('application/set', {common: {\n\t\t\tuserId: data.id\n\t\t}});\n\t}\n\n\thandleImopenlinesWidgetDialogGetSuccess(data)\n\t{\n\t\tthis.store.commit('messages/initCollection', {chatId: data.chatId});\n\n\t\tthis.store.commit('widget/dialog', data);\n\n\n\t\tthis.store.commit('application/set', {dialog: {\n\t\t\tchatId: data.chatId,\n\t\t\tdialogId: 'chat'+data.chatId,\n\t\t\tdiskFolderId: data.diskFolderId,\n\t\t}});\n\t}\n\n\thandleImDialogMessagesGetSuccess(data)\n\t{\n\t\tif (data.messages && data.messages.length > 0 && !this.widget.isDialogStart())\n\t\t{\n\t\t\tthis.store.commit('widget/common', {\n\t\t\t\tdialogStart:true\n\t\t\t});\n\t\t}\n\t}\n\n\thandleImMessageAddSuccess(messageId, message)\n\t{\n\t\tthis.widget.messagesQueue = this.widget.messagesQueue.filter(el => el.id != message.id);\n\n\t\tthis.widget.sendEvent({\n\t\t\ttype: SubscriptionType.userMessage,\n\t\t\tdata: {\n\t\t\t\tid: messageId,\n\t\t\t\ttext: message.text\n\t\t\t}\n\t\t});\n\t}\n\n\thandleImMessageAddError(error, message)\n\t{\n\t\tthis.widget.messagesQueue = this.widget.messagesQueue.filter(el => el.id != message.id);\n\t}\n\n\thandleImDiskFileCommitSuccess(result, message)\n\t{\n\t\tthis.widget.messagesQueue = this.widget.messagesQueue.filter(el => el.id != message.id);\n\n\t\tthis.widget.sendEvent({\n\t\t\ttype: SubscriptionType.userFile,\n\t\t\tdata: {}\n\t\t});\n\t}\n}\n\nexport {WidgetRestAnswerHandler};","/**\n * Bitrix OpenLines widget\n * Widget pull commands (Pull Command Handler)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {SubscriptionType, VoteType} from \"./const\";\n\nclass WidgetImPullCommandHandler\n{\n\tstatic create(params = {})\n\t{\n\t\treturn new this(params);\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'im';\n\t}\n\n\tconstructor(params)\n\t{\n\t\tthis.controller = params.controller;\n\t\tthis.store = params.store;\n\t\tthis.widget = params.widget;\n\t}\n\n\thandleMessageChat(params, extra, command)\n\t{\n\t\tif (params.message.senderId != this.controller.getUserId())\n\t\t{\n\t\t\tthis.widget.sendEvent({\n\t\t\t\ttype: SubscriptionType.operatorMessage,\n\t\t\t\tdata: params\n\t\t\t});\n\n\t\t\tif (!this.store.state.widget.common.showed && !this.widget.onceShowed)\n\t\t\t{\n\t\t\t\tthis.widget.onceShowed = true;\n\t\t\t\tthis.widget.open();\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass WidgetImopenlinesPullCommandHandler\n{\n\tstatic create(params = {})\n\t{\n\t\treturn new this(params);\n\t}\n\n\tconstructor(params = {})\n\t{\n\t\tthis.controller = params.controller;\n\t\tthis.store = params.store;\n\t\tthis.widget = params.widget;\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'imopenlines';\n\t}\n\n\thandleSessionStart(params, extra, command)\n\t{\n\t\tthis.store.commit('widget/dialog', {\n\t\t\tsessionId: params.sessionId,\n\t\t\tsessionClose: false,\n\t\t\tsessionStatus: 0,\n\t\t\tuserVote: VoteType.none,\n\t\t});\n\n\t\tthis.widget.sendEvent({\n\t\t\ttype: SubscriptionType.sessionStart,\n\t\t\tdata: {\n\t\t\t\tsessionId: params.sessionId\n\t\t\t}\n\t\t});\n\t}\n\n\thandleSessionOperatorChange(params, extra, command)\n\t{\n\t\tthis.store.commit('widget/dialog', {\n\t\t\toperator: params.operator,\n\t\t\toperatorChatId: params.operatorChatId\n\t\t});\n\n\t\tthis.widget.sendEvent({\n\t\t\ttype: SubscriptionType.sessionOperatorChange,\n\t\t\tdata: {\n\t\t\t\toperator: params.operator\n\t\t\t}\n\t\t});\n\t}\n\n\thandleSessionStatus(params, extra, command)\n\t{\n\t\tthis.store.commit('widget/dialog', {\n\t\t\tsessionId: params.sessionId,\n\t\t\tsessionStatus: params.sessionStatus,\n\t\t\tsessionClose: params.sessionClose,\n\t\t});\n\n\t\tthis.widget.sendEvent({\n\t\t\ttype: SubscriptionType.sessionStatus,\n\t\t\tdata: {\n\t\t\t\tsessionId: params.sessionId,\n\t\t\t\tsessionStatus: params.sessionStatus\n\t\t\t}\n\t\t});\n\n\t\tif (params.sessionClose)\n\t\t{\n\t\t\tthis.widget.sendEvent({\n\t\t\t\ttype: SubscriptionType.sessionFinish,\n\t\t\t\tdata: {\n\t\t\t\t\tsessionId: params.sessionId,\n\t\t\t\t\tsessionStatus: params.sessionStatus\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!params.spam)\n\t\t\t{\n\t\t\t\tthis.store.commit('widget/dialog', {\n\t\t\t\t\toperator: {\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tfirstName: '',\n\t\t\t\t\t\tlastName: '',\n\t\t\t\t\t\tworkPosition: '',\n\t\t\t\t\t\tavatar: '',\n\t\t\t\t\t\tonline: false,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport {\n\tWidgetImPullCommandHandler,\n\tWidgetImopenlinesPullCommandHandler,\n};","/**\n * Bitrix OpenLines widget\n * Widget private interface (base class)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\n// widget files\nimport {\n\tVoteType,\n\tLocationStyle,\n\tSubscriptionType,\n\tSubscriptionTypeCheck,\n\tRestMethod,\n\tRestAuth,\n} from \"./const\";\n\nimport {WidgetModel} from \"./model\";\nimport {WidgetRestClient} from \"./utils/restclient\"\nimport {WidgetRestAnswerHandler} from \"./rest.handler\";\nimport {WidgetImPullCommandHandler, WidgetImopenlinesPullCommandHandler} from \"./pull.handler\";\n\n// main\nimport {md5} from \"main.md5\";\nimport \"main.date\";\n\n// pull\nimport {PullClient} from \"pull.client\";\n\n// ui\nimport {Vue} from \"ui.vue\";\nimport {VuexBuilder} from \"ui.vue.vuex\";\nimport {Cookie} from \"./utils/cookie\";\n\n// messenger files\nimport {ApplicationModel, MessagesModel, DialoguesModel, UsersModel, FilesModel} from 'im.model';\nimport {ApplicationController} from 'im.controller';\nimport {\n\tDeviceType,\n\tDeviceOrientation,\n\tRestMethod as ImRestMethod,\n\tRestMethodHandler as ImRestMethodHandler,\n\tEventType,\n\tFileStatus\n} from 'im.const';\nimport {Utils} from \"im.utils\";\nimport {LocalStorage} from \"im.tools.localstorage\";\nimport {ImRestAnswerHandler} from \"im.provider.rest\";\nimport {ImPullCommandHandler} from \"im.provider.pull\";\nimport {Logger} from \"im.tools.logger\";\n\n// TODO change BX.Promise, BX.Main.Date to IMPORT\n\nexport class Widget\n{\n/* region 01. Initialize and store data */\n\n\tconstructor(params = {})\n\t{\n\t\tthis.ready = true;\n\t\tthis.widgetDataRequested = false;\n\n\t\tthis.offline = false;\n\n\t\tthis.code = params.code || '';\n\t\tthis.host = params.host || '';\n\t\tthis.language = params.language || 'en';\n\t\tthis.copyright = params.copyright !== false;\n\t\tthis.copyrightUrl = this.copyright && params.copyrightUrl? params.copyrightUrl: '';\n\t\tthis.buttonInstance = typeof params.buttonInstance === 'object' && params.buttonInstance !== null? params.buttonInstance: null;\n\n\t\tthis.pageMode = typeof params.pageMode === 'object' && params.pageMode;\n\t\tif (this.pageMode)\n\t\t{\n\t\t\tthis.pageMode.useBitrixLocalize = params.pageMode.useBitrixLocalize === true;\n\t\t\tthis.pageMode.placeholder = document.getElementById(params.pageMode.placeholder);\n\t\t}\n\n\t\tif (typeof this.code === 'string')\n\t\t{\n\t\t\tif (this.code.length <= 0)\n\t\t\t{\n\t\t\t\tconsole.warn(`%cLiveChatWidget.constructor: code is not correct (%c${this.code}%c)`, \"color: black;\", \"font-weight: bold; color: red\", \"color: black\");\n\t\t\t\tthis.ready = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof this.host === 'string')\n\t\t{\n\t\t\tif (this.host.length <= 0 || !this.host.startsWith('http'))\n\t\t\t{\n\t\t\t\tconsole.warn(`%cLiveChatWidget.constructor: host is not correct (%c${this.host}%c)`, \"color: black;\", \"font-weight: bold; color: red\", \"color: black\");\n\t\t\t\tthis.ready = false;\n\t\t\t}\n\t\t}\n\n\t\tthis.inited = false;\n\t\tthis.initEventFired = false;\n\n\t\tthis.restClient = null;\n\n\t\tthis.userRegisterData = {};\n\t\tthis.customData = [];\n\n\t\tthis.localize = this.pageMode && this.pageMode.useBitrixLocalize? window.BX.message: {};\n\t\tif (typeof params.localize === 'object')\n\t\t{\n\t\t\tthis.addLocalize(params.localize);\n\t\t}\n\n\t\tthis.subscribers = {};\n\t\tthis.dateFormat = null;\n\n\t\tthis.messagesQueue = [];\n\n\t\tthis.configRequestXhr = null;\n\n\t\tif (this.pageMode && this.pageMode.placeholder)\n\t\t{\n\t\t\tthis.rootNode = this.pageMode.placeholder;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.rootNode = document.createElement('div');\n\t\t\tif (document.body.firstChild)\n\t\t\t{\n\t\t\t\tdocument.body.insertBefore(this.rootNode, document.body.firstChild);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdocument.body.appendChild(this.rootNode);\n\t\t\t}\n\t\t}\n\n\t\tthis.template = null;\n\n\t\twindow.addEventListener('orientationchange', () =>\n\t\t{\n\t\t\tif (!this.store)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.store.commit('application/set', {device: {\n\t\t\t\torientation: Utils.device.getOrientation()\n\t\t\t}});\n\n\t\t\tif (\n\t\t\t\tthis.store.state.widget.common.showed\n\t\t\t\t&& this.store.state.application.device.type === DeviceType.mobile\n\t\t\t\t&& this.store.state.application.device.orientation === DeviceOrientation.horizontal\n\t\t\t)\n\t\t\t{\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t});\n\n\t\tlet serverVariables = LocalStorage.get(this.getSiteId(), 0, 'serverVariables', false);\n\t\tif (serverVariables)\n\t\t{\n\t\t\tthis.addLocalize(serverVariables);\n\t\t}\n\n\t\tlet widgetVariables = {\n\t\t\tcommon: {\n\t\t\t\thost: this.getHost(),\n\t\t\t\tpageMode: this.pageMode !== false,\n\t\t\t\tcopyright: this.copyright,\n\t\t\t\tcopyrightUrl: this.copyrightUrl,\n\t\t\t},\n\t\t\tvote: {\n\t\t\t\tmessageText: this.getLocalize('BX_LIVECHAT_VOTE_TITLE'),\n\t\t\t\tmessageLike: this.getLocalize('BX_LIVECHAT_VOTE_PLUS_TITLE'),\n\t\t\t\tmessageDislike: this.getLocalize('BX_LIVECHAT_VOTE_MINUS_TITLE'),\n\t\t\t},\n\t\t\ttextMessages: {\n\t\t\t\tbxLivechatOnlineLine1: this.getLocalize('BX_LIVECHAT_ONLINE_LINE_1'),\n\t\t\t\tbxLivechatOnlineLine2: this.getLocalize('BX_LIVECHAT_ONLINE_LINE_2'),\n\t\t\t\tbxLivechatOffline: this.getLocalize('BX_LIVECHAT_OFFLINE'),\n\t\t\t}\n\t\t};\n\t\tif (\n\t\t\tUtils.types.isPlainObject(params.styles)\n\t\t\t&& (params.styles.backgroundColor || params.styles.iconColor)\n\t\t)\n\t\t{\n\t\t\twidgetVariables.styles = {};\n\t\t\tif (params.styles.backgroundColor)\n\t\t\t{\n\t\t\t\twidgetVariables.styles.backgroundColor = params.styles.backgroundColor;\n\t\t\t}\n\t\t\tif (params.styles.iconColor)\n\t\t\t{\n\t\t\t\twidgetVariables.styles.iconColor = params.styles.iconColor;\n\t\t\t}\n\t\t}\n\n\t\tthis.controller = new ApplicationController();\n\n\t\tlet applicationVariables = {\n\t\t\tcommon: {\n\t\t\t\thost: this.getHost(),\n\t\t\t\tsiteId: this.getSiteId(),\n\t\t\t\tlanguageId: this.language,\n\t\t\t},\n\t\t\tdevice: {\n\t\t\t\ttype: Utils.device.isMobile()? DeviceType.mobile: DeviceType.desktop,\n\t\t\t\torientation: Utils.device.getOrientation(),\n\t\t\t},\n\t\t\tdialog: {\n\t\t\t\tmessageLimit: this.controller.getDefaultMessageLimit()\n\t\t\t},\n\t\t\tsaveException: {\n\t\t\t\tcommon: {\n\t\t\t\t\thost: null,\n\t\t\t\t\tsiteId: null,\n\t\t\t\t\tlanguageId: null,\n\t\t\t\t},\n\t\t\t\tdialog: {\n\t\t\t\t\tmessageLimit: null,\n\t\t\t\t\tmessageExtraCount: null,\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet cacheDialogues = !Utils.browser.isIe();\n\n\t\tnew VuexBuilder()\n\t\t\t.addModel(WidgetModel.create().setVariables(widgetVariables))\n\t\t\t.addModel(ApplicationModel.create().setVariables(applicationVariables))\n\t\t\t.addModel(DialoguesModel.create().useDatabase(cacheDialogues).setVariables({host: this.host}))\n\t\t\t.addModel(MessagesModel.create().useDatabase(cacheDialogues).setVariables({host: this.host}))\n\t\t\t.addModel(FilesModel.create().useDatabase(cacheDialogues).setVariables({host: this.host, default: {name: this.getLocalize('IM_MESSENGER_MESSAGE_FILE_DELETED')}}))\n\t\t\t.addModel(UsersModel.create().useDatabase(cacheDialogues).setVariables({host: this.host, default: {name: this.getLocalize('IM_MESSENGER_MESSAGE_USER_ANONYM')}}))\n\t\t\t.setDatabaseConfig({\n\t\t\t\tname: 'imol/widget',\n\t\t\t\ttype: VuexBuilder.DatabaseType.localStorage,\n\t\t\t\tsiteId: this.getSiteId(),\n\t\t\t})\n\t\t.build(result => {\n\n\t\t\tthis.store = result.store;\n\t\t\tthis.storeCollector = result.builder;\n\n\t\t\tif (params.location && typeof LocationStyle[params.location] !== 'undefined')\n\t\t\t{\n\t\t\t\tthis.store.commit('widget/common', {location: params.location});\n\t\t\t}\n\n\t\t\tthis.initRestClient();\n\n\t\t\tthis.controller.setStore(this.store);\n\t\t\tthis.controller.setRestClient(this.restClient);\n\n\t\t\tthis.controller.setPrepareFilesBeforeSaveFunction(this.prepareFileData.bind(this));\n\n\t\t\tthis.imRestAnswer = ImRestAnswerHandler.create({\n\t\t\t\tstore: this.store,\n\t\t\t\tcontroller: this.controller,\n\t\t\t});\n\t\t\tthis.widgetRestAnswer = WidgetRestAnswerHandler.create({\n\t\t\t\twidget: this,\n\t\t\t\tstore: this.store,\n\t\t\t\tcontroller: this.controller,\n\t\t\t});\n\n\t\t\twindow.dispatchEvent(new CustomEvent('onBitrixLiveChat', {detail: {\n\t\t\t\twidget: this,\n\t\t\t\twidgetCode: this.code,\n\t\t\t\twidgetHost: this.host,\n\t\t\t}}));\n\n\t\t\tif (this.callStartFlag)\n\t\t\t{\n\t\t\t\tthis.start();\n\t\t\t}\n\n\t\t\tif (this.pageMode || this.callOpenFlag)\n\t\t\t{\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t});\n\t}\n\n\tinitRestClient()\n\t{\n\t\tthis.restClient = new WidgetRestClient({endpoint: this.host+'/rest'});\n\n\t\tif (this.isUserRegistered())\n\t\t{\n\t\t\tthis.restClient.setAuthId(this.getUserHash());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.restClient.setAuthId(RestAuth.guest);\n\t\t}\n\t}\n\n\trequestWidgetData()\n\t{\n\t\tif (!this.isReady())\n\t\t{\n\t\t\tconsole.error('LiveChatWidget.start: widget code or host is not specified');\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.widgetDataRequested = true;\n\t\tif (\n\t\t\t!this.isUserRegistered() && (\n\t\t\t\tthis.userRegisterData.hash\n\t\t\t\t|| this.getUserHashCookie()\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tthis.requestData();\n\t\t\tthis.inited = true;\n\t\t\tthis.fireInitEvent();\n\t\t}\n\t\telse if (this.isConfigDataLoaded() && this.isUserRegistered())\n\t\t{\n\t\t\tthis.requestData();\n\t\t\tthis.inited = true;\n\t\t\tthis.fireInitEvent();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.restClient.callMethod(RestMethod.widgetConfigGet, {code: this.code}, (xhr) => {this.configRequestXhr = xhr}).then((result) => {\n\t\t\t\tthis.configRequestXhr = null;\n\t\t\t\tthis.clearError();\n\n\t\t\t\tthis.executeRestAnswer(RestMethod.widgetConfigGet, result);\n\n\t\t\t\tif (!this.inited)\n\t\t\t\t{\n\t\t\t\t\tthis.inited = true;\n\t\t\t\t\tthis.fireInitEvent();\n\t\t\t\t}\n\t\t\t}).catch(result => {\n\t\t\t\tthis.configRequestXhr = null;\n\n\t\t\t\tthis.setError(result.error().ex.error, result.error().ex.error_description);\n\t\t\t});\n\n\t\t\tif (this.isConfigDataLoaded())\n\t\t\t{\n\t\t\t\tthis.inited = true;\n\t\t\t\tthis.fireInitEvent();\n\t\t\t}\n\t\t}\n\t}\n\n\trequestData()\n\t{\n\t\tif (this.requestDataSend)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.requestDataSend = true;\n\n\t\tif (this.configRequestXhr)\n\t\t{\n\t\t\tthis.configRequestXhr.abort();\n\t\t}\n\n\t\tlet query = {\n\t\t\t[RestMethod.widgetConfigGet]: [RestMethod.widgetConfigGet, {code: this.code}]\n\t\t};\n\n\t\tif (this.isUserRegistered())\n\t\t{\n\t\t\tquery[RestMethod.widgetDialogGet] = [RestMethod.widgetDialogGet, {config_id: this.getConfigId(), trace_data: this.getCrmTraceData(), custom_data: this.getCustomData()}];\n\t\t\tquery[ImRestMethodHandler.imChatGet] = [ImRestMethod.imChatGet, {dialog_id: '$result['+RestMethod.widgetDialogGet+'][dialogId]'}];\n\t\t\tquery[ImRestMethodHandler.imDialogMessagesGetInit] = [ImRestMethod.imDialogMessagesGet, {chat_id: '$result['+RestMethod.widgetDialogGet+'][chatId]', limit: this.controller.getRequestMessageLimit(), convert_text: 'Y'}];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tquery[RestMethod.widgetUserRegister] = [RestMethod.widgetUserRegister, {config_id: '$result['+RestMethod.widgetConfigGet+'][configId]', ...this.getUserRegisterFields()}];\n\t\t\tquery[ImRestMethodHandler.imChatGet] = [ImRestMethod.imChatGet, {dialog_id: '$result['+RestMethod.widgetUserRegister+'][dialogId]'}];\n\n\t\t\tif (this.userRegisterData.hash || this.getUserHashCookie())\n\t\t\t{\n\t\t\t\tquery[RestMethod.widgetDialogGet] = [RestMethod.widgetDialogGet, {config_id: '$result['+RestMethod.widgetConfigGet+'][configId]', trace_data: this.getCrmTraceData(), custom_data: this.getCustomData()}];\n\t\t\t\tquery[ImRestMethodHandler.imDialogMessagesGetInit] = [ImRestMethod.imDialogMessagesGet, {chat_id: '$result['+RestMethod.widgetDialogGet+'][chatId]', limit: this.controller.getRequestMessageLimit(), convert_text: 'Y'}];\n\t\t\t}\n\t\t\tif (this.isUserAgreeConsent())\n\t\t\t{\n\t\t\t\tquery[RestMethod.widgetUserConsentApply] = [RestMethod.widgetUserConsentApply, {config_id: '$result['+RestMethod.widgetConfigGet+'][configId]', consent_url: location.href}];\n\t\t\t}\n\t\t}\n\n\t\tquery[RestMethod.pullServerTime] = [RestMethod.pullServerTime, {}];\n\t\tquery[RestMethod.pullConfigGet] = [RestMethod.pullConfigGet, {'CACHE': 'N'}];\n\t\tquery[RestMethod.widgetUserGet] = [RestMethod.widgetUserGet, {}];\n\n\t\tthis.restClient.callBatch(query, (response) =>\n\t\t{\n\t\t\tif (!response)\n\t\t\t{\n\t\t\t\tthis.requestDataSend = false;\n\t\t\t\tthis.setError('EMPTY_RESPONSE', 'Server returned an empty response.');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet configGet = response[RestMethod.widgetConfigGet];\n\t\t\tif (configGet && configGet.error())\n\t\t\t{\n\t\t\t\tthis.requestDataSend = false;\n\n\t\t\t\tthis.setError(configGet.error().ex.error, configGet.error().ex.error_description);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.executeRestAnswer(RestMethod.widgetConfigGet, configGet);\n\n\t\t\tlet userGetResult = response[RestMethod.widgetUserGet];\n\t\t\tif (userGetResult.error())\n\t\t\t{\n\t\t\t\tthis.requestDataSend = false;\n\t\t\t\tthis.setError(userGetResult.error().ex.error, userGetResult.error().ex.error_description);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.executeRestAnswer(RestMethod.widgetUserGet, userGetResult);\n\n\t\t\tlet chatGetResult = response[ImRestMethodHandler.imChatGet];\n\t\t\tif (chatGetResult.error())\n\t\t\t{\n\t\t\t\tthis.requestDataSend = false;\n\t\t\t\tthis.setError(chatGetResult.error().ex.error, chatGetResult.error().ex.error_description);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imChatGet, chatGetResult);\n\n\t\t\tlet dialogGetResult = response[RestMethod.widgetDialogGet];\n\t\t\tif (dialogGetResult)\n\t\t\t{\n\t\t\t\tif (dialogGetResult.error())\n\t\t\t\t{\n\t\t\t\t\tthis.requestDataSend = false;\n\t\t\t\t\tthis.setError(dialogGetResult.error().ex.error, dialogGetResult.error().ex.error_description);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.executeRestAnswer(RestMethod.widgetDialogGet, dialogGetResult);\n\t\t\t}\n\n\t\t\tlet dialogMessagesGetResult = response[ImRestMethodHandler.imDialogMessagesGetInit];\n\t\t\tif (dialogMessagesGetResult)\n\t\t\t{\n\t\t\t\tif (dialogMessagesGetResult.error())\n\t\t\t\t{\n\t\t\t\t\tthis.requestDataSend = false;\n\t\t\t\t\tthis.setError(dialogMessagesGetResult.error().ex.error, dialogMessagesGetResult.error().ex.error_description);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.store.dispatch('dialogues/saveDialog', {\n\t\t\t\t\tdialogId: this.controller.getDialogId(),\n\t\t\t\t\tchatId: this.controller.getChatId(),\n\t\t\t\t});\n\n\t\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imDialogMessagesGetInit, dialogMessagesGetResult);\n\t\t\t}\n\n\t\t\tlet userRegisterResult = response[RestMethod.widgetUserRegister];\n\t\t\tif (userRegisterResult)\n\t\t\t{\n\t\t\t\tif (userRegisterResult.error())\n\t\t\t\t{\n\t\t\t\t\tthis.requestDataSend = false;\n\t\t\t\t\tthis.setError(userRegisterResult.error().ex.error, userRegisterResult.error().ex.error_description);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.executeRestAnswer(RestMethod.widgetUserRegister, userRegisterResult);\n\t\t\t}\n\n\t\t\tlet timeShift = 0;\n\n\t\t\tlet serverTimeResult = response[RestMethod.pullServerTime];\n\t\t\tif (serverTimeResult && !serverTimeResult.error())\n\t\t\t{\n\t\t\t\ttimeShift = Math.floor(((new Date()).getTime() - new Date(serverTimeResult.data()).getTime())/1000);\n\t\t\t}\n\n\t\t\tlet config = null;\n\t\t\tlet pullConfigResult = response[RestMethod.pullConfigGet];\n\t\t\tif (pullConfigResult && !pullConfigResult.error())\n\t\t\t{\n\t\t\t\tconfig = pullConfigResult.data();\n\t\t\t\tconfig.server.timeShift = timeShift;\n\t\t\t}\n\n\t\t\tthis.startPullClient(config).then(() => {\n\t\t\t\tthis.processSendMessages();\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.setError(error.ex.error, error.ex.error_description);\n\t\t\t});\n\n\t\t\tthis.requestDataSend = false;\n\t\t}, false, false, Utils.getLogTrackingParams({name: 'widget.init.config', dialog: this.controller.getDialogData()}));\n\t}\n\n\texecuteRestAnswer(command, result, extra)\n\t{\n\t\tthis.imRestAnswer.execute(command, result, extra);\n\t\tthis.widgetRestAnswer.execute(command, result, extra);\n\t}\n\n\tprepareFileData(files)\n\t{\n\t\tif (Cookie.get(null, 'BITRIX_LIVECHAT_AUTH'))\n\t\t{\n\t\t\treturn files;\n\t\t}\n\n\t\tif (!Utils.types.isArray(files))\n\t\t{\n\t\t\treturn files;\n\t\t}\n\n\t\treturn files.map(file =>\n\t\t{\n\t\t\tlet hash = (window.md5 || md5)(this.getUserId()+'|'+file.id+'|'+this.getUserHash());\n\t\t\tlet urlParam = 'livechat_auth_id='+hash+'&livechat_user_id='+this.getUserId();\n\t\t\tif (file.urlPreview)\n\t\t\t{\n\t\t\t\tfile.urlPreview = file.urlPreview+'&'+urlParam;\n\t\t\t}\n\t\t\tif (file.urlShow)\n\t\t\t{\n\t\t\t\tfile.urlShow = file.urlShow+'&'+urlParam;\n\t\t\t}\n\t\t\tif (file.urlDownload)\n\t\t\t{\n\t\t\t\tfile.urlDownload = file.urlDownload+'&'+urlParam;\n\t\t\t}\n\n\t\t\treturn file;\n\t\t});\n\t}\n\n\tcheckBrowserVersion()\n\t{\n\t\tif (Utils.platform.isIos())\n\t\t{\n\t\t\tlet version = Utils.platform.getIosVersion();\n\t\t\tif (version && version <= 10)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n/* endregion 01. Initialize and store data */\n\n/* region 02. Push & Pull */\n\n\tstartPullClient(config)\n\t{\n\t\tlet promise = new BX.Promise();\n\n\t\tif (this.pullClient)\n\t\t{\n\t\t\tif (!this.pullClient.isConnected())\n\t\t\t{\n\t\t\t\tthis.pullClient.scheduleReconnect();\n\t\t\t}\n\t\t\tpromise.resolve(true);\n\t\t\treturn promise;\n\t\t}\n\t\tif (!this.getUserId() || !this.getSiteId() || !this.restClient)\n\t\t{\n\t\t\tpromise.reject({\n\t\t\t\tex: { error: 'WIDGET_NOT_LOADED', error_description: 'Widget is not loaded.'}\n\t\t\t});\n\t\t\treturn promise;\n\t\t}\n\n\t\tthis.pullClient = new PullClient({\n\t\t\tserverEnabled: true,\n\t\t\tuserId: this.getUserId(),\n\t\t\tsiteId: this.getSiteId(),\n\t\t\trestClient: this.restClient,\n\t\t\tconfigTimestamp: config? config.server.config_timestamp: 0,\n\t\t\tskipCheckRevision: true,\n\t\t\tgetPublicListMethod: 'imopenlines.widget.operator.get',\n\t\t});\n\n\t\tthis.pullClient.subscribe(\n\t\t\tnew ImPullCommandHandler({\n\t\t\t\tstore: this.store,\n\t\t\t\tcontroller: this.controller,\n\t\t\t})\n\t\t);\n\t\tthis.pullClient.subscribe(\n\t\t\tnew WidgetImPullCommandHandler({\n\t\t\t\tstore: this.store,\n\t\t\t\tcontroller: this.controller,\n\t\t\t\twidget: this,\n\t\t\t})\n\t\t);\n\t\tthis.pullClient.subscribe(\n\t\t\tnew WidgetImopenlinesPullCommandHandler({\n\t\t\t\tstore: this.store,\n\t\t\t\tcontroller: this.controller,\n\t\t\t\twidget: this,\n\t\t\t})\n\t\t);\n\n\t\tthis.pullClient.subscribe({\n\t\t\ttype: PullClient.SubscriptionType.Status,\n\t\t\tcallback: this.eventStatusInteraction.bind(this)\n\t\t});\n\n\t\tthis.pullConnectedFirstTime = this.pullClient.subscribe({\n\t\t\ttype: PullClient.SubscriptionType.Status,\n\t\t\tcallback: (result) => {\n\t\t\t\tif (result.status === PullClient.PullStatus.Online)\n\t\t\t\t{\n\t\t\t\t\tpromise.resolve(true);\n\t\t\t\t\tthis.pullConnectedFirstTime();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (this.template)\n\t\t{\n\t\t\tthis.template.$root.$bitrixPullClient = this.pullClient;\n\t\t\tthis.template.$root.$emit('onBitrixPullClientInited', this.pullClient);\n\t\t}\n\n\t\tthis.pullClient.start({\n\t\t\t...config,\n\t\t\tskipReconnectToLastSession: true\n\t\t}).catch(function(){\n\t\t\tpromise.reject({\n\t\t\t\tex: { error: 'PULL_CONNECTION_ERROR', error_description: 'Pull is not connected.'}\n\t\t\t});\n\t\t});\n\n\t\treturn promise;\n\t}\n\n\tstopPullClient()\n\t{\n\t\tif (this.pullClient)\n\t\t{\n\t\t\tthis.pullClient.stop(PullClient.CloseReasons.MANUAL, 'Closed manually');\n\t\t}\n\t}\n\n\trecoverPullConnection()\n\t{\n\t\t// this.pullClient.session.mid = 0; // TODO specially for disable pull history, remove after recode im\n\t\tthis.pullClient.restart(PullClient.CloseReasons.MANUAL, 'Restart after click by connection status button.');\n\t}\n\n\teventStatusInteraction(data)\n\t{\n\t\tif (data.status === PullClient.PullStatus.Online)\n\t\t{\n\t\t\tthis.offline = false;\n\n\t\t\tif (this.pullRequestMessage)\n\t\t\t{\n\t\t\t\tthis.getDialogUnread().then(() => {\n\t\t\t\t\tthis.processSendMessages();\n\t\t\t\t});\n\t\t\t\tthis.pullRequestMessage = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.readMessage();\n\t\t\t\tthis.processSendMessages();\n\t\t\t}\n\t\t}\n\t\telse if (data.status === PullClient.PullStatus.Offline)\n\t\t{\n\t\t\tthis.pullRequestMessage = true;\n\t\t\tthis.offline = true;\n\t\t}\n\t}\n\n/* endregion 02. Push & Pull */\n\n/* region 03. Template engine */\n\n\tattachTemplate()\n\t{\n\t\tif (this.template)\n\t\t{\n\t\t\tthis.store.commit('widget/common', {showed: true});\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.rootNode.innerHTML = '';\n\t\tthis.rootNode.appendChild(document.createElement('div'));\n\n\t\tconst widgetContext = this;\n\t\tconst controller = this.controller;\n\t\tconst restClient = this.restClient;\n\t\tconst pullClient = this.pullClient || null;\n\n\t\tthis.template = Vue.create({\n\t\t\tel: this.rootNode.firstChild,\n\t\t\tstore: this.store,\n\t\t\ttemplate: '<bx-livechat/>',\n\t\t\tbeforeCreate()\n\t\t\t{\n\t\t\t\tthis.$bitrixWidget = widgetContext;\n\t\t\t\tthis.$bitrixController = controller;\n\t\t\t\tthis.$bitrixRestClient = restClient;\n\t\t\t\tthis.$bitrixPullClient = pullClient;\n\t\t\t\tthis.$bitrixMessages = widgetContext.localize;\n\n\t\t\t\twidgetContext.sendEvent({\n\t\t\t\t\ttype: SubscriptionType.widgetOpen,\n\t\t\t\t\tdata: {}\n\t\t\t\t});\n\t\t\t},\n\t\t\tdestroyed()\n\t\t\t{\n\t\t\t\twidgetContext.sendEvent({\n\t\t\t\t\ttype: SubscriptionType.widgetClose,\n\t\t\t\t\tdata: {}\n\t\t\t\t});\n\n\t\t\t\tthis.$bitrixWidget.template = null;\n\t\t\t\tthis.$bitrixWidget.templateAttached = false;\n\t\t\t\tthis.$bitrixWidget.rootNode.innerHTML = '';\n\n\t\t\t\tthis.$bitrixWidget = null;\n\t\t\t\tthis.$bitrixRestClient = null;\n\t\t\t\tthis.$bitrixPullClient = null;\n\t\t\t\tthis.$bitrixMessages = null;\n\t\t\t}\n\t\t});\n\n\t\tthis.controller.setTemplateEngine(this.template);\n\n\t\treturn true;\n\t}\n\n\tdetachTemplate()\n\t{\n\t\tif (!this.template)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.template.$destroy();\n\n\t\treturn true;\n\t}\n\n\tmutateTemplateComponent(id, params)\n\t{\n\t\treturn Vue.mutateComponent(id, params);\n\t}\n\n/* endregion 03. Template engine */\n\n/* region 04. Rest methods */\n\n\taddMessage(text = '', file = null)\n\t{\n\t\tif (!text && !file)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tLogger.warn('addMessage', text, file);\n\n\t\tif (!this.controller.isUnreadMessagesLoaded())\n\t\t{\n\t\t\tthis.sendMessage({id: 0, text, file});\n\t\t\tthis.processSendMessages();\n\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.store.commit('application/increaseDialogExtraCount');\n\n\t\tlet params = {};\n\t\tif (file)\n\t\t{\n\t\t\tparams.FILE_ID = [file.id];\n\t\t}\n\n\t\tthis.store.dispatch('messages/add', {\n\t\t\tchatId: this.getChatId(),\n\t\t\tauthorId: this.getUserId(),\n\t\t\ttext: text,\n\t\t\tparams,\n\t\t\tsending: !file,\n\t\t}).then(messageId => {\n\n\t\t\tif (!this.isDialogStart())\n\t\t\t{\n\t\t\t\tthis.store.commit('widget/common', {dialogStart:true});\n\t\t\t}\n\n\t\t\tthis.messagesQueue.push({\n\t\t\t\tid: messageId,\n\t\t\t\ttext,\n\t\t\t\tfile,\n\t\t\t\tsending: false\n\t\t\t});\n\n\t\t\tif (this.getChatId())\n\t\t\t{\n\t\t\t\tthis.processSendMessages();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.requestData();\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tuploadFile(fileInput)\n\t{\n\t\tif (!fileInput)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tLogger.warn('addFile', fileInput.files[0].name, fileInput.files[0].size, fileInput.files[0]);\n\n\t\tlet file = fileInput.files[0];\n\n\t\tlet fileType = 'file';\n\t\tif (file.type.toString().startsWith('image'))\n\t\t{\n\t\t\tfileType = 'image';\n\t\t}\n\n\t\tif (!this.controller.isUnreadMessagesLoaded())\n\t\t{\n\t\t\tthis.addMessage('', {id: 0, source: fileInput});\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.store.dispatch('files/add', {\n\t\t\tchatId: this.getChatId(),\n\t\t\tauthorId: this.getUserId(),\n\t\t\tname: file.name,\n\t\t\ttype: fileType,\n\t\t\textension: file.name.split('.').splice(-1)[0],\n\t\t\tsize: file.size,\n\t\t\timage: false,\n\t\t\tstatus: FileStatus.upload,\n\t\t\tprogress: 0,\n\t\t\tauthorName: this.controller.getCurrentUser().name,\n\t\t\turlPreview: \"\",\n\t\t}).then(fileId => this.addMessage('', {id: fileId, source: fileInput}));\n\n\t\treturn true;\n\t}\n\n\tcancelUploadFile(fileId)\n\t{\n\t\tlet element = this.messagesQueue.find(element => element.file && element.file.id === fileId);\n\t\tif (element)\n\t\t{\n\t\t\tif (element.xhr)\n\t\t\t{\n\t\t\t\telement.xhr.abort();\n\t\t\t}\n\t\t\tthis.store.dispatch('messages/delete', {\n\t\t\t\tchatId: this.getChatId(),\n\t\t\t\tid: element.id,\n\t\t\t}).then(() => {\n\t\t\t\tthis.store.dispatch('files/delete', {\n\t\t\t\t\tchatId: this.getChatId(),\n\t\t\t\t\tid: element.file.id,\n\t\t\t\t});\n\t\t\t\tthis.messagesQueue = this.messagesQueue.filter(el => el.id !== element.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tprocessSendMessages()\n\t{\n\t\tif (this.offline)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.messagesQueue.filter(element => !element.sending).forEach(element => {\n\t\t\telement.sending = true;\n\t\t\tif (element.file)\n\t\t\t{\n\t\t\t\tthis.sendMessageWithFile(element);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.sendMessage(element);\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tsendMessage(message)\n\t{\n\t\tthis.controller.stopWriting();\n\n\t\tlet quiteId = this.store.getters['dialogues/getQuoteId'](this.getDialogId());\n\t\tif (quiteId)\n\t\t{\n\t\t\tlet quoteMessage = this.store.getters['messages/getMessage'](this.getChatId(), quiteId);\n\t\t\tif (quoteMessage)\n\t\t\t{\n\t\t\t\tlet user = this.store.getters['users/get'](quoteMessage.authorId);\n\n\t\t\t\tlet newMessage = [];\n\t\t\t\tnewMessage.push(\"------------------------------------------------------\");\n\t\t\t\tnewMessage.push((user.name? user.name: this.getLocalize('BX_LIVECHAT_SYSTEM_MESSAGE')));\n\t\t\t\tnewMessage.push(quoteMessage.text);\n\t\t\t\tnewMessage.push('------------------------------------------------------');\n\t\t\t\tnewMessage.push(message.text);\n\t\t\t\tmessage.text = newMessage.join(\"\\n\");\n\n\t\t\t\tthis.quoteMessageClear();\n\t\t\t}\n\t\t}\n\n\t\tmessage.chatId = this.getChatId();\n\n\t\tthis.restClient.callMethod(ImRestMethod.imMessageAdd, {\n\t\t\t'TEMPLATE_ID': message.id,\n\t\t\t'CHAT_ID': message.chatId,\n\t\t\t'MESSAGE': message.text\n\t\t}, null, null, Utils.getLogTrackingParams({\n\t\t\tname: ImRestMethod.imMessageAdd,\n\t\t\tdata: {timMessageType: 'text'},\n\t\t\tdialog: this.getDialogData()\n\t\t})).then(response => {\n\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imMessageAdd, response, message);\n\t\t}).catch(error => {\n\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imMessageAdd, error, message);\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tsendMessageWithFile(message)\n\t{\n\t\tthis.controller.stopWriting();\n\n\t\tlet fileType = this.store.getters['files/get'](this.getChatId(), message.file.id, true).type;\n\n\t\tlet diskFolderId = this.getDiskFolderId();\n\n\t\tlet query = {};\n\n\t\tif (diskFolderId)\n\t\t{\n\t\t\tquery[ImRestMethodHandler.imDiskFileUpload] = [ImRestMethod.imDiskFileUpload, {\n\t\t\t\tid : diskFolderId,\n\t\t\t\tdata : {NAME : message.file.source.files[0].name},\n\t\t\t\tfileContent: message.file.source,\n\t\t\t\tgenerateUniqueName: true\n\t\t\t}];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tquery[ImRestMethodHandler.imDiskFolderGet] = [ImRestMethod.imDiskFolderGet, {chat_id: this.getChatId()}];\n\t\t\tquery[ImRestMethodHandler.imDiskFileUpload] = [ImRestMethod.imDiskFileUpload, {\n\t\t\t\tid: '$result[' + ImRestMethodHandler.imDiskFolderGet + '][ID]',\n\t\t\t\tdata: {\n\t\t\t\t\tNAME: message.file.source.files[0].name\n\t\t\t\t},\n\t\t\t\tfileContent: message.file.source,\n\t\t\t\tgenerateUniqueName: true\n\t\t\t}];\n\t\t}\n\n\t\tthis.restClient.callBatch(query, (response) =>\n\t\t{\n\t\t\tif (!response)\n\t\t\t{\n\t\t\t\tthis.requestDataSend = false;\n\t\t\t\tconsole.warn('EMPTY_RESPONSE', 'Server returned an empty response. [1]');\n\t\t\t\tthis.fileError(this.getChatId, message.file.id, message.id);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!diskFolderId)\n\t\t\t{\n\t\t\t\tlet diskFolderGet = response[ImRestMethodHandler.imDiskFolderGet];\n\t\t\t\tif (diskFolderGet && diskFolderGet.error())\n\t\t\t\t{\n\t\t\t\t\tconsole.warn(diskFolderGet.error().ex.error, diskFolderGet.error().ex.error_description);\n\t\t\t\t\tthis.fileError(this.getChatId(), message.file.id, message.id);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imDiskFolderGet, diskFolderGet);\n\t\t\t}\n\n\t\t\tlet diskId = 0;\n\t\t\tlet diskFileUpload = response[ImRestMethodHandler.imDiskFileUpload];\n\t\t\tif (diskFileUpload)\n\t\t\t{\n\t\t\t\tlet result = diskFileUpload.data();\n\t\t\t\tif (diskFileUpload.error())\n\t\t\t\t{\n\t\t\t\t\tconsole.warn(diskFileUpload.error().ex.error, diskFileUpload.error().ex.error_description);\n\t\t\t\t\tthis.fileError(this.getChatId(), message.file.id, message.id);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse if (!result)\n\t\t\t\t{\n\t\t\t\t\tconsole.warn('EMPTY_RESPONSE', 'Server returned an empty response. [2]');\n\t\t\t\t\tthis.fileError(this.getChatId(), message.file.id, message.id);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tdiskId = result.ID;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.warn('EMPTY_RESPONSE', 'Server returned an empty response. [3]');\n\t\t\t\tthis.fileError(this.getChatId(), message.file.id, message.id);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tmessage.chatId = this.getChatId();\n\n\t\t\tthis.store.dispatch('files/update', {\n\t\t\t\tchatId: message.chatId,\n\t\t\t\tid: message.file.id,\n\t\t\t\tfields: {\n\t\t\t\t\tstatus: FileStatus.wait,\n\t\t\t\t\tprogress: 95\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.fileCommit({\n\t\t\t\tchatId: message.chatId,\n\t\t\t\tuploadId: diskId,\n\t\t\t\tmessageText: message.text,\n\t\t\t\tmessageId: message.id,\n\t\t\t\tfileId: message.file.id,\n\t\t\t\tfileType\n\t\t\t}, message);\n\n\t\t}, false, (xhr) => {message.xhr = xhr}, Utils.getLogTrackingParams({\n\t\t\tname: ImRestMethodHandler.imDiskFileCommit,\n\t\t\tdata: {timMessageType: fileType},\n\t\t\tdialog: this.getDialogData()\n\t\t}));\n\t}\n\n\tfileError(chatId, fileId, messageId = 0)\n\t{\n\t\tthis.store.dispatch('files/update', {\n\t\t\tchatId: chatId,\n\t\t\tid: fileId,\n\t\t\tfields: {\n\t\t\t\tstatus: FileStatus.error,\n\t\t\t\tprogress: 0\n\t\t\t}\n\t\t});\n\t\tif (messageId)\n\t\t{\n\t\t\tthis.store.dispatch('messages/actionError', {\n\t\t\t\tchatId: chatId,\n\t\t\t\tid: messageId,\n\t\t\t\tretry: false,\n\t\t\t});\n\t\t}\n\t}\n\n\tfileCommit(params, message)\n\t{\n\t\tthis.restClient.callMethod(ImRestMethod.imDiskFileCommit, {\n\t\t\tchat_id: params.chatId,\n\t\t\tupload_id: params.uploadId,\n\t\t\tmessage: params.messageText,\n\t\t\ttemplate_id: params.messageId,\n\t\t\tfile_template_id: params.fileId,\n\t\t}, null, null, Utils.getLogTrackingParams({\n\t\t\tname: ImRestMethod.imDiskFileCommit,\n\t\t\tdata: {timMessageType: params.fileType},\n\t\t\tdialog: this.getDialogData()\n\t\t})).then(response => {\n\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imDiskFileCommit, response, message);\n\t\t}).catch(error => {\n\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imDiskFileCommit, error, message);\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tgetDialogHistory(lastId, limit = this.controller.getRequestMessageLimit())\n\t{\n\t\tthis.restClient.callMethod(ImRestMethod.imDialogMessagesGet, {\n\t\t\t'CHAT_ID': this.getChatId(),\n\t\t\t'LAST_ID': lastId,\n\t\t\t'LIMIT': limit,\n\t\t\t'CONVERT_TEXT': 'Y'\n\t\t}).then(result => {\n\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imDialogMessagesGet, result);\n\t\t\tthis.template.$emit(EventType.dialog.requestHistoryResult, {count: result.data().messages.length});\n\t\t}).catch(result => {\n\t\t\tthis.template.$emit(EventType.dialog.requestHistoryResult, {error: result.error().ex});\n\t\t});\n\t}\n\n\tgetDialogUnread(lastId, limit = this.controller.getRequestMessageLimit())\n\t{\n\t\tconst promise = new BX.Promise();\n\n\t\tif (!lastId)\n\t\t{\n\t\t\tlastId = this.store.getters['messages/getLastId'](this.controller.getChatId());\n\t\t}\n\n\t\tif (!lastId)\n\t\t{\n\t\t\tthis.template.$emit(EventType.dialog.requestUnreadResult, {error: {error: 'LAST_ID_EMPTY', error_description: 'LastId is empty.'}});\n\t\t\tpromise.reject();\n\t\t\treturn promise;\n\t\t}\n\n\t\tthis.controller.readMessage(lastId, true, true).then(() =>\n\t\t{\n\t\t\tlet query = {\n\t\t\t\t[ImRestMethodHandler.imDialogRead]: [ImRestMethod.imDialogRead, {\n\t\t\t\t\tdialog_id: this.getDialogId(),\n\t\t\t\t\tmessage_id: lastId\n\t\t\t\t}],\n\t\t\t\t[ImRestMethodHandler.imChatGet]: [ImRestMethod.imChatGet, {\n\t\t\t\t\tdialog_id: this.getDialogId()\n\t\t\t\t}],\n\t\t\t\t[ImRestMethodHandler.imDialogMessagesGetUnread]: [ImRestMethod.imDialogMessagesGet, {\n\t\t\t\t\tchat_id: this.getChatId(),\n\t\t\t\t\tfirst_id: lastId,\n\t\t\t\t\tlimit: limit,\n\t\t\t\t\tconvert_text: 'Y'\n\t\t\t\t}]\n\t\t\t};\n\n\t\t\tthis.restClient.callBatch(query, (response) =>\n\t\t\t{\n\t\t\t\tif (!response)\n\t\t\t\t{\n\t\t\t\t\tthis.template.$emit(EventType.dialog.requestUnreadResult, {error: {error: 'EMPTY_RESPONSE', error_description: 'Server returned an empty response.'}});\n\n\t\t\t\t\tpromise.reject();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet chatGetResult = response[ImRestMethodHandler.imChatGet];\n\t\t\t\tif (!chatGetResult.error())\n\t\t\t\t{\n\t\t\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imChatGet, chatGetResult);\n\t\t\t\t}\n\n\t\t\t\tlet dialogMessageUnread = response[ImRestMethodHandler.imDialogMessagesGetUnread];\n\t\t\t\tif (dialogMessageUnread.error())\n\t\t\t\t{\n\t\t\t\t\tthis.template.$emit(EventType.dialog.requestUnreadResult, {error: dialogMessageUnread.error().ex});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.executeRestAnswer(ImRestMethodHandler.imDialogMessagesGetUnread, dialogMessageUnread);\n\t\t\t\t\tthis.template.$emit(EventType.dialog.requestUnreadResult, {\n\t\t\t\t\t\tfirstMessageId: dialogMessageUnread.data().messages.length > 0? dialogMessageUnread.data().messages[0].id: 0,\n\t\t\t\t\t\tcount: dialogMessageUnread.data().messages.length\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tpromise.fulfill(response);\n\n\t\t\t}, false, false, Utils.getLogTrackingParams({name: ImRestMethodHandler.imDialogMessagesGetUnread, dialog: this.getDialogData()}));\n\t\t});\n\n\t\treturn promise;\n\t}\n\n\tretrySendMessage(message)\n\t{\n\t\tif (this.messagesQueue.find(el => el.id === message.id))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.messagesQueue.push({\n\t\t\tid: message.id,\n\t\t\ttext: message.text,\n\t\t\tsending: false\n\t\t});\n\n\t\tthis.controller.setSendingMessageFlag(message.id);\n\n\t\tthis.processSendMessages();\n\t}\n\n\treadMessage(messageId)\n\t{\n\t\tif (this.offline)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.controller.readMessage(messageId);\n\t}\n\n\tquoteMessage(id)\n\t{\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: this.controller.getDialogId(),\n\t\t\tfields: {\n\t\t\t\tquoteId: id\n\t\t\t}\n\t\t});\n\t}\n\n\treactMessage(id, reaction)\n\t{\n\t\tthis.controller.reactMessage(id, reaction.type, reaction.action);\n\t}\n\n\texecMessageKeyboardCommand(data)\n\t{\n\t\tif (data.action !== 'COMMAND')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet {dialogId, messageId, botId, command, params} = data.params;\n\n\t\tthis.restClient.callMethod(ImRestMethod.imMessageCommand, {\n\t\t\t'MESSAGE_ID': messageId,\n\t\t\t'DIALOG_ID': dialogId,\n\t\t\t'BOT_ID': botId,\n\t\t\t'COMMAND': command,\n\t\t\t'COMMAND_PARAMS': params,\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tquoteMessageClear()\n\t{\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: this.controller.getDialogId(),\n\t\t\tfields: {\n\t\t\t\tquoteId: 0\n\t\t\t}\n\t\t});\n\t}\n\n\tsendDialogVote(result)\n\t{\n\t\tif (!this.getSessionId())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.restClient.callMethod(RestMethod.widgetVoteSend, {\n\t\t\t'SESSION_ID': this.getSessionId(),\n\t\t\t'ACTION': result\n\t\t}).catch((result) => {\n\t\t\tthis.store.commit('widget/dialog', {userVote: VoteType.none});\n\t\t});\n\n\t\tthis.sendEvent({\n\t\t\ttype: SubscriptionType.userVote,\n\t\t\tdata: {\n\t\t\t\tvote: result\n\t\t\t}\n\t\t});\n\t}\n\n\tsendForm(type, fields)\n\t{\n\t\tLogger.info('LiveChatWidgetPrivate.sendForm:', type, fields);\n\n\t\tlet query = {\n\t\t\t[RestMethod.widgetFormSend]: [RestMethod.widgetFormSend, {\n\t\t\t\t'CHAT_ID': this.getChatId(),\n\t\t\t\t'FORM': type.toUpperCase(),\n\t\t\t\t'FIELDS': fields\n\t\t\t}],\n\t\t\t[RestMethod.widgetUserGet]: [RestMethod.widgetUserGet, {}]\n\t\t};\n\t\tthis.restClient.callBatch(query, (response) =>\n\t\t{\n\t\t\tif (!response)\n\t\t\t{\n\t\t\t\tthis.requestDataSend = false;\n\t\t\t\tthis.setError('EMPTY_RESPONSE', 'Server returned an empty response.');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet userGetResult = response[RestMethod.widgetUserGet];\n\t\t\tif (userGetResult.error())\n\t\t\t{\n\t\t\t\tthis.requestDataSend = false;\n\t\t\t\tthis.setError(userGetResult.error().ex.error, userGetResult.error().ex.error_description);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.executeRestAnswer(RestMethod.widgetUserGet, userGetResult);\n\n\t\t\tthis.sendEvent({\n\t\t\t\ttype: SubscriptionType.userForm,\n\t\t\t\tdata: {\n\t\t\t\t\tform: type,\n\t\t\t\t\tfields: fields\n\t\t\t\t}\n\t\t\t});\n\n\t\t}, false, false, Utils.getLogTrackingParams({name: RestMethod.widgetUserGet, dialog: this.getDialogData()}));\n\n\t}\n\n\tsendConsentDecision(result)\n\t{\n\t\tresult = result === true;\n\n\t\tthis.store.commit('widget/dialog', {userConsent: result});\n\n\t\tif (result && this.isUserRegistered())\n\t\t{\n\t\t\tthis.restClient.callMethod(RestMethod.widgetUserConsentApply, {\n\t\t\t\tconfig_id: this.getConfigId(),\n\t\t\t\tconsent_url: location.href\n\t\t\t});\n\t\t}\n\t}\n\n/* endregion 05. Templates and template interaction */\n\n/* region 05. Widget interaction and utils */\n\n\tstart()\n\t{\n\t\tif (!this.store)\n\t\t{\n\t\t\tthis.callStartFlag = true;\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.isSessionActive())\n\t\t{\n\t\t\tthis.requestWidgetData();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\topen(params = {})\n\t{\n\t\tclearTimeout(this.openTimeout);\n\t\tif (!this.store)\n\t\t{\n\t\t\tthis.callOpenFlag = true;\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!params.openFromButton && this.buttonInstance)\n\t\t{\n\t\t\tthis.buttonInstance.wm.showById('openline_livechat');\n\t\t}\n\n\t\tif (!this.checkBrowserVersion())\n\t\t{\n\t\t\tthis.setError('OLD_BROWSER_LOCALIZED', this.localize.BX_LIVECHAT_OLD_BROWSER);\n\t\t}\n\t\telse if (Utils.versionCompare(Vue.version(), '2.1') < 0)\n\t\t{\n\t\t\talert(this.localize.BX_LIVECHAT_OLD_VUE);\n\t\t\tconsole.error(`LiveChatWidget.error: OLD_VUE_VERSION (${this.localize.BX_LIVECHAT_OLD_VUE_DEV.replace('#CURRENT_VERSION#', Vue.version())})`);\n\n\t\t\treturn false;\n\t\t}\n\t\telse if (!this.isWidgetDataRequested())\n\t\t{\n\t\t\tthis.requestWidgetData();\n\t\t}\n\n\t\tthis.attachTemplate();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.pageMode)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.buttonInstance)\n\t\t{\n\t\t\tthis.buttonInstance.onWidgetClose();\n\t\t}\n\n\t\tthis.detachTemplate();\n\t}\n\n\tshowNotification(params)\n\t{\n\t\tif (!this.store)\n\t\t{\n\t\t\tconsole.error('LiveChatWidget.showNotification: method can be called after fired event - onBitrixLiveChat');\n\t\t\treturn false;\n\t\t}\n\t\t// TODO show popup notification and set badge on button\n\t\t// operatorName\n\t\t// notificationText\n\t\t// counter\n\t}\n\n\tfireInitEvent()\n\t{\n\t\tif (this.initEventFired)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.sendEvent({\n\t\t\ttype: SubscriptionType.configLoaded,\n\t\t\tdata: {}\n\t\t});\n\n\t\tif (this.store.state.widget.common.reopen)\n\t\t{\n\t\t\tthis.open();\n\t\t}\n\n\t\tthis.initEventFired = true;\n\n\t\treturn true;\n\t}\n\n\tisReady()\n\t{\n\t\treturn this.ready;\n\t}\n\n\tisInited()\n\t{\n\t\treturn this.inited;\n\t}\n\n\tisUserRegistered()\n\t{\n\t\treturn !!this.getUserHash();\n\t}\n\n\tisConfigDataLoaded()\n\t{\n\t\treturn this.store.state.widget.common.configId;\n\t}\n\n\tisWidgetDataRequested()\n\t{\n\t\treturn this.widgetDataRequested;\n\t}\n\n\tisChatLoaded()\n\t{\n\t\treturn this.store.state.application.dialog.chatId > 0;\n\t}\n\n\tisSessionActive()\n\t{\n\t\treturn !this.store.state.widget.dialog.sessionClose;\n\t}\n\n\tisUserAgreeConsent()\n\t{\n\t\treturn this.store.state.widget.dialog.userConsent;\n\t}\n\n\tgetCrmTraceData()\n\t{\n\t\tlet traceData = '';\n\n\t\tif (!this.buttonInstance)\n\t\t{\n\t\t\treturn traceData;\n\t\t}\n\n\t\tif (typeof this.buttonInstance.getTrace !== 'function')\n\t\t{\n\t\t\ttraceData = this.buttonInstance.getTrace();\n\t\t}\n\t\telse if (\n\t\t\ttypeof this.buttonInstance.b24Tracker !== 'undefined'\n\t\t\t&& typeof this.buttonInstance.b24Tracker.guest !== 'undefined'\n\t\t)\n\t\t{\n\t\t\ttraceData = this.buttonInstance.b24Tracker.guest.getTrace();\n\t\t}\n\n\t\treturn traceData;\n\t}\n\n\tgetCustomData()\n\t{\n\t\tlet customData = [];\n\n\t\tif (this.customData.length > 0)\n\t\t{\n\t\t\tcustomData = this.customData;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcustomData = [{MESSAGE: this.localize.BX_LIVECHAT_EXTRA_SITE+': '+location.href}];\n\t\t}\n\n\t\treturn JSON.stringify(customData);\n\t}\n\n\tisUserLoaded()\n\t{\n\t\treturn this.store.state.widget.user.id > 0;\n\t}\n\n\tgetSiteId()\n\t{\n\t\treturn this.host.replace(/(http.?:\\/\\/)|([:.\\\\\\/])/mg, \"\")+this.code;\n\t}\n\n\tgetHost()\n\t{\n\t\treturn this.host;\n\t}\n\n\tgetConfigId()\n\t{\n\t\treturn this.store.state.widget.common.configId;\n\t}\n\n\tisDialogStart()\n\t{\n\t\treturn this.store.state.widget.common.dialogStart;\n\t}\n\n\tgetChatId()\n\t{\n\t\treturn this.store.state.application.dialog.chatId;\n\t}\n\n\tgetDialogId()\n\t{\n\t\treturn this.store.state.application.dialog.dialogId;\n\t}\n\n\tgetDiskFolderId()\n\t{\n\t\treturn this.store.state.application.dialog.diskFolderId;\n\t}\n\n\tgetDialogData(dialogId = this.getDialogId())\n\t{\n\t\treturn this.store.state.dialogues.collection[dialogId];\n\t}\n\n\tgetSessionId()\n\t{\n\t\treturn this.store.state.widget.dialog.sessionId;\n\t}\n\n\tgetUserHash()\n\t{\n\t\treturn this.store.state.widget.user.hash;\n\t}\n\n\tgetUserHashCookie()\n\t{\n\t\tlet userHash = '';\n\n\t\tlet cookie = Cookie.get(null, 'LIVECHAT_HASH');\n\t\tif (typeof cookie === 'string' && cookie.match(/^[a-f0-9]{32}$/))\n\t\t{\n\t\t\tuserHash= cookie;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet cookie = Cookie.get(this.getSiteId(), 'LIVECHAT_HASH');\n\t\t\tif (typeof cookie === 'string' && cookie.match(/^[a-f0-9]{32}$/))\n\t\t\t{\n\t\t\t\tuserHash = cookie;\n\t\t\t}\n\t\t}\n\n\t\treturn userHash;\n\t}\n\n\tgetUserId()\n\t{\n\t\treturn this.store.state.widget.user.id;\n\t}\n\n\tgetUserData()\n\t{\n\t\tif (!this.store)\n\t\t{\n\t\t\tconsole.error('LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat');\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.store.state.widget.user;\n\t}\n\n\tgetUserRegisterFields()\n\t{\n\t\treturn {\n\t\t\t'name': this.userRegisterData.name || '',\n\t\t\t'last_name': this.userRegisterData.lastName || '',\n\t\t\t'avatar': this.userRegisterData.avatar || '',\n\t\t\t'email': this.userRegisterData.email || '',\n\t\t\t'www': this.userRegisterData.www || '',\n\t\t\t'gender': this.userRegisterData.gender || '',\n\t\t\t'position': this.userRegisterData.position || '',\n\t\t\t'user_hash': this.userRegisterData.hash || this.getUserHashCookie() || '',\n\t\t\t'consent_url': this.store.state.widget.common.consentUrl? location.href: '',\n\t\t\t'trace_data': this.getCrmTraceData(),\n\t\t\t'custom_data': this.getCustomData()\n\t\t}\n\t}\n\n\tgetWidgetLocationCode()\n\t{\n\t\treturn LocationStyle[this.store.state.widget.common.location];\n\t}\n\n\tsetUserRegisterData(params)\n\t{\n\t\tif (!this.store)\n\t\t{\n\t\t\tconsole.error('LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat');\n\t\t\treturn false;\n\t\t}\n\n\t\tconst validUserFields = ['hash', 'name', 'lastName', 'avatar', 'email', 'www', 'gender', 'position'];\n\n\t\tif (!Utils.types.isPlainObject(params))\n\t\t{\n\t\t\tconsole.error(`%cLiveChatWidget.setUserData: params is not a object`, \"color: black;\");\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let field in this.userRegisterData)\n\t\t{\n\t\t\tif (!this.userRegisterData.hasOwnProperty(field))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!params[field])\n\t\t\t{\n\t\t\t\tdelete this.userRegisterData[field];\n\t\t\t}\n\t\t}\n\n\t\tfor (let field in params)\n\t\t{\n\t\t\tif (!params.hasOwnProperty(field))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (validUserFields.indexOf(field) === -1)\n\t\t\t{\n\t\t\t\tconsole.warn(`%cLiveChatWidget.setUserData: user field is not set, because you are trying to set an unknown field (%c${field}%c)`, \"color: black;\", \"font-weight: bold; color: red\", \"color: black\");\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.userRegisterData[field] = params[field];\n\t\t}\n\n\t\tif (\n\t\t\tthis.userRegisterData.hash\n\t\t\t&& this.getUserHash()\n\t\t\t&& this.userRegisterData.hash !== this.getUserHash()\n\t\t)\n\t\t{\n\t\t\tthis.setNewAuthToken(this.userRegisterData.hash);\n\t\t}\n\t}\n\n\tsetNewAuthToken(authToken = '')\n\t{\n\t\tthis.storeCollector.clearModelState();\n\t\tCookie.set(null, 'LIVECHAT_HASH', '', {expires: 365*86400, path: '/'});\n\n\t\tthis.restClient.setAuthId(RestAuth.guest, authToken);\n\t}\n\n\tsetCustomData(params)\n\t{\n\t\tif (!this.store)\n\t\t{\n\t\t\tconsole.error('LiveChatWidget.getUserData: method can be called after fired event - onBitrixLiveChat');\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet result = [];\n\t\tif (params instanceof Array)\n\t\t{\n\t\t\tparams.forEach(element =>\n\t\t\t{\n\t\t\t\tif (element && typeof element === 'object')\n\t\t\t\t{\n\t\t\t\t\tresult.push(element);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (result.length <= 0)\n\t\t\t{\n\t\t\t\tconsole.error('LiveChatWidget.setCustomData: params is empty');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!params)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tresult = [{'MESSAGE': params}]\n\t\t}\n\n\t\tthis.customData = this.customData.concat(result);\n\n\t\treturn true;\n\t}\n\n\tsetError(code = '', description = '')\n\t{\n\t\tconsole.error(`LiveChatWidget.error: ${code} (${description})`);\n\n\t\tlet localizeDescription = '';\n\t\tif (code === 'LIVECHAT_AUTH_FAILED')\n\t\t{\n\t\t\tlocalizeDescription = this.getLocalize('BX_LIVECHAT_AUTH_FAILED').replace('#LINK_START#', '<a href=\"javascript:void();\" onclick=\"location.reload()\">').replace('#LINK_END#', '</a>');\n\t\t\tthis.setNewAuthToken();\n\t\t}\n\t\telse if (code === 'LIVECHAT_AUTH_PORTAL_USER')\n\t\t{\n\t\t\tlocalizeDescription = this.getLocalize('BX_LIVECHAT_PORTAL_USER_NEW').replace('#LINK_START#', '<a href=\"'+this.host+'\">').replace('#LINK_END#', '</a>')\n\t\t}\n\t\telse if (code.endsWith('LOCALIZED'))\n\t\t{\n\t\t\tlocalizeDescription = description;\n\t\t}\n\n\t\tthis.store.commit('application/set', {error: {\n\t\t\tactive: true,\n\t\t\tcode,\n\t\t\tdescription: localizeDescription\n\t\t}});\n\t}\n\n\tclearError()\n\t{\n\t\tthis.store.commit('application/set', {error: {\n\t\t\tactive: false,\n\t\t\tcode: '',\n\t\t\tdescription: ''}\n\t\t});\n\t}\n\n\t/**\n\t *\n\t * @param params {Object}\n\t * @returns {Function|Boolean} - Unsubscribe callback function or False\n\t */\n\tsubscribe(params)\n\t{\n\t\tif (!Utils.types.isPlainObject(params))\n\t\t{\n\t\t\tconsole.error(`%cLiveChatWidget.subscribe: params is not a object`, \"color: black;\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!SubscriptionTypeCheck.includes(params.type))\n\t\t{\n\t\t\tconsole.error(`%cLiveChatWidget.subscribe: subscription type is not correct (%c${params.type}%c)`, \"color: black;\", \"font-weight: bold; color: red\", \"color: black\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof params.callback !== 'function')\n\t\t{\n\t\t\tconsole.error(`%cLiveChatWidget.subscribe: callback is not a function (%c${typeof params.callback}%c)`, \"color: black;\", \"font-weight: bold; color: red\", \"color: black\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof (this.subscribers[params.type]) === 'undefined')\n\t\t{\n\t\t\tthis.subscribers[params.type] = [];\n\t\t}\n\n\t\tthis.subscribers[params.type].push(params.callback);\n\n\t\treturn function () {\n\t\t\tthis.subscribers[params.type] = this.subscribers[params.type].filter(function(element) {\n\t\t\t\treturn element !== params.callback;\n\t\t\t});\n\t\t}.bind(this);\n\t}\n\n\t/**\n\t *\n\t * @param params {Object}\n\t * @returns {boolean}\n\t */\n\tsendEvent(params)\n\t{\n\t\tparams = params || {};\n\n\t\tif (!params.type)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof params.data !== 'object' || !params.data)\n\t\t{\n\t\t\tparams.data = {};\n\t\t}\n\n\t\tif (this.subscribers[params.type] instanceof Array && this.subscribers[params.type].length > 0)\n\t\t{\n\t\t\tthis.subscribers[params.type].forEach(callback => callback(params.data));\n\t\t}\n\n\t\tif (this.subscribers[SubscriptionType.every] instanceof Array && this.subscribers[SubscriptionType.every].length > 0)\n\t\t{\n\t\t\tthis.subscribers[SubscriptionType.every].forEach(callback => callback({type: params.type, data: params.data}));\n\t\t}\n\n\t\treturn true;\n\t}\n\n\taddLocalize(phrases)\n\t{\n\t\tif (typeof phrases !== \"object\" || !phrases)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let name in phrases)\n\t\t{\n\t\t\tif (phrases.hasOwnProperty(name))\n\t\t\t{\n\t\t\t\tthis.localize[name] = phrases[name];\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetLocalize(name)\n\t{\n\t\tlet phrase = '';\n\t\tif (typeof name === 'undefined')\n\t\t{\n\t\t\treturn this.localize;\n\t\t}\n\t\telse if (typeof this.localize[name.toString()] === 'undefined')\n\t\t{\n\t\t\tconsole.warn(`LiveChatWidget.getLocalize: message with code '${name.toString()}' is undefined.`)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tphrase = this.localize[name];\n\t\t}\n\n\t\treturn phrase;\n\t}\n\n/* endregion 05. Widget interaction and utils */\n}","/**\n * Bitrix OpenLines widget\n * Widget public interface\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Widget} from \"./widget\"\nimport {SubscriptionType} from \"./const\";\n\nexport class WidgetPublicManager\n{\n\tconstructor(config)\n\t{\n\t\tthis.developerInfo = 'Do not use private methods.';\n\t\tthis.__privateMethods__ = new Widget(config);\n\t\tthis.__createLegacyMethods();\n\t}\n\n\topen(params)\n\t{\n\t\treturn this.__privateMethods__.open(params);\n\t}\n\n\tclose()\n\t{\n\t\treturn this.__privateMethods__.close();\n\t}\n\n\tshowNotification(params)\n\t{\n\t\treturn this.__privateMethods__.showNotification(params);\n\t}\n\n\tgetUserData()\n\t{\n\t\treturn this.__privateMethods__.getUserData();\n\t}\n\n\tsetUserRegisterData(params)\n\t{\n\t\treturn this.__privateMethods__.setUserRegisterData(params);\n\t}\n\n\tsetCustomData(params)\n\t{\n\t\treturn this.__privateMethods__.setCustomData(params);\n\t}\n\n\tmutateTemplateComponent(id, params)\n\t{\n\t\treturn this.__privateMethods__.mutateTemplateComponent(id, params);\n\t}\n\n\taddLocalize(phrases)\n\t{\n\t\treturn this.__privateMethods__.addLocalize(phrases);\n\t}\n\n\t/**\n\t *\n\t * @param params {Object}\n\t * @returns {Function|Boolean} - Unsubscribe callback function or False\n\t */\n\tsubscribe(params)\n\t{\n\t\treturn this.__privateMethods__.subscribe(params);\n\t}\n\n\tstart()\n\t{\n\t\treturn this.__privateMethods__.start();\n\t}\n\n\t__createLegacyMethods()\n\t{\n\t\tif (typeof window.BX.LiveChat === 'undefined')\n\t\t{\n\t\t\tlet sourceHref = document.createElement('a');\n\t\t\tsourceHref.href = this.__privateMethods__.host;\n\n\t\t\tlet sourceDomain = sourceHref.protocol+'//'+sourceHref.hostname+(sourceHref.port && sourceHref.port != '80' && sourceHref.port != '443'? \":\"+sourceHref.port: \"\");\n\n\t\t\twindow.BX.LiveChat = {\n\t\t\t\topenLiveChat: () => {\n\t\t\t\t\tthis.open({openFromButton: true});\n\t\t\t\t},\n\t\t\t\tcloseLiveChat: () => {\n\t\t\t\t\tthis.close();\n\t\t\t\t},\n\t\t\t\taddEventListener: (el, eventName, handler) =>\n\t\t\t\t{\n\t\t\t\t\tif (eventName === 'message')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.subscribe({\n\t\t\t\t\t\t\ttype: SubscriptionType.userMessage,\n\t\t\t\t\t\t\tcallback: function (event)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandler({origin: sourceDomain, data: JSON.stringify({action: 'sendMessage'}), event});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn('Method BX.LiveChat.addEventListener is not supported, user new format for subscribe.')\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsetCookie: () => {},\n\t\t\t\tgetCookie: () => {},\n\t\t\t\tsourceDomain\n\t\t\t};\n\t\t}\n\n\t\tif (typeof window.BxLiveChatInit === 'function')\n\t\t{\n\t\t\tlet config = window.BxLiveChatInit();\n\n\t\t\tif (config.user)\n\t\t\t{\n\t\t\t\tthis.__privateMethods__.setUserRegisterData(config.user);\n\t\t\t}\n\t\t\tif (config.firstMessage)\n\t\t\t{\n\t\t\t\tthis.__privateMethods__.setCustomData(config.firstMessage)\n\t\t\t}\n\t\t}\n\n\t\tif (window.BxLiveChatLoader instanceof Array)\n\t\t{\n\t\t\twindow.BxLiveChatLoader.forEach(callback => callback());\n\t\t}\n\n\t\treturn true;\n\t}\n}","/**\n * Bitrix OpenLines widget\n * LiveChat base component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\nimport {Utils} from \"im.utils\";\nimport {Logger} from \"im.tools.logger\";\nimport {FormType, VoteType, LocationStyle, LocationType, LanguageType} from \"../const\";\nimport {DeviceType, DeviceOrientation, EventType} from \"im.const\";\nimport {md5} from \"main.md5\";\n\n/**\n * @notice Do not mutate or clone this component! It is under development.\n */\n\nVue.component('bx-livechat',\n{\n\tdata()\n\t{\n\t\treturn {\n\t\t\tviewPortMetaSiteNode: null,\n\t\t\tviewPortMetaWidgetNode: null,\n\t\t\tstoredMessage: '',\n\t\t\tstoredFile: null,\n\t\t\twidgetMinimumHeight: 435,\n\t\t\twidgetMinimumWidth: 340,\n\t\t\twidgetBaseHeight: 557,\n\t\t\twidgetMargin: 50,\n\t\t\twidgetAvailableHeight: 0,\n\t\t\twidgetAvailableWidth: 0,\n\t\t\twidgetCurrentHeight: 0,\n\t\t\twidgetCurrentWidth: 0,\n\t\t\twidgetDrag: false,\n\t\t\ttextareaFocused: false,\n\t\t\ttextareaDrag: false,\n\t\t\ttextareaHeight: 100,\n\t\t\ttextareaMinimumHeight: 100,\n\t\t\ttextareaMaximumHeight: Utils.device.isMobile()? 200: 300,\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.onCreated();\n\n\t\tdocument.addEventListener('keydown', this.onWindowKeyDown);\n\t\tif(!Utils.device.isMobile() && !this.widget.common.pageMode)\n\t\t{\n\t\t\twindow.addEventListener('resize', this.getAvailableSpaceFunc = Utils.throttle(this.getAvailableSpace, 50));\n\t\t}\n\t\tthis.$root.$on('requestShowForm', this.onRequestShowForm);\n\t},\n\tbeforeDestroy()\n\t{\n\t\tdocument.removeEventListener('keydown', this.onWindowKeyDown);\n\t\tif(!Utils.device.isMobile() && !this.widget.common.pageMode)\n\t\t{\n\t\t\twindow.removeEventListener('resize', this.getAvailableSpaceFunc);\n\t\t}\n\t\tthis.$root.$off('requestShowForm', this.onRequestShowForm);\n\n\t\tthis.onTextareaDragEventRemove();\n\t},\n\tcomputed:\n\t{\n\t\tFormType: () => FormType,\n\t\tVoteType: () => VoteType,\n\t\tDeviceType: () => DeviceType,\n\t\tEventType: () => EventType,\n\n\t\ttextareaHeightStyle(state)\n\t\t{\n\t\t\treturn {flex: '0 0 '+this.textareaHeight+'px'};\n\t\t},\n\t\ttextAreaBottomMargin()\n\t\t{\n\t\t\tif (!this.widget.common.copyright && !this.isBottomLocation)\n\t\t\t{\n\t\t\t\treturn {marginBottom: '5px'};\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\t\twidgetHeightStyle()\n\t\t{\n\t\t\tif(Utils.device.isMobile() || this.widget.common.pageMode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.widgetAvailableHeight < this.widgetBaseHeight || this.widgetAvailableHeight < this.widgetCurrentHeight)\n\t\t\t{\n\t\t\t\tthis.widgetCurrentHeight = Math.max(this.widgetAvailableHeight, this.widgetMinimumHeight);\n\t\t\t}\n\n\t\t\treturn this.widgetCurrentHeight+'px';\n\t\t},\n\t\twidgetWidthStyle()\n\t\t{\n\t\t\tif(Utils.device.isMobile() || this.widget.common.pageMode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.widgetAvailableWidth < this.widgetMinimumWidth || this.widgetAvailableWidth < this.widgetCurrentWidth)\n\t\t\t{\n\t\t\t\tthis.widgetCurrentWidth = Math.max(this.widgetAvailableWidth, this.widgetMinimumWidth);\n\t\t\t}\n\n\t\t\treturn this.widgetCurrentWidth+'px';\n\t\t},\n\t\tuserSelectStyle()\n\t\t{\n\t\t\treturn this.widgetDrag ? 'none' : 'auto';\n\t\t},\n\t\tisBottomLocation()\n\t\t{\n\t\t\treturn [LocationType.bottomLeft, LocationType.bottomMiddle, LocationType.bottomRight].includes(this.widget.common.location);\n\t\t},\n\t\tisLeftLocation()\n\t\t{\n\t\t\treturn [LocationType.bottomLeft, LocationType.topLeft, LocationType.topMiddle].includes(this.widget.common.location);\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('BX_LIVECHAT_', this.$root.$bitrixMessages);\n\t\t},\n\t\twidgetMobileDisabled(state)\n\t\t{\n\t\t\tif (state.application.device.type === DeviceType.mobile)\n\t\t\t{\n\t\t\t\tif (navigator.userAgent.toString().includes('iPad'))\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\telse if (state.application.device.orientation === DeviceOrientation.horizontal)\n\t\t\t\t{\n\t\t\t\t\tif (navigator.userAgent.toString().includes('iPhone'))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn !(typeof window.screen === 'object' && window.screen.availHeight >= 800);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\twidgetClassName(state)\n\t\t{\n\t\t\tlet className = ['bx-livechat-wrapper'];\n\n\t\t\tclassName.push('bx-livechat-show');\n\n\t\t\tif (state.widget.common.pageMode)\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-page-mode');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-position-'+LocationStyle[state.widget.common.location]);\n\t\t\t}\n\n\t\t\tif (state.application.common.languageId === LanguageType.russian)\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-logo-ru');\n\t\t\t}\n\t\t\telse if (state.application.common.languageId === LanguageType.ukraine)\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-logo-ua');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-logo-en');\n\t\t\t}\n\n\t\t\tif (!state.widget.common.online)\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-offline-state');\n\t\t\t}\n\n\t\t\tif (state.widget.common.dragged)\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-drag-n-drop');\n\t\t\t}\n\n\t\t\tif (state.widget.common.dialogStart)\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-chat-start');\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tstate.widget.dialog.operator.name\n\t\t\t\t&& !(state.application.device.type === DeviceType.mobile && state.application.device.orientation === DeviceOrientation.horizontal)\n\t\t\t)\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-has-operator');\n\t\t\t}\n\n\t\t\tif (Utils.device.isMobile())\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-mobile');\n\t\t\t}\n\t\t\telse if (Utils.browser.isSafari())\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-browser-safari');\n\t\t\t}\n\t\t\telse if (Utils.browser.isIe())\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-browser-ie');\n\t\t\t}\n\n\t\t\tif (Utils.platform.isMac())\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-mac');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-custom-scroll');\n\t\t\t}\n\n\t\t\tif (state.widget.common.styles.backgroundColor && Utils.isDarkColor(state.widget.common.styles.iconColor))\n\t\t\t{\n\t\t\t\tclassName.push('bx-livechat-bright-header');\n\t\t\t}\n\n\t\t\treturn className.join(' ');\n\t\t},\n\t\tshowMessageDialog()\n\t\t{\n\t\t\treturn this.messageCollection.length > 0;\n\t\t},\n\t\tquotePanelData()\n\t\t{\n\t\t\tlet result = {\n\t\t\t\tid: 0,\n\t\t\t\ttitle: '',\n\t\t\t\tdescription: '',\n\t\t\t\tcolor: ''\n\t\t\t};\n\t\t\tif (!this.dialog.quoteId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tlet message = this.$store.getters['messages/getMessage'](this.dialog.chatId, this.dialog.quoteId);\n\t\t\tif (!message)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tlet user = this.$store.getters['users/get'](message.authorId);\n\n\t\t\tresult = {\n\t\t\t\tid: this.dialog.quoteId,\n\t\t\t\ttitle: user? user.name: '',\n\t\t\t\tcolor: user? user.color: '',\n\t\t\t\tdescription: message.textConverted? message.textConverted: this.localize.BX_LIVECHAT_FILE_MESSAGE\n\t\t\t};\n\n\t\t\treturn result;\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\twidget: state => state.widget,\n\t\t\tapplication: state => state.application,\n\t\t\tdialog: state => state.dialogues.collection[state.application.dialog.dialogId],\n\t\t\tmessageCollection: state => state.messages.collection[state.application.dialog.chatId]\n\t\t})\n\t},\n\twatch:\n\t{\n\t\tsessionClose(value)\n\t\t{\n\t\t\tLogger.log('sessionClose change', value);\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tclose(event)\n\t\t{\n\t\t\tif (this.widget.common.pageMode)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.onBeforeClose();\n\t\t\tthis.$store.commit('widget/common', {showed: false});\n\t\t},\n\t\tgetAvailableSpace()\n\t\t{\n\t\t\tif (this.isBottomLocation)\n\t\t\t{\n\t\t\t\tlet bottomPosition = this.$refs.widgetWrapper.getBoundingClientRect().bottom;\n\t\t\t\tlet widgetBottomMargin = window.innerHeight - bottomPosition;\n\t\t\t\tthis.widgetAvailableHeight = window.innerHeight - this.widgetMargin - widgetBottomMargin;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet topPosition = this.$refs.widgetWrapper.getBoundingClientRect().top;\n\t\t\t\tthis.widgetAvailableHeight = window.innerHeight - this.widgetMargin - topPosition;\n\t\t\t}\n\n\t\t\tthis.widgetAvailableWidth = window.innerWidth - this.widgetMargin * 2;\n\t\t},\n\t\tshowLikeForm()\n\t\t{\n\t\t\tif (this.offline)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tclearTimeout(this.showFormTimeout);\n\t\t\tif (!this.widget.common.vote.enable)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.widget.dialog.sessionClose\n\t\t\t\t&& this.widget.dialog.userVote !== VoteType.none\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.$store.commit('widget/common', {showForm: FormType.like});\n\t\t},\n\t\tshowWelcomeForm()\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\t\t\tthis.$store.commit('widget/common', {showForm: FormType.welcome});\n\t\t},\n\t\tshowOfflineForm()\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\n\t\t\tif (this.widget.dialog.showForm !== FormType.welcome)\n\t\t\t{\n\t\t\t\tthis.$store.commit('widget/common', {showForm: FormType.offline});\n\t\t\t}\n\t\t},\n\t\tshowHistoryForm()\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\t\t\tthis.$store.commit('widget/common', {showForm: FormType.history});\n\t\t},\n\t\thideForm()\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\n\t\t\tif (this.widget.common.showForm !== FormType.none)\n\t\t\t{\n\t\t\t\tthis.$store.commit('widget/common', {showForm: FormType.none});\n\t\t\t}\n\t\t},\n\t\tshowConsentWidow()\n\t\t{\n\t\t\tthis.$store.commit('widget/common', {showConsent: true});\n\t\t},\n\t\tagreeConsentWidow()\n\t\t{\n\t\t\tthis.$store.commit('widget/common', {showConsent: false});\n\n\t\t\tthis.$root.$bitrixWidget.sendConsentDecision(true);\n\n\t\t\tif (this.storedMessage || this.storedFile)\n\t\t\t{\n\t\t\t\tif (this.storedMessage)\n\t\t\t\t{\n\t\t\t\t\tthis.onTextareaSend({focus: this.application.device.type !== DeviceType.mobile});\n\t\t\t\t\tthis.storedMessage = '';\n\t\t\t\t}\n\t\t\t\tif (this.storedFile)\n\t\t\t\t{\n\t\t\t\t\tthis.onTextareaFileSelected();\n\t\t\t\t\tthis.storedFile = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.widget.common.showForm === FormType.none)\n\t\t\t{\n\t\t\t\tthis.$root.$emit(EventType.textarea.focus);\n\t\t\t}\n\t\t},\n\t\tdisagreeConsentWidow()\n\t\t{\n\t\t\tthis.$store.commit('widget/common', {showForm : FormType.none});\n\t\t\tthis.$store.commit('widget/common', {showConsent : false});\n\n\t\t\tthis.$root.$bitrixWidget.sendConsentDecision(false);\n\n\t\t\tif (this.storedMessage)\n\t\t\t{\n\t\t\t\tthis.$root.$emit(EventType.textarea.insertText, {\n\t\t\t\t\ttext: this.storedMessage,\n\t\t\t\t\tfocus: this.application.device.type !== DeviceType.mobile\n\t\t\t\t});\n\t\t\t\tthis.storedMessage = '';\n\t\t\t}\n\t\t\tif (this.storedFile)\n\t\t\t{\n\t\t\t\tthis.storedFile = '';\n\t\t\t}\n\n\t\t\tif (this.application.device.type !== DeviceType.mobile)\n\t\t\t{\n\t\t\t\tthis.$root.$emit(EventType.textarea.focus);\n\t\t\t}\n\t\t},\n\t\tlogEvent(name, ...params)\n\t\t{\n\t\t\tLogger.info(name, ...params);\n\t\t},\n\t\tonCreated()\n\t\t{\n\t\t\tif(Utils.device.isMobile())\n\t\t\t{\n\t\t\t\tlet viewPortMetaSiteNode = Array.from(\n\t\t\t\t\tdocument.head.getElementsByTagName('meta')\n\t\t\t\t).filter(element => element.name === 'viewport')[0];\n\n\t\t\t\tif (viewPortMetaSiteNode)\n\t\t\t\t{\n\t\t\t\t\tthis.viewPortMetaSiteNode = viewPortMetaSiteNode;\n\t\t\t\t\tdocument.head.removeChild(this.viewPortMetaSiteNode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet contentWidth = document.body.offsetWidth;\n\t\t\t\t\tif (contentWidth < window.innerWidth)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontentWidth = window.innerWidth;\n\t\t\t\t\t}\n\t\t\t\t\tif (contentWidth < 1024)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontentWidth = 1024;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.viewPortMetaSiteNode = document.createElement('meta');\n\t\t\t\t\tthis.viewPortMetaSiteNode.setAttribute('name', 'viewport');\n\t\t\t\t\tthis.viewPortMetaSiteNode.setAttribute('content', `width=${contentWidth}, initial-scale=1.0, user-scalable=1`);\n\t\t\t\t}\n\n\t\t\t\tif (!this.viewPortMetaWidgetNode)\n\t\t\t\t{\n\t\t\t\t\tthis.viewPortMetaWidgetNode = document.createElement('meta');\n\t\t\t\t\tthis.viewPortMetaWidgetNode.setAttribute('name', 'viewport');\n\t\t\t\t\tthis.viewPortMetaWidgetNode.setAttribute('content', 'width=device-width, initial-scale=1.0, user-scalable=0');\n\t\t\t\t\tdocument.head.appendChild(this.viewPortMetaWidgetNode);\n\t\t\t\t}\n\n\t\t\t\tdocument.body.classList.add('bx-livechat-mobile-state');\n\n\t\t\t\tif (Utils.browser.isSafariBased())\n\t\t\t\t{\n\t\t\t\t\tdocument.body.classList.add('bx-livechat-mobile-safari-based');\n\t\t\t\t}\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$store.dispatch('widget/show');\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.dispatch('widget/show').then(() => {\n\t\t\t\t\tthis.widgetCurrentHeight = this.widgetBaseHeight;\n\t\t\t\t\tthis.widgetCurrentWidth = this.widgetMinimumWidth;\n\t\t\t\t\tthis.getAvailableSpace();\n\n\t\t\t\t\tthis.widgetCurrentHeight = this.widget.common.widgetHeight || this.widgetCurrentHeight;\n\t\t\t\t\tthis.widgetCurrentWidth = this.widget.common.widgetWidth || this.widgetCurrentWidth;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.textareaHeight = this.widget.common.textareaHeight || this.textareaHeight;\n\n\t\t\tthis.$store.commit('files/initCollection', {chatId: this.$root.$bitrixWidget.getChatId()});\n\t\t\tthis.$store.commit('messages/initCollection', {chatId: this.$root.$bitrixWidget.getChatId()});\n\t\t\tthis.$store.commit('dialogues/initCollection', {dialogId: this.$root.$bitrixWidget.getDialogId(), fields: {\n\t\t\t\tentityType: 'LIVECHAT',\n\t\t\t\ttype: 'livechat'\n\t\t\t}});\n\t\t},\n\t\tonBeforeClose()\n\t\t{\n\t\t\tif(Utils.device.isMobile())\n\t\t\t{\n\t\t\t\tdocument.body.classList.remove('bx-livechat-mobile-state');\n\n\t\t\t\tif (Utils.browser.isSafariBased())\n\t\t\t\t{\n\t\t\t\t\tdocument.body.classList.remove('bx-livechat-mobile-safari-based');\n\t\t\t\t}\n\n\t\t\t\tif (this.viewPortMetaWidgetNode)\n\t\t\t\t{\n\t\t\t\t\tdocument.head.removeChild(this.viewPortMetaWidgetNode);\n\t\t\t\t\tthis.viewPortMetaWidgetNode = null;\n\t\t\t\t}\n\n\t\t\t\tif (this.viewPortMetaSiteNode)\n\t\t\t\t{\n\t\t\t\t\tdocument.head.appendChild(this.viewPortMetaSiteNode);\n\t\t\t\t\tthis.viewPortMetaSiteNode = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonAfterClose()\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.close();\n\t\t},\n\t\tonRequestShowForm(event)\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\t\t\tif (event.type === FormType.welcome)\n\t\t\t{\n\t\t\t\tif (event.delayed)\n\t\t\t\t{\n\t\t\t\t\tthis.showFormTimeout = setTimeout(() => {\n\t\t\t\t\t\tthis.showWelcomeForm();\n\t\t\t\t\t}, 5000);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showWelcomeForm();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (event.type === FormType.offline)\n\t\t\t{\n\t\t\t\tif (event.delayed)\n\t\t\t\t{\n\t\t\t\t\tthis.showFormTimeout = setTimeout(() => {\n\t\t\t\t\t\tthis.showOfflineForm();\n\t\t\t\t\t}, 3000);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showOfflineForm();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (event.type === FormType.like)\n\t\t\t{\n\t\t\t\tif (event.delayed)\n\t\t\t\t{\n\t\t\t\t\tthis.showFormTimeout = setTimeout(() => {\n\t\t\t\t\t\tthis.showLikeForm();\n\t\t\t\t\t}, 5000);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showLikeForm();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonDialogRequestHistory(event)\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.getDialogHistory(event.lastId);\n\t\t},\n\t\tonDialogRequestUnread(event)\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.getDialogUnread(event.lastId);\n\t\t},\n\t\tonDialogMessageClickByUserName(event)\n\t\t{\n\t\t\t// TODO name push to auto-replace mention holder - User Name -> [USER=274]User Name[/USER]\n\t\t\tthis.$root.$emit(EventType.textarea.insertText, {text: event.user.name+' '});\n\t\t},\n\t\tonDialogMessageClickByUploadCancel(event)\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.cancelUploadFile(event.file.id);\n\t\t},\n\t\tonDialogMessageClickByKeyboardButton(event)\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.execMessageKeyboardCommand(event);\n\t\t},\n\t\tonDialogMessageClickByCommand(event)\n\t\t{\n\t\t\tif (event.type === 'put')\n\t\t\t{\n\t\t\t\tthis.$root.$emit(EventType.textarea.insertText, {text: event.value+' '});\n\t\t\t}\n\t\t\telse if (event.type === 'send')\n\t\t\t{\n\t\t\t\tthis.$root.$bitrixWidget.addMessage(event.value);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tLogger.warn('Unprocessed command', event);\n\t\t\t}\n\t\t},\n\t\tonDialogMessageMenuClick(event)\n\t\t{\n\t\t\tLogger.warn('Message menu:', event);\n\t\t},\n\t\tonDialogMessageRetryClick(event)\n\t\t{\n\t\t\tLogger.warn('Message retry:', event);\n\t\t\tthis.$root.$bitrixWidget.retrySendMessage(event.message);\n\t\t},\n\t\tonDialogReadMessage(event)\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.readMessage(event.id);\n\t\t},\n\t\tonDialogQuoteMessage(event)\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.quoteMessage(event.message.id);\n\t\t},\n\t\tonDialogMessageReactionSet(event)\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.reactMessage(event.message.id, event.reaction);\n\t\t},\n\t\tonDialogClick(event)\n\t\t{\n\t\t\tif (this.widget.common.showForm !== FormType.none)\n\t\t\t{\n\t\t\t\tthis.$store.commit('widget/common', {showForm: FormType.none});\n\t\t\t}\n\t\t},\n\t\tonTextareaKeyUp(event)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.widget.common.watchTyping\n\t\t\t\t&& this.widget.dialog.sessionId\n\t\t\t\t&& !this.widget.dialog.sessionClose\n\t\t\t\t&& this.widget.dialog.operator.id\n\t\t\t\t&& this.widget.dialog.operatorChatId\n\t\t\t\t&& this.$root.$bitrixPullClient.isPublishingEnabled()\n\t\t\t)\n\t\t\t{\n\t\t\t\tlet infoString = md5(\n\t\t\t\t\tthis.widget.dialog.sessionId\n\t\t\t\t\t+ '/' + this.application.dialog.chatId\n\t\t\t\t\t+ '/' + this.widget.user.id\n\t\t\t\t);\n\t\t\t\tthis.$root.$bitrixPullClient.sendMessage(\n\t\t\t\t\t[this.widget.dialog.operator.id],\n\t\t\t\t\t'imopenlines',\n\t\t\t\t\t'linesMessageWrite',\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: event.text,\n\t\t\t\t\t\tinfoString,\n\t\t\t\t\t\toperatorChatId: this.widget.dialog.operatorChatId\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tonTextareaSend(event)\n\t\t{\n\t\t\tevent.focus = event.focus !== false;\n\n\t\t\tif (this.widget.common.showForm === FormType.smile)\n\t\t\t{\n\t\t\t\tthis.$store.commit('widget/common', {showForm: FormType.none});\n\t\t\t}\n\n\t\t\tif (!this.widget.dialog.userConsent && this.widget.common.consentUrl)\n\t\t\t{\n\t\t\t\tif (event.text)\n\t\t\t\t{\n\t\t\t\t\tthis.storedMessage = event.text;\n\t\t\t\t}\n\t\t\t\tthis.showConsentWidow();\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tevent.text = event.text? event.text: this.storedMessage;\n\t\t\tif (!event.text)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.hideForm();\n\t\t\tthis.$root.$bitrixWidget.addMessage(event.text);\n\n\t\t\tif (event.focus)\n\t\t\t{\n\t\t\t\tthis.$root.$emit(EventType.textarea.focus);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tonTextareaWrites(event)\n\t\t{\n\t\t\tthis.$root.$bitrixController.startWriting();\n\t\t},\n\t\tonTextareaFocus(event)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.widget.common.copyright &&\n\t\t\t\tthis.application.device.type === DeviceType.mobile\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.widget.common.copyright = false;\n\t\t\t}\n\t\t\tif (Utils.device.isMobile())\n\t\t\t{\n\t\t\t\tclearTimeout(this.onTextareaFocusScrollTimeout);\n\t\t\t\tthis.onTextareaFocusScrollTimeout = setTimeout(() => {\n\t\t\t\t\tdocument.addEventListener('scroll', this.onWindowScroll);\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t\tthis.textareaFocused = true;\n\t\t},\n\t\tonTextareaBlur(event)\n\t\t{\n\t\t\tif (!this.widget.common.copyright && this.widget.common.copyright !== this.$root.$bitrixWidget.copyright)\n\t\t\t{\n\t\t\t\tthis.widget.common.copyright = this.$root.$bitrixWidget.copyright;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$root.$emit(EventType.dialog.scrollToBottom, {force: true});\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (Utils.device.isMobile())\n\t\t\t{\n\t\t\t\tclearTimeout(this.onTextareaFocusScrollTimeout);\n\t\t\t\tdocument.removeEventListener('scroll', this.onWindowScroll);\n\t\t\t}\n\n\t\t\tthis.textareaFocused = false;\n\t\t},\n\t\tonTextareaStartDrag(event)\n\t\t{\n\t\t\tif (this.textareaDrag)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tLogger.log('Livechat: textarea drag started');\n\n\t\t\tthis.textareaDrag = true;\n\n\t\t\tevent = event.changedTouches ? event.changedTouches[0] : event;\n\n\t\t\tthis.textareaDragCursorStartPoint = event.clientY;\n\t\t\tthis.textareaDragHeightStartPoint = this.textareaHeight;\n\n\t\t\tthis.onTextareaDragEventAdd();\n\n\t\t\tthis.$root.$emit(EventType.textarea.blur, true);\n\t\t},\n\t\tonTextareaContinueDrag(event)\n\t\t{\n\t\t\tif (!this.textareaDrag)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent = event.changedTouches ? event.changedTouches[0] : event;\n\n\t\t\tthis.textareaDragCursorControlPoint = event.clientY;\n\n\t\t\tlet textareaHeight = Math.max(\n\t\t\t\tMath.min(this.textareaDragHeightStartPoint + this.textareaDragCursorStartPoint - this.textareaDragCursorControlPoint, this.textareaMaximumHeight)\n\t\t\t, this.textareaMinimumHeight);\n\n\t\t\tLogger.log('Livechat: textarea drag', 'new: '+textareaHeight, 'curr: '+this.textareaHeight);\n\n\t\t\tif (this.textareaHeight !== textareaHeight)\n\t\t\t{\n\t\t\t\tthis.textareaHeight = textareaHeight;\n\t\t\t}\n\t\t},\n\t\tonTextareaStopDrag()\n\t\t{\n\t\t\tif (!this.textareaDrag)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tLogger.log('Livechat: textarea drag ended');\n\n\t\t\tthis.textareaDrag = false;\n\n\t\t\tthis.onTextareaDragEventRemove();\n\n\t\t\tthis.$store.commit('widget/common', {textareaHeight: this.textareaHeight});\n\t\t\tthis.$root.$emit(EventType.dialog.scrollToBottom, {force: true});\n\t\t},\n\t\tonTextareaDragEventAdd()\n\t\t{\n\t\t\tdocument.addEventListener('mousemove', this.onTextareaContinueDrag);\n\t\t\tdocument.addEventListener('touchmove', this.onTextareaContinueDrag);\n\t\t\tdocument.addEventListener('touchend', this.onTextareaStopDrag);\n\t\t\tdocument.addEventListener('mouseup', this.onTextareaStopDrag);\n\t\t\tdocument.addEventListener('mouseleave', this.onTextareaStopDrag);\n\t\t},\n\t\tonTextareaDragEventRemove()\n\t\t{\n\t\t\tdocument.removeEventListener('mousemove', this.onTextareaContinueDrag);\n\t\t\tdocument.removeEventListener('touchmove', this.onTextareaContinueDrag);\n\t\t\tdocument.removeEventListener('touchend', this.onTextareaStopDrag);\n\t\t\tdocument.removeEventListener('mouseup', this.onTextareaStopDrag);\n\t\t\tdocument.removeEventListener('mouseleave', this.onTextareaStopDrag);\n\t\t},\n\t\tonTextareaFileSelected(event)\n\t\t{\n\t\t\tlet fileInput = event && event.fileInput? event.fileInput: this.storedFile;\n\t\t\tif (!fileInput)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (fileInput.files[0].size > this.application.disk.maxFileSize)\n\t\t\t{\n\t\t\t\t// TODO change alert to correct overlay window\n\t\t\t\talert(this.localize.BX_LIVECHAT_FILE_SIZE_EXCEEDED.replace('#LIMIT#', Math.round(this.application.disk.maxFileSize/1024/1024)));\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.widget.dialog.userConsent && this.widget.common.consentUrl)\n\t\t\t{\n\t\t\t\tthis.storedFile = event.fileInput;\n\t\t\t\tthis.showConsentWidow();\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.$root.$bitrixWidget.uploadFile(fileInput);\n\t\t},\n\t\tonTextareaAppButtonClick(event)\n\t\t{\n\t\t\tif (event.appId === FormType.smile)\n\t\t\t{\n\t\t\t\tif (this.widget.common.showForm === FormType.smile)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('widget/common', {showForm: FormType.none});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('widget/common', {showForm: FormType.smile});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$root.$emit(EventType.textarea.focus);\n\t\t\t}\n\t\t},\n\t\tonPullRequestConfig(event)\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.recoverPullConnection();\n\t\t},\n\t\tonSmilesSelectSmile(event)\n\t\t{\n\t\t\tthis.$root.$emit(EventType.textarea.insertText, {text: event.text});\n\t\t},\n\t\tonSmilesSelectSet()\n\t\t{\n\t\t\tthis.$root.$emit(EventType.textarea.focus);\n\t\t},\n\t\tonQuotePanelClose()\n\t\t{\n\t\t\tthis.$root.$bitrixWidget.quoteMessageClear();\n\t\t},\n\t\tonWidgetStartDrag(event)\n\t\t{\n\t\t\tif (this.widgetDrag)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.widgetDrag = true;\n\n\t\t\tevent = event.changedTouches ? event.changedTouches[0] : event;\n\n\t\t\tthis.widgetDragCursorStartPointY = event.clientY;\n\t\t\tthis.widgetDragCursorStartPointX = event.clientX;\n\t\t\tthis.widgetDragHeightStartPoint = this.widgetCurrentHeight;\n\t\t\tthis.widgetDragWidthStartPoint = this.widgetCurrentWidth;\n\n\t\t\tthis.onWidgetDragEventAdd();\n\t\t},\n\t\tonWidgetContinueDrag(event)\n\t\t{\n\t\t\tif (!this.widgetDrag)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent = event.changedTouches ? event.changedTouches[0] : event;\n\n\t\t\tthis.widgetDragCursorControlPointY = event.clientY;\n\t\t\tthis.widgetDragCursorControlPointX = event.clientX;\n\n\t\t\tlet widgetHeight = 0;\n\n\t\t\tif (this.isBottomLocation)\n\t\t\t{\n\t\t\t\twidgetHeight = Math.max(\n\t\t\t\t\tMath.min(this.widgetDragHeightStartPoint + this.widgetDragCursorStartPointY - this.widgetDragCursorControlPointY, this.widgetAvailableHeight),\n\t\t\t\t\tthis.widgetMinimumHeight\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twidgetHeight = Math.max(\n\t\t\t\t\tMath.min(this.widgetDragHeightStartPoint - this.widgetDragCursorStartPointY + this.widgetDragCursorControlPointY, this.widgetAvailableHeight),\n\t\t\t\t\tthis.widgetMinimumHeight\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet widgetWidth = 0;\n\t\t\tif (this.isLeftLocation)\n\t\t\t{\n\t\t\t\twidgetWidth = Math.max(\n\t\t\t\t\tMath.min(this.widgetDragWidthStartPoint - this.widgetDragCursorStartPointX + this.widgetDragCursorControlPointX, this.widgetAvailableWidth),\n\t\t\t\t\tthis.widgetMinimumWidth\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twidgetWidth = Math.max(\n\t\t\t\t\tMath.min(this.widgetDragWidthStartPoint + this.widgetDragCursorStartPointX - this.widgetDragCursorControlPointX, this.widgetAvailableWidth),\n\t\t\t\t\tthis.widgetMinimumWidth\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.widgetCurrentHeight !== widgetHeight)\n\t\t\t{\n\t\t\t\tthis.widgetCurrentHeight = widgetHeight;\n\t\t\t}\n\n\t\t\tif (this.widgetCurrentWidth !== widgetWidth)\n\t\t\t{\n\t\t\t\tthis.widgetCurrentWidth = widgetWidth;\n\t\t\t}\n\t\t},\n\t\tonWidgetStopDrag()\n\t\t{\n\t\t\tif (!this.widgetDrag)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.widgetDrag = false;\n\n\t\t\tthis.onWidgetDragEventRemove();\n\n\t\t\tthis.$store.commit('widget/common', {widgetHeight: this.widgetCurrentHeight, widgetWidth: this.widgetCurrentWidth});\n\t\t},\n\t\tonWidgetDragEventAdd()\n\t\t{\n\t\t\tdocument.addEventListener('mousemove', this.onWidgetContinueDrag);\n\t\t\tdocument.addEventListener('mouseup', this.onWidgetStopDrag);\n\t\t\tdocument.addEventListener('mouseleave', this.onWidgetStopDrag);\n\t\t},\n\t\tonWidgetDragEventRemove()\n\t\t{\n\t\t\tdocument.removeEventListener('mousemove', this.onWidgetContinueDrag);\n\t\t\tdocument.removeEventListener('mouseup', this.onWidgetStopDrag);\n\t\t\tdocument.removeEventListener('mouseleave', this.onWidgetStopDrag);\n\t\t},\n\t\tonWindowKeyDown(event)\n\t\t{\n\t\t\tif (event.keyCode === 27)\n\t\t\t{\n\t\t\t\tif (this.widget.common.showForm !== FormType.none)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('widget/common', {showForm: FormType.none});\n\t\t\t\t}\n\t\t\t\telse if (this.widget.common.showConsent)\n\t\t\t\t{\n\t\t\t\t\tthis.disagreeConsentWidow();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tthis.$root.$emit(EventType.textarea.focus);\n\t\t\t}\n\t\t},\n\t\tonWindowScroll(event)\n\t\t{\n\t\t\tclearTimeout(this.onWindowScrollTimeout);\n\t\t\tthis.onWindowScrollTimeout = setTimeout(() => {\n\t\t\t\tthis.$root.$emit(EventType.textarea.blur, true);\n\t\t\t}, 50);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<transition enter-active-class=\"bx-livechat-show\" leave-active-class=\"bx-livechat-close\" @after-leave=\"onAfterClose\">\n\t\t\t<div :class=\"widgetClassName\" v-if=\"widget.common.showed\" :style=\"{height: widgetHeightStyle, width: widgetWidthStyle, userSelect: userSelectStyle}\" ref=\"widgetWrapper\">\n\t\t\t\t<div class=\"bx-livechat-box\">\n\t\t\t\t\t<div v-if=\"isBottomLocation\" class=\"bx-livechat-widget-resize-handle\" @mousedown=\"onWidgetStartDrag\"></div>\n\t\t\t\t\t<bx-livechat-head :isWidgetDisabled=\"widgetMobileDisabled\" @like=\"showLikeForm\" @history=\"showHistoryForm\" @close=\"close\"/>\n\t\t\t\t\t<template v-if=\"widgetMobileDisabled\">\n\t\t\t\t\t\t<bx-livechat-body-orientation-disabled/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"application.error.active\">\n\t\t\t\t\t\t<bx-livechat-body-error/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"!widget.common.configId\">\n\t\t\t\t\t\t<div class=\"bx-livechat-body\" key=\"loading-body\">\n\t\t\t\t\t\t\t<bx-livechat-body-loading/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\t\t\t\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<template v-if=\"!widget.common.dialogStart\">\n\t\t\t\t\t\t\t<div class=\"bx-livechat-body\" key=\"welcome-body\">\n\t\t\t\t\t\t\t\t<bx-livechat-body-operators/>\n\t\t\t\t\t\t\t\t<keep-alive include=\"bx-livechat-smiles\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"widget.common.showForm == FormType.smile\">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-smiles @selectSmile=\"onSmilesSelectSmile\" @selectSet=\"onSmilesSelectSet\"/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</keep-alive>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"widget.common.dialogStart\">\n\t\t\t\t\t\t\t<bx-pull-status :canReconnect=\"true\" @reconnect=\"onPullRequestConfig\"/>\n\t\t\t\t\t\t\t<div :class=\"['bx-livechat-body', {'bx-livechat-body-with-message': showMessageDialog}]\" key=\"with-message\">\n\t\t\t\t\t\t\t\t<template v-if=\"showMessageDialog\">\n\t\t\t\t\t\t\t\t\t<div class=\"bx-livechat-dialog\">\n\t\t\t\t\t\t\t\t\t\t<bx-messenger-dialog\n\t\t\t\t\t\t\t\t\t\t\t:userId=\"application.common.userId\" \n\t\t\t\t\t\t\t\t\t\t\t:dialogId=\"application.dialog.dialogId\"\n\t\t\t\t\t\t\t\t\t\t\t:chatId=\"application.dialog.chatId\"\n\t\t\t\t\t\t\t\t\t\t\t:messageLimit=\"application.dialog.messageLimit\"\n\t\t\t\t\t\t\t\t\t\t\t:messageExtraCount=\"application.dialog.messageExtraCount\"\n\t\t\t\t\t\t\t\t\t\t\t:enableReactions=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t:enableDateActions=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t:enableCreateContent=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t:enableGestureQuote=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t:enableGestureMenu=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t:showMessageAvatar=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t:showMessageMenu=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t:listenEventScrollToBottom=\"EventType.dialog.scrollToBottom\"\n\t\t\t\t\t\t\t\t\t\t\t:listenEventRequestHistory=\"EventType.dialog.requestHistoryResult\"\n\t\t\t\t\t\t\t\t\t\t\t:listenEventRequestUnread=\"EventType.dialog.requestUnreadResult\"\n\t\t\t\t\t\t\t\t\t\t\t@readMessage=\"onDialogReadMessage\"\n\t\t\t\t\t\t\t\t\t\t\t@requestHistory=\"onDialogRequestHistory\"\n\t\t\t\t\t\t\t\t\t\t\t@requestUnread=\"onDialogRequestUnread\"\n\t\t\t\t\t\t\t\t\t\t\t@quoteMessage=\"onDialogQuoteMessage\"\n\t\t\t\t\t\t\t\t\t\t\t@clickByCommand=\"onDialogMessageClickByCommand\"\n\t\t\t\t\t\t\t\t\t\t\t@clickByUserName=\"onDialogMessageClickByUserName\"\n\t\t\t\t\t\t\t\t\t\t\t@clickByUploadCancel=\"onDialogMessageClickByUploadCancel\"\n\t\t\t\t\t\t\t\t\t\t\t@clickByKeyboardButton=\"onDialogMessageClickByKeyboardButton\"\n\t\t\t\t\t\t\t\t\t\t\t@clickByMessageMenu=\"onDialogMessageMenuClick\"\n\t\t\t\t\t\t\t\t\t\t\t@clickByMessageRetry=\"onDialogMessageRetryClick\"\n\t\t\t\t\t\t\t\t\t\t\t@setMessageReaction=\"onDialogMessageReactionSet\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"onDialogClick\"\n\t\t\t\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t\t\t</div>\t \n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<bx-livechat-body-loading/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<bx-messenger-quote-panel :id=\"quotePanelData.id\" :title=\"quotePanelData.title\" :description=\"quotePanelData.description\" :color=\"quotePanelData.color\" @close=\"onQuotePanelClose\"/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<keep-alive include=\"bx-livechat-smiles\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"widget.common.showForm == FormType.like && widget.common.vote.enable\">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-vote/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if=\"widget.common.showForm == FormType.welcome\">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-welcome/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if=\"widget.common.showForm == FormType.offline\">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-offline/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if=\"widget.common.showForm == FormType.history\">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-form-history/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else-if=\"widget.common.showForm == FormType.smile\">\n\t\t\t\t\t\t\t\t\t\t<bx-livechat-smiles @selectSmile=\"onSmilesSelectSmile\" @selectSet=\"onSmilesSelectSet\"/>\t\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</keep-alive>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\t\n\t\t\t\t\t\t<div class=\"bx-livechat-textarea\" :style=\"[textareaHeightStyle, textAreaBottomMargin]\" ref=\"textarea\">\n\t\t\t\t\t\t\t<div class=\"bx-livechat-textarea-resize-handle\" @mousedown=\"onTextareaStartDrag\" @touchstart=\"onTextareaStartDrag\"></div>\n\t\t\t\t\t\t\t<bx-messenger-textarea\n\t\t\t\t\t\t\t\t:siteId=\"application.common.siteId\"\n\t\t\t\t\t\t\t\t:userId=\"application.common.userId\"\n\t\t\t\t\t\t\t\t:dialogId=\"application.dialog.dialogId\"\n\t\t\t\t\t\t\t\t:writesEventLetter=\"3\"\n\t\t\t\t\t\t\t\t:enableEdit=\"true\"\n\t\t\t\t\t\t\t\t:enableCommand=\"false\"\n\t\t\t\t\t\t\t\t:enableMention=\"false\"\n\t\t\t\t\t\t\t\t:enableFile=\"application.disk.enabled\"\n\t\t\t\t\t\t\t\t:autoFocus=\"application.device.type !== DeviceType.mobile\"\n\t\t\t\t\t\t\t\t:styles=\"{button: {backgroundColor: widget.common.styles.backgroundColor, iconColor: widget.common.styles.iconColor}}\"\n\t\t\t\t\t\t\t\t:listenEventInsertText=\"EventType.textarea.insertText\"\n\t\t\t\t\t\t\t\t:listenEventFocus=\"EventType.textarea.focus\"\n\t\t\t\t\t\t\t\t:listenEventBlur=\"EventType.textarea.blur\"\n\t\t\t\t\t\t\t\t@writes=\"onTextareaWrites\" \n\t\t\t\t\t\t\t\t@send=\"onTextareaSend\" \n\t\t\t\t\t\t\t\t@focus=\"onTextareaFocus\" \n\t\t\t\t\t\t\t\t@blur=\"onTextareaBlur\"\n\t\t\t\t\t\t\t\t@keyup=\"onTextareaKeyUp\" \n\t\t\t\t\t\t\t\t@edit=\"logEvent('edit message', $event)\"\n\t\t\t\t\t\t\t\t@fileSelected=\"onTextareaFileSelected\"\n\t\t\t\t\t\t\t\t@appButtonClick=\"onTextareaAppButtonClick\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"!widget.common.copyright && !isBottomLocation\" class=\"bx-livechat-nocopyright-resize-wrap\" style=\"position: relative;\">\n\t\t\t\t\t\t\t<div class=\"bx-livechat-widget-resize-handle\" @mousedown=\"onWidgetStartDrag\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<bx-livechat-form-consent @agree=\"agreeConsentWidow\" @disagree=\"disagreeConsentWidow\"/>\n\t\t\t\t\t\t<template v-if=\"widget.common.copyright\">\n\t\t\t\t\t\t\t<div class=\"bx-livechat-copyright\">\t\n\t\t\t\t\t\t\t\t<template v-if=\"widget.common.copyrightUrl\">\n\t\t\t\t\t\t\t\t\t<a class=\"bx-livechat-copyright-link\" :href=\"widget.common.copyrightUrl\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"bx-livechat-logo-name\">{{localize.BX_LIVECHAT_COPYRIGHT_TEXT}}</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"bx-livechat-logo-icon\"></span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<span class=\"bx-livechat-logo-name\">{{localize.BX_LIVECHAT_COPYRIGHT_TEXT}}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"bx-livechat-logo-icon\"></span>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<div v-if=\"!isBottomLocation\" class=\"bx-livechat-widget-resize-handle\" @mousedown=\"onWidgetStartDrag\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Body error component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nVue.component('bx-livechat-body-error',\n{\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn  Object.freeze({\n\t\t\t\tBX_LIVECHAT_ERROR_TITLE: this.$root.$bitrixMessages.BX_LIVECHAT_ERROR_TITLE,\n\t\t\t\tBX_LIVECHAT_ERROR_DESC: this.$root.$bitrixMessages.BX_LIVECHAT_ERROR_DESC\n\t\t\t});\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-livechat-body\" key=\"error-body\">\n\t\t\t<div class=\"bx-livechat-warning-window\">\n\t\t\t\t<div class=\"bx-livechat-warning-icon\"></div>\n\t\t\t\t<template v-if=\"application.error.description\"> \n\t\t\t\t\t<div class=\"bx-livechat-help-title bx-livechat-help-title-sm bx-livechat-warning-msg\" v-html=\"application.error.description\"></div>\n\t\t\t\t</template> \n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"bx-livechat-help-title bx-livechat-help-title-md bx-livechat-warning-msg\">{{localize.BX_LIVECHAT_ERROR_TITLE}}</div>\n\t\t\t\t\t<div class=\"bx-livechat-help-title bx-livechat-help-title-sm bx-livechat-warning-msg\">{{localize.BX_LIVECHAT_ERROR_DESC}}</div>\n\t\t\t\t</template> \n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","/**\n * Bitrix OpenLines widget\n * Head component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\nimport { SessionStatus, VoteType } from \"../const\";\nimport {EventType} from \"im.const\";\n\nVue.component('bx-livechat-head',\n{\n\t/**\n\t * @emits 'close'\n\t * @emits 'like'\n\t * @emits 'history'\n\t */\n\tprops:\n\t{\n\t\tisWidgetDisabled: { default: false },\n\t},\n\tmethods:\n\t{\n\t\tclose(event)\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tlike(event)\n\t\t{\n\t\t\tthis.$emit('like');\n\t\t},\n\t\thistory(event)\n\t\t{\n\t\t\tthis.$emit('history');\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tVoteType: () => VoteType,\n\n\t\tcustomBackgroundStyle(state)\n\t\t{\n\t\t\treturn state.widget.common.styles.backgroundColor? 'background-color: '+state.widget.common.styles.backgroundColor+'!important;': '';\n\t\t},\n\t\tcustomBackgroundOnlineStyle(state)\n\t\t{\n\t\t\treturn state.widget.common.styles.backgroundColor? 'border-color: '+state.widget.common.styles.backgroundColor+'!important;': '';\n\t\t},\n\t\tshowName(state)\n\t\t{\n\t\t\treturn state.widget.dialog.operator.firstName || state.widget.dialog.operator.lastName;\n\t\t},\n\t\tvoteActive(state)\n\t\t{\n\t\t\tif (\n\t\t\t\t!state.widget.common.vote.beforeFinish\n\t\t\t\t&& state.widget.dialog.sessionStatus < SessionStatus.waitClient\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!state.widget.dialog.sessionClose || state.widget.dialog.sessionClose && state.widget.dialog.userVote === VoteType.none)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (state.widget.dialog.sessionClose && state.widget.dialog.userVote !== VoteType.none)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tchatTitle(state)\n\t\t{\n\t\t\treturn state.widget.common.textMessages.bxLivechatTitle\n\t\t\t\t|| state.widget.common.configName\n\t\t\t\t|| this.localize.BX_LIVECHAT_TITLE\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('BX_LIVECHAT_', this.$root.$bitrixMessages);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\twidget: state => state.widget,\n\t\t\tapplication: state => state.application,\n\t\t})\n\t},\n\twatch:\n\t{\n\t\tshowName(value)\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$root.$emit(EventType.dialog.scrollToBottom);\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-livechat-head-wrap\">\n\t\t\t<template v-if=\"isWidgetDisabled\">\n\t\t\t\t<div class=\"bx-livechat-head\" :style=\"customBackgroundStyle\">\n\t\t\t\t\t<div class=\"bx-livechat-title\">{{chatTitle}}</div>\n\t\t\t\t\t<div class=\"bx-livechat-control-box\">\n\t\t\t\t\t\t<button v-if=\"!widget.common.pageMode\" class=\"bx-livechat-control-btn bx-livechat-control-btn-close\" :title=\"localize.BX_LIVECHAT_CLOSE_BUTTON\" @click=\"close\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\n\t\t\t</template>\n\t\t\t<template v-else-if=\"application.error.active\">\n\t\t\t\t<div class=\"bx-livechat-head\" :style=\"customBackgroundStyle\">\n\t\t\t\t\t<div class=\"bx-livechat-title\">{{chatTitle}}</div>\n\t\t\t\t\t<div class=\"bx-livechat-control-box\">\n\t\t\t\t\t\t<button v-if=\"!widget.common.pageMode\" class=\"bx-livechat-control-btn bx-livechat-control-btn-close\" :title=\"localize.BX_LIVECHAT_CLOSE_BUTTON\" @click=\"close\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"!widget.common.configId\">\n\t\t\t\t<div class=\"bx-livechat-head\" :style=\"customBackgroundStyle\">\n\t\t\t\t\t<div class=\"bx-livechat-title\">{{chatTitle}}</div>\n\t\t\t\t\t<div class=\"bx-livechat-control-box\">\n\t\t\t\t\t\t<button v-if=\"!widget.common.pageMode\" class=\"bx-livechat-control-btn bx-livechat-control-btn-close\" :title=\"localize.BX_LIVECHAT_CLOSE_BUTTON\" @click=\"close\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\t\t\t\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"bx-livechat-head\" :style=\"customBackgroundStyle\">\n\t\t\t\t\t<template v-if=\"!showName\">\n\t\t\t\t\t\t<div class=\"bx-livechat-title\">{{chatTitle}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"bx-livechat-user bx-livechat-status-online\">\n\t\t\t\t\t\t\t<template v-if=\"widget.dialog.operator.avatar\">\n\t\t\t\t\t\t\t\t<div class=\"bx-livechat-user-icon\" :style=\"'background-image: url('+encodeURI(widget.dialog.operator.avatar)+')'\">\n\t\t\t\t\t\t\t\t\t<div v-if=\"widget.dialog.operator.online\" class=\"bx-livechat-user-status\" :style=\"customBackgroundOnlineStyle\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class=\"bx-livechat-user-icon\">\n\t\t\t\t\t\t\t\t\t<div v-if=\"widget.dialog.operator.online\" class=\"bx-livechat-user-status\" :style=\"customBackgroundOnlineStyle\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-livechat-user-info\">\n\t\t\t\t\t\t\t<div class=\"bx-livechat-user-name\">{{widget.dialog.operator.firstName? widget.dialog.operator.firstName: widget.dialog.operator.name}}</div>\n\t\t\t\t\t\t\t<div class=\"bx-livechat-user-position\">{{widget.dialog.operator.workPosition? widget.dialog.operator.workPosition: localize.BX_LIVECHAT_USER}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"bx-livechat-control-box\">\n\t\t\t\t\t\t<span class=\"bx-livechat-control-box-active\" v-if=\"widget.common.dialogStart && widget.dialog.sessionId\">\n\t\t\t\t\t\t\t<button v-if=\"widget.common.vote.enable && voteActive\" :class=\"'bx-livechat-control-btn bx-livechat-control-btn-like bx-livechat-dialog-vote-'+(widget.dialog.userVote)\" :title=\"localize.BX_LIVECHAT_VOTE_BUTTON\" @click=\"like\"></button>\n\t\t\t\t\t\t\t<button class=\"bx-livechat-control-btn bx-livechat-control-btn-mail\" :title=\"localize.BX_LIVECHAT_MAIL_BUTTON_NEW\" @click=\"history\"></button>\n\t\t\t\t\t\t</span>\t\n\t\t\t\t\t\t<button v-if=\"!widget.common.pageMode\" class=\"bx-livechat-control-btn bx-livechat-control-btn-close\" :title=\"localize.BX_LIVECHAT_CLOSE_BUTTON\" @click=\"close\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Body loading component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\n\nVue.component('bx-livechat-body-loading',\n{\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn  Object.freeze({\n\t\t\t\tBX_LIVECHAT_LOADING: this.$root.$bitrixMessages.BX_LIVECHAT_LOADING\n\t\t\t});\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-livechat-loading-window\">\n\t\t\t<svg class=\"bx-livechat-loading-circular\" viewBox=\"25 25 50 50\">\n\t\t\t\t<circle class=\"bx-livechat-loading-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t\t<circle class=\"bx-livechat-loading-inner-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t</svg>\n\t\t\t<h3 class=\"bx-livechat-help-title bx-livechat-help-title-md bx-livechat-loading-msg\">{{localize.BX_LIVECHAT_LOADING}}</h3>\n\t\t</div>\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Body operators component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nVue.component('bx-livechat-body-operators',\n{\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('BX_LIVECHAT_', this.$root.$bitrixMessages);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\twidget: state => state.widget\n\t\t})\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-livechat-help-container\">\n\t\t\t<transition name=\"bx-livechat-animation-fade\">\n\t\t\t\t<h2 v-if=\"widget.common.online\" key=\"online\" class=\"bx-livechat-help-title bx-livechat-help-title-lg\">{{widget.common.textMessages.bxLivechatOnlineLine1}}<div class=\"bx-livechat-help-subtitle\">{{widget.common.textMessages.bxLivechatOnlineLine2}}</div></h2>\n\t\t\t\t<h2 v-else key=\"offline\" class=\"bx-livechat-help-title bx-livechat-help-title-sm\">{{widget.common.textMessages.bxLivechatOffline}}</h2>\n\t\t\t</transition>\t\n\t\t\t<div class=\"bx-livechat-help-user\">\n\t\t\t\t<template v-for=\"operator in widget.common.operators\">\n\t\t\t\t\t<div class=\"bx-livechat-user\" :key=\"operator.id\">\n\t\t\t\t\t\t<template v-if=\"operator.avatar\">\n\t\t\t\t\t\t\t<div class=\"bx-livechat-user-icon\" :style=\"'background-image: url('+encodeURI(operator.avatar)+')'\"></div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"bx-livechat-user-icon\"></div>\n\t\t\t\t\t\t</template>\t\n\t\t\t\t\t\t<div class=\"bx-livechat-user-info\">\n\t\t\t\t\t\t\t<div class=\"bx-livechat-user-name\">{{operator.firstName? operator.firstName: operator.name}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\t\n\t\t\t</div>\n\t\t</div>\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Body orientation disabled component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\n\nVue.component('bx-livechat-body-orientation-disabled',\n{\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn  Object.freeze({\n\t\t\t\tBX_LIVECHAT_MOBILE_ROTATE: this.$root.$bitrixMessages.BX_LIVECHAT_MOBILE_ROTATE\n\t\t\t});\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-livechat-body\" key=\"orientation-head\">\n\t\t\t<div class=\"bx-livechat-mobile-orientation-box\">\n\t\t\t\t<div class=\"bx-livechat-mobile-orientation-icon\"></div>\n\t\t\t\t<div class=\"bx-livechat-mobile-orientation-text\">{{localize.BX_LIVECHAT_MOBILE_ROTATE}}</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Form consent component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nVue.component('bx-livechat-form-consent',\n{\n\t/**\n\t * @emits 'agree' {event: object} -- 'event' - click event\n\t * @emits 'disagree' {event: object} -- 'event' - click event\n\t */\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('BX_LIVECHAT_', this.$root.$bitrixMessages);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\twidget: state => state.widget,\n\t\t})\n\t},\n\tmethods:\n\t{\n\t\tagree(event)\n\t\t{\n\t\t\tthis.$emit('agree', {event});\n\t\t},\n\t\tdisagree(event)\n\t\t{\n\t\t\tthis.$emit('disagree', {event});\n\t\t},\n\t\tonShow(element, done)\n\t\t{\n\t\t\telement.classList.add('bx-livechat-consent-window-show');\n\t\t\tdone();\n\t\t},\n\t\tonHide(element, done)\n\t\t{\n\t\t\telement.classList.remove('bx-livechat-consent-window-show');\n\t\t\telement.classList.add('bx-livechat-consent-window-close');\n\t\t\tsetTimeout(function() {\n\t\t\t\tdone();\n\t\t\t}, 400);\n\t\t},\n\t\tonKeyDown(event)\n\t\t{\n\t\t\tif (event.keyCode == 9)\n\t\t\t{\n\t\t\t\tif (event.target === this.$refs.iframe)\n\t\t\t\t{\n\t\t\t\t\tif (event.shiftKey)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.cancel.focus();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.success.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (event.target === this.$refs.success)\n\t\t\t\t{\n\t\t\t\t\tif (event.shiftKey)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.iframe.focus();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.cancel.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (event.target === this.$refs.cancel)\n\t\t\t\t{\n\t\t\t\t\tif (event.shiftKey)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.success.focus();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.iframe.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\telse if (event.keyCode == 39 || event.keyCode == 37)\n\t\t\t{\n\t\t\t\tif (event.target.nextElementSibling)\n\t\t\t\t{\n\t\t\t\t\tevent.target.nextElementSibling.focus();\n\t\t\t\t}\n\t\t\t\telse if (event.target.previousElementSibling)\n\t\t\t\t{\n\t\t\t\t\tevent.target.previousElementSibling.focus();\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t},\n\tdirectives:\n\t{\n\t\tfocus:\n\t\t{\n\t\t\tinserted(element, params)\n\t\t\t{\n\t\t\t\telement.focus();\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<transition @enter=\"onShow\" @leave=\"onHide\">\n\t\t\t<template v-if=\"widget.common.showConsent && widget.common.consentUrl\">\n\t\t\t\t<div class=\"bx-livechat-consent-window\">\n\t\t\t\t\t<div class=\"bx-livechat-consent-window-title\">{{localize.BX_LIVECHAT_CONSENT_TITLE}}</div>\n\t\t\t\t\t<div class=\"bx-livechat-consent-window-content\">\n\t\t\t\t\t\t<iframe class=\"bx-livechat-consent-window-content-iframe\" ref=\"iframe\" frameborder=\"0\" marginheight=\"0\"  marginwidth=\"0\" allowtransparency=\"allow-same-origin\" seamless=\"true\" :src=\"widget.common.consentUrl\" @keydown=\"onKeyDown\"></iframe>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class=\"bx-livechat-consent-window-btn-box\">\n\t\t\t\t\t\t<button class=\"bx-livechat-btn bx-livechat-btn-success\" ref=\"success\" @click=\"agree\" @keydown=\"onKeyDown\" v-focus>{{localize.BX_LIVECHAT_CONSENT_AGREE}}</button>\n\t\t\t\t\t\t<button class=\"bx-livechat-btn bx-livechat-btn-cancel\" ref=\"cancel\" @click=\"disagree\" @keydown=\"onKeyDown\">{{localize.BX_LIVECHAT_CONSENT_DISAGREE}}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</transition>\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Form history component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport 'ui.icons';\nimport 'ui.forms';\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\nimport {Utils} from \"im.utils\";\nimport {FormType} from \"../const\";\n\nVue.component('bx-livechat-form-history',\n{\n\tdata()\n\t{\n\t\treturn {\n\t\t\tfieldEmail: '',\n\t\t}\n\t},\n\twatch:\n\t{\n\t\tfieldEmail(value)\n\t\t{\n\t\t\tclearTimeout(this.fieldEmailTimeout);\n\t\t\tthis.fieldEmailTimeout = setTimeout(this.checkEmailField, 300);\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('BX_LIVECHAT_', this.$root.$bitrixMessages);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\twidget: state => state.widget,\n\t\t})\n\t},\n\tcreated()\n\t{\n\t\tthis.fieldEmail = '' + this.widget.user.email;\n\t},\n\tmethods:\n\t{\n\t\tformShowed()\n\t\t{\n\t\t\tif (!Utils.platform.isMobile())\n\t\t\t{\n\t\t\t\tthis.$refs.emailInput.focus();\n\t\t\t}\n\t\t},\n\t\tsendForm()\n\t\t{\n\t\t\tlet email = this.checkEmailField()? this.fieldEmail: '';\n\t\t\tif (email)\n\t\t\t{\n\t\t\t\tthis.$root.$bitrixWidget.sendForm(FormType.history, {email});\n\t\t\t}\n\n\t\t\tthis.hideForm();\n\t\t},\n\t\thideForm(event)\n\t\t{\n\t\t\tclearTimeout(this.fieldEmailTimeout);\n\t\t\tthis.$parent.hideForm();\n\t\t},\n\t\tonFieldEnterPress(event)\n\t\t{\n\t\t\tthis.sendForm();\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tcheckEmailField()\n\t\t{\n\t\t\tif (this.fieldEmail.match(/^(.*)@(.*)\\.[a-zA-Z]{2,}$/))\n\t\t\t{\n\t\t\t\tif (this.$refs.email)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.email.classList.remove('ui-ctl-danger');\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (document.activeElement !== this.$refs.emailInput)\n\t\t\t\t{\n\t\t\t\t\tif (this.$refs.email)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.email.classList.add('ui-ctl-danger');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<transition enter-active-class=\"bx-livechat-consent-window-show\" leave-active-class=\"bx-livechat-form-close\" @after-enter=\"formShowed\">\n\t\t\t<div class=\"bx-livechat-alert-box bx-livechat-form-show\" key=\"welcome\">\t\n\t\t\t\t<div class=\"bx-livechat-alert-close\" @click=\"hideForm\"></div>\n\t\t\t\t<div class=\"bx-livechat-alert-form-box\">\n\t\t\t\t\t<h4 class=\"bx-livechat-alert-title bx-livechat-alert-title-sm\">{{localize.BX_LIVECHAT_MAIL_TITLE_NEW}}</h4>\n\t\t\t\t\t<div class=\"bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg\" ref=\"email\">\n\t\t\t\t\t   <div class=\"ui-ctl-after ui-ctl-icon-mail bx-livechat-form-icon\" :title=\"localize.BX_LIVECHAT_FIELD_MAIL_TOOLTIP\"></div>\n\t\t\t\t\t   <input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :placeholder=\"localize.BX_LIVECHAT_FIELD_MAIL\" v-model=\"fieldEmail\" ref=\"emailInput\" @blur=\"checkEmailField\" @keydown.enter=\"onFieldEnterPress\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-livechat-btn-box\">\n\t\t\t\t\t\t<button class=\"bx-livechat-btn bx-livechat-btn-success\" @click=\"sendForm\">{{localize.BX_LIVECHAT_MAIL_BUTTON_NEW}}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t</transition>\t\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Form offline component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport 'ui.icons';\nimport 'ui.forms';\n\nimport {Vue} from \"ui.vue\";\nimport {Utils} from \"im.utils\";\nimport {FormType} from \"../const\";\n\nVue.cloneComponent('bx-livechat-form-offline', 'bx-livechat-form-welcome',\n{\n\tmethods:\n\t{\n\t\tformShowed()\n\t\t{\n\t\t\tif (!Utils.platform.isMobile())\n\t\t\t{\n\t\t\t\tthis.$refs.emailInput.focus();\n\t\t\t}\n\t\t},\n\t\tsendForm()\n\t\t{\n\t\t\tlet name = this.fieldName;\n\t\t\tlet email = this.checkEmailField()? this.fieldEmail: '';\n\t\t\tlet phone = this.checkPhoneField()? this.fieldPhone: '';\n\n\t\t\tif (name || email || phone)\n\t\t\t{\n\t\t\t\tthis.$root.$bitrixWidget.sendForm(FormType.offline, {name, email, phone});\n\t\t\t}\n\n\t\t\tthis.hideForm();\n\t\t},\n\t\tonFieldEnterPress(event)\n\t\t{\n\t\t\tif (event.target === this.$refs.emailInput)\n\t\t\t{\n\t\t\t\tthis.showFullForm();\n\t\t\t\tthis.$refs.phoneInput.focus();\n\t\t\t}\n\t\t\telse if (event.target === this.$refs.phoneInput)\n\t\t\t{\n\t\t\t\tthis.$refs.nameInput.focus();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.sendForm();\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tfieldName()\n\t\t{\n\t\t\tclearTimeout(this.fieldNameTimeout);\n\t\t\tthis.fieldNameTimeout = setTimeout(this.checkNameField, 300);\n\t\t},\n\t\tfieldEmail()\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\t\t\tthis.showFormTimeout = setTimeout(this.showFullForm, 1000);\n\n\t\t\tclearTimeout(this.fieldEmailTimeout);\n\t\t\tthis.fieldEmailTimeout = setTimeout(this.checkEmailField, 300);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<transition enter-active-class=\"bx-livechat-consent-window-show\" leave-active-class=\"bx-livechat-form-close\" @after-enter=\"formShowed\">\n\t\t\t<div class=\"bx-livechat-alert-box bx-livechat-form-show\" key=\"welcome\">\t\n\t\t\t\t<div class=\"bx-livechat-alert-close\" @click=\"hideForm\"></div>\n\t\t\t\t<div class=\"bx-livechat-alert-form-box\">\n\t\t\t\t\t<h4 class=\"bx-livechat-alert-title bx-livechat-alert-title-sm\">{{localize.BX_LIVECHAT_OFFLINE_TITLE}}</h4>\n\t\t\t\t\t<div class=\"bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg\" ref=\"email\">\n\t\t\t\t\t   <div class=\"ui-ctl-after ui-ctl-icon-mail bx-livechat-form-icon\" :title=\"localize.BX_LIVECHAT_FIELD_MAIL_TOOLTIP\"></div>\n\t\t\t\t\t   <input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :placeholder=\"localize.BX_LIVECHAT_FIELD_MAIL\" v-model=\"fieldEmail\" ref=\"emailInput\" @blur=\"checkEmailField\" @keydown.enter=\"onFieldEnterPress\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div :class=\"['bx-livechat-form-short', {\n\t\t\t\t\t\t'bx-livechat-form-full': isFullForm,\n\t\t\t\t\t}]\">\n\t\t\t\t\t\t<div class=\"bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg\" ref=\"phone\">\n\t\t\t\t\t\t   <div class=\"ui-ctl-after ui-ctl-icon-phone bx-livechat-form-icon\" :title=\"localize.BX_LIVECHAT_FIELD_PHONE_TOOLTIP\"></div>\n\t\t\t\t\t\t   <input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :placeholder=\"localize.BX_LIVECHAT_FIELD_PHONE\" v-model=\"fieldPhone\" ref=\"phoneInput\" @blur=\"checkPhoneField\" @keydown.enter=\"onFieldEnterPress\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-livechat-form-item ui-ctl ui-ctl-w100 ui-ctl-lg\" ref=\"name\">\n\t\t\t\t\t\t   <input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :placeholder=\"localize.BX_LIVECHAT_FIELD_NAME\" v-model=\"fieldName\" ref=\"nameInput\" @blur=\"checkNameField\" @keydown.enter=\"onFieldEnterPress\"  @keydown.tab=\"onFieldEnterPress\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-livechat-btn-box\">\n\t\t\t\t\t\t\t<button class=\"bx-livechat-btn bx-livechat-btn-success\" @click=\"sendForm\">{{localize.BX_LIVECHAT_ABOUT_SEND}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t</transition>\t\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Form vote component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\nimport {VoteType, FormType} from \"../const\";\n\nVue.component('bx-livechat-form-vote',\n{\n\tcomputed:\n\t{\n\t\tVoteType: () => VoteType,\n\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('BX_LIVECHAT_', this.$root.$bitrixMessages);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\twidget: state => state.widget,\n\t\t})\n\t},\n\tmethods: {\n\t\tuserVote(vote)\n\t\t{\n\t\t\tthis.$store.commit('widget/common', {showForm: FormType.none});\n\t\t\tthis.$store.commit('widget/dialog', {userVote: vote});\n\n\t\t\tthis.$root.$bitrixWidget.sendDialogVote(vote);\n\t\t},\n\t\thideForm(event)\n\t\t{\n\t\t\tthis.$parent.hideForm();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<transition enter-active-class=\"bx-livechat-consent-window-show\" leave-active-class=\"bx-livechat-form-close\">\n\t\t\t<div class=\"bx-livechat-alert-box bx-livechat-form-rate-show\" key=\"vote\">\n\t\t\t\t<div class=\"bx-livechat-alert-close\" @click=\"hideForm\"></div>\n\t\t\t\t<div class=\"bx-livechat-alert-rate-box\">\n\t\t\t\t\t<h4 class=\"bx-livechat-alert-title bx-livechat-alert-title-mdl\">{{widget.common.vote.messageText}}</h4>\n\t\t\t\t\t<div class=\"bx-livechat-btn-box\">\n\t\t\t\t\t\t<button class=\"bx-livechat-btn bx-livechat-btn-like\" @click=\"userVote(VoteType.like)\" :title=\"widget.common.vote.messageLike\"></button>\n\t\t\t\t\t\t<button class=\"bx-livechat-btn bx-livechat-btn-dislike\" @click=\"userVote(VoteType.dislike)\" :title=\"widget.common.vote.messageDislike\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\t\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Form welcome component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport 'ui.icons';\nimport 'ui.forms';\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\nimport {Utils} from \"im.utils\";\nimport {FormType} from \"../const\";\n\nVue.component('bx-livechat-form-welcome',\n{\n\tdata()\n\t{\n\t\treturn {\n\t\t\tfieldName: '',\n\t\t\tfieldEmail: '',\n\t\t\tfieldPhone: '',\n\t\t\tisFullForm: Utils.platform.isMobile()\n\t\t}\n\t},\n\twatch:\n\t{\n\t\tfieldName()\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\t\t\tthis.showFormTimeout = setTimeout(this.showFullForm, 1000);\n\n\t\t\tclearTimeout(this.fieldNameTimeout);\n\t\t\tthis.fieldNameTimeout = setTimeout(this.checkNameField, 300);\n\t\t},\n\t\tfieldEmail(value)\n\t\t{\n\t\t\tclearTimeout(this.fieldEmailTimeout);\n\t\t\tthis.fieldEmailTimeout = setTimeout(this.checkEmailField, 300);\n\t\t},\n\t\tfieldPhone(value)\n\t\t{\n\t\t\tclearTimeout(this.fieldPhoneTimeout);\n\t\t\tthis.fieldPhoneTimeout = setTimeout(this.checkPhoneField, 300);\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('BX_LIVECHAT_', this.$root.$bitrixMessages);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\twidget: state => state.widget,\n\t\t})\n\t},\n\tcreated()\n\t{\n\t\tthis.fieldName = '' + this.widget.user.name;\n\t\tthis.fieldEmail = '' + this.widget.user.email;\n\t\tthis.fieldPhone = '' + this.widget.user.phone;\n\t},\n\tmethods:\n\t{\n\t\tformShowed()\n\t\t{\n\t\t\tif (!Utils.platform.isMobile())\n\t\t\t{\n\t\t\t\tthis.$refs.nameInput.focus();\n\t\t\t}\n\t\t},\n\t\tshowFullForm()\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\t\t\tthis.isFullForm = true;\n\t\t},\n\t\tsendForm()\n\t\t{\n\t\t\tlet name = this.fieldName;\n\t\t\tlet email = this.checkEmailField()? this.fieldEmail: '';\n\t\t\tlet phone = this.checkPhoneField()? this.fieldPhone: '';\n\n\t\t\tif (name || email || phone)\n\t\t\t{\n\t\t\t\tthis.$root.$bitrixWidget.sendForm(FormType.welcome, {name, email, phone});\n\t\t\t}\n\n\t\t\tthis.hideForm();\n\t\t},\n\t\thideForm(event)\n\t\t{\n\t\t\tclearTimeout(this.showFormTimeout);\n\t\t\tclearTimeout(this.fieldNameTimeout);\n\t\t\tclearTimeout(this.fieldEmailTimeout);\n\t\t\tclearTimeout(this.fieldPhoneTimeout);\n\n\t\t\tthis.$parent.hideForm();\n\t\t},\n\t\tonFieldEnterPress(event)\n\t\t{\n\t\t\tif (event.target === this.$refs.nameInput)\n\t\t\t{\n\t\t\t\tthis.showFullForm();\n\t\t\t\tthis.$refs.emailInput.focus();\n\t\t\t}\n\t\t\telse if (event.target === this.$refs.emailInput)\n\t\t\t{\n\t\t\t\tthis.$refs.phoneInput.focus();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.sendForm();\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tcheckNameField()\n\t\t{\n\t\t\tif (this.fieldName.length > 0)\n\t\t\t{\n\t\t\t\tif (this.$refs.name)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.name.classList.remove('ui-ctl-danger');\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (document.activeElement !== this.$refs.nameInput)\n\t\t\t\t{\n\t\t\t\t\tif (this.$refs.name)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.name.classList.add('ui-ctl-danger');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tcheckEmailField()\n\t\t{\n\t\t\tif (this.fieldEmail.match(/^(.*)@(.*)\\.[a-zA-Z]{2,}$/))\n\t\t\t{\n\t\t\t\tif (this.$refs.email)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.email.classList.remove('ui-ctl-danger');\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (document.activeElement !== this.$refs.emailInput)\n\t\t\t\t{\n\t\t\t\t\tif (this.$refs.email)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.email.classList.add('ui-ctl-danger');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tcheckPhoneField()\n\t\t{\n\t\t\tif (this.fieldPhone.match(/^(\\s*)?(\\+)?([- _():=+]?\\d[- _():=+]?){10,14}(\\s*)?$/))\n\t\t\t{\n\t\t\t\tif (this.$refs.phone)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.phone.classList.remove('ui-ctl-danger');\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (document.activeElement !== this.$refs.phoneInput)\n\t\t\t\t{\n\t\t\t\t\tif (this.$refs.phone)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.phone.classList.add('ui-ctl-danger');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<transition enter-active-class=\"bx-livechat-consent-window-show\" leave-active-class=\"bx-livechat-form-close\" @after-enter=\"formShowed\">\n\t\t\t<div class=\"bx-livechat-alert-box bx-livechat-form-show\" key=\"welcome\">\t\n\t\t\t\t<div class=\"bx-livechat-alert-close\" @click=\"hideForm\"></div>\n\t\t\t\t<div class=\"bx-livechat-alert-form-box\">\n\t\t\t\t\t<h4 class=\"bx-livechat-alert-title bx-livechat-alert-title-sm\">{{localize.BX_LIVECHAT_ABOUT_TITLE}}</h4>\n\t\t\t\t\t<div class=\"bx-livechat-form-item ui-ctl ui-ctl-w100 ui-ctl-lg\" ref=\"name\">\n\t\t\t\t\t   <input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :placeholder=\"localize.BX_LIVECHAT_FIELD_NAME\" v-model=\"fieldName\" ref=\"nameInput\" @blur=\"checkNameField\" @keydown.enter=\"onFieldEnterPress\"  @keydown.tab=\"onFieldEnterPress\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div :class=\"['bx-livechat-form-short', {\n\t\t\t\t\t\t'bx-livechat-form-full': isFullForm,\n\t\t\t\t\t}]\">\n\t\t\t\t\t\t<div class=\"bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg\" ref=\"email\">\n\t\t\t\t\t\t   <div class=\"ui-ctl-after ui-ctl-icon-mail bx-livechat-form-icon\" :title=\"localize.BX_LIVECHAT_FIELD_MAIL_TOOLTIP\"></div>\n\t\t\t\t\t\t   <input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :placeholder=\"localize.BX_LIVECHAT_FIELD_MAIL\" v-model=\"fieldEmail\" ref=\"emailInput\" @blur=\"checkEmailField\" @keydown.enter=\"onFieldEnterPress\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-livechat-form-item ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-lg\" ref=\"phone\">\n\t\t\t\t\t\t   <div class=\"ui-ctl-after ui-ctl-icon-phone bx-livechat-form-icon\" :title=\"localize.BX_LIVECHAT_FIELD_PHONE_TOOLTIP\"></div>\n\t\t\t\t\t\t   <input type=\"text\" class=\"ui-ctl-element ui-ctl-textbox\" :placeholder=\"localize.BX_LIVECHAT_FIELD_PHONE\" v-model=\"fieldPhone\" ref=\"phoneInput\" @blur=\"checkPhoneField\" @keydown.enter=\"onFieldEnterPress\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-livechat-btn-box\">\n\t\t\t\t\t\t\t<button class=\"bx-livechat-btn bx-livechat-btn-success\" @click=\"sendForm\">{{localize.BX_LIVECHAT_ABOUT_SEND}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t</transition>\t\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Smiles component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\n\nVue.cloneComponent('bx-livechat-smiles', 'bx-smiles',\n{\n\tmethods:\n\t{\n\t\thideForm(event)\n\t\t{\n\t\t\tthis.$parent.hideForm();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<transition enter-active-class=\"bx-livechat-consent-window-show\" leave-active-class=\"bx-livechat-form-close\">\n\t\t\t<div class=\"bx-livechat-alert-box bx-livechat-alert-box-zero-padding bx-livechat-form-show\" key=\"vote\">\n\t\t\t\t<div class=\"bx-livechat-alert-close\" @click=\"hideForm\"></div>\n\t\t\t\t<div class=\"bx-livechat-alert-smiles-box\">\n\t\t\t\t\t#PARENT_TEMPLATE#\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t`\n});","/**\n * Bitrix OpenLines widget\n * Footer component (Vue component)\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nVue.component('bx-livechat-footer',\n{\n\tcomputed:\n\t{\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('BX_LIVECHAT_COPYRIGHT_', this.$root.$bitrixMessages);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\twidget: state => state.widget\n\t\t})\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-livechat-copyright\">\t\n\t\t\t<template v-if=\"widget.common.copyrightUrl\">\n\t\t\t\t<a :href=\"widget.common.copyrightUrl\" target=\"_blank\">\n\t\t\t\t\t<span class=\"bx-livechat-logo-name\">{{localize.BX_LIVECHAT_COPYRIGHT_TEXT}}</span>\n\t\t\t\t\t<span class=\"bx-livechat-logo-icon\"></span>\n\t\t\t\t</a>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<span class=\"bx-livechat-logo-name\">{{localize.BX_LIVECHAT_COPYRIGHT_TEXT}}</span>\n\t\t\t\t<span class=\"bx-livechat-logo-icon\"></span>\n\t\t\t</template>\n\t\t</div>\n\t`\n});\n","/**\n * Bitrix OpenLines widget\n * Widget component & controller\n *\n * @package bitrix\n * @subpackage imopenlines\n * @copyright 2001-2019 Bitrix\n */\n\n// core\n\nimport 'main.polyfill.customevent';\n\n// vue components\nimport 'pull.components.status';\nimport 'ui.vue.components.smiles';\nimport 'im.component.dialog';\nimport 'im.component.textarea';\nimport 'im.component.quotepanel';\nimport 'imopenlines.component.message';\nimport 'imopenlines.component.form';\n\n// widget files\nimport \"./widget.css\";\nimport {VoteType, LocationStyle, SubscriptionType} from \"./const\";\n\n// widget utils\nimport {Cookie} from \"./utils/cookie\";\nimport {WidgetPublicManager} from \"./public\";\n\n// widget components\n\nimport \"./component/bx-livechat\";\nimport \"./component/bx-livechat-body-error\";\nimport \"./component/bx-livechat-body-head\";\nimport \"./component/bx-livechat-body-loading\";\nimport \"./component/bx-livechat-body-operators\";\nimport \"./component/bx-livechat-body-orientation-disabled\";\nimport \"./component/bx-livechat-form-consent\";\nimport \"./component/bx-livechat-form-history\";\nimport \"./component/bx-livechat-form-offline\";\nimport \"./component/bx-livechat-form-vote\";\nimport \"./component/bx-livechat-form-welcome\";\nimport \"./component/bx-livechat-smiles\";\nimport \"./component/bx-livechat-footer\";\n\n\nBX.LiveChatWidget = WidgetPublicManager;\nBX.LiveChatWidget.VoteType = VoteType;\nBX.LiveChatWidget.SubscriptionType = SubscriptionType;\nBX.LiveChatWidget.LocationStyle = LocationStyle;\nBX.LiveChatWidget.Cookie = Cookie;\n\nwindow.dispatchEvent(new CustomEvent('onBitrixLiveChatSourceLoaded', {detail: {}}));"],"names":["GetObjectValues","source","destination","value","hasOwnProperty","push","VoteType","Object","freeze","none","like","dislike","LanguageType","russian","ukraine","world","FormType","smile","consent","welcome","offline","history","LocationType","topLeft","topMiddle","topBottom","bottomLeft","bottomMiddle","bottomRight","LocationStyle","SubscriptionType","configLoaded","widgetOpen","widgetClose","sessionStart","sessionOperatorChange","sessionFinish","operatorMessage","userForm","userMessage","userFile","userVote","every","SubscriptionTypeCheck","RestMethod","widgetUserRegister","widgetConfigGet","widgetDialogGet","widgetUserGet","widgetUserConsentApply","widgetVoteSend","widgetFormSend","pullServerTime","pullConfigGet","RestMethodCheck","RestAuth","guest","SessionStatus","new","skip","answer","client","clientAfterOperator","operator","waitClient","close","spam","duplicate","silentlyClose","Cookie","get","siteId","name","cookieName","navigator","cookieEnabled","result","document","cookie","match","RegExp","replace","decodeURIComponent","LocalStorage","isEnabled","undefined","window","BX","LiveChatCookie","set","options","expires","currentDate","Date","setTime","getTime","toUTCString","encodeURIComponent","updatedCookie","propertyName","propertyValue","WidgetModel","common","configId","configName","host","getVariable","location","protocol","pageMode","copyright","copyrightUrl","styles","backgroundColor","iconColor","vote","enable","beforeFinish","messageText","messageLike","messageDislike","textMessages","bxLivechatOnlineLine1","bxLivechatOnlineLine2","bxLivechatOffline","bxLivechatTitle","online","operators","connectors","showForm","showed","reopen","dragged","textareaHeight","widgetHeight","widgetWidth","showConsent","consentUrl","dialogStart","watchTyping","dialog","sessionId","sessionClose","sessionStatus","userConsent","operatorChatId","id","firstName","lastName","workPosition","avatar","user","hash","email","phone","www","gender","position","state","payload","Utils","types","isPlainObject","device","isMobile","Array","isSaveNeeded","saveState","toString","startsWith","path","show","commit","VuexBuilderModel","WidgetRestClient","params","queryAuthRestore","setAuthId","restClient","RestClient","endpoint","queryParams","cors","authId","customAuthId","livechat_auth_id","console","error","livechat_custom_auth_id","method","callback","sendCallback","logTag","getLogTrackingParams","promise","Promise","callMethod","then","fulfill","catch","ex","warn","error_description","reject","calls","bHaltOnError","resultCallback","callBatch","WidgetRestAnswerHandler","props","widget","data","store","disk","addLocalize","serverVariables","getSiteId","previousData","messages","collection","controller","getChatId","chatId","dialogId","fields","entityType","type","dispatch","userId","diskFolderId","length","isDialogStart","messageId","message","messagesQueue","filter","el","sendEvent","text","BaseRestAnswerHandler","WidgetImPullCommandHandler","extra","command","senderId","getUserId","onceShowed","open","WidgetImopenlinesPullCommandHandler","Widget","ready","widgetDataRequested","code","language","buttonInstance","useBitrixLocalize","placeholder","getElementById","inited","initEventFired","userRegisterData","customData","localize","subscribers","dateFormat","configRequestXhr","rootNode","createElement","body","firstChild","insertBefore","appendChild","template","addEventListener","orientation","getOrientation","application","DeviceType","mobile","DeviceOrientation","horizontal","activeElement","blur","widgetVariables","getHost","getLocalize","ApplicationController","applicationVariables","languageId","desktop","messageLimit","getDefaultMessageLimit","saveException","messageExtraCount","cacheDialogues","browser","isIe","VuexBuilder","addModel","create","setVariables","ApplicationModel","DialoguesModel","useDatabase","MessagesModel","FilesModel","default","UsersModel","setDatabaseConfig","DatabaseType","localStorage","build","storeCollector","builder","initRestClient","setStore","setRestClient","setPrepareFilesBeforeSaveFunction","prepareFileData","bind","imRestAnswer","ImRestAnswerHandler","widgetRestAnswer","dispatchEvent","CustomEvent","detail","widgetCode","widgetHost","callStartFlag","start","callOpenFlag","isUserRegistered","getUserHash","isReady","getUserHashCookie","requestData","fireInitEvent","isConfigDataLoaded","xhr","clearError","executeRestAnswer","setError","requestDataSend","abort","query","config_id","getConfigId","trace_data","getCrmTraceData","custom_data","getCustomData","ImRestMethodHandler","imChatGet","ImRestMethod","dialog_id","imDialogMessagesGetInit","imDialogMessagesGet","chat_id","limit","getRequestMessageLimit","convert_text","getUserRegisterFields","isUserAgreeConsent","consent_url","href","response","configGet","userGetResult","chatGetResult","dialogGetResult","dialogMessagesGetResult","getDialogId","userRegisterResult","timeShift","serverTimeResult","Math","floor","config","pullConfigResult","server","startPullClient","processSendMessages","getDialogData","execute","files","isArray","map","file","md5","urlParam","urlPreview","urlShow","urlDownload","platform","isIos","version","getIosVersion","pullClient","isConnected","scheduleReconnect","resolve","PullClient","serverEnabled","configTimestamp","config_timestamp","skipCheckRevision","getPublicListMethod","subscribe","ImPullCommandHandler","Status","eventStatusInteraction","pullConnectedFirstTime","status","PullStatus","Online","$root","$bitrixPullClient","$emit","skipReconnectToLastSession","stop","CloseReasons","MANUAL","restart","pullRequestMessage","getDialogUnread","readMessage","Offline","innerHTML","widgetContext","Vue","beforeCreate","$bitrixWidget","$bitrixController","$bitrixRestClient","$bitrixMessages","destroyed","templateAttached","setTemplateEngine","$destroy","mutateComponent","Logger","isUnreadMessagesLoaded","sendMessage","FILE_ID","authorId","sending","fileInput","size","fileType","addMessage","extension","split","splice","image","FileStatus","upload","progress","authorName","getCurrentUser","fileId","element","find","forEach","sendMessageWithFile","stopWriting","quiteId","getters","quoteMessage","newMessage","join","quoteMessageClear","imMessageAdd","timMessageType","getDiskFolderId","imDiskFileUpload","NAME","fileContent","generateUniqueName","imDiskFolderGet","fileError","diskFolderGet","diskId","diskFileUpload","ID","wait","fileCommit","uploadId","imDiskFileCommit","retry","upload_id","template_id","file_template_id","lastId","EventType","requestHistoryResult","count","requestUnreadResult","imDialogRead","message_id","imDialogMessagesGetUnread","first_id","dialogMessageUnread","firstMessageId","setSendingMessageFlag","quoteId","reaction","reactMessage","action","botId","imMessageCommand","getSessionId","info","toUpperCase","form","isSessionActive","requestWidgetData","clearTimeout","openTimeout","openFromButton","wm","showById","checkBrowserVersion","BX_LIVECHAT_OLD_BROWSER","versionCompare","alert","BX_LIVECHAT_OLD_VUE","BX_LIVECHAT_OLD_VUE_DEV","isWidgetDataRequested","attachTemplate","onWidgetClose","detachTemplate","traceData","getTrace","b24Tracker","MESSAGE","BX_LIVECHAT_EXTRA_SITE","JSON","stringify","dialogues","userHash","validUserFields","field","indexOf","setNewAuthToken","authToken","clearModelState","concat","description","localizeDescription","endsWith","active","includes","phrases","phrase","WidgetPublicManager","developerInfo","__privateMethods__","__createLegacyMethods","showNotification","getUserData","setUserRegisterData","setCustomData","mutateTemplateComponent","LiveChat","sourceHref","sourceDomain","hostname","port","openLiveChat","closeLiveChat","eventName","handler","event","origin","setCookie","getCookie","BxLiveChatInit","firstMessage","BxLiveChatLoader","component","viewPortMetaSiteNode","viewPortMetaWidgetNode","storedMessage","storedFile","widgetMinimumHeight","widgetMinimumWidth","widgetBaseHeight","widgetMargin","widgetAvailableHeight","widgetAvailableWidth","widgetCurrentHeight","widgetCurrentWidth","widgetDrag","textareaFocused","textareaDrag","textareaMinimumHeight","textareaMaximumHeight","created","onCreated","onWindowKeyDown","getAvailableSpaceFunc","throttle","getAvailableSpace","$on","onRequestShowForm","beforeDestroy","removeEventListener","$off","onTextareaDragEventRemove","computed","textareaHeightStyle","flex","textAreaBottomMargin","isBottomLocation","marginBottom","widgetHeightStyle","max","widgetWidthStyle","userSelectStyle","isLeftLocation","getFilteredPhrases","widgetMobileDisabled","userAgent","screen","availHeight","widgetClassName","className","isSafari","isMac","isDarkColor","showMessageDialog","messageCollection","quotePanelData","title","color","$store","textConverted","BX_LIVECHAT_FILE_MESSAGE","Vuex","mapState","watch","log","methods","onBeforeClose","bottomPosition","$refs","widgetWrapper","getBoundingClientRect","bottom","widgetBottomMargin","innerHeight","topPosition","top","innerWidth","showLikeForm","showFormTimeout","showWelcomeForm","showOfflineForm","showHistoryForm","hideForm","showConsentWidow","agreeConsentWidow","sendConsentDecision","onTextareaSend","focus","onTextareaFileSelected","textarea","disagreeConsentWidow","insertText","logEvent","from","head","getElementsByTagName","removeChild","contentWidth","offsetWidth","setAttribute","classList","add","isSafariBased","setTimeout","remove","onAfterClose","delayed","onDialogRequestHistory","getDialogHistory","onDialogRequestUnread","onDialogMessageClickByUserName","onDialogMessageClickByUploadCancel","cancelUploadFile","onDialogMessageClickByKeyboardButton","execMessageKeyboardCommand","onDialogMessageClickByCommand","onDialogMessageMenuClick","onDialogMessageRetryClick","retrySendMessage","onDialogReadMessage","onDialogQuoteMessage","onDialogMessageReactionSet","onDialogClick","onTextareaKeyUp","isPublishingEnabled","infoString","onTextareaWrites","startWriting","onTextareaFocus","onTextareaFocusScrollTimeout","onWindowScroll","onTextareaBlur","$nextTick","scrollToBottom","force","onTextareaStartDrag","changedTouches","textareaDragCursorStartPoint","clientY","textareaDragHeightStartPoint","onTextareaDragEventAdd","onTextareaContinueDrag","textareaDragCursorControlPoint","min","onTextareaStopDrag","maxFileSize","BX_LIVECHAT_FILE_SIZE_EXCEEDED","round","uploadFile","onTextareaAppButtonClick","appId","onPullRequestConfig","recoverPullConnection","onSmilesSelectSmile","onSmilesSelectSet","onQuotePanelClose","onWidgetStartDrag","widgetDragCursorStartPointY","widgetDragCursorStartPointX","clientX","widgetDragHeightStartPoint","widgetDragWidthStartPoint","onWidgetDragEventAdd","onWidgetContinueDrag","widgetDragCursorControlPointY","widgetDragCursorControlPointX","onWidgetStopDrag","onWidgetDragEventRemove","keyCode","preventDefault","stopPropagation","onWindowScrollTimeout","BX_LIVECHAT_ERROR_TITLE","BX_LIVECHAT_ERROR_DESC","isWidgetDisabled","customBackgroundStyle","customBackgroundOnlineStyle","showName","voteActive","chatTitle","BX_LIVECHAT_TITLE","BX_LIVECHAT_LOADING","BX_LIVECHAT_MOBILE_ROTATE","agree","disagree","onShow","done","onHide","onKeyDown","target","iframe","shiftKey","cancel","success","nextElementSibling","previousElementSibling","directives","inserted","fieldEmail","fieldEmailTimeout","checkEmailField","formShowed","emailInput","sendForm","$parent","onFieldEnterPress","cloneComponent","fieldName","checkPhoneField","fieldPhone","showFullForm","phoneInput","nameInput","fieldNameTimeout","checkNameField","sendDialogVote","isFullForm","fieldPhoneTimeout","LiveChatWidget"],"mappings":";;;CAAA;;;;;;;;CASA,SAASA,eAAT,CAAyBC,MAAzB,EACA;CACC,MAAMC,WAAW,GAAG,EAApB;;CACA,OAAK,IAAIC,KAAT,IAAkBF,MAAlB,EACA;CACC,QAAIA,MAAM,CAACG,cAAP,CAAsBD,KAAtB,CAAJ,EACA;CACCD,MAAAA,WAAW,CAACG,IAAZ,CAAiBJ,MAAM,CAACE,KAAD,CAAvB;CACA;CACD;;CACD,SAAOD,WAAP;CACA;CAED;;;AAEA,CAAO,IAAMI,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAc;CACrCC,EAAAA,IAAI,EAAE,MAD+B;CAErCC,EAAAA,IAAI,EAAE,MAF+B;CAGrCC,EAAAA,OAAO,EAAE;CAH4B,CAAd,CAAjB;AAMP,CAAO,IAAMC,YAAY,GAAGL,MAAM,CAACC,MAAP,CAAc;CACzCK,EAAAA,OAAO,EAAE,IADgC;CAEzCC,EAAAA,OAAO,EAAE,IAFgC;CAGzCC,EAAAA,KAAK,EAAE;CAHkC,CAAd,CAArB;AAMP,CAAO,IAAMC,QAAQ,GAAGT,MAAM,CAACC,MAAP,CAAc;CACrCC,EAAAA,IAAI,EAAE,MAD+B;CAErCC,EAAAA,IAAI,EAAE,MAF+B;CAGrCO,EAAAA,KAAK,EAAE,OAH8B;CAIrCC,EAAAA,OAAO,EAAE,SAJ4B;CAKrCC,EAAAA,OAAO,EAAE,SAL4B;CAMrCC,EAAAA,OAAO,EAAE,SAN4B;CAOrCC,EAAAA,OAAO,EAAE;CAP4B,CAAd,CAAjB;AAUP,CAAO,IAAMC,YAAY,GAAGf,MAAM,CAACC,MAAP,CAAc;CACzCe,EAAAA,OAAO,EAAE,CADgC;CAEzCC,EAAAA,SAAS,EAAE,CAF8B;CAGzCC,EAAAA,SAAS,EAAE,CAH8B;CAIzCC,EAAAA,UAAU,EAAE,CAJ6B;CAKzCC,EAAAA,YAAY,EAAE,CAL2B;CAMzCC,EAAAA,WAAW,EAAE;CAN4B,CAAd,CAArB;AASP,CAAO,IAAMC,aAAa,GAAGtB,MAAM,CAACC,MAAP,CAAc;CAC1C,KAAG,UADuC;CAE1C,KAAG,YAFuC;CAG1C,KAAG,WAHuC;CAI1C,KAAG,aAJuC;CAK1C,KAAG,eALuC;CAM1C,KAAG;CANuC,CAAd,CAAtB;AASP,CAAO,IAAMsB,gBAAgB,GAAGvB,MAAM,CAACC,MAAP,CAAc;CAC7CuB,EAAAA,YAAY,EAAE,cAD+B;CAE7CC,EAAAA,UAAU,EAAE,YAFiC;CAG7CC,EAAAA,WAAW,EAAE,aAHgC;CAI7CC,EAAAA,YAAY,EAAE,cAJ+B;CAK7CC,EAAAA,qBAAqB,EAAE,uBALsB;CAM7CC,EAAAA,aAAa,EAAE,eAN8B;CAO7CC,EAAAA,eAAe,EAAE,iBAP4B;CAQ7CC,EAAAA,QAAQ,EAAE,UARmC;CAS7CC,EAAAA,WAAW,EAAE,aATgC;CAU7CC,EAAAA,QAAQ,EAAE,UAVmC;CAW7CC,EAAAA,QAAQ,EAAE,UAXmC;CAY7CC,EAAAA,KAAK,EAAE;CAZsC,CAAd,CAAzB;AAcP,CAAO,IAAMC,qBAAqB,GAAG3C,eAAe,CAAC8B,gBAAD,CAA7C;AAEP,CAAO,IAAMc,UAAU,GAAGrC,MAAM,CAACC,MAAP,CAAc;CACvCqC,EAAAA,kBAAkB,EAAE,kCADmB;CAEvCC,EAAAA,eAAe,EAAE,+BAFsB;CAGvCC,EAAAA,eAAe,EAAE,+BAHsB;CAIvCC,EAAAA,aAAa,EAAE,6BAJwB;CAKvCC,EAAAA,sBAAsB,EAAE,uCALe;CAMvCC,EAAAA,cAAc,EAAE,8BANuB;CAOvCC,EAAAA,cAAc,EAAE,8BAPuB;CASvCC,EAAAA,cAAc,EAAE,aATuB;CAUvCC,EAAAA,aAAa,EAAE;CAVwB,CAAd,CAAnB;AAYP,CAAO,IAAMC,eAAe,GAAGtD,eAAe,CAAC4C,UAAD,CAAvC;AAEP,CAAO,IAAMW,QAAQ,GAAGhD,MAAM,CAACC,MAAP,CAAc;CACrCgD,EAAAA,KAAK,EAAE;CAD8B,CAAd,CAAjB;AAIP,CAAO,IAAMC,aAAa,GAAGlD,MAAM,CAACC,MAAP,CAAc;CAC1CkD,EAAAA,GAAG,EAAE,CADqC;CAE1CC,EAAAA,IAAI,EAAE,CAFoC;CAG1CC,EAAAA,MAAM,EAAE,EAHkC;CAI1CC,EAAAA,MAAM,EAAE,EAJkC;CAK1CC,EAAAA,mBAAmB,EAAE,EALqB;CAM1CC,EAAAA,QAAQ,EAAE,EANgC;CAO1CC,EAAAA,UAAU,EAAE,EAP8B;CAQ1CC,EAAAA,KAAK,EAAE,EARmC;CAS1CC,EAAAA,IAAI,EAAE,EAToC;CAU1CC,EAAAA,SAAS,EAAE,EAV+B;CAW1CC,EAAAA,aAAa,EAAE;CAX2B,CAAd,CAAtB;;CClGP;;;;;;;;AASA,CAEO,IAAMC,MAAM,GACnB;CACCC,EAAAA,GADD,eACKC,MADL,EACaC,IADb,EAEC;CACC,QAAIC,UAAU,GAAGF,MAAM,GAAEA,MAAM,GAAC,GAAP,GAAWC,IAAb,GAAmBA,IAA1C;;CAEA,QAAIE,SAAS,CAACC,aAAd,EACA;CACC,UAAIC,MAAM,GAAGC,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsB,IAAIC,MAAJ,CAClC,aAAaP,UAAU,CAACQ,OAAX,CAAmB,0BAAnB,EAA+C,MAA/C,CAAb,GAAsE,UADpC,CAAtB,CAAb;;CAIA,UAAIL,MAAJ,EACA;CACC,eAAOM,kBAAkB,CAACN,MAAM,CAAC,CAAD,CAAP,CAAzB;CACA;CACD;;CAED,QAAIO,kCAAY,CAACC,SAAb,EAAJ,EACA;CACC,UAAIR,OAAM,GAAGO,kCAAY,CAACb,GAAb,CAAiBC,MAAjB,EAAyB,CAAzB,EAA4BC,IAA5B,EAAkCa,SAAlC,CAAb;;CACA,UAAI,OAAOT,OAAP,KAAkB,WAAtB,EACA;CACC,eAAOA,OAAP;CACA;CACD;;CAED,QAAI,OAAOU,MAAM,CAACC,EAAP,CAAUC,cAAjB,KAAoC,WAAxC,EACA;CACCF,MAAAA,MAAM,CAACC,EAAP,CAAUC,cAAV,GAA2B,EAA3B;CACA;;CAED,WAAOF,MAAM,CAACC,EAAP,CAAUC,cAAV,CAAyBf,UAAzB,CAAP;CACA,GAhCF;CAiCCgB,EAAAA,GAjCD,eAiCKlB,MAjCL,EAiCaC,IAjCb,EAiCmBrE,KAjCnB,EAiC0BuF,OAjC1B,EAkCC;CACCA,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;CAEA,QAAIC,OAAO,GAAGD,OAAO,CAACC,OAAtB;;CACA,QAAI,OAAOA,OAAP,IAAmB,QAAnB,IAA+BA,OAAnC,EACA;CACC,UAAIC,WAAW,GAAG,IAAIC,IAAJ,EAAlB;CACAD,MAAAA,WAAW,CAACE,OAAZ,CAAoBF,WAAW,CAACG,OAAZ,KAAwBJ,OAAO,GAAG,IAAtD;CACAA,MAAAA,OAAO,GAAGD,OAAO,CAACC,OAAR,GAAkBC,WAA5B;CACA;;CAED,QAAID,OAAO,IAAIA,OAAO,CAACK,WAAvB,EACA;CACCN,MAAAA,OAAO,CAACC,OAAR,GAAkBA,OAAO,CAACK,WAAR,EAAlB;CACA;;CAED7F,IAAAA,KAAK,GAAG8F,kBAAkB,CAAC9F,KAAD,CAA1B;CAEA,QAAIsE,UAAU,GAAGF,MAAM,GAAEA,MAAM,GAAC,GAAP,GAAWC,IAAb,GAAmBA,IAA1C;CACA,QAAI0B,aAAa,GAAGzB,UAAU,GAAG,GAAb,GAAmBtE,KAAvC;;CAEA,SAAK,IAAIgG,YAAT,IAAyBT,OAAzB,EACA;CACC,UAAI,CAACA,OAAO,CAACtF,cAAR,CAAuB+F,YAAvB,CAAL,EACA;CACC;CACA;;CACDD,MAAAA,aAAa,IAAI,OAAOC,YAAxB;CAEA,UAAIC,aAAa,GAAGV,OAAO,CAACS,YAAD,CAA3B;;CACA,UAAIC,aAAa,KAAK,IAAtB,EACA;CACCF,QAAAA,aAAa,IAAI,MAAME,aAAvB;CACA;CACD;;CAEDvB,IAAAA,QAAQ,CAACC,MAAT,GAAkBoB,aAAlB;;CAEA,QAAI,OAAOZ,MAAM,CAACC,EAAP,CAAUC,cAAjB,KAAoC,WAAxC,EACA;CACCD,MAAAA,EAAE,CAACC,cAAH,GAAoB,EAApB;CACA;;CAEDF,IAAAA,MAAM,CAACC,EAAP,CAAUC,cAAV,CAAyBf,UAAzB,IAAuCtE,KAAvC;CACAgF,IAAAA,kCAAY,CAACM,GAAb,CAAiBlB,MAAjB,EAAyB,CAAzB,EAA4BC,IAA5B,EAAkCrE,KAAlC;CAEA,WAAO,IAAP;CACA;CAjFF,CADO;;CCXP;;;;;;;;AASA,KAMakG,WAAb;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;;CAEC;;;CAFD,8BAMC;CACC,aAAO,QAAP;CACA;CARF;CAAA;CAAA,+BAWC;CACC,aAAO;CACNC,QAAAA,MAAM,EACN;CACCC,UAAAA,QAAQ,EAAE,CADX;CAECC,UAAAA,UAAU,EAAE,EAFb;CAGCC,UAAAA,IAAI,EAAE,KAAKC,WAAL,CAAiB,aAAjB,EAAgCC,QAAQ,CAACC,QAAT,GAAkB,IAAlB,GAAuBD,QAAQ,CAACF,IAAhE,CAHP;CAICI,UAAAA,QAAQ,EAAE,KAAKH,WAAL,CAAiB,iBAAjB,EAAoC,KAApC,CAJX;CAKCI,UAAAA,SAAS,EAAE,KAAKJ,WAAL,CAAiB,kBAAjB,EAAqC,IAArC,CALZ;CAMCK,UAAAA,YAAY,EAAE,KAAKL,WAAL,CAAiB,qBAAjB,EAAwC,sBAAxC,CANf;CAOCC,UAAAA,QAAQ,EAAE,KAAKD,WAAL,CAAiB,iBAAjB,EAAoCpF,YAAY,CAACM,WAAjD,CAPX;CAQCoF,UAAAA,MAAM,EAAE;CACPC,YAAAA,eAAe,EAAE,KAAKP,WAAL,CAAiB,wBAAjB,EAA2C,SAA3C,CADV;CAEPQ,YAAAA,SAAS,EAAE,KAAKR,WAAL,CAAiB,kBAAjB,EAAqC,SAArC;CAFJ,WART;CAYCS,UAAAA,IAAI,EAAE;CACLC,YAAAA,MAAM,EAAE,KADH;CAELC,YAAAA,YAAY,EAAE,IAFT;CAGLC,YAAAA,WAAW,EAAE,KAAKZ,WAAL,CAAiB,kBAAjB,EAAqC,EAArC,CAHR;CAILa,YAAAA,WAAW,EAAE,KAAKb,WAAL,CAAiB,kBAAjB,EAAqC,EAArC,CAJR;CAKLc,YAAAA,cAAc,EAAE,KAAKd,WAAL,CAAiB,qBAAjB,EAAwC,EAAxC;CALX,WAZP;CAmBCe,UAAAA,YAAY,EAAE;CACbC,YAAAA,qBAAqB,EAAE,KAAKhB,WAAL,CAAiB,oCAAjB,EAAuD,EAAvD,CADV;CAEbiB,YAAAA,qBAAqB,EAAE,KAAKjB,WAAL,CAAiB,oCAAjB,EAAuD,EAAvD,CAFV;CAGbkB,YAAAA,iBAAiB,EAAE,KAAKlB,WAAL,CAAiB,gCAAjB,EAAmD,EAAnD,CAHN;CAIbmB,YAAAA,eAAe,EAAE;CAJJ,WAnBf;CAyBCC,UAAAA,MAAM,EAAE,KAzBT;CA0BCC,UAAAA,SAAS,EAAE,EA1BZ;CA2BCC,UAAAA,UAAU,EAAE,EA3Bb;CA4BCC,UAAAA,QAAQ,EAAEjH,QAAQ,CAACP,IA5BpB;CA6BCyH,UAAAA,MAAM,EAAE,KA7BT;CA8BCC,UAAAA,MAAM,EAAE,KA9BT;CA+BCC,UAAAA,OAAO,EAAE,KA/BV;CAgCCC,UAAAA,cAAc,EAAE,CAhCjB;CAiCCC,UAAAA,YAAY,EAAE,CAjCf;CAkCCC,UAAAA,WAAW,EAAE,CAlCd;CAmCCC,UAAAA,WAAW,EAAE,KAnCd;CAoCCC,UAAAA,UAAU,EAAE,EApCb;CAqCCC,UAAAA,WAAW,EAAE,KArCd;CAsCCC,UAAAA,WAAW,EAAE;CAtCd,SAFM;CA0CNC,QAAAA,MAAM,EACN;CACCC,UAAAA,SAAS,EAAE,CADZ;CAECC,UAAAA,YAAY,EAAE,IAFf;CAGCC,UAAAA,aAAa,EAAE,CAHhB;CAICtG,UAAAA,QAAQ,EAAEnC,QAAQ,CAACG,IAJpB;CAKCuI,UAAAA,WAAW,EAAE,KALd;CAMCC,UAAAA,cAAc,EAAE,CANjB;CAOClF,UAAAA,QAAQ,EAAE;CACTmF,YAAAA,EAAE,EAAE,CADK;CAET1E,YAAAA,IAAI,EAAE,EAFG;CAGT2E,YAAAA,SAAS,EAAE,EAHF;CAITC,YAAAA,QAAQ,EAAE,EAJD;CAKTC,YAAAA,YAAY,EAAE,EALL;CAMTC,YAAAA,MAAM,EAAE,EANC;CAOTxB,YAAAA,MAAM,EAAE;CAPC;CAPX,SA3CM;CA4DNyB,QAAAA,IAAI,EACJ;CACCL,UAAAA,EAAE,EAAE,CAAC,CADN;CAECM,UAAAA,IAAI,EAAE,EAFP;CAGChF,UAAAA,IAAI,EAAE,EAHP;CAIC2E,UAAAA,SAAS,EAAE,EAJZ;CAKCC,UAAAA,QAAQ,EAAE,EALX;CAMCE,UAAAA,MAAM,EAAE,EANT;CAOCG,UAAAA,KAAK,EAAE,EAPR;CAQCC,UAAAA,KAAK,EAAE,EARR;CASCC,UAAAA,GAAG,EAAE,EATN;CAUCC,UAAAA,MAAM,EAAE,GAVT;CAWCC,UAAAA,QAAQ,EAAE;CAXX;CA7DM,OAAP;CA2EA;CAvFF;CAAA;CAAA,4CA0FC;CACC,aAAO;CACNvD,QAAAA,MAAM,EAAE;CACPG,UAAAA,IAAI,EAAE,IADC;CAEPI,UAAAA,QAAQ,EAAE,IAFH;CAGPC,UAAAA,SAAS,EAAE,IAHJ;CAIPC,UAAAA,YAAY,EAAE,IAJP;CAKPC,UAAAA,MAAM,EAAE,IALD;CAMPoB,UAAAA,OAAO,EAAE,IANF;CAOPF,UAAAA,MAAM,EAAE,IAPD;CAQPM,UAAAA,WAAW,EAAE,IARN;CASPP,UAAAA,QAAQ,EAAE;CATH;CADF,OAAP;CAaA;CAxGF;CAAA;CAAA,mCA2GC;CAAA;;CACC,aAAO;CAEN3B,QAAAA,MAAM,EAAE,gBAACwD,KAAD,EAAQC,OAAR,EACR;CACC,cAAI,OAAOA,OAAO,CAACxD,QAAf,KAA4B,QAAhC,EACA;CACCuD,YAAAA,KAAK,CAACxD,MAAN,CAAaC,QAAb,GAAwBwD,OAAO,CAACxD,QAAhC;CACA;;CACD,cAAI,OAAOwD,OAAO,CAACvD,UAAf,KAA8B,QAAlC,EACA;CACCsD,YAAAA,KAAK,CAACxD,MAAN,CAAaE,UAAb,GAA0BuD,OAAO,CAACvD,UAAlC;CACA;;CACD,cAAI,OAAOuD,OAAO,CAACjC,MAAf,KAA0B,SAA9B,EACA;CACCgC,YAAAA,KAAK,CAACxD,MAAN,CAAawB,MAAb,GAAsBiC,OAAO,CAACjC,MAA9B;CACA;;CACD,cAAIkC,cAAK,CAACC,KAAN,CAAYC,aAAZ,CAA0BH,OAAO,CAAC5C,IAAlC,CAAJ,EACA;CACC,gBAAI,OAAO4C,OAAO,CAAC5C,IAAR,CAAaC,MAApB,KAA+B,SAAnC,EACA;CACC0C,cAAAA,KAAK,CAACxD,MAAN,CAAaa,IAAb,CAAkBC,MAAlB,GAA2B2C,OAAO,CAAC5C,IAAR,CAAaC,MAAxC;CACA;;CACD,gBAAI,OAAO2C,OAAO,CAAC5C,IAAR,CAAaE,YAApB,KAAqC,SAAzC,EACA;CACCyC,cAAAA,KAAK,CAACxD,MAAN,CAAaa,IAAb,CAAkBE,YAAlB,GAAiC0C,OAAO,CAAC5C,IAAR,CAAaE,YAA9C;CACA;;CACD,gBAAI,OAAO0C,OAAO,CAAC5C,IAAR,CAAaG,WAApB,KAAoC,QAAxC,EACA;CACCwC,cAAAA,KAAK,CAACxD,MAAN,CAAaa,IAAb,CAAkBG,WAAlB,GAAgCyC,OAAO,CAAC5C,IAAR,CAAaG,WAA7C;CACA;;CACD,gBAAI,OAAOyC,OAAO,CAAC5C,IAAR,CAAaI,WAApB,KAAoC,QAAxC,EACA;CACCuC,cAAAA,KAAK,CAACxD,MAAN,CAAaa,IAAb,CAAkBI,WAAlB,GAAgCwC,OAAO,CAAC5C,IAAR,CAAaI,WAA7C;CACA;;CACD,gBAAI,OAAOwC,OAAO,CAAC5C,IAAR,CAAaK,cAApB,KAAuC,QAA3C,EACA;CACCsC,cAAAA,KAAK,CAACxD,MAAN,CAAaa,IAAb,CAAkBK,cAAlB,GAAmCuC,OAAO,CAAC5C,IAAR,CAAaK,cAAhD;CACA;CACD;;CACD,cAAIwC,cAAK,CAACC,KAAN,CAAYC,aAAZ,CAA0BH,OAAO,CAACtC,YAAlC,CAAJ,EACA;CACC,gBAAI,OAAOsC,OAAO,CAACtC,YAAR,CAAqBC,qBAA5B,KAAsD,QAAtD,IAAkEqC,OAAO,CAACtC,YAAR,CAAqBC,qBAArB,KAA+C,EAArH,EACA;CACCoC,cAAAA,KAAK,CAACxD,MAAN,CAAamB,YAAb,CAA0BC,qBAA1B,GAAkDqC,OAAO,CAACtC,YAAR,CAAqBC,qBAAvE;CACA;;CACD,gBAAI,OAAOqC,OAAO,CAACtC,YAAR,CAAqBE,qBAA5B,KAAsD,QAAtD,IAAkEoC,OAAO,CAACtC,YAAR,CAAqBE,qBAArB,KAA+C,EAArH,EACA;CACCmC,cAAAA,KAAK,CAACxD,MAAN,CAAamB,YAAb,CAA0BE,qBAA1B,GAAkDoC,OAAO,CAACtC,YAAR,CAAqBE,qBAAvE;CACA;;CACD,gBAAI,OAAOoC,OAAO,CAACtC,YAAR,CAAqBG,iBAA5B,KAAkD,QAAlD,IAA8DmC,OAAO,CAACtC,YAAR,CAAqBG,iBAArB,KAA2C,EAA7G,EACA;CACCkC,cAAAA,KAAK,CAACxD,MAAN,CAAamB,YAAb,CAA0BG,iBAA1B,GAA8CmC,OAAO,CAACtC,YAAR,CAAqBG,iBAAnE;CACA;;CACD,gBAAI,OAAOmC,OAAO,CAACtC,YAAR,CAAqBI,eAA5B,KAAgD,QAAhD,IAA4DkC,OAAO,CAACtC,YAAR,CAAqBI,eAArB,KAAyC,EAAzG,EACA;CACCiC,cAAAA,KAAK,CAACxD,MAAN,CAAamB,YAAb,CAA0BI,eAA1B,GAA4CkC,OAAO,CAACtC,YAAR,CAAqBI,eAAjE;CACA;CACD;;CACD,cAAI,OAAOkC,OAAO,CAAC3B,OAAf,KAA2B,SAA/B,EACA;CACC0B,YAAAA,KAAK,CAACxD,MAAN,CAAa8B,OAAb,GAAuB2B,OAAO,CAAC3B,OAA/B;CACA;;CACD,cAAI,OAAO2B,OAAO,CAAC1B,cAAf,KAAkC,QAAtC,EACA;CACCyB,YAAAA,KAAK,CAACxD,MAAN,CAAa+B,cAAb,GAA8B0B,OAAO,CAAC1B,cAAtC;CACA;;CACD,cAAI,OAAO0B,OAAO,CAACzB,YAAf,KAAgC,QAApC,EACA;CACCwB,YAAAA,KAAK,CAACxD,MAAN,CAAagC,YAAb,GAA4ByB,OAAO,CAACzB,YAApC;CACA;;CACD,cAAI,OAAOyB,OAAO,CAACxB,WAAf,KAA+B,QAAnC,EACA;CACCuB,YAAAA,KAAK,CAACxD,MAAN,CAAaiC,WAAb,GAA2BwB,OAAO,CAACxB,WAAnC;CACA;;CACD,cAAI,OAAOwB,OAAO,CAACvB,WAAf,KAA+B,SAAnC,EACA;CACCsB,YAAAA,KAAK,CAACxD,MAAN,CAAakC,WAAb,GAA2BuB,OAAO,CAACvB,WAAnC;CACA;;CACD,cAAI,OAAOuB,OAAO,CAACtB,UAAf,KAA8B,QAAlC,EACA;CACCqB,YAAAA,KAAK,CAACxD,MAAN,CAAamC,UAAb,GAA0BsB,OAAO,CAACtB,UAAlC;CACA;;CACD,cAAI,OAAOsB,OAAO,CAAC7B,MAAf,KAA0B,SAA9B,EACA;CACC4B,YAAAA,KAAK,CAACxD,MAAN,CAAa4B,MAAb,GAAsB6B,OAAO,CAAC7B,MAA9B;CACA6B,YAAAA,OAAO,CAAC5B,MAAR,GAAiB6B,cAAK,CAACG,MAAN,CAAaC,QAAb,KAAyB,KAAzB,GAAgCL,OAAO,CAAC7B,MAAzD;CACA;;CACD,cAAI,OAAO6B,OAAO,CAAC5B,MAAf,KAA0B,SAA9B,EACA;CACC2B,YAAAA,KAAK,CAACxD,MAAN,CAAa6B,MAAb,GAAsB4B,OAAO,CAAC5B,MAA9B;CACA;;CACD,cAAI,OAAO4B,OAAO,CAACjD,SAAf,KAA6B,SAAjC,EACA;CACCgD,YAAAA,KAAK,CAACxD,MAAN,CAAaQ,SAAb,GAAyBiD,OAAO,CAACjD,SAAjC;CACA;;CACD,cAAI,OAAOiD,OAAO,CAACrB,WAAf,KAA+B,SAAnC,EACA;CACCoB,YAAAA,KAAK,CAACxD,MAAN,CAAaoC,WAAb,GAA2BqB,OAAO,CAACrB,WAAnC;CACA;;CACD,cAAI,OAAOqB,OAAO,CAACpB,WAAf,KAA+B,SAAnC,EACA;CACCmB,YAAAA,KAAK,CAACxD,MAAN,CAAaqC,WAAb,GAA2BoB,OAAO,CAACpB,WAAnC;CACA;;CACD,cAAIoB,OAAO,CAAChC,SAAR,YAA6BsC,KAAjC,EACA;CACCP,YAAAA,KAAK,CAACxD,MAAN,CAAayB,SAAb,GAAyBgC,OAAO,CAAChC,SAAjC;CACA;;CACD,cAAIgC,OAAO,CAAC/B,UAAR,YAA8BqC,KAAlC,EACA;CACCP,YAAAA,KAAK,CAACxD,MAAN,CAAa0B,UAAb,GAA0B+B,OAAO,CAAC/B,UAAlC;CACA;;CACD,cAAI,OAAO+B,OAAO,CAAC9B,QAAf,KAA4B,QAA5B,IAAwC,OAAOjH,QAAQ,CAAC+I,OAAO,CAAC9B,QAAT,CAAf,KAAsC,WAAlF,EACA;CACC6B,YAAAA,KAAK,CAACxD,MAAN,CAAa2B,QAAb,GAAwB8B,OAAO,CAAC9B,QAAhC;CACA;;CACD,cAAI,OAAO8B,OAAO,CAACpD,QAAf,KAA4B,QAA5B,IAAwC,OAAO9E,aAAa,CAACkI,OAAO,CAACpD,QAAT,CAApB,KAA2C,WAAvF,EACA;CACC,gBAAImD,KAAK,CAACxD,MAAN,CAAaK,QAAb,KAA0BoD,OAAO,CAACpD,QAAtC,EACA;CACCmD,cAAAA,KAAK,CAACxD,MAAN,CAAagC,YAAb,GAA4B,CAA5B;CACAwB,cAAAA,KAAK,CAACxD,MAAN,CAAaiC,WAAb,GAA2B,CAA3B;CACAuB,cAAAA,KAAK,CAACxD,MAAN,CAAaK,QAAb,GAAwBoD,OAAO,CAACpD,QAAhC;CACA;CACD;;CAED,cAAI,KAAI,CAAC2D,YAAL,CAAkB;CAAChE,YAAAA,MAAM,EAAEyD;CAAT,WAAlB,CAAJ,EACA;CACC,YAAA,KAAI,CAACQ,SAAL,CAAeT,KAAf;CACA;CACD,SAjIK;CAkINlB,QAAAA,MAAM,EAAE,gBAACkB,KAAD,EAAQC,OAAR,EACR;CACC,cAAI,OAAOA,OAAO,CAAClB,SAAf,KAA6B,QAAjC,EACA;CACCiB,YAAAA,KAAK,CAAClB,MAAN,CAAaC,SAAb,GAAyBkB,OAAO,CAAClB,SAAjC;CACA;;CACD,cAAI,OAAOkB,OAAO,CAACjB,YAAf,KAAgC,SAApC,EACA;CACCgB,YAAAA,KAAK,CAAClB,MAAN,CAAaE,YAAb,GAA4BiB,OAAO,CAACjB,YAApC;CACA;;CACD,cAAI,OAAOiB,OAAO,CAAChB,aAAf,KAAiC,QAArC,EACA;CACCe,YAAAA,KAAK,CAAClB,MAAN,CAAaG,aAAb,GAA6BgB,OAAO,CAAChB,aAArC;CACA;;CACD,cAAI,OAAOgB,OAAO,CAACf,WAAf,KAA+B,SAAnC,EACA;CACCc,YAAAA,KAAK,CAAClB,MAAN,CAAaI,WAAb,GAA2Be,OAAO,CAACf,WAAnC;CACA;;CACD,cAAI,OAAOe,OAAO,CAACtH,QAAf,KAA4B,QAA5B,IAAwC,OAAOsH,OAAO,CAACtH,QAAf,KAA4B,WAAxE,EACA;CACCqH,YAAAA,KAAK,CAAClB,MAAN,CAAanG,QAAb,GAAwBsH,OAAO,CAACtH,QAAhC;CACA;;CACD,cAAI,OAAOsH,OAAO,CAACd,cAAf,KAAkC,QAAtC,EACA;CACCa,YAAAA,KAAK,CAAClB,MAAN,CAAaK,cAAb,GAA8Bc,OAAO,CAACd,cAAtC;CACA;;CACD,cAAIe,cAAK,CAACC,KAAN,CAAYC,aAAZ,CAA0BH,OAAO,CAAChG,QAAlC,CAAJ,EACA;CACC,gBAAI,OAAOgG,OAAO,CAAChG,QAAR,CAAiBmF,EAAxB,KAA+B,QAAnC,EACA;CACCY,cAAAA,KAAK,CAAClB,MAAN,CAAa7E,QAAb,CAAsBmF,EAAtB,GAA2Ba,OAAO,CAAChG,QAAR,CAAiBmF,EAA5C;CACA;;CACD,gBAAI,OAAOa,OAAO,CAAChG,QAAR,CAAiBS,IAAxB,KAAiC,QAAjC,IAA6C,OAAOuF,OAAO,CAAChG,QAAR,CAAiBS,IAAxB,KAAiC,QAAlF,EACA;CACCsF,cAAAA,KAAK,CAAClB,MAAN,CAAa7E,QAAb,CAAsBS,IAAtB,GAA6BuF,OAAO,CAAChG,QAAR,CAAiBS,IAAjB,CAAsBgG,QAAtB,EAA7B;CACA;;CACD,gBAAI,OAAOT,OAAO,CAAChG,QAAR,CAAiBqF,QAAxB,KAAqC,QAArC,IAAiD,OAAOW,OAAO,CAAChG,QAAR,CAAiBqF,QAAxB,KAAqC,QAA1F,EACA;CACCU,cAAAA,KAAK,CAAClB,MAAN,CAAa7E,QAAb,CAAsBqF,QAAtB,GAAiCW,OAAO,CAAChG,QAAR,CAAiBqF,QAAjB,CAA0BoB,QAA1B,EAAjC;CACA;;CACD,gBAAI,OAAOT,OAAO,CAAChG,QAAR,CAAiBoF,SAAxB,KAAsC,QAAtC,IAAkD,OAAOY,OAAO,CAAChG,QAAR,CAAiBoF,SAAxB,KAAsC,QAA5F,EACA;CACCW,cAAAA,KAAK,CAAClB,MAAN,CAAa7E,QAAb,CAAsBoF,SAAtB,GAAkCY,OAAO,CAAChG,QAAR,CAAiBoF,SAAjB,CAA2BqB,QAA3B,EAAlC;CACA;;CACD,gBAAI,OAAOT,OAAO,CAAChG,QAAR,CAAiBsF,YAAxB,KAAyC,QAAzC,IAAqD,OAAOU,OAAO,CAAChG,QAAR,CAAiBsF,YAAxB,KAAyC,QAAlG,EACA;CACCS,cAAAA,KAAK,CAAClB,MAAN,CAAa7E,QAAb,CAAsBsF,YAAtB,GAAqCU,OAAO,CAAChG,QAAR,CAAiBsF,YAAjB,CAA8BmB,QAA9B,EAArC;CACA;;CACD,gBAAI,OAAOT,OAAO,CAAChG,QAAR,CAAiBuF,MAAxB,KAAmC,QAAvC,EACA;CACC,kBAAI,CAACS,OAAO,CAAChG,QAAR,CAAiBuF,MAAlB,IAA4BS,OAAO,CAAChG,QAAR,CAAiBuF,MAAjB,CAAwBmB,UAAxB,CAAmC,MAAnC,CAAhC,EACA;CACCX,gBAAAA,KAAK,CAAClB,MAAN,CAAa7E,QAAb,CAAsBuF,MAAtB,GAA+BS,OAAO,CAAChG,QAAR,CAAiBuF,MAAhD;CACA,eAHD,MAKA;CACCQ,gBAAAA,KAAK,CAAClB,MAAN,CAAa7E,QAAb,CAAsBuF,MAAtB,GAA+BQ,KAAK,CAACxD,MAAN,CAAaG,IAAb,GAAkBsD,OAAO,CAAChG,QAAR,CAAiBuF,MAAlE;CACA;CACD;;CACD,gBAAI,OAAOS,OAAO,CAAChG,QAAR,CAAiB+D,MAAxB,KAAmC,SAAvC,EACA;CACCgC,cAAAA,KAAK,CAAClB,MAAN,CAAa7E,QAAb,CAAsB+D,MAAtB,GAA+BiC,OAAO,CAAChG,QAAR,CAAiB+D,MAAhD;CACA;CACD;;CACD,cAAI,KAAI,CAACwC,YAAL,CAAkB;CAAC1B,YAAAA,MAAM,EAAEmB;CAAT,WAAlB,CAAJ,EACA;CACC,YAAA,KAAI,CAACQ,SAAL,CAAeT,KAAf;CACA;CACD,SAtMK;CAuMNP,QAAAA,IAAI,EAAE,cAACO,KAAD,EAAQC,OAAR,EACN;CACC,cAAI,OAAOA,OAAO,CAACb,EAAf,KAAsB,QAA1B,EACA;CACCY,YAAAA,KAAK,CAACP,IAAN,CAAWL,EAAX,GAAgBa,OAAO,CAACb,EAAxB;CACA;;CACD,cAAI,OAAOa,OAAO,CAACP,IAAf,KAAwB,QAAxB,IAAoCO,OAAO,CAACP,IAAR,KAAiBM,KAAK,CAACP,IAAN,CAAWC,IAApE,EACA;CACCM,YAAAA,KAAK,CAACP,IAAN,CAAWC,IAAX,GAAkBO,OAAO,CAACP,IAA1B;CACAnF,YAAAA,MAAM,CAACoB,GAAP,CAAW,IAAX,EAAiB,eAAjB,EAAkCsE,OAAO,CAACP,IAA1C,EAAgD;CAAC7D,cAAAA,OAAO,EAAE,MAAI,KAAd;CAAqB+E,cAAAA,IAAI,EAAE;CAA3B,aAAhD;CACA;;CACD,cAAI,OAAOX,OAAO,CAACvF,IAAf,KAAwB,QAAxB,IAAoC,OAAOuF,OAAO,CAACvF,IAAf,KAAwB,QAAhE,EACA;CACCsF,YAAAA,KAAK,CAACP,IAAN,CAAW/E,IAAX,GAAkBuF,OAAO,CAACvF,IAAR,CAAagG,QAAb,EAAlB;CACA;;CACD,cAAI,OAAOT,OAAO,CAACZ,SAAf,KAA6B,QAA7B,IAAyC,OAAOY,OAAO,CAACZ,SAAf,KAA6B,QAA1E,EACA;CACCW,YAAAA,KAAK,CAACP,IAAN,CAAWJ,SAAX,GAAuBY,OAAO,CAACZ,SAAR,CAAkBqB,QAAlB,EAAvB;CACA;;CACD,cAAI,OAAOT,OAAO,CAACX,QAAf,KAA4B,QAA5B,IAAwC,OAAOW,OAAO,CAACX,QAAf,KAA4B,QAAxE,EACA;CACCU,YAAAA,KAAK,CAACP,IAAN,CAAWH,QAAX,GAAsBW,OAAO,CAACX,QAAR,CAAiBoB,QAAjB,EAAtB;CACA;;CACD,cAAI,OAAOT,OAAO,CAACT,MAAf,KAA0B,QAA9B,EACA;CACCQ,YAAAA,KAAK,CAACP,IAAN,CAAWD,MAAX,GAAoBS,OAAO,CAACT,MAA5B;CACA;;CACD,cAAI,OAAOS,OAAO,CAACN,KAAf,KAAyB,QAA7B,EACA;CACCK,YAAAA,KAAK,CAACP,IAAN,CAAWE,KAAX,GAAmBM,OAAO,CAACN,KAA3B;CACA;;CACD,cAAI,OAAOM,OAAO,CAACL,KAAf,KAAyB,QAAzB,IAAqC,OAAOK,OAAO,CAACL,KAAf,KAAyB,QAAlE,EACA;CACCI,YAAAA,KAAK,CAACP,IAAN,CAAWG,KAAX,GAAmBK,OAAO,CAACL,KAAR,CAAcc,QAAd,EAAnB;CACA;;CACD,cAAI,OAAOT,OAAO,CAACJ,GAAf,KAAuB,QAA3B,EACA;CACCG,YAAAA,KAAK,CAACP,IAAN,CAAWI,GAAX,GAAiBI,OAAO,CAACJ,GAAzB;CACA;;CACD,cAAI,OAAOI,OAAO,CAACH,MAAf,KAA0B,QAA9B,EACA;CACCE,YAAAA,KAAK,CAACP,IAAN,CAAWK,MAAX,GAAoBG,OAAO,CAACH,MAA5B;CACA;;CACD,cAAI,OAAOG,OAAO,CAACF,QAAf,KAA4B,QAAhC,EACA;CACCC,YAAAA,KAAK,CAACP,IAAN,CAAWM,QAAX,GAAsBE,OAAO,CAACF,QAA9B;CACA;;CAED,cAAI,KAAI,CAACS,YAAL,CAAkB;CAACf,YAAAA,IAAI,EAAEQ;CAAP,WAAlB,CAAJ,EACA;CACC,YAAA,KAAI,CAACQ,SAAL,CAAeT,KAAf;CACA;CACD;CA3PK,OAAP;CA6PA;CAzWF;CAAA;CAAA,iCA4WC;CACC,aAAO;CACNa,QAAAA,IAAI,EAAE,oBACN;CAAA,cADSC,MACT,QADSA,MACT;CACCA,UAAAA,MAAM,CAAC,QAAD,EAAW;CAAC1C,YAAAA,MAAM,EAAE;CAAT,WAAX,CAAN;CACA;CAJK,OAAP;CAMA;CAnXF;CAAA;CAAA,EAAiC2C,4BAAjC;;CCfA;;;;;;;;AASA,KAMaC,gBAAb;CAAA;CAAA;CAEC,4BAAYC,MAAZ,EACA;CAAA;CACC,SAAKC,gBAAL,GAAwB,KAAxB;CAEA,SAAKC,SAAL,CAAe1H,QAAQ,CAACC,KAAxB;CAEA,SAAK0H,UAAL,GAAkB,IAAIC,sBAAJ,CAAe;CAChCC,MAAAA,QAAQ,EAAEL,MAAM,CAACK,QADe;CAEhCC,MAAAA,WAAW,EAAE,KAAKA,WAFc;CAGhCC,MAAAA,IAAI,EAAE;CAH0B,KAAf,CAAlB;CAKA;;CAbF;CAAA;CAAA,8BAeWC,MAfX,EAgBC;CAAA,UADkBC,YAClB,uEADiC,EACjC;;CACC,UAAI,oBAAO,KAAKH,WAAZ,MAA4B,QAAhC,EACA;CACC,aAAKA,WAAL,GAAmB,EAAnB;CACA;;CAED,UACCE,MAAM,IAAIhI,QAAQ,CAACC,KAAnB,IACG,OAAO+H,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,CAACxG,KAAP,CAAa,gBAAb,CAFlC,EAIA;CACC,aAAKsG,WAAL,CAAiBI,gBAAjB,GAAoCF,MAApC;CACA,OAND,MAQA;CACCG,QAAAA,OAAO,CAACC,KAAR,iEAAuEJ,MAAvE,UAAoF,eAApF,EAAqG,+BAArG,EAAsI,cAAtI;CACA,eAAO,KAAP;CACA;;CAED,UACCA,MAAM,IAAIhI,QAAQ,CAACC,KAAnB,IACG,OAAOgI,YAAP,KAAwB,QAD3B,IACuCA,YAAY,CAACzG,KAAb,CAAmB,gBAAnB,CAFxC,EAIA;CACC,aAAKsG,WAAL,CAAiBO,uBAAjB,GAA2CJ,YAA3C;CACA;;CAED,aAAO,IAAP;CACA;CA5CF;CAAA;CAAA,gCA+CC;CACC,UAAI,oBAAO,KAAKH,WAAZ,MAA4B,QAAhC,EACA;CACC,aAAKA,WAAL,GAAmB,EAAnB;CACA;;CAED,aAAO,KAAKA,WAAL,CAAiBI,gBAAjB,IAAqC,IAA5C;CACA;CAtDF;CAAA;CAAA,+BAwDYI,MAxDZ,EAwDoBd,MAxDpB,EAwD4Be,QAxD5B,EAwDsCC,YAxDtC,EAyDC;CAAA;;CAAA,UADmDC,MACnD,uEAD4D,IAC5D;;CACC,UAAI,CAACA,MAAL,EACA;CACCA,QAAAA,MAAM,GAAGhC,cAAK,CAACiC,oBAAN,CAA2B;CACnCzH,UAAAA,IAAI,EAAEqH;CAD6B,SAA3B,CAAT;CAGA;;CAED,UAAMK,OAAO,GAAG,IAAI3G,EAAE,CAAC4G,OAAP,EAAhB,CARD;;CAWC,WAAKjB,UAAL,CAAgBkB,UAAhB,CAA2BP,MAA3B,EAAmCd,MAAnC,EAA2C,IAA3C,EAAiDgB,YAAjD,EAA+DC,MAA/D,EAAuEK,IAAvE,CAA4E,UAAAzH,MAAM,EAAI;CAErF,QAAA,KAAI,CAACoG,gBAAL,GAAwB,KAAxB;CACAkB,QAAAA,OAAO,CAACI,OAAR,CAAgB1H,MAAhB;CAEA,OALD,EAKG2H,KALH,CAKS,UAAA3H,MAAM,EAAI;CAElB,YAAI+G,KAAK,GAAG/G,MAAM,CAAC+G,KAAP,EAAZ;;CACA,YAAIA,KAAK,CAACa,EAAN,CAASb,KAAT,IAAkB,2BAAtB,EACA;CACC,UAAA,KAAI,CAACV,SAAL,CAAeU,KAAK,CAACa,EAAN,CAAShD,IAAxB;;CAEA,cAAIqC,MAAM,KAAKjJ,UAAU,CAACC,kBAA1B,EACA;CACC6I,YAAAA,OAAO,CAACe,IAAR,kCAAuCd,KAAK,CAACa,EAAN,CAASE,iBAAhD,eAAsEf,KAAK,CAACa,EAAN,CAASb,KAA/E;CAEA,YAAA,KAAI,CAACX,gBAAL,GAAwB,KAAxB;CACAkB,YAAAA,OAAO,CAACS,MAAR,CAAe/H,MAAf;CACA,mBAAO,KAAP;CACA;;CAED,cAAI,CAAC,KAAI,CAACoG,gBAAV,EACA;CACCU,YAAAA,OAAO,CAACe,IAAR,CAAa,iFAAb;CAEA,YAAA,KAAI,CAACzB,gBAAL,GAAwB,IAAxB;;CACA,YAAA,KAAI,CAACE,UAAL,CAAgBkB,UAAhB,CAA2BP,MAA3B,EAAmCd,MAAnC,EAA2C,IAA3C,EAAiDgB,YAAjD,EAA+DC,MAA/D,EAAuEK,IAAvE,CAA4E,UAAAzH,MAAM,EAAI;CACrF,cAAA,KAAI,CAACoG,gBAAL,GAAwB,KAAxB;CACAkB,cAAAA,OAAO,CAACI,OAAR,CAAgB1H,MAAhB;CACA,aAHD,EAGG2H,KAHH,CAGS,UAAA3H,MAAM,EAAI;CAClB,cAAA,KAAI,CAACoG,gBAAL,GAAwB,KAAxB;CACAkB,cAAAA,OAAO,CAACS,MAAR,CAAe/H,MAAf;CACA,aAND;;CAQA,mBAAO,KAAP;CACA;CACD;;CAED,QAAA,KAAI,CAACoG,gBAAL,GAAwB,KAAxB;CACAkB,QAAAA,OAAO,CAACS,MAAR,CAAe/H,MAAf;CACA,OAxCD;CA0CA,aAAOsH,OAAP;CACA;CA/GF;CAAA;CAAA,8BAiHWU,KAjHX,EAiHkBd,QAjHlB,EAiH4Be,YAjH5B,EAiH0Cd,YAjH1C,EAiHwDC,MAjHxD,EAkHC;CAAA;;CACC,UAAIc,cAAc,GAAG,SAAjBA,cAAiB,CAAClI,MAAD,EACrB;AACC;CACA,aAAK,IAAIiH,MAAT,IAAmBe,KAAnB,EACA;CACC,cAAI,CAACA,KAAK,CAACxM,cAAN,CAAqByL,MAArB,CAAL,EACA;CACC;CACA;;CAED,cAAIF,MAAK,GAAG/G,MAAM,CAACiH,MAAD,CAAN,CAAeF,KAAf,EAAZ;;CACA,cAAIA,MAAK,IAAIA,MAAK,CAACa,EAAN,CAASb,KAAT,IAAkB,2BAA/B,EACA;CACC,YAAA,MAAI,CAACV,SAAL,CAAeU,MAAK,CAACa,EAAN,CAAShD,IAAxB;;CACA,gBAAIqC,MAAM,KAAKjJ,UAAU,CAACC,kBAA1B,EACA;CACC6I,cAAAA,OAAO,CAACe,IAAR,kCAAuCd,MAAK,CAACa,EAAN,CAASE,iBAAhD,eAAsEf,MAAK,CAACa,EAAN,CAASb,KAA/E;CAEA,cAAA,MAAI,CAACX,gBAAL,GAAwB,KAAxB;CACAc,cAAAA,QAAQ,CAAClH,MAAD,CAAR;CACA,qBAAO,KAAP;CACA;;CAED,gBAAI,CAAC,MAAI,CAACoG,gBAAV,EACA;CACCU,cAAAA,OAAO,CAACe,IAAR,CAAa,iFAAb;CAEA,cAAA,MAAI,CAACzB,gBAAL,GAAwB,IAAxB;;CACA,cAAA,MAAI,CAACE,UAAL,CAAgB6B,SAAhB,CAA0BH,KAA1B,EAAiCd,QAAjC,EAA2Ce,YAA3C,EAAyDd,YAAzD,EAAuEC,MAAvE;;CAEA,qBAAO,KAAP;CACA;CACD;CACD;;CAED,QAAA,MAAI,CAAChB,gBAAL,GAAwB,KAAxB;CACAc,QAAAA,QAAQ,CAAClH,MAAD,CAAR;CAEA,eAAO,IAAP;CACA,OAvCD;;CAyCA,aAAO,KAAKsG,UAAL,CAAgB6B,SAAhB,CAA0BH,KAA1B,EAAiCE,cAAjC,EAAiDD,YAAjD,EAA+Dd,YAA/D,EAA6EC,MAA7E,CAAP;CACA;CA7JF;CAAA;CAAA;;CCfA;;;;;;;;AASA;KAIMgB;;;;;CAEL,qCACA;CAAA;;CAAA,QADYC,KACZ,uEADoB,EACpB;CAAA;CACC,yHAAMA,KAAN;CAEA,UAAKC,MAAL,GAAcD,KAAK,CAACC,MAApB;CAHD;CAIC;;;;6DAEuCC,MACxC;CACC,WAAKC,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAClCrE,QAAAA,QAAQ,EAAE4G,IAAI,CAAC5G,QADmB;CAElCC,QAAAA,UAAU,EAAE2G,IAAI,CAAC3G,UAFiB;CAGlCW,QAAAA,IAAI,EAAEgG,IAAI,CAAChG,IAHuB;CAIlCM,QAAAA,YAAY,EAAE0F,IAAI,CAAC1F,YAJe;CAKlCM,QAAAA,SAAS,EAAEoF,IAAI,CAACpF,SAAL,IAAkB,EALK;CAMlCD,QAAAA,MAAM,EAAEqF,IAAI,CAACrF,MANqB;CAOlCW,QAAAA,UAAU,EAAE0E,IAAI,CAAC1E,UAPiB;CAQlCT,QAAAA,UAAU,EAAEmF,IAAI,CAACnF,UAAL,IAAmB,EARG;CASlCW,QAAAA,WAAW,EAAEwE,IAAI,CAACxE;CATgB,OAAnC;CAYA,WAAKyE,KAAL,CAAWxC,MAAX,CAAkB,iBAAlB,EAAqC;CAACyC,QAAAA,IAAI,EAAEF,IAAI,CAACE;CAAZ,OAArC;CAEA,WAAKH,MAAL,CAAYI,WAAZ,CAAwBH,IAAI,CAACI,eAA7B;CACApI,MAAAA,kCAAY,CAACM,GAAb,CAAiB,KAAKyH,MAAL,CAAYM,SAAZ,EAAjB,EAA0C,CAA1C,EAA6C,iBAA7C,EAAgEL,IAAI,CAACI,eAAL,IAAwB,EAAxF;CACA;;;gEAE0CJ,MAC3C;CACC,WAAKD,MAAL,CAAYhC,UAAZ,CAAuBD,SAAvB,CAAiCkC,IAAI,CAAC3D,IAAtC;CAEA,UAAIiE,YAAY,GAAG,EAAnB;;CACA,UAAI,OAAO,KAAKL,KAAL,CAAWtD,KAAX,CAAiB4D,QAAjB,CAA0BC,UAA1B,CAAqC,KAAKC,UAAL,CAAgBC,SAAhB,EAArC,CAAP,KAA6E,WAAjF,EACA;CACCJ,QAAAA,YAAY,GAAG,KAAKL,KAAL,CAAWtD,KAAX,CAAiB4D,QAAjB,CAA0BC,UAA1B,CAAqC,KAAKC,UAAL,CAAgBC,SAAhB,EAArC,CAAf;CACA;;CACD,WAAKT,KAAL,CAAWxC,MAAX,CAAkB,yBAAlB,EAA6C;CAACkD,QAAAA,MAAM,EAAEX,IAAI,CAACW,MAAd;CAAsBJ,QAAAA,QAAQ,EAAED;CAAhC,OAA7C;CAEA,WAAKL,KAAL,CAAWxC,MAAX,CAAkB,0BAAlB,EAA8C;CAACmD,QAAAA,QAAQ,EAAEZ,IAAI,CAACY,QAAhB;CAA0BC,QAAAA,MAAM,EAAE;CAC/EC,UAAAA,UAAU,EAAE,UADmE;CAE/EC,UAAAA,IAAI,EAAE;CAFyE;CAAlC,OAA9C;CAKA,WAAKd,KAAL,CAAWxC,MAAX,CAAkB,iBAAlB,EAAqC;CAAChC,QAAAA,MAAM,EAAE;CAC7CkF,UAAAA,MAAM,EAAEX,IAAI,CAACW,MADgC;CAE7CC,UAAAA,QAAQ,EAAE,SAAOZ,IAAI,CAACW;CAFuB;CAAT,OAArC;CAIA;;;2DAEqCX,MACtC;CACC,WAAKC,KAAL,CAAWxC,MAAX,CAAkB,aAAlB,EAAiC;CAChC1B,QAAAA,EAAE,EAAEiE,IAAI,CAACjE,EADuB;CAEhCM,QAAAA,IAAI,EAAE2D,IAAI,CAAC3D,IAFqB;CAGhChF,QAAAA,IAAI,EAAE2I,IAAI,CAAC3I,IAHqB;CAIhC2E,QAAAA,SAAS,EAAEgE,IAAI,CAAChE,SAJgB;CAKhCC,QAAAA,QAAQ,EAAE+D,IAAI,CAAC/D,QALiB;CAMhCM,QAAAA,KAAK,EAAEyD,IAAI,CAACzD,KANoB;CAOhCJ,QAAAA,MAAM,EAAE6D,IAAI,CAAC7D,MAPmB;CAQhCG,QAAAA,KAAK,EAAE0D,IAAI,CAAC1D,KARoB;CAShCE,QAAAA,GAAG,EAAEwD,IAAI,CAACxD,GATsB;CAUhCC,QAAAA,MAAM,EAAEuD,IAAI,CAACvD,MAVmB;CAWhCC,QAAAA,QAAQ,EAAEsD,IAAI,CAACtD;CAXiB,OAAjC;CAaA,WAAKuD,KAAL,CAAWe,QAAX,CAAoB,WAApB,EAAiC,CAAC;CACjCjF,QAAAA,EAAE,EAAEiE,IAAI,CAACjE,EADwB;CAEjC1E,QAAAA,IAAI,EAAE2I,IAAI,CAAC3I,IAFsB;CAGjC2E,QAAAA,SAAS,EAAEgE,IAAI,CAAChE,SAHiB;CAIjCC,QAAAA,QAAQ,EAAE+D,IAAI,CAAC/D,QAJkB;CAKjCE,QAAAA,MAAM,EAAE6D,IAAI,CAAC7D,MALoB;CAMjCM,QAAAA,MAAM,EAAEuD,IAAI,CAACvD,MANoB;CAOjCP,QAAAA,YAAY,EAAE8D,IAAI,CAACtD;CAPc,OAAD,CAAjC;CASA,WAAKuD,KAAL,CAAWxC,MAAX,CAAkB,iBAAlB,EAAqC;CAACtE,QAAAA,MAAM,EAAE;CAC7C8H,UAAAA,MAAM,EAAEjB,IAAI,CAACjE;CADgC;CAAT,OAArC;CAGA;;;6DAEuCiE,MACxC;CACC,WAAKC,KAAL,CAAWxC,MAAX,CAAkB,yBAAlB,EAA6C;CAACkD,QAAAA,MAAM,EAAEX,IAAI,CAACW;CAAd,OAA7C;CAEA,WAAKV,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmCuC,IAAnC;CAGA,WAAKC,KAAL,CAAWxC,MAAX,CAAkB,iBAAlB,EAAqC;CAAChC,QAAAA,MAAM,EAAE;CAC7CkF,UAAAA,MAAM,EAAEX,IAAI,CAACW,MADgC;CAE7CC,UAAAA,QAAQ,EAAE,SAAOZ,IAAI,CAACW,MAFuB;CAG7CO,UAAAA,YAAY,EAAElB,IAAI,CAACkB;CAH0B;CAAT,OAArC;CAKA;;;sDAEgClB,MACjC;CACC,UAAIA,IAAI,CAACO,QAAL,IAAiBP,IAAI,CAACO,QAAL,CAAcY,MAAd,GAAuB,CAAxC,IAA6C,CAAC,KAAKpB,MAAL,CAAYqB,aAAZ,EAAlD,EACA;CACC,aAAKnB,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAClClC,UAAAA,WAAW,EAAC;CADsB,SAAnC;CAGA;CACD;;;+CAEyB8F,WAAWC,SACrC;CACC,WAAKvB,MAAL,CAAYwB,aAAZ,GAA4B,KAAKxB,MAAL,CAAYwB,aAAZ,CAA0BC,MAA1B,CAAiC,UAAAC,EAAE;CAAA,eAAIA,EAAE,CAAC1F,EAAH,IAASuF,OAAO,CAACvF,EAArB;CAAA,OAAnC,CAA5B;CAEA,WAAKgE,MAAL,CAAY2B,SAAZ,CAAsB;CACrBX,QAAAA,IAAI,EAAEpM,gBAAgB,CAACS,WADF;CAErB4K,QAAAA,IAAI,EAAE;CACLjE,UAAAA,EAAE,EAAEsF,SADC;CAELM,UAAAA,IAAI,EAAEL,OAAO,CAACK;CAFT;CAFe,OAAtB;CAOA;;;6CAEuBnD,OAAO8C,SAC/B;CACC,WAAKvB,MAAL,CAAYwB,aAAZ,GAA4B,KAAKxB,MAAL,CAAYwB,aAAZ,CAA0BC,MAA1B,CAAiC,UAAAC,EAAE;CAAA,eAAIA,EAAE,CAAC1F,EAAH,IAASuF,OAAO,CAACvF,EAArB;CAAA,OAAnC,CAA5B;CACA;;;mDAE6BtE,QAAQ6J,SACtC;CACC,WAAKvB,MAAL,CAAYwB,aAAZ,GAA4B,KAAKxB,MAAL,CAAYwB,aAAZ,CAA0BC,MAA1B,CAAiC,UAAAC,EAAE;CAAA,eAAIA,EAAE,CAAC1F,EAAH,IAASuF,OAAO,CAACvF,EAArB;CAAA,OAAnC,CAA5B;CAEA,WAAKgE,MAAL,CAAY2B,SAAZ,CAAsB;CACrBX,QAAAA,IAAI,EAAEpM,gBAAgB,CAACU,QADF;CAErB2K,QAAAA,IAAI,EAAE;CAFe,OAAtB;CAIA;;;GAlIoC4B;;CCbtC;;;;;;;;AASA;KAEMC;;;;;mCAQL;CACC,aAAO,IAAP;CACA;;;8BAPD;CAAA,UADcjE,MACd,uEADuB,EACvB;CACC,aAAO,IAAI,IAAJ,CAASA,MAAT,CAAP;CACA;;;CAOD,sCAAYA,MAAZ,EACA;CAAA;CACC,SAAK6C,UAAL,GAAkB7C,MAAM,CAAC6C,UAAzB;CACA,SAAKR,KAAL,GAAarC,MAAM,CAACqC,KAApB;CACA,SAAKF,MAAL,GAAcnC,MAAM,CAACmC,MAArB;CACA;;;;uCAEiBnC,QAAQkE,OAAOC,SACjC;CACC,UAAInE,MAAM,CAAC0D,OAAP,CAAeU,QAAf,IAA2B,KAAKvB,UAAL,CAAgBwB,SAAhB,EAA/B,EACA;CACC,aAAKlC,MAAL,CAAY2B,SAAZ,CAAsB;CACrBX,UAAAA,IAAI,EAAEpM,gBAAgB,CAACO,eADF;CAErB8K,UAAAA,IAAI,EAAEpC;CAFe,SAAtB;;CAKA,YAAI,CAAC,KAAKqC,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB5G,MAAxB,CAA+B4B,MAAhC,IAA0C,CAAC,KAAKgF,MAAL,CAAYmC,UAA3D,EACA;CACC,eAAKnC,MAAL,CAAYmC,UAAZ,GAAyB,IAAzB;CACA,eAAKnC,MAAL,CAAYoC,IAAZ;CACA;CACD;CACD;;;;;KAGIC;;;;;8BAGL;CAAA,UADcxE,MACd,uEADuB,EACvB;CACC,aAAO,IAAI,IAAJ,CAASA,MAAT,CAAP;CACA;;;CAED,iDACA;CAAA,QADYA,MACZ,uEADqB,EACrB;CAAA;CACC,SAAK6C,UAAL,GAAkB7C,MAAM,CAAC6C,UAAzB;CACA,SAAKR,KAAL,GAAarC,MAAM,CAACqC,KAApB;CACA,SAAKF,MAAL,GAAcnC,MAAM,CAACmC,MAArB;CACA;;;;mCAGD;CACC,aAAO,aAAP;CACA;;;wCAEkBnC,QAAQkE,OAAOC,SAClC;CACC,WAAK9B,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAClC/B,QAAAA,SAAS,EAAEkC,MAAM,CAAClC,SADgB;CAElCC,QAAAA,YAAY,EAAE,KAFoB;CAGlCC,QAAAA,aAAa,EAAE,CAHmB;CAIlCtG,QAAAA,QAAQ,EAAEnC,QAAQ,CAACG;CAJe,OAAnC;CAOA,WAAKyM,MAAL,CAAY2B,SAAZ,CAAsB;CACrBX,QAAAA,IAAI,EAAEpM,gBAAgB,CAACI,YADF;CAErBiL,QAAAA,IAAI,EAAE;CACLtE,UAAAA,SAAS,EAAEkC,MAAM,CAAClC;CADb;CAFe,OAAtB;CAMA;;;iDAE2BkC,QAAQkE,OAAOC,SAC3C;CACC,WAAK9B,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAClC7G,QAAAA,QAAQ,EAAEgH,MAAM,CAAChH,QADiB;CAElCkF,QAAAA,cAAc,EAAE8B,MAAM,CAAC9B;CAFW,OAAnC;CAKA,WAAKiE,MAAL,CAAY2B,SAAZ,CAAsB;CACrBX,QAAAA,IAAI,EAAEpM,gBAAgB,CAACK,qBADF;CAErBgL,QAAAA,IAAI,EAAE;CACLpJ,UAAAA,QAAQ,EAAEgH,MAAM,CAAChH;CADZ;CAFe,OAAtB;CAMA;;;yCAEmBgH,QAAQkE,OAAOC,SACnC;CACC,WAAK9B,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAClC/B,QAAAA,SAAS,EAAEkC,MAAM,CAAClC,SADgB;CAElCE,QAAAA,aAAa,EAAEgC,MAAM,CAAChC,aAFY;CAGlCD,QAAAA,YAAY,EAAEiC,MAAM,CAACjC;CAHa,OAAnC;CAMA,WAAKoE,MAAL,CAAY2B,SAAZ,CAAsB;CACrBX,QAAAA,IAAI,EAAEpM,gBAAgB,CAACiH,aADF;CAErBoE,QAAAA,IAAI,EAAE;CACLtE,UAAAA,SAAS,EAAEkC,MAAM,CAAClC,SADb;CAELE,UAAAA,aAAa,EAAEgC,MAAM,CAAChC;CAFjB;CAFe,OAAtB;;CAQA,UAAIgC,MAAM,CAACjC,YAAX,EACA;CACC,aAAKoE,MAAL,CAAY2B,SAAZ,CAAsB;CACrBX,UAAAA,IAAI,EAAEpM,gBAAgB,CAACM,aADF;CAErB+K,UAAAA,IAAI,EAAE;CACLtE,YAAAA,SAAS,EAAEkC,MAAM,CAAClC,SADb;CAELE,YAAAA,aAAa,EAAEgC,MAAM,CAAChC;CAFjB;CAFe,SAAtB;;CAQA,YAAI,CAACgC,MAAM,CAAC7G,IAAZ,EACA;CACC,eAAKkJ,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAClC7G,YAAAA,QAAQ,EAAE;CACTS,cAAAA,IAAI,EAAE,EADG;CAET2E,cAAAA,SAAS,EAAE,EAFF;CAGTC,cAAAA,QAAQ,EAAE,EAHD;CAITC,cAAAA,YAAY,EAAE,EAJL;CAKTC,cAAAA,MAAM,EAAE,EALC;CAMTxB,cAAAA,MAAM,EAAE;CANC;CADwB,WAAnC;CAUA;CACD;CACD;;;;;CC3IF;;;;;;;;AASA;AA8CA,KAAa0H,MAAb;CAAA;CAAA;CAEA;CAEC,oBACA;CAAA;;CAAA,QADYzE,MACZ,uEADqB,EACrB;CAAA;CACC,SAAK0E,KAAL,GAAa,IAAb;CACA,SAAKC,mBAAL,GAA2B,KAA3B;CAEA,SAAKtO,OAAL,GAAe,KAAf;CAEA,SAAKuO,IAAL,GAAY5E,MAAM,CAAC4E,IAAP,IAAe,EAA3B;CACA,SAAKlJ,IAAL,GAAYsE,MAAM,CAACtE,IAAP,IAAe,EAA3B;CACA,SAAKmJ,QAAL,GAAgB7E,MAAM,CAAC6E,QAAP,IAAmB,IAAnC;CACA,SAAK9I,SAAL,GAAiBiE,MAAM,CAACjE,SAAP,KAAqB,KAAtC;CACA,SAAKC,YAAL,GAAoB,KAAKD,SAAL,IAAkBiE,MAAM,CAAChE,YAAzB,GAAuCgE,MAAM,CAAChE,YAA9C,GAA4D,EAAhF;CACA,SAAK8I,cAAL,GAAsB,oBAAO9E,MAAM,CAAC8E,cAAd,MAAiC,QAAjC,IAA6C9E,MAAM,CAAC8E,cAAP,KAA0B,IAAvE,GAA6E9E,MAAM,CAAC8E,cAApF,GAAoG,IAA1H;CAEA,SAAKhJ,QAAL,GAAgB,oBAAOkE,MAAM,CAAClE,QAAd,MAA2B,QAA3B,IAAuCkE,MAAM,CAAClE,QAA9D;;CACA,QAAI,KAAKA,QAAT,EACA;CACC,WAAKA,QAAL,CAAciJ,iBAAd,GAAkC/E,MAAM,CAAClE,QAAP,CAAgBiJ,iBAAhB,KAAsC,IAAxE;CACA,WAAKjJ,QAAL,CAAckJ,WAAd,GAA4BlL,QAAQ,CAACmL,cAAT,CAAwBjF,MAAM,CAAClE,QAAP,CAAgBkJ,WAAxC,CAA5B;CACA;;CAED,QAAI,OAAO,KAAKJ,IAAZ,KAAqB,QAAzB,EACA;CACC,UAAI,KAAKA,IAAL,CAAUrB,MAAV,IAAoB,CAAxB,EACA;CACC5C,QAAAA,OAAO,CAACe,IAAR,gEAAqE,KAAKkD,IAA1E,UAAqF,eAArF,EAAsG,+BAAtG,EAAuI,cAAvI;CACA,aAAKF,KAAL,GAAa,KAAb;CACA;CACD;;CAED,QAAI,OAAO,KAAKhJ,IAAZ,KAAqB,QAAzB,EACA;CACC,UAAI,KAAKA,IAAL,CAAU6H,MAAV,IAAoB,CAApB,IAAyB,CAAC,KAAK7H,IAAL,CAAUgE,UAAV,CAAqB,MAArB,CAA9B,EACA;CACCiB,QAAAA,OAAO,CAACe,IAAR,gEAAqE,KAAKhG,IAA1E,UAAqF,eAArF,EAAsG,+BAAtG,EAAuI,cAAvI;CACA,aAAKgJ,KAAL,GAAa,KAAb;CACA;CACD;;CAED,SAAKQ,MAAL,GAAc,KAAd;CACA,SAAKC,cAAL,GAAsB,KAAtB;CAEA,SAAKhF,UAAL,GAAkB,IAAlB;CAEA,SAAKiF,gBAAL,GAAwB,EAAxB;CACA,SAAKC,UAAL,GAAkB,EAAlB;CAEA,SAAKC,QAAL,GAAgB,KAAKxJ,QAAL,IAAiB,KAAKA,QAAL,CAAciJ,iBAA/B,GAAkDxK,MAAM,CAACC,EAAP,CAAUkJ,OAA5D,GAAqE,EAArF;;CACA,QAAI,oBAAO1D,MAAM,CAACsF,QAAd,MAA2B,QAA/B,EACA;CACC,WAAK/C,WAAL,CAAiBvC,MAAM,CAACsF,QAAxB;CACA;;CAED,SAAKC,WAAL,GAAmB,EAAnB;CACA,SAAKC,UAAL,GAAkB,IAAlB;CAEA,SAAK7B,aAAL,GAAqB,EAArB;CAEA,SAAK8B,gBAAL,GAAwB,IAAxB;;CAEA,QAAI,KAAK3J,QAAL,IAAiB,KAAKA,QAAL,CAAckJ,WAAnC,EACA;CACC,WAAKU,QAAL,GAAgB,KAAK5J,QAAL,CAAckJ,WAA9B;CACA,KAHD,MAKA;CACC,WAAKU,QAAL,GAAgB5L,QAAQ,CAAC6L,aAAT,CAAuB,KAAvB,CAAhB;;CACA,UAAI7L,QAAQ,CAAC8L,IAAT,CAAcC,UAAlB,EACA;CACC/L,QAAAA,QAAQ,CAAC8L,IAAT,CAAcE,YAAd,CAA2B,KAAKJ,QAAhC,EAA0C5L,QAAQ,CAAC8L,IAAT,CAAcC,UAAxD;CACA,OAHD,MAKA;CACC/L,QAAAA,QAAQ,CAAC8L,IAAT,CAAcG,WAAd,CAA0B,KAAKL,QAA/B;CACA;CACD;;CAED,SAAKM,QAAL,GAAgB,IAAhB;CAEAzL,IAAAA,MAAM,CAAC0L,gBAAP,CAAwB,mBAAxB,EAA6C,YAC7C;CACC,UAAI,CAAC,KAAI,CAAC5D,KAAV,EACA;CACC;CACA;;CAED,MAAA,KAAI,CAACA,KAAL,CAAWxC,MAAX,CAAkB,iBAAlB,EAAqC;CAACT,QAAAA,MAAM,EAAE;CAC7C8G,UAAAA,WAAW,EAAEjH,cAAK,CAACG,MAAN,CAAa+G,cAAb;CADgC;CAAT,OAArC;;CAIA,UACC,KAAI,CAAC9D,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB5G,MAAxB,CAA+B4B,MAA/B,IACG,KAAI,CAACkF,KAAL,CAAWtD,KAAX,CAAiBqH,WAAjB,CAA6BhH,MAA7B,CAAoC+D,IAApC,KAA6CkD,mBAAU,CAACC,MAD3D,IAEG,KAAI,CAACjE,KAAL,CAAWtD,KAAX,CAAiBqH,WAAjB,CAA6BhH,MAA7B,CAAoC8G,WAApC,KAAoDK,0BAAiB,CAACC,UAH1E,EAKA;CACC1M,QAAAA,QAAQ,CAAC2M,aAAT,CAAuBC,IAAvB;CACA;CACD,KAnBD;CAqBA,QAAIlE,eAAe,GAAGpI,kCAAY,CAACb,GAAb,CAAiB,KAAKkJ,SAAL,EAAjB,EAAmC,CAAnC,EAAsC,iBAAtC,EAAyD,KAAzD,CAAtB;;CACA,QAAID,eAAJ,EACA;CACC,WAAKD,WAAL,CAAiBC,eAAjB;CACA;;CAED,QAAImE,eAAe,GAAG;CACrBpL,MAAAA,MAAM,EAAE;CACPG,QAAAA,IAAI,EAAE,KAAKkL,OAAL,EADC;CAEP9K,QAAAA,QAAQ,EAAE,KAAKA,QAAL,KAAkB,KAFrB;CAGPC,QAAAA,SAAS,EAAE,KAAKA,SAHT;CAIPC,QAAAA,YAAY,EAAE,KAAKA;CAJZ,OADa;CAOrBI,MAAAA,IAAI,EAAE;CACLG,QAAAA,WAAW,EAAE,KAAKsK,WAAL,CAAiB,wBAAjB,CADR;CAELrK,QAAAA,WAAW,EAAE,KAAKqK,WAAL,CAAiB,6BAAjB,CAFR;CAGLpK,QAAAA,cAAc,EAAE,KAAKoK,WAAL,CAAiB,8BAAjB;CAHX,OAPe;CAYrBnK,MAAAA,YAAY,EAAE;CACbC,QAAAA,qBAAqB,EAAE,KAAKkK,WAAL,CAAiB,2BAAjB,CADV;CAEbjK,QAAAA,qBAAqB,EAAE,KAAKiK,WAAL,CAAiB,2BAAjB,CAFV;CAGbhK,QAAAA,iBAAiB,EAAE,KAAKgK,WAAL,CAAiB,qBAAjB;CAHN;CAZO,KAAtB;;CAkBA,QACC5H,cAAK,CAACC,KAAN,CAAYC,aAAZ,CAA0Ba,MAAM,CAAC/D,MAAjC,MACI+D,MAAM,CAAC/D,MAAP,CAAcC,eAAd,IAAiC8D,MAAM,CAAC/D,MAAP,CAAcE,SADnD,CADD,EAIA;CACCwK,MAAAA,eAAe,CAAC1K,MAAhB,GAAyB,EAAzB;;CACA,UAAI+D,MAAM,CAAC/D,MAAP,CAAcC,eAAlB,EACA;CACCyK,QAAAA,eAAe,CAAC1K,MAAhB,CAAuBC,eAAvB,GAAyC8D,MAAM,CAAC/D,MAAP,CAAcC,eAAvD;CACA;;CACD,UAAI8D,MAAM,CAAC/D,MAAP,CAAcE,SAAlB,EACA;CACCwK,QAAAA,eAAe,CAAC1K,MAAhB,CAAuBE,SAAvB,GAAmC6D,MAAM,CAAC/D,MAAP,CAAcE,SAAjD;CACA;CACD;;CAED,SAAK0G,UAAL,GAAkB,IAAIiE,mCAAJ,EAAlB;CAEA,QAAIC,oBAAoB,GAAG;CAC1BxL,MAAAA,MAAM,EAAE;CACPG,QAAAA,IAAI,EAAE,KAAKkL,OAAL,EADC;CAEPpN,QAAAA,MAAM,EAAE,KAAKiJ,SAAL,EAFD;CAGPuE,QAAAA,UAAU,EAAE,KAAKnC;CAHV,OADkB;CAM1BzF,MAAAA,MAAM,EAAE;CACP+D,QAAAA,IAAI,EAAElE,cAAK,CAACG,MAAN,CAAaC,QAAb,KAAyBgH,mBAAU,CAACC,MAApC,GAA4CD,mBAAU,CAACY,OADtD;CAEPf,QAAAA,WAAW,EAAEjH,cAAK,CAACG,MAAN,CAAa+G,cAAb;CAFN,OANkB;CAU1BtI,MAAAA,MAAM,EAAE;CACPqJ,QAAAA,YAAY,EAAE,KAAKrE,UAAL,CAAgBsE,sBAAhB;CADP,OAVkB;CAa1BC,MAAAA,aAAa,EAAE;CACd7L,QAAAA,MAAM,EAAE;CACPG,UAAAA,IAAI,EAAE,IADC;CAEPlC,UAAAA,MAAM,EAAE,IAFD;CAGPwN,UAAAA,UAAU,EAAE;CAHL,SADM;CAMdnJ,QAAAA,MAAM,EAAE;CACPqJ,UAAAA,YAAY,EAAE,IADP;CAEPG,UAAAA,iBAAiB,EAAE;CAFZ;CANM;CAbW,KAA3B;CA0BA,QAAIC,cAAc,GAAG,CAACrI,cAAK,CAACsI,OAAN,CAAcC,IAAd,EAAtB;CAEA,QAAIC,uBAAJ,GACEC,QADF,CACWpM,WAAW,CAACqM,MAAZ,GAAqBC,YAArB,CAAkCjB,eAAlC,CADX,EAEEe,QAFF,CAEWG,yBAAgB,CAACF,MAAjB,GAA0BC,YAA1B,CAAuCb,oBAAvC,CAFX,EAGEW,QAHF,CAGWI,uBAAc,CAACH,MAAf,GAAwBI,WAAxB,CAAoCT,cAApC,EAAoDM,YAApD,CAAiE;CAAClM,MAAAA,IAAI,EAAE,KAAKA;CAAZ,KAAjE,CAHX,EAIEgM,QAJF,CAIWM,sBAAa,CAACL,MAAd,GAAuBI,WAAvB,CAAmCT,cAAnC,EAAmDM,YAAnD,CAAgE;CAAClM,MAAAA,IAAI,EAAE,KAAKA;CAAZ,KAAhE,CAJX,EAKEgM,QALF,CAKWO,mBAAU,CAACN,MAAX,GAAoBI,WAApB,CAAgCT,cAAhC,EAAgDM,YAAhD,CAA6D;CAAClM,MAAAA,IAAI,EAAE,KAAKA,IAAZ;CAAkBwM,MAAAA,OAAO,EAAE;CAACzO,QAAAA,IAAI,EAAE,KAAKoN,WAAL,CAAiB,mCAAjB;CAAP;CAA3B,KAA7D,CALX,EAMEa,QANF,CAMWS,mBAAU,CAACR,MAAX,GAAoBI,WAApB,CAAgCT,cAAhC,EAAgDM,YAAhD,CAA6D;CAAClM,MAAAA,IAAI,EAAE,KAAKA,IAAZ;CAAkBwM,MAAAA,OAAO,EAAE;CAACzO,QAAAA,IAAI,EAAE,KAAKoN,WAAL,CAAiB,kCAAjB;CAAP;CAA3B,KAA7D,CANX,EAOEuB,iBAPF,CAOoB;CAClB3O,MAAAA,IAAI,EAAE,aADY;CAElB0J,MAAAA,IAAI,EAAEsE,uBAAW,CAACY,YAAZ,CAAyBC,YAFb;CAGlB9O,MAAAA,MAAM,EAAE,KAAKiJ,SAAL;CAHU,KAPpB,EAYC8F,KAZD,CAYO,UAAA1O,MAAM,EAAI;CAEhB,MAAA,KAAI,CAACwI,KAAL,GAAaxI,MAAM,CAACwI,KAApB;CACA,MAAA,KAAI,CAACmG,cAAL,GAAsB3O,MAAM,CAAC4O,OAA7B;;CAEA,UAAIzI,MAAM,CAACpE,QAAP,IAAmB,OAAO9E,aAAa,CAACkJ,MAAM,CAACpE,QAAR,CAApB,KAA0C,WAAjE,EACA;CACC,QAAA,KAAI,CAACyG,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAACjE,UAAAA,QAAQ,EAAEoE,MAAM,CAACpE;CAAlB,SAAnC;CACA;;CAED,MAAA,KAAI,CAAC8M,cAAL;;CAEA,MAAA,KAAI,CAAC7F,UAAL,CAAgB8F,QAAhB,CAAyB,KAAI,CAACtG,KAA9B;;CACA,MAAA,KAAI,CAACQ,UAAL,CAAgB+F,aAAhB,CAA8B,KAAI,CAACzI,UAAnC;;CAEA,MAAA,KAAI,CAAC0C,UAAL,CAAgBgG,iCAAhB,CAAkD,KAAI,CAACC,eAAL,CAAqBC,IAArB,CAA0B,KAA1B,CAAlD;;CAEA,MAAA,KAAI,CAACC,YAAL,GAAoBC,oCAAmB,CAACtB,MAApB,CAA2B;CAC9CtF,QAAAA,KAAK,EAAE,KAAI,CAACA,KADkC;CAE9CQ,QAAAA,UAAU,EAAE,KAAI,CAACA;CAF6B,OAA3B,CAApB;CAIA,MAAA,KAAI,CAACqG,gBAAL,GAAwBjH,uBAAuB,CAAC0F,MAAxB,CAA+B;CACtDxF,QAAAA,MAAM,EAAE,KAD8C;CAEtDE,QAAAA,KAAK,EAAE,KAAI,CAACA,KAF0C;CAGtDQ,QAAAA,UAAU,EAAE,KAAI,CAACA;CAHqC,OAA/B,CAAxB;CAMAtI,MAAAA,MAAM,CAAC4O,aAAP,CAAqB,IAAIC,WAAJ,CAAgB,kBAAhB,EAAoC;CAACC,QAAAA,MAAM,EAAE;CACjElH,UAAAA,MAAM,EAAE,KADyD;CAEjEmH,UAAAA,UAAU,EAAE,KAAI,CAAC1E,IAFgD;CAGjE2E,UAAAA,UAAU,EAAE,KAAI,CAAC7N;CAHgD;CAAT,OAApC,CAArB;;CAMA,UAAI,KAAI,CAAC8N,aAAT,EACA;CACC,QAAA,KAAI,CAACC,KAAL;CACA;;CAED,UAAI,KAAI,CAAC3N,QAAL,IAAiB,KAAI,CAAC4N,YAA1B,EACA;CACC,QAAA,KAAI,CAACnF,IAAL;CACA;CACD,KAtDD;CAuDA;;CArOF;CAAA;CAAA,qCAwOC;CACC,WAAKpE,UAAL,GAAkB,IAAIJ,gBAAJ,CAAqB;CAACM,QAAAA,QAAQ,EAAE,KAAK3E,IAAL,GAAU;CAArB,OAArB,CAAlB;;CAEA,UAAI,KAAKiO,gBAAL,EAAJ,EACA;CACC,aAAKxJ,UAAL,CAAgBD,SAAhB,CAA0B,KAAK0J,WAAL,EAA1B;CACA,OAHD,MAKA;CACC,aAAKzJ,UAAL,CAAgBD,SAAhB,CAA0B1H,QAAQ,CAACC,KAAnC;CACA;CACD;CAnPF;CAAA;CAAA,wCAsPC;CAAA;;CACC,UAAI,CAAC,KAAKoR,OAAL,EAAL,EACA;CACClJ,QAAAA,OAAO,CAACC,KAAR,CAAc,4DAAd;CACA,eAAO,KAAP;CACA;;CAED,WAAK+D,mBAAL,GAA2B,IAA3B;;CACA,UACC,CAAC,KAAKgF,gBAAL,EAAD,KACC,KAAKvE,gBAAL,CAAsB3G,IAAtB,IACG,KAAKqL,iBAAL,EAFJ,CADD,EAMA;CACC,aAAKC,WAAL;CACA,aAAK7E,MAAL,GAAc,IAAd;CACA,aAAK8E,aAAL;CACA,OAVD,MAWK,IAAI,KAAKC,kBAAL,MAA6B,KAAKN,gBAAL,EAAjC,EACL;CACC,aAAKI,WAAL;CACA,aAAK7E,MAAL,GAAc,IAAd;CACA,aAAK8E,aAAL;CACA,OALI,MAOL;CACC,aAAK7J,UAAL,CAAgBkB,UAAhB,CAA2BxJ,UAAU,CAACE,eAAtC,EAAuD;CAAC6M,UAAAA,IAAI,EAAE,KAAKA;CAAZ,SAAvD,EAA0E,UAACsF,GAAD,EAAS;CAAC,UAAA,MAAI,CAACzE,gBAAL,GAAwByE,GAAxB;CAA4B,SAAhH,EAAkH5I,IAAlH,CAAuH,UAACzH,MAAD,EAAY;CAClI,UAAA,MAAI,CAAC4L,gBAAL,GAAwB,IAAxB;;CACA,UAAA,MAAI,CAAC0E,UAAL;;CAEA,UAAA,MAAI,CAACC,iBAAL,CAAuBvS,UAAU,CAACE,eAAlC,EAAmD8B,MAAnD;;CAEA,cAAI,CAAC,MAAI,CAACqL,MAAV,EACA;CACC,YAAA,MAAI,CAACA,MAAL,GAAc,IAAd;;CACA,YAAA,MAAI,CAAC8E,aAAL;CACA;CACD,SAXD,EAWGxI,KAXH,CAWS,UAAA3H,MAAM,EAAI;CAClB,UAAA,MAAI,CAAC4L,gBAAL,GAAwB,IAAxB;;CAEA,UAAA,MAAI,CAAC4E,QAAL,CAAcxQ,MAAM,CAAC+G,KAAP,GAAea,EAAf,CAAkBb,KAAhC,EAAuC/G,MAAM,CAAC+G,KAAP,GAAea,EAAf,CAAkBE,iBAAzD;CACA,SAfD;;CAiBA,YAAI,KAAKsI,kBAAL,EAAJ,EACA;CACC,eAAK/E,MAAL,GAAc,IAAd;CACA,eAAK8E,aAAL;CACA;CACD;CACD;CAxSF;CAAA;CAAA,kCA2SC;CAAA;;CACC,UAAI,KAAKM,eAAT,EACA;CACC,eAAO,IAAP;CACA;;CAED,WAAKA,eAAL,GAAuB,IAAvB;;CAEA,UAAI,KAAK7E,gBAAT,EACA;CACC,aAAKA,gBAAL,CAAsB8E,KAAtB;CACA;;CAED,UAAIC,KAAK,mCACP3S,UAAU,CAACE,eADJ,EACsB,CAACF,UAAU,CAACE,eAAZ,EAA6B;CAAC6M,QAAAA,IAAI,EAAE,KAAKA;CAAZ,OAA7B,CADtB,CAAT;;CAIA,UAAI,KAAK+E,gBAAL,EAAJ,EACA;CACCa,QAAAA,KAAK,CAAC3S,UAAU,CAACG,eAAZ,CAAL,GAAoC,CAACH,UAAU,CAACG,eAAZ,EAA6B;CAACyS,UAAAA,SAAS,EAAE,KAAKC,WAAL,EAAZ;CAAgCC,UAAAA,UAAU,EAAE,KAAKC,eAAL,EAA5C;CAAoEC,UAAAA,WAAW,EAAE,KAAKC,aAAL;CAAjF,SAA7B,CAApC;CACAN,QAAAA,KAAK,CAACO,0BAAmB,CAACC,SAArB,CAAL,GAAuC,CAACC,mBAAY,CAACD,SAAd,EAAyB;CAACE,UAAAA,SAAS,EAAE,aAAWrT,UAAU,CAACG,eAAtB,GAAsC;CAAlD,SAAzB,CAAvC;CACAwS,QAAAA,KAAK,CAACO,0BAAmB,CAACI,uBAArB,CAAL,GAAqD,CAACF,mBAAY,CAACG,mBAAd,EAAmC;CAACC,UAAAA,OAAO,EAAE,aAAWxT,UAAU,CAACG,eAAtB,GAAsC,WAAhD;CAA6DsT,UAAAA,KAAK,EAAE,KAAKzI,UAAL,CAAgB0I,sBAAhB,EAApE;CAA8GC,UAAAA,YAAY,EAAE;CAA5H,SAAnC,CAArD;CACA,OALD,MAOA;CACChB,QAAAA,KAAK,CAAC3S,UAAU,CAACC,kBAAZ,CAAL,GAAuC,CAACD,UAAU,CAACC,kBAAZ;CAAiC2S,UAAAA,SAAS,EAAE,aAAW5S,UAAU,CAACE,eAAtB,GAAsC;CAAlF,WAAoG,KAAK0T,qBAAL,EAApG,EAAvC;CACAjB,QAAAA,KAAK,CAACO,0BAAmB,CAACC,SAArB,CAAL,GAAuC,CAACC,mBAAY,CAACD,SAAd,EAAyB;CAACE,UAAAA,SAAS,EAAE,aAAWrT,UAAU,CAACC,kBAAtB,GAAyC;CAArD,SAAzB,CAAvC;;CAEA,YAAI,KAAKsN,gBAAL,CAAsB3G,IAAtB,IAA8B,KAAKqL,iBAAL,EAAlC,EACA;CACCU,UAAAA,KAAK,CAAC3S,UAAU,CAACG,eAAZ,CAAL,GAAoC,CAACH,UAAU,CAACG,eAAZ,EAA6B;CAACyS,YAAAA,SAAS,EAAE,aAAW5S,UAAU,CAACE,eAAtB,GAAsC,aAAlD;CAAiE4S,YAAAA,UAAU,EAAE,KAAKC,eAAL,EAA7E;CAAqGC,YAAAA,WAAW,EAAE,KAAKC,aAAL;CAAlH,WAA7B,CAApC;CACAN,UAAAA,KAAK,CAACO,0BAAmB,CAACI,uBAArB,CAAL,GAAqD,CAACF,mBAAY,CAACG,mBAAd,EAAmC;CAACC,YAAAA,OAAO,EAAE,aAAWxT,UAAU,CAACG,eAAtB,GAAsC,WAAhD;CAA6DsT,YAAAA,KAAK,EAAE,KAAKzI,UAAL,CAAgB0I,sBAAhB,EAApE;CAA8GC,YAAAA,YAAY,EAAE;CAA5H,WAAnC,CAArD;CACA;;CACD,YAAI,KAAKE,kBAAL,EAAJ,EACA;CACClB,UAAAA,KAAK,CAAC3S,UAAU,CAACK,sBAAZ,CAAL,GAA2C,CAACL,UAAU,CAACK,sBAAZ,EAAoC;CAACuS,YAAAA,SAAS,EAAE,aAAW5S,UAAU,CAACE,eAAtB,GAAsC,aAAlD;CAAiE4T,YAAAA,WAAW,EAAE/P,QAAQ,CAACgQ;CAAvF,WAApC,CAA3C;CACA;CACD;;CAEDpB,MAAAA,KAAK,CAAC3S,UAAU,CAACQ,cAAZ,CAAL,GAAmC,CAACR,UAAU,CAACQ,cAAZ,EAA4B,EAA5B,CAAnC;CACAmS,MAAAA,KAAK,CAAC3S,UAAU,CAACS,aAAZ,CAAL,GAAkC,CAACT,UAAU,CAACS,aAAZ,EAA2B;CAAC,iBAAS;CAAV,OAA3B,CAAlC;CACAkS,MAAAA,KAAK,CAAC3S,UAAU,CAACI,aAAZ,CAAL,GAAkC,CAACJ,UAAU,CAACI,aAAZ,EAA2B,EAA3B,CAAlC;CAEA,WAAKkI,UAAL,CAAgB6B,SAAhB,CAA0BwI,KAA1B,EAAiC,UAACqB,QAAD,EACjC;CACC,YAAI,CAACA,QAAL,EACA;CACC,UAAA,MAAI,CAACvB,eAAL,GAAuB,KAAvB;;CACA,UAAA,MAAI,CAACD,QAAL,CAAc,gBAAd,EAAgC,oCAAhC;;CACA,iBAAO,KAAP;CACA;;CAED,YAAIyB,SAAS,GAAGD,QAAQ,CAAChU,UAAU,CAACE,eAAZ,CAAxB;;CACA,YAAI+T,SAAS,IAAIA,SAAS,CAAClL,KAAV,EAAjB,EACA;CACC,UAAA,MAAI,CAAC0J,eAAL,GAAuB,KAAvB;;CAEA,UAAA,MAAI,CAACD,QAAL,CAAcyB,SAAS,CAAClL,KAAV,GAAkBa,EAAlB,CAAqBb,KAAnC,EAA0CkL,SAAS,CAAClL,KAAV,GAAkBa,EAAlB,CAAqBE,iBAA/D;;CACA,iBAAO,KAAP;CACA;;CACD,QAAA,MAAI,CAACyI,iBAAL,CAAuBvS,UAAU,CAACE,eAAlC,EAAmD+T,SAAnD;;CAEA,YAAIC,aAAa,GAAGF,QAAQ,CAAChU,UAAU,CAACI,aAAZ,CAA5B;;CACA,YAAI8T,aAAa,CAACnL,KAAd,EAAJ,EACA;CACC,UAAA,MAAI,CAAC0J,eAAL,GAAuB,KAAvB;;CACA,UAAA,MAAI,CAACD,QAAL,CAAc0B,aAAa,CAACnL,KAAd,GAAsBa,EAAtB,CAAyBb,KAAvC,EAA8CmL,aAAa,CAACnL,KAAd,GAAsBa,EAAtB,CAAyBE,iBAAvE;;CACA,iBAAO,KAAP;CACA;;CACD,QAAA,MAAI,CAACyI,iBAAL,CAAuBvS,UAAU,CAACI,aAAlC,EAAiD8T,aAAjD;;CAEA,YAAIC,aAAa,GAAGH,QAAQ,CAACd,0BAAmB,CAACC,SAArB,CAA5B;;CACA,YAAIgB,aAAa,CAACpL,KAAd,EAAJ,EACA;CACC,UAAA,MAAI,CAAC0J,eAAL,GAAuB,KAAvB;;CACA,UAAA,MAAI,CAACD,QAAL,CAAc2B,aAAa,CAACpL,KAAd,GAAsBa,EAAtB,CAAyBb,KAAvC,EAA8CoL,aAAa,CAACpL,KAAd,GAAsBa,EAAtB,CAAyBE,iBAAvE;;CACA,iBAAO,KAAP;CACA;;CACD,QAAA,MAAI,CAACyI,iBAAL,CAAuBW,0BAAmB,CAACC,SAA3C,EAAsDgB,aAAtD;;CAEA,YAAIC,eAAe,GAAGJ,QAAQ,CAAChU,UAAU,CAACG,eAAZ,CAA9B;;CACA,YAAIiU,eAAJ,EACA;CACC,cAAIA,eAAe,CAACrL,KAAhB,EAAJ,EACA;CACC,YAAA,MAAI,CAAC0J,eAAL,GAAuB,KAAvB;;CACA,YAAA,MAAI,CAACD,QAAL,CAAc4B,eAAe,CAACrL,KAAhB,GAAwBa,EAAxB,CAA2Bb,KAAzC,EAAgDqL,eAAe,CAACrL,KAAhB,GAAwBa,EAAxB,CAA2BE,iBAA3E;;CACA,mBAAO,KAAP;CACA;;CAED,UAAA,MAAI,CAACyI,iBAAL,CAAuBvS,UAAU,CAACG,eAAlC,EAAmDiU,eAAnD;CACA;;CAED,YAAIC,uBAAuB,GAAGL,QAAQ,CAACd,0BAAmB,CAACI,uBAArB,CAAtC;;CACA,YAAIe,uBAAJ,EACA;CACC,cAAIA,uBAAuB,CAACtL,KAAxB,EAAJ,EACA;CACC,YAAA,MAAI,CAAC0J,eAAL,GAAuB,KAAvB;;CACA,YAAA,MAAI,CAACD,QAAL,CAAc6B,uBAAuB,CAACtL,KAAxB,GAAgCa,EAAhC,CAAmCb,KAAjD,EAAwDsL,uBAAuB,CAACtL,KAAxB,GAAgCa,EAAhC,CAAmCE,iBAA3F;;CACA,mBAAO,KAAP;CACA;;CAED,UAAA,MAAI,CAACU,KAAL,CAAWe,QAAX,CAAoB,sBAApB,EAA4C;CAC3CJ,YAAAA,QAAQ,EAAE,MAAI,CAACH,UAAL,CAAgBsJ,WAAhB,EADiC;CAE3CpJ,YAAAA,MAAM,EAAE,MAAI,CAACF,UAAL,CAAgBC,SAAhB;CAFmC,WAA5C;;CAKA,UAAA,MAAI,CAACsH,iBAAL,CAAuBW,0BAAmB,CAACI,uBAA3C,EAAoEe,uBAApE;CACA;;CAED,YAAIE,kBAAkB,GAAGP,QAAQ,CAAChU,UAAU,CAACC,kBAAZ,CAAjC;;CACA,YAAIsU,kBAAJ,EACA;CACC,cAAIA,kBAAkB,CAACxL,KAAnB,EAAJ,EACA;CACC,YAAA,MAAI,CAAC0J,eAAL,GAAuB,KAAvB;;CACA,YAAA,MAAI,CAACD,QAAL,CAAc+B,kBAAkB,CAACxL,KAAnB,GAA2Ba,EAA3B,CAA8Bb,KAA5C,EAAmDwL,kBAAkB,CAACxL,KAAnB,GAA2Ba,EAA3B,CAA8BE,iBAAjF;;CACA,mBAAO,KAAP;CACA;;CACD,UAAA,MAAI,CAACyI,iBAAL,CAAuBvS,UAAU,CAACC,kBAAlC,EAAsDsU,kBAAtD;CACA;;CAED,YAAIC,SAAS,GAAG,CAAhB;CAEA,YAAIC,gBAAgB,GAAGT,QAAQ,CAAChU,UAAU,CAACQ,cAAZ,CAA/B;;CACA,YAAIiU,gBAAgB,IAAI,CAACA,gBAAgB,CAAC1L,KAAjB,EAAzB,EACA;CACCyL,UAAAA,SAAS,GAAGE,IAAI,CAACC,KAAL,CAAW,CAAE,IAAI1R,IAAJ,EAAD,CAAaE,OAAb,KAAyB,IAAIF,IAAJ,CAASwR,gBAAgB,CAAClK,IAAjB,EAAT,EAAkCpH,OAAlC,EAA1B,IAAuE,IAAlF,CAAZ;CACA;;CAED,YAAIyR,MAAM,GAAG,IAAb;CACA,YAAIC,gBAAgB,GAAGb,QAAQ,CAAChU,UAAU,CAACS,aAAZ,CAA/B;;CACA,YAAIoU,gBAAgB,IAAI,CAACA,gBAAgB,CAAC9L,KAAjB,EAAzB,EACA;CACC6L,UAAAA,MAAM,GAAGC,gBAAgB,CAACtK,IAAjB,EAAT;CACAqK,UAAAA,MAAM,CAACE,MAAP,CAAcN,SAAd,GAA0BA,SAA1B;CACA;;CAED,QAAA,MAAI,CAACO,eAAL,CAAqBH,MAArB,EAA6BnL,IAA7B,CAAkC,YAAM;CACvC,UAAA,MAAI,CAACuL,mBAAL;CACA,SAFD,EAEGrL,KAFH,CAES,UAACZ,KAAD,EAAW;CACnB,UAAA,MAAI,CAACyJ,QAAL,CAAczJ,KAAK,CAACa,EAAN,CAASb,KAAvB,EAA8BA,KAAK,CAACa,EAAN,CAASE,iBAAvC;CACA,SAJD;;CAMA,QAAA,MAAI,CAAC2I,eAAL,GAAuB,KAAvB;CACA,OAvGD,EAuGG,KAvGH,EAuGU,KAvGV,EAuGiBrL,cAAK,CAACiC,oBAAN,CAA2B;CAACzH,QAAAA,IAAI,EAAE,oBAAP;CAA6BoE,QAAAA,MAAM,EAAE,KAAKgF,UAAL,CAAgBiK,aAAhB;CAArC,OAA3B,CAvGjB;CAwGA;CA9bF;CAAA;CAAA,sCAgcmB3I,OAhcnB,EAgc4BtK,MAhc5B,EAgcoCqK,KAhcpC,EAicC;CACC,WAAK8E,YAAL,CAAkB+D,OAAlB,CAA0B5I,OAA1B,EAAmCtK,MAAnC,EAA2CqK,KAA3C;CACA,WAAKgF,gBAAL,CAAsB6D,OAAtB,CAA8B5I,OAA9B,EAAuCtK,MAAvC,EAA+CqK,KAA/C;CACA;CApcF;CAAA;CAAA,oCAsciB8I,KAtcjB,EAucC;CAAA;;CACC,UAAI1T,MAAM,CAACC,GAAP,CAAW,IAAX,EAAiB,sBAAjB,CAAJ,EACA;CACC,eAAOyT,KAAP;CACA;;CAED,UAAI,CAAC/N,cAAK,CAACC,KAAN,CAAY+N,OAAZ,CAAoBD,KAApB,CAAL,EACA;CACC,eAAOA,KAAP;CACA;;CAED,aAAOA,KAAK,CAACE,GAAN,CAAU,UAAAC,IAAI,EACrB;CACC,YAAI1O,IAAI,GAAG,CAAClE,MAAM,CAAC6S,GAAP,IAAcA,YAAf,EAAoB,MAAI,CAAC/I,SAAL,KAAiB,GAAjB,GAAqB8I,IAAI,CAAChP,EAA1B,GAA6B,GAA7B,GAAiC,MAAI,CAACyL,WAAL,EAArD,CAAX;;CACA,YAAIyD,QAAQ,GAAG,sBAAoB5O,IAApB,GAAyB,oBAAzB,GAA8C,MAAI,CAAC4F,SAAL,EAA7D;;CACA,YAAI8I,IAAI,CAACG,UAAT,EACA;CACCH,UAAAA,IAAI,CAACG,UAAL,GAAkBH,IAAI,CAACG,UAAL,GAAgB,GAAhB,GAAoBD,QAAtC;CACA;;CACD,YAAIF,IAAI,CAACI,OAAT,EACA;CACCJ,UAAAA,IAAI,CAACI,OAAL,GAAeJ,IAAI,CAACI,OAAL,GAAa,GAAb,GAAiBF,QAAhC;CACA;;CACD,YAAIF,IAAI,CAACK,WAAT,EACA;CACCL,UAAAA,IAAI,CAACK,WAAL,GAAmBL,IAAI,CAACK,WAAL,GAAiB,GAAjB,GAAqBH,QAAxC;CACA;;CAED,eAAOF,IAAP;CACA,OAlBM,CAAP;CAmBA;CAreF;CAAA;CAAA,0CAweC;CACC,UAAIlO,cAAK,CAACwO,QAAN,CAAeC,KAAf,EAAJ,EACA;CACC,YAAIC,OAAO,GAAG1O,cAAK,CAACwO,QAAN,CAAeG,aAAf,EAAd;;CACA,YAAID,OAAO,IAAIA,OAAO,IAAI,EAA1B,EACA;CACC,iBAAO,KAAP;CACA;CACD;;CAED,aAAO,IAAP;CACA;CAEF;;CAEA;;CAvfA;CAAA;CAAA,oCAyfiBlB,MAzfjB,EA0fC;CAAA;;CACC,UAAItL,OAAO,GAAG,IAAI3G,EAAE,CAAC4G,OAAP,EAAd;;CAEA,UAAI,KAAKyM,UAAT,EACA;CACC,YAAI,CAAC,KAAKA,UAAL,CAAgBC,WAAhB,EAAL,EACA;CACC,eAAKD,UAAL,CAAgBE,iBAAhB;CACA;;CACD5M,QAAAA,OAAO,CAAC6M,OAAR,CAAgB,IAAhB;CACA,eAAO7M,OAAP;CACA;;CACD,UAAI,CAAC,KAAKkD,SAAL,EAAD,IAAqB,CAAC,KAAK5B,SAAL,EAAtB,IAA0C,CAAC,KAAKtC,UAApD,EACA;CACCgB,QAAAA,OAAO,CAACS,MAAR,CAAe;CACdH,UAAAA,EAAE,EAAE;CAAEb,YAAAA,KAAK,EAAE,mBAAT;CAA8Be,YAAAA,iBAAiB,EAAE;CAAjD;CADU,SAAf;CAGA,eAAOR,OAAP;CACA;;CAED,WAAK0M,UAAL,GAAkB,IAAII,sBAAJ,CAAe;CAChCC,QAAAA,aAAa,EAAE,IADiB;CAEhC7K,QAAAA,MAAM,EAAE,KAAKgB,SAAL,EAFwB;CAGhC7K,QAAAA,MAAM,EAAE,KAAKiJ,SAAL,EAHwB;CAIhCtC,QAAAA,UAAU,EAAE,KAAKA,UAJe;CAKhCgO,QAAAA,eAAe,EAAE1B,MAAM,GAAEA,MAAM,CAACE,MAAP,CAAcyB,gBAAhB,GAAkC,CALzB;CAMhCC,QAAAA,iBAAiB,EAAE,IANa;CAOhCC,QAAAA,mBAAmB,EAAE;CAPW,OAAf,CAAlB;CAUA,WAAKT,UAAL,CAAgBU,SAAhB,CACC,IAAIC,qCAAJ,CAAyB;CACxBnM,QAAAA,KAAK,EAAE,KAAKA,KADY;CAExBQ,QAAAA,UAAU,EAAE,KAAKA;CAFO,OAAzB,CADD;CAMA,WAAKgL,UAAL,CAAgBU,SAAhB,CACC,IAAItK,0BAAJ,CAA+B;CAC9B5B,QAAAA,KAAK,EAAE,KAAKA,KADkB;CAE9BQ,QAAAA,UAAU,EAAE,KAAKA,UAFa;CAG9BV,QAAAA,MAAM,EAAE;CAHsB,OAA/B,CADD;CAOA,WAAK0L,UAAL,CAAgBU,SAAhB,CACC,IAAI/J,mCAAJ,CAAwC;CACvCnC,QAAAA,KAAK,EAAE,KAAKA,KAD2B;CAEvCQ,QAAAA,UAAU,EAAE,KAAKA,UAFsB;CAGvCV,QAAAA,MAAM,EAAE;CAH+B,OAAxC,CADD;CAQA,WAAK0L,UAAL,CAAgBU,SAAhB,CAA0B;CACzBpL,QAAAA,IAAI,EAAE8K,sBAAU,CAAClX,gBAAX,CAA4B0X,MADT;CAEzB1N,QAAAA,QAAQ,EAAE,KAAK2N,sBAAL,CAA4B3F,IAA5B,CAAiC,IAAjC;CAFe,OAA1B;CAKA,WAAK4F,sBAAL,GAA8B,KAAKd,UAAL,CAAgBU,SAAhB,CAA0B;CACvDpL,QAAAA,IAAI,EAAE8K,sBAAU,CAAClX,gBAAX,CAA4B0X,MADqB;CAEvD1N,QAAAA,QAAQ,EAAE,kBAAClH,MAAD,EAAY;CACrB,cAAIA,MAAM,CAAC+U,MAAP,KAAkBX,sBAAU,CAACY,UAAX,CAAsBC,MAA5C,EACA;CACC3N,YAAAA,OAAO,CAAC6M,OAAR,CAAgB,IAAhB;;CACA,YAAA,MAAI,CAACW,sBAAL;CACA;CACD;CARsD,OAA1B,CAA9B;;CAWA,UAAI,KAAK3I,QAAT,EACA;CACC,aAAKA,QAAL,CAAc+I,KAAd,CAAoBC,iBAApB,GAAwC,KAAKnB,UAA7C;CACA,aAAK7H,QAAL,CAAc+I,KAAd,CAAoBE,KAApB,CAA0B,0BAA1B,EAAsD,KAAKpB,UAA3D;CACA;;CAED,WAAKA,UAAL,CAAgBpE,KAAhB,+BACIgD,MADJ;CAECyC,QAAAA,0BAA0B,EAAE;CAF7B,UAGG1N,KAHH,CAGS,YAAU;CAClBL,QAAAA,OAAO,CAACS,MAAR,CAAe;CACdH,UAAAA,EAAE,EAAE;CAAEb,YAAAA,KAAK,EAAE,uBAAT;CAAkCe,YAAAA,iBAAiB,EAAE;CAArD;CADU,SAAf;CAGA,OAPD;CASA,aAAOR,OAAP;CACA;CA7kBF;CAAA;CAAA,qCAglBC;CACC,UAAI,KAAK0M,UAAT,EACA;CACC,aAAKA,UAAL,CAAgBsB,IAAhB,CAAqBlB,sBAAU,CAACmB,YAAX,CAAwBC,MAA7C,EAAqD,iBAArD;CACA;CACD;CArlBF;CAAA;CAAA,4CAwlBC;CACC;CACA,WAAKxB,UAAL,CAAgByB,OAAhB,CAAwBrB,sBAAU,CAACmB,YAAX,CAAwBC,MAAhD,EAAwD,kDAAxD;CACA;CA3lBF;CAAA;CAAA,2CA6lBwBjN,IA7lBxB,EA8lBC;CAAA;;CACC,UAAIA,IAAI,CAACwM,MAAL,KAAgBX,sBAAU,CAACY,UAAX,CAAsBC,MAA1C,EACA;CACC,aAAKzY,OAAL,GAAe,KAAf;;CAEA,YAAI,KAAKkZ,kBAAT,EACA;CACC,eAAKC,eAAL,GAAuBlO,IAAvB,CAA4B,YAAM;CACjC,YAAA,MAAI,CAACuL,mBAAL;CACA,WAFD;CAGA,eAAK0C,kBAAL,GAA0B,KAA1B;CACA,SAND,MAQA;CACC,eAAKE,WAAL;CACA,eAAK5C,mBAAL;CACA;CACD,OAhBD,MAiBK,IAAIzK,IAAI,CAACwM,MAAL,KAAgBX,sBAAU,CAACY,UAAX,CAAsBa,OAA1C,EACL;CACC,aAAKH,kBAAL,GAA0B,IAA1B;CACA,aAAKlZ,OAAL,GAAe,IAAf;CACA;CACD;CAEF;;CAEA;;CAznBA;CAAA;CAAA,qCA4nBC;CACC,UAAI,KAAK2P,QAAT,EACA;CACC,aAAK3D,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAAC1C,UAAAA,MAAM,EAAE;CAAT,SAAnC;CACA,eAAO,IAAP;CACA;;CAED,WAAKuI,QAAL,CAAciK,SAAd,GAA0B,EAA1B;CACA,WAAKjK,QAAL,CAAcK,WAAd,CAA0BjM,QAAQ,CAAC6L,aAAT,CAAuB,KAAvB,CAA1B;CAEA,UAAMiK,aAAa,GAAG,IAAtB;CACA,UAAM/M,UAAU,GAAG,KAAKA,UAAxB;CACA,UAAM1C,UAAU,GAAG,KAAKA,UAAxB;CACA,UAAM0N,UAAU,GAAG,KAAKA,UAAL,IAAmB,IAAtC;CAEA,WAAK7H,QAAL,GAAgB6J,UAAG,CAAClI,MAAJ,CAAW;CAC1B9D,QAAAA,EAAE,EAAE,KAAK6B,QAAL,CAAcG,UADQ;CAE1BxD,QAAAA,KAAK,EAAE,KAAKA,KAFc;CAG1B2D,QAAAA,QAAQ,EAAE,gBAHgB;CAI1B8J,QAAAA,YAJ0B,0BAK1B;CACC,eAAKC,aAAL,GAAqBH,aAArB;CACA,eAAKI,iBAAL,GAAyBnN,UAAzB;CACA,eAAKoN,iBAAL,GAAyB9P,UAAzB;CACA,eAAK6O,iBAAL,GAAyBnB,UAAzB;CACA,eAAKqC,eAAL,GAAuBN,aAAa,CAACtK,QAArC;CAEAsK,UAAAA,aAAa,CAAC9L,SAAd,CAAwB;CACvBX,YAAAA,IAAI,EAAEpM,gBAAgB,CAACE,UADA;CAEvBmL,YAAAA,IAAI,EAAE;CAFiB,WAAxB;CAIA,SAhByB;CAiB1B+N,QAAAA,SAjB0B,uBAkB1B;CACCP,UAAAA,aAAa,CAAC9L,SAAd,CAAwB;CACvBX,YAAAA,IAAI,EAAEpM,gBAAgB,CAACG,WADA;CAEvBkL,YAAAA,IAAI,EAAE;CAFiB,WAAxB;CAKA,eAAK2N,aAAL,CAAmB/J,QAAnB,GAA8B,IAA9B;CACA,eAAK+J,aAAL,CAAmBK,gBAAnB,GAAsC,KAAtC;CACA,eAAKL,aAAL,CAAmBrK,QAAnB,CAA4BiK,SAA5B,GAAwC,EAAxC;CAEA,eAAKI,aAAL,GAAqB,IAArB;CACA,eAAKE,iBAAL,GAAyB,IAAzB;CACA,eAAKjB,iBAAL,GAAyB,IAAzB;CACA,eAAKkB,eAAL,GAAuB,IAAvB;CACA;CAhCyB,OAAX,CAAhB;CAmCA,WAAKrN,UAAL,CAAgBwN,iBAAhB,CAAkC,KAAKrK,QAAvC;CAEA,aAAO,IAAP;CACA;CAjrBF;CAAA;CAAA,qCAorBC;CACC,UAAI,CAAC,KAAKA,QAAV,EACA;CACC,eAAO,IAAP;CACA;;CAED,WAAKA,QAAL,CAAcsK,QAAd;CAEA,aAAO,IAAP;CACA;CA7rBF;CAAA;CAAA,4CA+rByBnS,EA/rBzB,EA+rB6B6B,MA/rB7B,EAgsBC;CACC,aAAO6P,UAAG,CAACU,eAAJ,CAAoBpS,EAApB,EAAwB6B,MAAxB,CAAP;CACA;CAEF;;CAEA;;CAtsBA;CAAA;CAAA,iCAysBC;CAAA;;CAAA,UADW+D,IACX,uEADkB,EAClB;CAAA,UADsBoJ,IACtB,uEAD6B,IAC7B;;CACC,UAAI,CAACpJ,IAAD,IAAS,CAACoJ,IAAd,EACA;CACC,eAAO,KAAP;CACA;;CAEDqD,MAAAA,sBAAM,CAAC9O,IAAP,CAAY,YAAZ,EAA0BqC,IAA1B,EAAgCoJ,IAAhC;;CAEA,UAAI,CAAC,KAAKtK,UAAL,CAAgB4N,sBAAhB,EAAL,EACA;CACC,aAAKC,WAAL,CAAiB;CAACvS,UAAAA,EAAE,EAAE,CAAL;CAAQ4F,UAAAA,IAAI,EAAJA,IAAR;CAAcoJ,UAAAA,IAAI,EAAJA;CAAd,SAAjB;CACA,aAAKN,mBAAL;CAEA,eAAO,IAAP;CACA;;CAED,WAAKxK,KAAL,CAAWxC,MAAX,CAAkB,sCAAlB;CAEA,UAAIG,MAAM,GAAG,EAAb;;CACA,UAAImN,IAAJ,EACA;CACCnN,QAAAA,MAAM,CAAC2Q,OAAP,GAAiB,CAACxD,IAAI,CAAChP,EAAN,CAAjB;CACA;;CAED,WAAKkE,KAAL,CAAWe,QAAX,CAAoB,cAApB,EAAoC;CACnCL,QAAAA,MAAM,EAAE,KAAKD,SAAL,EAD2B;CAEnC8N,QAAAA,QAAQ,EAAE,KAAKvM,SAAL,EAFyB;CAGnCN,QAAAA,IAAI,EAAEA,IAH6B;CAInC/D,QAAAA,MAAM,EAANA,MAJmC;CAKnC6Q,QAAAA,OAAO,EAAE,CAAC1D;CALyB,OAApC,EAMG7L,IANH,CAMQ,UAAAmC,SAAS,EAAI;CAEpB,YAAI,CAAC,MAAI,CAACD,aAAL,EAAL,EACA;CACC,UAAA,MAAI,CAACnB,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAAClC,YAAAA,WAAW,EAAC;CAAb,WAAnC;CACA;;CAED,QAAA,MAAI,CAACgG,aAAL,CAAmBrO,IAAnB,CAAwB;CACvB6I,UAAAA,EAAE,EAAEsF,SADmB;CAEvBM,UAAAA,IAAI,EAAJA,IAFuB;CAGvBoJ,UAAAA,IAAI,EAAJA,IAHuB;CAIvB0D,UAAAA,OAAO,EAAE;CAJc,SAAxB;;CAOA,YAAI,MAAI,CAAC/N,SAAL,EAAJ,EACA;CACC,UAAA,MAAI,CAAC+J,mBAAL;CACA,SAHD,MAKA;CACC,UAAA,MAAI,CAAC9C,WAAL;CACA;CACD,OA5BD;CA8BA,aAAO,IAAP;CACA;CAhwBF;CAAA;CAAA,+BAkwBY+G,SAlwBZ,EAmwBC;CAAA;;CACC,UAAI,CAACA,SAAL,EACA;CACC,eAAO,KAAP;CACA;;CAEDN,MAAAA,sBAAM,CAAC9O,IAAP,CAAY,SAAZ,EAAuBoP,SAAS,CAAC9D,KAAV,CAAgB,CAAhB,EAAmBvT,IAA1C,EAAgDqX,SAAS,CAAC9D,KAAV,CAAgB,CAAhB,EAAmB+D,IAAnE,EAAyED,SAAS,CAAC9D,KAAV,CAAgB,CAAhB,CAAzE;CAEA,UAAIG,IAAI,GAAG2D,SAAS,CAAC9D,KAAV,CAAgB,CAAhB,CAAX;CAEA,UAAIgE,QAAQ,GAAG,MAAf;;CACA,UAAI7D,IAAI,CAAChK,IAAL,CAAU1D,QAAV,GAAqBC,UAArB,CAAgC,OAAhC,CAAJ,EACA;CACCsR,QAAAA,QAAQ,GAAG,OAAX;CACA;;CAED,UAAI,CAAC,KAAKnO,UAAL,CAAgB4N,sBAAhB,EAAL,EACA;CACC,aAAKQ,UAAL,CAAgB,EAAhB,EAAoB;CAAC9S,UAAAA,EAAE,EAAE,CAAL;CAAQjJ,UAAAA,MAAM,EAAE4b;CAAhB,SAApB;CACA,eAAO,IAAP;CACA;;CAED,WAAKzO,KAAL,CAAWe,QAAX,CAAoB,WAApB,EAAiC;CAChCL,QAAAA,MAAM,EAAE,KAAKD,SAAL,EADwB;CAEhC8N,QAAAA,QAAQ,EAAE,KAAKvM,SAAL,EAFsB;CAGhC5K,QAAAA,IAAI,EAAE0T,IAAI,CAAC1T,IAHqB;CAIhC0J,QAAAA,IAAI,EAAE6N,QAJ0B;CAKhCE,QAAAA,SAAS,EAAE/D,IAAI,CAAC1T,IAAL,CAAU0X,KAAV,CAAgB,GAAhB,EAAqBC,MAArB,CAA4B,CAAC,CAA7B,EAAgC,CAAhC,CALqB;CAMhCL,QAAAA,IAAI,EAAE5D,IAAI,CAAC4D,IANqB;CAOhCM,QAAAA,KAAK,EAAE,KAPyB;CAQhCzC,QAAAA,MAAM,EAAE0C,mBAAU,CAACC,MARa;CAShCC,QAAAA,QAAQ,EAAE,CATsB;CAUhCC,QAAAA,UAAU,EAAE,KAAK5O,UAAL,CAAgB6O,cAAhB,GAAiCjY,IAVb;CAWhC6T,QAAAA,UAAU,EAAE;CAXoB,OAAjC,EAYGhM,IAZH,CAYQ,UAAAqQ,MAAM;CAAA,eAAI,MAAI,CAACV,UAAL,CAAgB,EAAhB,EAAoB;CAAC9S,UAAAA,EAAE,EAAEwT,MAAL;CAAazc,UAAAA,MAAM,EAAE4b;CAArB,SAApB,CAAJ;CAAA,OAZd;CAcA,aAAO,IAAP;CACA;CAxyBF;CAAA;CAAA,qCA0yBkBa,MA1yBlB,EA2yBC;CAAA;;CACC,UAAIC,OAAO,GAAG,KAAKjO,aAAL,CAAmBkO,IAAnB,CAAwB,UAAAD,OAAO;CAAA,eAAIA,OAAO,CAACzE,IAAR,IAAgByE,OAAO,CAACzE,IAAR,CAAahP,EAAb,KAAoBwT,MAAxC;CAAA,OAA/B,CAAd;;CACA,UAAIC,OAAJ,EACA;CACC,YAAIA,OAAO,CAAC1H,GAAZ,EACA;CACC0H,UAAAA,OAAO,CAAC1H,GAAR,CAAYK,KAAZ;CACA;;CACD,aAAKlI,KAAL,CAAWe,QAAX,CAAoB,iBAApB,EAAuC;CACtCL,UAAAA,MAAM,EAAE,KAAKD,SAAL,EAD8B;CAEtC3E,UAAAA,EAAE,EAAEyT,OAAO,CAACzT;CAF0B,SAAvC,EAGGmD,IAHH,CAGQ,YAAM;CACb,UAAA,MAAI,CAACe,KAAL,CAAWe,QAAX,CAAoB,cAApB,EAAoC;CACnCL,YAAAA,MAAM,EAAE,MAAI,CAACD,SAAL,EAD2B;CAEnC3E,YAAAA,EAAE,EAAEyT,OAAO,CAACzE,IAAR,CAAahP;CAFkB,WAApC;;CAIA,UAAA,MAAI,CAACwF,aAAL,GAAqB,MAAI,CAACA,aAAL,CAAmBC,MAAnB,CAA0B,UAAAC,EAAE;CAAA,mBAAIA,EAAE,CAAC1F,EAAH,KAAUyT,OAAO,CAACzT,EAAtB;CAAA,WAA5B,CAArB;CACA,SATD;CAUA;CACD;CA9zBF;CAAA;CAAA,0CAi0BC;CAAA;;CACC,UAAI,KAAK9H,OAAT,EACA;CACC,eAAO,KAAP;CACA;;CAED,WAAKsN,aAAL,CAAmBC,MAAnB,CAA0B,UAAAgO,OAAO;CAAA,eAAI,CAACA,OAAO,CAACf,OAAb;CAAA,OAAjC,EAAuDiB,OAAvD,CAA+D,UAAAF,OAAO,EAAI;CACzEA,QAAAA,OAAO,CAACf,OAAR,GAAkB,IAAlB;;CACA,YAAIe,OAAO,CAACzE,IAAZ,EACA;CACC,UAAA,OAAI,CAAC4E,mBAAL,CAAyBH,OAAzB;CACA,SAHD,MAKA;CACC,UAAA,OAAI,CAAClB,WAAL,CAAiBkB,OAAjB;CACA;CACD,OAVD;CAYA,aAAO,IAAP;CACA;CAp1BF;CAAA;CAAA,gCAs1BalO,OAt1Bb,EAu1BC;CAAA;;CACC,WAAKb,UAAL,CAAgBmP,WAAhB;CAEA,UAAIC,OAAO,GAAG,KAAK5P,KAAL,CAAW6P,OAAX,CAAmB,sBAAnB,EAA2C,KAAK/F,WAAL,EAA3C,CAAd;;CACA,UAAI8F,OAAJ,EACA;CACC,YAAIE,YAAY,GAAG,KAAK9P,KAAL,CAAW6P,OAAX,CAAmB,qBAAnB,EAA0C,KAAKpP,SAAL,EAA1C,EAA4DmP,OAA5D,CAAnB;;CACA,YAAIE,YAAJ,EACA;CACC,cAAI3T,IAAI,GAAG,KAAK6D,KAAL,CAAW6P,OAAX,CAAmB,WAAnB,EAAgCC,YAAY,CAACvB,QAA7C,CAAX;CAEA,cAAIwB,UAAU,GAAG,EAAjB;CACAA,UAAAA,UAAU,CAAC9c,IAAX,CAAgB,wDAAhB;CACA8c,UAAAA,UAAU,CAAC9c,IAAX,CAAiBkJ,IAAI,CAAC/E,IAAL,GAAW+E,IAAI,CAAC/E,IAAhB,GAAsB,KAAKoN,WAAL,CAAiB,4BAAjB,CAAvC;CACAuL,UAAAA,UAAU,CAAC9c,IAAX,CAAgB6c,YAAY,CAACpO,IAA7B;CACAqO,UAAAA,UAAU,CAAC9c,IAAX,CAAgB,wDAAhB;CACA8c,UAAAA,UAAU,CAAC9c,IAAX,CAAgBoO,OAAO,CAACK,IAAxB;CACAL,UAAAA,OAAO,CAACK,IAAR,GAAeqO,UAAU,CAACC,IAAX,CAAgB,IAAhB,CAAf;CAEA,eAAKC,iBAAL;CACA;CACD;;CAED5O,MAAAA,OAAO,CAACX,MAAR,GAAiB,KAAKD,SAAL,EAAjB;CAEA,WAAK3C,UAAL,CAAgBkB,UAAhB,CAA2B4J,mBAAY,CAACsH,YAAxC,EAAsD;CACrD,uBAAe7O,OAAO,CAACvF,EAD8B;CAErD,mBAAWuF,OAAO,CAACX,MAFkC;CAGrD,mBAAWW,OAAO,CAACK;CAHkC,OAAtD,EAIG,IAJH,EAIS,IAJT,EAIe9E,cAAK,CAACiC,oBAAN,CAA2B;CACzCzH,QAAAA,IAAI,EAAEwR,mBAAY,CAACsH,YADsB;CAEzCnQ,QAAAA,IAAI,EAAE;CAACoQ,UAAAA,cAAc,EAAE;CAAjB,SAFmC;CAGzC3U,QAAAA,MAAM,EAAE,KAAKiP,aAAL;CAHiC,OAA3B,CAJf,EAQIxL,IARJ,CAQS,UAAAuK,QAAQ,EAAI;CACpB,QAAA,OAAI,CAACzB,iBAAL,CAAuBW,0BAAmB,CAACwH,YAA3C,EAAyD1G,QAAzD,EAAmEnI,OAAnE;CACA,OAVD,EAUGlC,KAVH,CAUS,UAAAZ,KAAK,EAAI;CACjB,QAAA,OAAI,CAACwJ,iBAAL,CAAuBW,0BAAmB,CAACwH,YAA3C,EAAyD3R,KAAzD,EAAgE8C,OAAhE;CACA,OAZD;CAcA,aAAO,IAAP;CACA;CA/3BF;CAAA;CAAA,wCAi4BqBA,OAj4BrB,EAk4BC;CAAA;;CACC,WAAKb,UAAL,CAAgBmP,WAAhB;CAEA,UAAIhB,QAAQ,GAAG,KAAK3O,KAAL,CAAW6P,OAAX,CAAmB,WAAnB,EAAgC,KAAKpP,SAAL,EAAhC,EAAkDY,OAAO,CAACyJ,IAAR,CAAahP,EAA/D,EAAmE,IAAnE,EAAyEgF,IAAxF;CAEA,UAAIG,YAAY,GAAG,KAAKmP,eAAL,EAAnB;CAEA,UAAIjI,KAAK,GAAG,EAAZ;;CAEA,UAAIlH,YAAJ,EACA;CACCkH,QAAAA,KAAK,CAACO,0BAAmB,CAAC2H,gBAArB,CAAL,GAA8C,CAACzH,mBAAY,CAACyH,gBAAd,EAAgC;CAC7EvU,UAAAA,EAAE,EAAGmF,YADwE;CAE7ElB,UAAAA,IAAI,EAAG;CAACuQ,YAAAA,IAAI,EAAGjP,OAAO,CAACyJ,IAAR,CAAajY,MAAb,CAAoB8X,KAApB,CAA0B,CAA1B,EAA6BvT;CAArC,WAFsE;CAG7EmZ,UAAAA,WAAW,EAAElP,OAAO,CAACyJ,IAAR,CAAajY,MAHmD;CAI7E2d,UAAAA,kBAAkB,EAAE;CAJyD,SAAhC,CAA9C;CAMA,OARD,MAUA;CACCrI,QAAAA,KAAK,CAACO,0BAAmB,CAAC+H,eAArB,CAAL,GAA6C,CAAC7H,mBAAY,CAAC6H,eAAd,EAA+B;CAACzH,UAAAA,OAAO,EAAE,KAAKvI,SAAL;CAAV,SAA/B,CAA7C;CACA0H,QAAAA,KAAK,CAACO,0BAAmB,CAAC2H,gBAArB,CAAL,GAA8C,CAACzH,mBAAY,CAACyH,gBAAd,EAAgC;CAC7EvU,UAAAA,EAAE,EAAE,aAAa4M,0BAAmB,CAAC+H,eAAjC,GAAmD,OADsB;CAE7E1Q,UAAAA,IAAI,EAAE;CACLuQ,YAAAA,IAAI,EAAEjP,OAAO,CAACyJ,IAAR,CAAajY,MAAb,CAAoB8X,KAApB,CAA0B,CAA1B,EAA6BvT;CAD9B,WAFuE;CAK7EmZ,UAAAA,WAAW,EAAElP,OAAO,CAACyJ,IAAR,CAAajY,MALmD;CAM7E2d,UAAAA,kBAAkB,EAAE;CANyD,SAAhC,CAA9C;CAQA;;CAED,WAAK1S,UAAL,CAAgB6B,SAAhB,CAA0BwI,KAA1B,EAAiC,UAACqB,QAAD,EACjC;CACC,YAAI,CAACA,QAAL,EACA;CACC,UAAA,OAAI,CAACvB,eAAL,GAAuB,KAAvB;CACA3J,UAAAA,OAAO,CAACe,IAAR,CAAa,gBAAb,EAA+B,wCAA/B;;CACA,UAAA,OAAI,CAACqR,SAAL,CAAe,OAAI,CAACjQ,SAApB,EAA+BY,OAAO,CAACyJ,IAAR,CAAahP,EAA5C,EAAgDuF,OAAO,CAACvF,EAAxD;;CACA,iBAAO,KAAP;CACA;;CAED,YAAI,CAACmF,YAAL,EACA;CACC,cAAI0P,aAAa,GAAGnH,QAAQ,CAACd,0BAAmB,CAAC+H,eAArB,CAA5B;;CACA,cAAIE,aAAa,IAAIA,aAAa,CAACpS,KAAd,EAArB,EACA;CACCD,YAAAA,OAAO,CAACe,IAAR,CAAasR,aAAa,CAACpS,KAAd,GAAsBa,EAAtB,CAAyBb,KAAtC,EAA6CoS,aAAa,CAACpS,KAAd,GAAsBa,EAAtB,CAAyBE,iBAAtE;;CACA,YAAA,OAAI,CAACoR,SAAL,CAAe,OAAI,CAACjQ,SAAL,EAAf,EAAiCY,OAAO,CAACyJ,IAAR,CAAahP,EAA9C,EAAkDuF,OAAO,CAACvF,EAA1D;;CACA,mBAAO,KAAP;CACA;;CACD,UAAA,OAAI,CAACiM,iBAAL,CAAuBW,0BAAmB,CAAC+H,eAA3C,EAA4DE,aAA5D;CACA;;CAED,YAAIC,MAAM,GAAG,CAAb;CACA,YAAIC,cAAc,GAAGrH,QAAQ,CAACd,0BAAmB,CAAC2H,gBAArB,CAA7B;;CACA,YAAIQ,cAAJ,EACA;CACC,cAAIrZ,MAAM,GAAGqZ,cAAc,CAAC9Q,IAAf,EAAb;;CACA,cAAI8Q,cAAc,CAACtS,KAAf,EAAJ,EACA;CACCD,YAAAA,OAAO,CAACe,IAAR,CAAawR,cAAc,CAACtS,KAAf,GAAuBa,EAAvB,CAA0Bb,KAAvC,EAA8CsS,cAAc,CAACtS,KAAf,GAAuBa,EAAvB,CAA0BE,iBAAxE;;CACA,YAAA,OAAI,CAACoR,SAAL,CAAe,OAAI,CAACjQ,SAAL,EAAf,EAAiCY,OAAO,CAACyJ,IAAR,CAAahP,EAA9C,EAAkDuF,OAAO,CAACvF,EAA1D;;CACA,mBAAO,KAAP;CACA,WALD,MAMK,IAAI,CAACtE,MAAL,EACL;CACC8G,YAAAA,OAAO,CAACe,IAAR,CAAa,gBAAb,EAA+B,wCAA/B;;CACA,YAAA,OAAI,CAACqR,SAAL,CAAe,OAAI,CAACjQ,SAAL,EAAf,EAAiCY,OAAO,CAACyJ,IAAR,CAAahP,EAA9C,EAAkDuF,OAAO,CAACvF,EAA1D;;CACA,mBAAO,KAAP;CACA;;CAED8U,UAAAA,MAAM,GAAGpZ,MAAM,CAACsZ,EAAhB;CACA,SAjBD,MAmBA;CACCxS,UAAAA,OAAO,CAACe,IAAR,CAAa,gBAAb,EAA+B,wCAA/B;;CACA,UAAA,OAAI,CAACqR,SAAL,CAAe,OAAI,CAACjQ,SAAL,EAAf,EAAiCY,OAAO,CAACyJ,IAAR,CAAahP,EAA9C,EAAkDuF,OAAO,CAACvF,EAA1D;;CACA,iBAAO,KAAP;CACA;;CAEDuF,QAAAA,OAAO,CAACX,MAAR,GAAiB,OAAI,CAACD,SAAL,EAAjB;;CAEA,QAAA,OAAI,CAACT,KAAL,CAAWe,QAAX,CAAoB,cAApB,EAAoC;CACnCL,UAAAA,MAAM,EAAEW,OAAO,CAACX,MADmB;CAEnC5E,UAAAA,EAAE,EAAEuF,OAAO,CAACyJ,IAAR,CAAahP,EAFkB;CAGnC8E,UAAAA,MAAM,EAAE;CACP2L,YAAAA,MAAM,EAAE0C,mBAAU,CAAC8B,IADZ;CAEP5B,YAAAA,QAAQ,EAAE;CAFH;CAH2B,SAApC;;CASA,QAAA,OAAI,CAAC6B,UAAL,CAAgB;CACftQ,UAAAA,MAAM,EAAEW,OAAO,CAACX,MADD;CAEfuQ,UAAAA,QAAQ,EAAEL,MAFK;CAGf1W,UAAAA,WAAW,EAAEmH,OAAO,CAACK,IAHN;CAIfN,UAAAA,SAAS,EAAEC,OAAO,CAACvF,EAJJ;CAKfwT,UAAAA,MAAM,EAAEjO,OAAO,CAACyJ,IAAR,CAAahP,EALN;CAMf6S,UAAAA,QAAQ,EAARA;CANe,SAAhB,EAOGtN,OAPH;CASA,OArED,EAqEG,KArEH,EAqEU,UAACwG,GAAD,EAAS;CAACxG,QAAAA,OAAO,CAACwG,GAAR,GAAcA,GAAd;CAAkB,OArEtC,EAqEwCjL,cAAK,CAACiC,oBAAN,CAA2B;CAClEzH,QAAAA,IAAI,EAAEsR,0BAAmB,CAACwI,gBADwC;CAElEnR,QAAAA,IAAI,EAAE;CAACoQ,UAAAA,cAAc,EAAExB;CAAjB,SAF4D;CAGlEnT,QAAAA,MAAM,EAAE,KAAKiP,aAAL;CAH0D,OAA3B,CArExC;CA0EA;CA3+BF;CAAA;CAAA,8BA6+BW/J,MA7+BX,EA6+BmB4O,MA7+BnB,EA8+BC;CAAA,UAD0BlO,SAC1B,uEADsC,CACtC;CACC,WAAKpB,KAAL,CAAWe,QAAX,CAAoB,cAApB,EAAoC;CACnCL,QAAAA,MAAM,EAAEA,MAD2B;CAEnC5E,QAAAA,EAAE,EAAEwT,MAF+B;CAGnC1O,QAAAA,MAAM,EAAE;CACP2L,UAAAA,MAAM,EAAE0C,mBAAU,CAAC1Q,KADZ;CAEP4Q,UAAAA,QAAQ,EAAE;CAFH;CAH2B,OAApC;;CAQA,UAAI/N,SAAJ,EACA;CACC,aAAKpB,KAAL,CAAWe,QAAX,CAAoB,sBAApB,EAA4C;CAC3CL,UAAAA,MAAM,EAAEA,MADmC;CAE3C5E,UAAAA,EAAE,EAAEsF,SAFuC;CAG3C+P,UAAAA,KAAK,EAAE;CAHoC,SAA5C;CAKA;CACD;CA//BF;CAAA;CAAA,+BAigCYxT,MAjgCZ,EAigCoB0D,OAjgCpB,EAkgCC;CAAA;;CACC,WAAKvD,UAAL,CAAgBkB,UAAhB,CAA2B4J,mBAAY,CAACsI,gBAAxC,EAA0D;CACzDlI,QAAAA,OAAO,EAAErL,MAAM,CAAC+C,MADyC;CAEzD0Q,QAAAA,SAAS,EAAEzT,MAAM,CAACsT,QAFuC;CAGzD5P,QAAAA,OAAO,EAAE1D,MAAM,CAACzD,WAHyC;CAIzDmX,QAAAA,WAAW,EAAE1T,MAAM,CAACyD,SAJqC;CAKzDkQ,QAAAA,gBAAgB,EAAE3T,MAAM,CAAC2R;CALgC,OAA1D,EAMG,IANH,EAMS,IANT,EAMe1S,cAAK,CAACiC,oBAAN,CAA2B;CACzCzH,QAAAA,IAAI,EAAEwR,mBAAY,CAACsI,gBADsB;CAEzCnR,QAAAA,IAAI,EAAE;CAACoQ,UAAAA,cAAc,EAAExS,MAAM,CAACgR;CAAxB,SAFmC;CAGzCnT,QAAAA,MAAM,EAAE,KAAKiP,aAAL;CAHiC,OAA3B,CANf,EAUIxL,IAVJ,CAUS,UAAAuK,QAAQ,EAAI;CACpB,QAAA,OAAI,CAACzB,iBAAL,CAAuBW,0BAAmB,CAACwI,gBAA3C,EAA6D1H,QAA7D,EAAuEnI,OAAvE;CACA,OAZD,EAYGlC,KAZH,CAYS,UAAAZ,KAAK,EAAI;CACjB,QAAA,OAAI,CAACwJ,iBAAL,CAAuBW,0BAAmB,CAACwI,gBAA3C,EAA6D3S,KAA7D,EAAoE8C,OAApE;CACA,OAdD;CAgBA,aAAO,IAAP;CACA;CAphCF;CAAA;CAAA,qCAshCkBkQ,MAthClB,EAuhCC;CAAA;;CAAA,UADyBtI,KACzB,uEADiC,KAAKzI,UAAL,CAAgB0I,sBAAhB,EACjC;CACC,WAAKpL,UAAL,CAAgBkB,UAAhB,CAA2B4J,mBAAY,CAACG,mBAAxC,EAA6D;CAC5D,mBAAW,KAAKtI,SAAL,EADiD;CAE5D,mBAAW8Q,MAFiD;CAG5D,iBAAStI,KAHmD;CAI5D,wBAAgB;CAJ4C,OAA7D,EAKGhK,IALH,CAKQ,UAAAzH,MAAM,EAAI;CACjB,QAAA,OAAI,CAACuQ,iBAAL,CAAuBW,0BAAmB,CAACK,mBAA3C,EAAgEvR,MAAhE;;CACA,QAAA,OAAI,CAACmM,QAAL,CAAciJ,KAAd,CAAoB4E,kBAAS,CAAChW,MAAV,CAAiBiW,oBAArC,EAA2D;CAACC,UAAAA,KAAK,EAAEla,MAAM,CAACuI,IAAP,GAAcO,QAAd,CAAuBY;CAA/B,SAA3D;CACA,OARD,EAQG/B,KARH,CAQS,UAAA3H,MAAM,EAAI;CAClB,QAAA,OAAI,CAACmM,QAAL,CAAciJ,KAAd,CAAoB4E,kBAAS,CAAChW,MAAV,CAAiBiW,oBAArC,EAA2D;CAAClT,UAAAA,KAAK,EAAE/G,MAAM,CAAC+G,KAAP,GAAea;CAAvB,SAA3D;CACA,OAVD;CAWA;CAniCF;CAAA;CAAA,oCAqiCiBmS,MAriCjB,EAsiCC;CAAA;;CAAA,UADwBtI,KACxB,uEADgC,KAAKzI,UAAL,CAAgB0I,sBAAhB,EAChC;CACC,UAAMpK,OAAO,GAAG,IAAI3G,EAAE,CAAC4G,OAAP,EAAhB;;CAEA,UAAI,CAACwS,MAAL,EACA;CACCA,QAAAA,MAAM,GAAG,KAAKvR,KAAL,CAAW6P,OAAX,CAAmB,oBAAnB,EAAyC,KAAKrP,UAAL,CAAgBC,SAAhB,EAAzC,CAAT;CACA;;CAED,UAAI,CAAC8Q,MAAL,EACA;CACC,aAAK5N,QAAL,CAAciJ,KAAd,CAAoB4E,kBAAS,CAAChW,MAAV,CAAiBmW,mBAArC,EAA0D;CAACpT,UAAAA,KAAK,EAAE;CAACA,YAAAA,KAAK,EAAE,eAAR;CAAyBe,YAAAA,iBAAiB,EAAE;CAA5C;CAAR,SAA1D;CACAR,QAAAA,OAAO,CAACS,MAAR;CACA,eAAOT,OAAP;CACA;;CAED,WAAK0B,UAAL,CAAgB4M,WAAhB,CAA4BmE,MAA5B,EAAoC,IAApC,EAA0C,IAA1C,EAAgDtS,IAAhD,CAAqD,YACrD;CAAA;;CACC,YAAIkJ,KAAK,uDACPO,0BAAmB,CAACkJ,YADb,EAC4B,CAAChJ,mBAAY,CAACgJ,YAAd,EAA4B;CAC/D/I,UAAAA,SAAS,EAAE,OAAI,CAACiB,WAAL,EADoD;CAE/D+H,UAAAA,UAAU,EAAEN;CAFmD,SAA5B,CAD5B,wCAKP7I,0BAAmB,CAACC,SALb,EAKyB,CAACC,mBAAY,CAACD,SAAd,EAAyB;CACzDE,UAAAA,SAAS,EAAE,OAAI,CAACiB,WAAL;CAD8C,SAAzB,CALzB,wCAQPpB,0BAAmB,CAACoJ,yBARb,EAQyC,CAAClJ,mBAAY,CAACG,mBAAd,EAAmC;CACnFC,UAAAA,OAAO,EAAE,OAAI,CAACvI,SAAL,EAD0E;CAEnFsR,UAAAA,QAAQ,EAAER,MAFyE;CAGnFtI,UAAAA,KAAK,EAAEA,KAH4E;CAInFE,UAAAA,YAAY,EAAE;CAJqE,SAAnC,CARzC,WAAT;;CAgBA,QAAA,OAAI,CAACrL,UAAL,CAAgB6B,SAAhB,CAA0BwI,KAA1B,EAAiC,UAACqB,QAAD,EACjC;CACC,cAAI,CAACA,QAAL,EACA;CACC,YAAA,OAAI,CAAC7F,QAAL,CAAciJ,KAAd,CAAoB4E,kBAAS,CAAChW,MAAV,CAAiBmW,mBAArC,EAA0D;CAACpT,cAAAA,KAAK,EAAE;CAACA,gBAAAA,KAAK,EAAE,gBAAR;CAA0Be,gBAAAA,iBAAiB,EAAE;CAA7C;CAAR,aAA1D;;CAEAR,YAAAA,OAAO,CAACS,MAAR;CACA,mBAAO,KAAP;CACA;;CAED,cAAIoK,aAAa,GAAGH,QAAQ,CAACd,0BAAmB,CAACC,SAArB,CAA5B;;CACA,cAAI,CAACgB,aAAa,CAACpL,KAAd,EAAL,EACA;CACC,YAAA,OAAI,CAACwJ,iBAAL,CAAuBW,0BAAmB,CAACC,SAA3C,EAAsDgB,aAAtD;CACA;;CAED,cAAIqI,mBAAmB,GAAGxI,QAAQ,CAACd,0BAAmB,CAACoJ,yBAArB,CAAlC;;CACA,cAAIE,mBAAmB,CAACzT,KAApB,EAAJ,EACA;CACC,YAAA,OAAI,CAACoF,QAAL,CAAciJ,KAAd,CAAoB4E,kBAAS,CAAChW,MAAV,CAAiBmW,mBAArC,EAA0D;CAACpT,cAAAA,KAAK,EAAEyT,mBAAmB,CAACzT,KAApB,GAA4Ba;CAApC,aAA1D;CACA,WAHD,MAKA;CACC,YAAA,OAAI,CAAC2I,iBAAL,CAAuBW,0BAAmB,CAACoJ,yBAA3C,EAAsEE,mBAAtE;;CACA,YAAA,OAAI,CAACrO,QAAL,CAAciJ,KAAd,CAAoB4E,kBAAS,CAAChW,MAAV,CAAiBmW,mBAArC,EAA0D;CACzDM,cAAAA,cAAc,EAAED,mBAAmB,CAACjS,IAApB,GAA2BO,QAA3B,CAAoCY,MAApC,GAA6C,CAA7C,GAAgD8Q,mBAAmB,CAACjS,IAApB,GAA2BO,QAA3B,CAAoC,CAApC,EAAuCxE,EAAvF,GAA2F,CADlD;CAEzD4V,cAAAA,KAAK,EAAEM,mBAAmB,CAACjS,IAApB,GAA2BO,QAA3B,CAAoCY;CAFc,aAA1D;CAIA;;CAEDpC,UAAAA,OAAO,CAACI,OAAR,CAAgBsK,QAAhB;CAEA,SAhCD,EAgCG,KAhCH,EAgCU,KAhCV,EAgCiB5M,cAAK,CAACiC,oBAAN,CAA2B;CAACzH,UAAAA,IAAI,EAAEsR,0BAAmB,CAACoJ,yBAA3B;CAAsDtW,UAAAA,MAAM,EAAE,OAAI,CAACiP,aAAL;CAA9D,SAA3B,CAhCjB;CAiCA,OAnDD;CAqDA,aAAO3L,OAAP;CACA;CA3mCF;CAAA;CAAA,qCA6mCkBuC,OA7mClB,EA8mCC;CACC,UAAI,KAAKC,aAAL,CAAmBkO,IAAnB,CAAwB,UAAAhO,EAAE;CAAA,eAAIA,EAAE,CAAC1F,EAAH,KAAUuF,OAAO,CAACvF,EAAtB;CAAA,OAA1B,CAAJ,EACA;CACC,eAAO,KAAP;CACA;;CAED,WAAKwF,aAAL,CAAmBrO,IAAnB,CAAwB;CACvB6I,QAAAA,EAAE,EAAEuF,OAAO,CAACvF,EADW;CAEvB4F,QAAAA,IAAI,EAAEL,OAAO,CAACK,IAFS;CAGvB8M,QAAAA,OAAO,EAAE;CAHc,OAAxB;CAMA,WAAKhO,UAAL,CAAgB0R,qBAAhB,CAAsC7Q,OAAO,CAACvF,EAA9C;CAEA,WAAK0O,mBAAL;CACA;CA7nCF;CAAA;CAAA,gCA+nCapJ,SA/nCb,EAgoCC;CACC,UAAI,KAAKpN,OAAT,EACA;CACC,eAAO,KAAP;CACA;;CAED,aAAO,KAAKwM,UAAL,CAAgB4M,WAAhB,CAA4BhM,SAA5B,CAAP;CACA;CAvoCF;CAAA;CAAA,iCAyoCctF,EAzoCd,EA0oCC;CACC,WAAKkE,KAAL,CAAWe,QAAX,CAAoB,kBAApB,EAAwC;CACvCJ,QAAAA,QAAQ,EAAE,KAAKH,UAAL,CAAgBsJ,WAAhB,EAD6B;CAEvClJ,QAAAA,MAAM,EAAE;CACPuR,UAAAA,OAAO,EAAErW;CADF;CAF+B,OAAxC;CAMA;CAjpCF;CAAA;CAAA,iCAmpCcA,EAnpCd,EAmpCkBsW,QAnpClB,EAopCC;CACC,WAAK5R,UAAL,CAAgB6R,YAAhB,CAA6BvW,EAA7B,EAAiCsW,QAAQ,CAACtR,IAA1C,EAAgDsR,QAAQ,CAACE,MAAzD;CACA;CAtpCF;CAAA;CAAA,+CAwpC4BvS,IAxpC5B,EAypCC;CACC,UAAIA,IAAI,CAACuS,MAAL,KAAgB,SAApB,EACA;CACC,eAAO,KAAP;CACA;;CAJF,yBAMqDvS,IAAI,CAACpC,MAN1D;CAAA,UAMMgD,QANN,gBAMMA,QANN;CAAA,UAMgBS,SANhB,gBAMgBA,SANhB;CAAA,UAM2BmR,KAN3B,gBAM2BA,KAN3B;CAAA,UAMkCzQ,OANlC,gBAMkCA,OANlC;CAAA,UAM2CnE,MAN3C,gBAM2CA,MAN3C;CAQC,WAAKG,UAAL,CAAgBkB,UAAhB,CAA2B4J,mBAAY,CAAC4J,gBAAxC,EAA0D;CACzD,sBAAcpR,SAD2C;CAEzD,qBAAaT,QAF4C;CAGzD,kBAAU4R,KAH+C;CAIzD,mBAAWzQ,OAJ8C;CAKzD,0BAAkBnE;CALuC,OAA1D;CAQA,aAAO,IAAP;CACA;CA1qCF;CAAA;CAAA,wCA6qCC;CACC,WAAKqC,KAAL,CAAWe,QAAX,CAAoB,kBAApB,EAAwC;CACvCJ,QAAAA,QAAQ,EAAE,KAAKH,UAAL,CAAgBsJ,WAAhB,EAD6B;CAEvClJ,QAAAA,MAAM,EAAE;CACPuR,UAAAA,OAAO,EAAE;CADF;CAF+B,OAAxC;CAMA;CAprCF;CAAA;CAAA,mCAsrCgB3a,MAtrChB,EAurCC;CAAA;;CACC,UAAI,CAAC,KAAKib,YAAL,EAAL,EACA;CACC,eAAO,KAAP;CACA;;CAED,WAAK3U,UAAL,CAAgBkB,UAAhB,CAA2BxJ,UAAU,CAACM,cAAtC,EAAsD;CACrD,sBAAc,KAAK2c,YAAL,EADuC;CAErD,kBAAUjb;CAF2C,OAAtD,EAGG2H,KAHH,CAGS,UAAC3H,MAAD,EAAY;CACpB,QAAA,OAAI,CAACwI,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAACnI,UAAAA,QAAQ,EAAEnC,QAAQ,CAACG;CAApB,SAAnC;CACA,OALD;CAOA,WAAKoO,SAAL,CAAe;CACdX,QAAAA,IAAI,EAAEpM,gBAAgB,CAACW,QADT;CAEd0K,QAAAA,IAAI,EAAE;CACLhG,UAAAA,IAAI,EAAEvC;CADD;CAFQ,OAAf;CAMA;CA1sCF;CAAA;CAAA,6BA4sCUsJ,IA5sCV,EA4sCgBF,MA5sChB,EA6sCC;CAAA;CAAA;;CACCuN,MAAAA,sBAAM,CAACuE,IAAP,CAAY,iCAAZ,EAA+C5R,IAA/C,EAAqDF,MAArD;CAEA,UAAIuH,KAAK,uDACP3S,UAAU,CAACO,cADJ,EACqB,CAACP,UAAU,CAACO,cAAZ,EAA4B;CACxD,mBAAW,KAAK0K,SAAL,EAD6C;CAExD,gBAAQK,IAAI,CAAC6R,WAAL,EAFgD;CAGxD,kBAAU/R;CAH8C,OAA5B,CADrB,wCAMPpL,UAAU,CAACI,aANJ,EAMoB,CAACJ,UAAU,CAACI,aAAZ,EAA2B,EAA3B,CANpB,WAAT;CAQA,WAAKkI,UAAL,CAAgB6B,SAAhB,CAA0BwI,KAA1B,EAAiC,UAACqB,QAAD,EACjC;CACC,YAAI,CAACA,QAAL,EACA;CACC,UAAA,OAAI,CAACvB,eAAL,GAAuB,KAAvB;;CACA,UAAA,OAAI,CAACD,QAAL,CAAc,gBAAd,EAAgC,oCAAhC;;CACA,iBAAO,KAAP;CACA;;CAED,YAAI0B,aAAa,GAAGF,QAAQ,CAAChU,UAAU,CAACI,aAAZ,CAA5B;;CACA,YAAI8T,aAAa,CAACnL,KAAd,EAAJ,EACA;CACC,UAAA,OAAI,CAAC0J,eAAL,GAAuB,KAAvB;;CACA,UAAA,OAAI,CAACD,QAAL,CAAc0B,aAAa,CAACnL,KAAd,GAAsBa,EAAtB,CAAyBb,KAAvC,EAA8CmL,aAAa,CAACnL,KAAd,GAAsBa,EAAtB,CAAyBE,iBAAvE;;CACA,iBAAO,KAAP;CACA;;CACD,QAAA,OAAI,CAACyI,iBAAL,CAAuBvS,UAAU,CAACI,aAAlC,EAAiD8T,aAAjD;;CAEA,QAAA,OAAI,CAACjI,SAAL,CAAe;CACdX,UAAAA,IAAI,EAAEpM,gBAAgB,CAACQ,QADT;CAEd6K,UAAAA,IAAI,EAAE;CACL6S,YAAAA,IAAI,EAAE9R,IADD;CAELF,YAAAA,MAAM,EAAEA;CAFH;CAFQ,SAAf;CAQA,OA1BD,EA0BG,KA1BH,EA0BU,KA1BV,EA0BiBhE,cAAK,CAACiC,oBAAN,CAA2B;CAACzH,QAAAA,IAAI,EAAE5B,UAAU,CAACI,aAAlB;CAAiC4F,QAAAA,MAAM,EAAE,KAAKiP,aAAL;CAAzC,OAA3B,CA1BjB;CA4BA;CApvCF;CAAA;CAAA,wCAsvCqBjT,MAtvCrB,EAuvCC;CACCA,MAAAA,MAAM,GAAGA,MAAM,KAAK,IAApB;CAEA,WAAKwI,KAAL,CAAWxC,MAAX,CAAkB,eAAlB,EAAmC;CAAC5B,QAAAA,WAAW,EAAEpE;CAAd,OAAnC;;CAEA,UAAIA,MAAM,IAAI,KAAK8P,gBAAL,EAAd,EACA;CACC,aAAKxJ,UAAL,CAAgBkB,UAAhB,CAA2BxJ,UAAU,CAACK,sBAAtC,EAA8D;CAC7DuS,UAAAA,SAAS,EAAE,KAAKC,WAAL,EADkD;CAE7DiB,UAAAA,WAAW,EAAE/P,QAAQ,CAACgQ;CAFuC,SAA9D;CAIA;CACD;CAEF;;CAEA;;CAvwCA;CAAA;CAAA,4BA0wCC;CACC,UAAI,CAAC,KAAKvJ,KAAV,EACA;CACC,aAAKmH,aAAL,GAAqB,IAArB;CACA,eAAO,IAAP;CACA;;CAED,UAAI,KAAK0L,eAAL,EAAJ,EACA;CACC,aAAKC,iBAAL;CACA;;CAED,aAAO,IAAP;CACA;CAvxCF;CAAA;CAAA,2BA0xCC;CAAA,UADKnV,MACL,uEADc,EACd;CACCoV,MAAAA,YAAY,CAAC,KAAKC,WAAN,CAAZ;;CACA,UAAI,CAAC,KAAKhT,KAAV,EACA;CACC,aAAKqH,YAAL,GAAoB,IAApB;CACA,eAAO,IAAP;CACA;;CAED,UAAI,CAAC1J,MAAM,CAACsV,cAAR,IAA0B,KAAKxQ,cAAnC,EACA;CACC,aAAKA,cAAL,CAAoByQ,EAApB,CAAuBC,QAAvB,CAAgC,mBAAhC;CACA;;CAED,UAAI,CAAC,KAAKC,mBAAL,EAAL,EACA;CACC,aAAKpL,QAAL,CAAc,uBAAd,EAAuC,KAAK/E,QAAL,CAAcoQ,uBAArD;CACA,OAHD,MAIK,IAAIzW,cAAK,CAAC0W,cAAN,CAAqB9F,UAAG,CAAClC,OAAJ,EAArB,EAAoC,KAApC,IAA6C,CAAjD,EACL;CACCiI,QAAAA,KAAK,CAAC,KAAKtQ,QAAL,CAAcuQ,mBAAf,CAAL;CACAlV,QAAAA,OAAO,CAACC,KAAR,kDAAwD,KAAK0E,QAAL,CAAcwQ,uBAAd,CAAsC5b,OAAtC,CAA8C,mBAA9C,EAAmE2V,UAAG,CAAClC,OAAJ,EAAnE,CAAxD;CAEA,eAAO,KAAP;CACA,OANI,MAOA,IAAI,CAAC,KAAKoI,qBAAL,EAAL,EACL;CACC,aAAKZ,iBAAL;CACA;;CAED,WAAKa,cAAL;CACA;CAxzCF;CAAA;CAAA,4BA2zCC;CACC,UAAI,KAAKla,QAAT,EACA;CACC,eAAO,KAAP;CACA;;CAED,UAAI,KAAKgJ,cAAT,EACA;CACC,aAAKA,cAAL,CAAoBmR,aAApB;CACA;;CAED,WAAKC,cAAL;CACA;CAv0CF;CAAA;CAAA,qCAy0CkBlW,MAz0ClB,EA00CC;CACC,UAAI,CAAC,KAAKqC,KAAV,EACA;CACC1B,QAAAA,OAAO,CAACC,KAAR,CAAc,4FAAd;CACA,eAAO,KAAP;CACA,OALF;CAOC;CACA;CACA;;CACA;CAp1CF;CAAA;CAAA,oCAu1CC;CACC,UAAI,KAAKuE,cAAT,EACA;CACC,eAAO,IAAP;CACA;;CAED,WAAKrB,SAAL,CAAe;CACdX,QAAAA,IAAI,EAAEpM,gBAAgB,CAACC,YADT;CAEdoL,QAAAA,IAAI,EAAE;CAFQ,OAAf;;CAKA,UAAI,KAAKC,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB5G,MAAxB,CAA+B6B,MAAnC,EACA;CACC,aAAKmH,IAAL;CACA;;CAED,WAAKY,cAAL,GAAsB,IAAtB;CAEA,aAAO,IAAP;CACA;CA12CF;CAAA;CAAA,8BA62CC;CACC,aAAO,KAAKT,KAAZ;CACA;CA/2CF;CAAA;CAAA,+BAk3CC;CACC,aAAO,KAAKQ,MAAZ;CACA;CAp3CF;CAAA;CAAA,uCAu3CC;CACC,aAAO,CAAC,CAAC,KAAK0E,WAAL,EAAT;CACA;CAz3CF;CAAA;CAAA,yCA43CC;CACC,aAAO,KAAKvH,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB5G,MAAxB,CAA+BC,QAAtC;CACA;CA93CF;CAAA;CAAA,4CAi4CC;CACC,aAAO,KAAKmJ,mBAAZ;CACA;CAn4CF;CAAA;CAAA,mCAs4CC;CACC,aAAO,KAAKtC,KAAL,CAAWtD,KAAX,CAAiBqH,WAAjB,CAA6BvI,MAA7B,CAAoCkF,MAApC,GAA6C,CAApD;CACA;CAx4CF;CAAA;CAAA,sCA24CC;CACC,aAAO,CAAC,KAAKV,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwBtE,MAAxB,CAA+BE,YAAvC;CACA;CA74CF;CAAA;CAAA,yCAg5CC;CACC,aAAO,KAAKsE,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwBtE,MAAxB,CAA+BI,WAAtC;CACA;CAl5CF;CAAA;CAAA,sCAq5CC;CACC,UAAIkY,SAAS,GAAG,EAAhB;;CAEA,UAAI,CAAC,KAAKrR,cAAV,EACA;CACC,eAAOqR,SAAP;CACA;;CAED,UAAI,OAAO,KAAKrR,cAAL,CAAoBsR,QAA3B,KAAwC,UAA5C,EACA;CACCD,QAAAA,SAAS,GAAG,KAAKrR,cAAL,CAAoBsR,QAApB,EAAZ;CACA,OAHD,MAIK,IACJ,OAAO,KAAKtR,cAAL,CAAoBuR,UAA3B,KAA0C,WAA1C,IACG,OAAO,KAAKvR,cAAL,CAAoBuR,UAApB,CAA+B5d,KAAtC,KAAgD,WAF/C,EAIL;CACC0d,QAAAA,SAAS,GAAG,KAAKrR,cAAL,CAAoBuR,UAApB,CAA+B5d,KAA/B,CAAqC2d,QAArC,EAAZ;CACA;;CAED,aAAOD,SAAP;CACA;CA16CF;CAAA;CAAA,oCA66CC;CACC,UAAI9Q,UAAU,GAAG,EAAjB;;CAEA,UAAI,KAAKA,UAAL,CAAgB9B,MAAhB,GAAyB,CAA7B,EACA;CACC8B,QAAAA,UAAU,GAAG,KAAKA,UAAlB;CACA,OAHD,MAKA;CACCA,QAAAA,UAAU,GAAG,CAAC;CAACiR,UAAAA,OAAO,EAAE,KAAKhR,QAAL,CAAciR,sBAAd,GAAqC,IAArC,GAA0C3a,QAAQ,CAACgQ;CAA7D,SAAD,CAAb;CACA;;CAED,aAAO4K,IAAI,CAACC,SAAL,CAAepR,UAAf,CAAP;CACA;CA17CF;CAAA;CAAA,mCA67CC;CACC,aAAO,KAAKhD,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB3D,IAAxB,CAA6BL,EAA7B,GAAkC,CAAzC;CACA;CA/7CF;CAAA;CAAA,gCAk8CC;CACC,aAAO,KAAKzC,IAAL,CAAUxB,OAAV,CAAkB,4BAAlB,EAAgD,EAAhD,IAAoD,KAAK0K,IAAhE;CACA;CAp8CF;CAAA;CAAA,8BAu8CC;CACC,aAAO,KAAKlJ,IAAZ;CACA;CAz8CF;CAAA;CAAA,kCA48CC;CACC,aAAO,KAAK2G,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB5G,MAAxB,CAA+BC,QAAtC;CACA;CA98CF;CAAA;CAAA,oCAi9CC;CACC,aAAO,KAAK6G,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB5G,MAAxB,CAA+BoC,WAAtC;CACA;CAn9CF;CAAA;CAAA,gCAs9CC;CACC,aAAO,KAAK0E,KAAL,CAAWtD,KAAX,CAAiBqH,WAAjB,CAA6BvI,MAA7B,CAAoCkF,MAA3C;CACA;CAx9CF;CAAA;CAAA,kCA29CC;CACC,aAAO,KAAKV,KAAL,CAAWtD,KAAX,CAAiBqH,WAAjB,CAA6BvI,MAA7B,CAAoCmF,QAA3C;CACA;CA79CF;CAAA;CAAA,sCAg+CC;CACC,aAAO,KAAKX,KAAL,CAAWtD,KAAX,CAAiBqH,WAAjB,CAA6BvI,MAA7B,CAAoCyF,YAA3C;CACA;CAl+CF;CAAA;CAAA,oCAq+CC;CAAA,UADcN,QACd,uEADyB,KAAKmJ,WAAL,EACzB;CACC,aAAO,KAAK9J,KAAL,CAAWtD,KAAX,CAAiB2X,SAAjB,CAA2B9T,UAA3B,CAAsCI,QAAtC,CAAP;CACA;CAv+CF;CAAA;CAAA,mCA0+CC;CACC,aAAO,KAAKX,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwBtE,MAAxB,CAA+BC,SAAtC;CACA;CA5+CF;CAAA;CAAA,kCA++CC;CACC,aAAO,KAAKuE,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB3D,IAAxB,CAA6BC,IAApC;CACA;CAj/CF;CAAA;CAAA,wCAo/CC;CACC,UAAIkY,QAAQ,GAAG,EAAf;CAEA,UAAI5c,MAAM,GAAGT,MAAM,CAACC,GAAP,CAAW,IAAX,EAAiB,eAAjB,CAAb;;CACA,UAAI,OAAOQ,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,CAACC,KAAP,CAAa,gBAAb,CAAlC,EACA;CACC2c,QAAAA,QAAQ,GAAE5c,MAAV;CACA,OAHD,MAKA;CACC,YAAIA,OAAM,GAAGT,MAAM,CAACC,GAAP,CAAW,KAAKkJ,SAAL,EAAX,EAA6B,eAA7B,CAAb;;CACA,YAAI,OAAO1I,OAAP,KAAkB,QAAlB,IAA8BA,OAAM,CAACC,KAAP,CAAa,gBAAb,CAAlC,EACA;CACC2c,UAAAA,QAAQ,GAAG5c,OAAX;CACA;CACD;;CAED,aAAO4c,QAAP;CACA;CAtgDF;CAAA;CAAA,gCAygDC;CACC,aAAO,KAAKtU,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB3D,IAAxB,CAA6BL,EAApC;CACA;CA3gDF;CAAA;CAAA,kCA8gDC;CACC,UAAI,CAAC,KAAKkE,KAAV,EACA;CACC1B,QAAAA,OAAO,CAACC,KAAR,CAAc,uFAAd;CACA,eAAO,KAAP;CACA;;CAED,aAAO,KAAKyB,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB3D,IAA/B;CACA;CAthDF;CAAA;CAAA,4CAyhDC;CACC,aAAO;CACN,gBAAQ,KAAK4G,gBAAL,CAAsB3L,IAAtB,IAA8B,EADhC;CAEN,qBAAa,KAAK2L,gBAAL,CAAsB/G,QAAtB,IAAkC,EAFzC;CAGN,kBAAU,KAAK+G,gBAAL,CAAsB7G,MAAtB,IAAgC,EAHpC;CAIN,iBAAS,KAAK6G,gBAAL,CAAsB1G,KAAtB,IAA+B,EAJlC;CAKN,eAAO,KAAK0G,gBAAL,CAAsBxG,GAAtB,IAA6B,EAL9B;CAMN,kBAAU,KAAKwG,gBAAL,CAAsBvG,MAAtB,IAAgC,EANpC;CAON,oBAAY,KAAKuG,gBAAL,CAAsBtG,QAAtB,IAAkC,EAPxC;CAQN,qBAAa,KAAKsG,gBAAL,CAAsB3G,IAAtB,IAA8B,KAAKqL,iBAAL,EAA9B,IAA0D,EARjE;CASN,uBAAe,KAAKzH,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB5G,MAAxB,CAA+BmC,UAA/B,GAA2C9B,QAAQ,CAACgQ,IAApD,GAA0D,EATnE;CAUN,sBAAc,KAAKhB,eAAL,EAVR;CAWN,uBAAe,KAAKE,aAAL;CAXT,OAAP;CAaA;CAviDF;CAAA;CAAA,4CA0iDC;CACC,aAAOhU,aAAa,CAAC,KAAKuL,KAAL,CAAWtD,KAAX,CAAiBoD,MAAjB,CAAwB5G,MAAxB,CAA+BK,QAAhC,CAApB;CACA;CA5iDF;CAAA;CAAA,wCA8iDqBoE,MA9iDrB,EA+iDC;CACC,UAAI,CAAC,KAAKqC,KAAV,EACA;CACC1B,QAAAA,OAAO,CAACC,KAAR,CAAc,uFAAd;CACA,eAAO,KAAP;CACA;;CAED,UAAMgW,eAAe,GAAG,CAAC,MAAD,EAAS,MAAT,EAAiB,UAAjB,EAA6B,QAA7B,EAAuC,OAAvC,EAAgD,KAAhD,EAAuD,QAAvD,EAAiE,UAAjE,CAAxB;;CAEA,UAAI,CAAC3X,cAAK,CAACC,KAAN,CAAYC,aAAZ,CAA0Ba,MAA1B,CAAL,EACA;CACCW,QAAAA,OAAO,CAACC,KAAR,yDAAsE,eAAtE;CACA,eAAO,KAAP;CACA;;CAED,WAAK,IAAIiW,KAAT,IAAkB,KAAKzR,gBAAvB,EACA;CACC,YAAI,CAAC,KAAKA,gBAAL,CAAsB/P,cAAtB,CAAqCwhB,KAArC,CAAL,EACA;CACC;CACA;;CACD,YAAI,CAAC7W,MAAM,CAAC6W,KAAD,CAAX,EACA;CACC,iBAAO,KAAKzR,gBAAL,CAAsByR,KAAtB,CAAP;CACA;CACD;;CAED,WAAK,IAAIA,MAAT,IAAkB7W,MAAlB,EACA;CACC,YAAI,CAACA,MAAM,CAAC3K,cAAP,CAAsBwhB,MAAtB,CAAL,EACA;CACC;CACA;;CAED,YAAID,eAAe,CAACE,OAAhB,CAAwBD,MAAxB,MAAmC,CAAC,CAAxC,EACA;CACClW,UAAAA,OAAO,CAACe,IAAR,kHAAuHmV,MAAvH,UAAmI,eAAnI,EAAoJ,+BAApJ,EAAqL,cAArL;CACA;CACA;;CAED,aAAKzR,gBAAL,CAAsByR,MAAtB,IAA+B7W,MAAM,CAAC6W,MAAD,CAArC;CACA;;CAED,UACC,KAAKzR,gBAAL,CAAsB3G,IAAtB,IACG,KAAKmL,WAAL,EADH,IAEG,KAAKxE,gBAAL,CAAsB3G,IAAtB,KAA+B,KAAKmL,WAAL,EAHnC,EAKA;CACC,aAAKmN,eAAL,CAAqB,KAAK3R,gBAAL,CAAsB3G,IAA3C;CACA;CACD;CAlmDF;CAAA;CAAA,sCAqmDC;CAAA,UADgBuY,SAChB,uEAD4B,EAC5B;CACC,WAAKxO,cAAL,CAAoByO,eAApB;CACA3d,MAAAA,MAAM,CAACoB,GAAP,CAAW,IAAX,EAAiB,eAAjB,EAAkC,EAAlC,EAAsC;CAACE,QAAAA,OAAO,EAAE,MAAI,KAAd;CAAqB+E,QAAAA,IAAI,EAAE;CAA3B,OAAtC;CAEA,WAAKQ,UAAL,CAAgBD,SAAhB,CAA0B1H,QAAQ,CAACC,KAAnC,EAA0Cue,SAA1C;CACA;CA1mDF;CAAA;CAAA,kCA4mDehX,MA5mDf,EA6mDC;CACC,UAAI,CAAC,KAAKqC,KAAV,EACA;CACC1B,QAAAA,OAAO,CAACC,KAAR,CAAc,uFAAd;CACA,eAAO,KAAP;CACA;;CAGD,UAAI/G,MAAM,GAAG,EAAb;;CACA,UAAImG,MAAM,YAAYV,KAAtB,EACA;CACCU,QAAAA,MAAM,CAAC8R,OAAP,CAAe,UAAAF,OAAO,EACtB;CACC,cAAIA,OAAO,IAAI,oBAAOA,OAAP,MAAmB,QAAlC,EACA;CACC/X,YAAAA,MAAM,CAACvE,IAAP,CAAYsc,OAAZ;CACA;CACD,SAND;;CAQA,YAAI/X,MAAM,CAAC0J,MAAP,IAAiB,CAArB,EACA;CACC5C,UAAAA,OAAO,CAACC,KAAR,CAAc,+CAAd;CACA,iBAAO,KAAP;CACA;CACD,OAfD,MAiBA;CACC,YAAI,CAACZ,MAAL,EACA;CACC,iBAAO,KAAP;CACA;;CAEDnG,QAAAA,MAAM,GAAG,CAAC;CAAC,qBAAWmG;CAAZ,SAAD,CAAT;CACA;;CAED,WAAKqF,UAAL,GAAkB,KAAKA,UAAL,CAAgB6R,MAAhB,CAAuBrd,MAAvB,CAAlB;CAEA,aAAO,IAAP;CACA;CAnpDF;CAAA;CAAA,+BAspDC;CAAA,UADS+K,IACT,uEADgB,EAChB;CAAA,UADoBuS,WACpB,uEADkC,EAClC;CACCxW,MAAAA,OAAO,CAACC,KAAR,iCAAuCgE,IAAvC,eAAgDuS,WAAhD;CAEA,UAAIC,mBAAmB,GAAG,EAA1B;;CACA,UAAIxS,IAAI,KAAK,sBAAb,EACA;CACCwS,QAAAA,mBAAmB,GAAG,KAAKvQ,WAAL,CAAiB,yBAAjB,EAA4C3M,OAA5C,CAAoD,cAApD,EAAoE,2DAApE,EAAiIA,OAAjI,CAAyI,YAAzI,EAAuJ,MAAvJ,CAAtB;CACA,aAAK6c,eAAL;CACA,OAJD,MAKK,IAAInS,IAAI,KAAK,2BAAb,EACL;CACCwS,QAAAA,mBAAmB,GAAG,KAAKvQ,WAAL,CAAiB,6BAAjB,EAAgD3M,OAAhD,CAAwD,cAAxD,EAAwE,cAAY,KAAKwB,IAAjB,GAAsB,IAA9F,EAAoGxB,OAApG,CAA4G,YAA5G,EAA0H,MAA1H,CAAtB;CACA,OAHI,MAIA,IAAI0K,IAAI,CAACyS,QAAL,CAAc,WAAd,CAAJ,EACL;CACCD,QAAAA,mBAAmB,GAAGD,WAAtB;CACA;;CAED,WAAK9U,KAAL,CAAWxC,MAAX,CAAkB,iBAAlB,EAAqC;CAACe,QAAAA,KAAK,EAAE;CAC5C0W,UAAAA,MAAM,EAAE,IADoC;CAE5C1S,UAAAA,IAAI,EAAJA,IAF4C;CAG5CuS,UAAAA,WAAW,EAAEC;CAH+B;CAAR,OAArC;CAKA;CA7qDF;CAAA;CAAA,iCAgrDC;CACC,WAAK/U,KAAL,CAAWxC,MAAX,CAAkB,iBAAlB,EAAqC;CAACe,QAAAA,KAAK,EAAE;CAC5C0W,UAAAA,MAAM,EAAE,KADoC;CAE5C1S,UAAAA,IAAI,EAAE,EAFsC;CAG5CuS,UAAAA,WAAW,EAAE;CAH+B;CAAR,OAArC;CAKA;CAED;;;;;;CAxrDD;CAAA;CAAA,8BA6rDWnX,MA7rDX,EA8rDC;CACC,UAAI,CAACf,cAAK,CAACC,KAAN,CAAYC,aAAZ,CAA0Ba,MAA1B,CAAL,EACA;CACCW,QAAAA,OAAO,CAACC,KAAR,uDAAoE,eAApE;CACA,eAAO,KAAP;CACA;;CAED,UAAI,CAAChJ,qBAAqB,CAAC2f,QAAtB,CAA+BvX,MAAM,CAACmD,IAAtC,CAAL,EACA;CACCxC,QAAAA,OAAO,CAACC,KAAR,2EAAiFZ,MAAM,CAACmD,IAAxF,UAAmG,eAAnG,EAAoH,+BAApH,EAAqJ,cAArJ;CACA,eAAO,KAAP;CACA;;CAED,UAAI,OAAOnD,MAAM,CAACe,QAAd,KAA2B,UAA/B,EACA;CACCJ,QAAAA,OAAO,CAACC,KAAR,yFAAkFZ,MAAM,CAACe,QAAzF,WAAwG,eAAxG,EAAyH,+BAAzH,EAA0J,cAA1J;CACA,eAAO,KAAP;CACA;;CAED,UAAI,OAAQ,KAAKwE,WAAL,CAAiBvF,MAAM,CAACmD,IAAxB,CAAR,KAA2C,WAA/C,EACA;CACC,aAAKoC,WAAL,CAAiBvF,MAAM,CAACmD,IAAxB,IAAgC,EAAhC;CACA;;CAED,WAAKoC,WAAL,CAAiBvF,MAAM,CAACmD,IAAxB,EAA8B7N,IAA9B,CAAmC0K,MAAM,CAACe,QAA1C;CAEA,aAAO,YAAY;CAClB,aAAKwE,WAAL,CAAiBvF,MAAM,CAACmD,IAAxB,IAAgC,KAAKoC,WAAL,CAAiBvF,MAAM,CAACmD,IAAxB,EAA8BS,MAA9B,CAAqC,UAASgO,OAAT,EAAkB;CACtF,iBAAOA,OAAO,KAAK5R,MAAM,CAACe,QAA1B;CACA,SAF+B,CAAhC;CAGA,OAJM,CAILgI,IAJK,CAIA,IAJA,CAAP;CAKA;CAED;;;;;;CA/tDD;CAAA;CAAA,8BAouDW/I,MApuDX,EAquDC;CACCA,MAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;;CAEA,UAAI,CAACA,MAAM,CAACmD,IAAZ,EACA;CACC,eAAO,KAAP;CACA;;CAED,UAAI,oBAAOnD,MAAM,CAACoC,IAAd,MAAuB,QAAvB,IAAmC,CAACpC,MAAM,CAACoC,IAA/C,EACA;CACCpC,QAAAA,MAAM,CAACoC,IAAP,GAAc,EAAd;CACA;;CAED,UAAI,KAAKmD,WAAL,CAAiBvF,MAAM,CAACmD,IAAxB,aAAyC7D,KAAzC,IAAkD,KAAKiG,WAAL,CAAiBvF,MAAM,CAACmD,IAAxB,EAA8BI,MAA9B,GAAuC,CAA7F,EACA;CACC,aAAKgC,WAAL,CAAiBvF,MAAM,CAACmD,IAAxB,EAA8B2O,OAA9B,CAAsC,UAAA/Q,QAAQ;CAAA,iBAAIA,QAAQ,CAACf,MAAM,CAACoC,IAAR,CAAZ;CAAA,SAA9C;CACA;;CAED,UAAI,KAAKmD,WAAL,CAAiBxO,gBAAgB,CAACY,KAAlC,aAAoD2H,KAApD,IAA6D,KAAKiG,WAAL,CAAiBxO,gBAAgB,CAACY,KAAlC,EAAyC4L,MAAzC,GAAkD,CAAnH,EACA;CACC,aAAKgC,WAAL,CAAiBxO,gBAAgB,CAACY,KAAlC,EAAyCma,OAAzC,CAAiD,UAAA/Q,QAAQ;CAAA,iBAAIA,QAAQ,CAAC;CAACoC,YAAAA,IAAI,EAAEnD,MAAM,CAACmD,IAAd;CAAoBf,YAAAA,IAAI,EAAEpC,MAAM,CAACoC;CAAjC,WAAD,CAAZ;CAAA,SAAzD;CACA;;CAED,aAAO,IAAP;CACA;CA7vDF;CAAA;CAAA,gCA+vDaoV,OA/vDb,EAgwDC;CACC,UAAI,oBAAOA,OAAP,MAAmB,QAAnB,IAA+B,CAACA,OAApC,EACA;CACC,eAAO,KAAP;CACA;;CAED,WAAK,IAAI/d,IAAT,IAAiB+d,OAAjB,EACA;CACC,YAAIA,OAAO,CAACniB,cAAR,CAAuBoE,IAAvB,CAAJ,EACA;CACC,eAAK6L,QAAL,CAAc7L,IAAd,IAAsB+d,OAAO,CAAC/d,IAAD,CAA7B;CACA;CACD;;CAED,aAAO,IAAP;CACA;CA/wDF;CAAA;CAAA,gCAixDaA,IAjxDb,EAkxDC;CACC,UAAIge,MAAM,GAAG,EAAb;;CACA,UAAI,OAAOhe,IAAP,KAAgB,WAApB,EACA;CACC,eAAO,KAAK6L,QAAZ;CACA,OAHD,MAIK,IAAI,OAAO,KAAKA,QAAL,CAAc7L,IAAI,CAACgG,QAAL,EAAd,CAAP,KAA0C,WAA9C,EACL;CACCkB,QAAAA,OAAO,CAACe,IAAR,0DAA+DjI,IAAI,CAACgG,QAAL,EAA/D;CACA,OAHI,MAKL;CACCgY,QAAAA,MAAM,GAAG,KAAKnS,QAAL,CAAc7L,IAAd,CAAT;CACA;;CAED,aAAOge,MAAP;CACA;CAEF;;CApyDA;CAAA;CAAA;;CCvDA;;;;;;;;AASA,KAGaC,mBAAb;CAAA;CAAA;CAEC,+BAAYjL,MAAZ,EACA;CAAA;CACC,SAAKkL,aAAL,GAAqB,6BAArB;CACA,SAAKC,kBAAL,GAA0B,IAAInT,MAAJ,CAAWgI,MAAX,CAA1B;;CACA,SAAKoL,qBAAL;CACA;;CAPF;CAAA;CAAA,yBASM7X,MATN,EAUC;CACC,aAAO,KAAK4X,kBAAL,CAAwBrT,IAAxB,CAA6BvE,MAA7B,CAAP;CACA;CAZF;CAAA;CAAA,4BAeC;CACC,aAAO,KAAK4X,kBAAL,CAAwB1e,KAAxB,EAAP;CACA;CAjBF;CAAA;CAAA,qCAmBkB8G,MAnBlB,EAoBC;CACC,aAAO,KAAK4X,kBAAL,CAAwBE,gBAAxB,CAAyC9X,MAAzC,CAAP;CACA;CAtBF;CAAA;CAAA,kCAyBC;CACC,aAAO,KAAK4X,kBAAL,CAAwBG,WAAxB,EAAP;CACA;CA3BF;CAAA;CAAA,wCA6BqB/X,MA7BrB,EA8BC;CACC,aAAO,KAAK4X,kBAAL,CAAwBI,mBAAxB,CAA4ChY,MAA5C,CAAP;CACA;CAhCF;CAAA;CAAA,kCAkCeA,MAlCf,EAmCC;CACC,aAAO,KAAK4X,kBAAL,CAAwBK,aAAxB,CAAsCjY,MAAtC,CAAP;CACA;CArCF;CAAA;CAAA,4CAuCyB7B,EAvCzB,EAuC6B6B,MAvC7B,EAwCC;CACC,aAAO,KAAK4X,kBAAL,CAAwBM,uBAAxB,CAAgD/Z,EAAhD,EAAoD6B,MAApD,CAAP;CACA;CA1CF;CAAA;CAAA,gCA4CawX,OA5Cb,EA6CC;CACC,aAAO,KAAKI,kBAAL,CAAwBrV,WAAxB,CAAoCiV,OAApC,CAAP;CACA;CAED;;;;;;CAjDD;CAAA;CAAA,8BAsDWxX,MAtDX,EAuDC;CACC,aAAO,KAAK4X,kBAAL,CAAwBrJ,SAAxB,CAAkCvO,MAAlC,CAAP;CACA;CAzDF;CAAA;CAAA,4BA4DC;CACC,aAAO,KAAK4X,kBAAL,CAAwBnO,KAAxB,EAAP;CACA;CA9DF;CAAA;CAAA,4CAiEC;CAAA;;CACC,UAAI,OAAOlP,MAAM,CAACC,EAAP,CAAU2d,QAAjB,KAA8B,WAAlC,EACA;CACC,YAAIC,UAAU,GAAGte,QAAQ,CAAC6L,aAAT,CAAuB,GAAvB,CAAjB;CACAyS,QAAAA,UAAU,CAACxM,IAAX,GAAkB,KAAKgM,kBAAL,CAAwBlc,IAA1C;CAEA,YAAI2c,YAAY,GAAGD,UAAU,CAACvc,QAAX,GAAoB,IAApB,GAAyBuc,UAAU,CAACE,QAApC,IAA8CF,UAAU,CAACG,IAAX,IAAmBH,UAAU,CAACG,IAAX,IAAmB,IAAtC,IAA8CH,UAAU,CAACG,IAAX,IAAmB,KAAjE,GAAwE,MAAIH,UAAU,CAACG,IAAvF,GAA6F,EAA3I,CAAnB;CAEAhe,QAAAA,MAAM,CAACC,EAAP,CAAU2d,QAAV,GAAqB;CACpBK,UAAAA,YAAY,EAAE,wBAAM;CACnB,YAAA,KAAI,CAACjU,IAAL,CAAU;CAAC+Q,cAAAA,cAAc,EAAE;CAAjB,aAAV;CACA,WAHmB;CAIpBmD,UAAAA,aAAa,EAAE,yBAAM;CACpB,YAAA,KAAI,CAACvf,KAAL;CACA,WANmB;CAOpB+M,UAAAA,gBAAgB,EAAE,0BAACpC,EAAD,EAAK6U,SAAL,EAAgBC,OAAhB,EAClB;CACC,gBAAID,SAAS,KAAK,SAAlB,EACA;CACC,cAAA,KAAI,CAACnK,SAAL,CAAe;CACdpL,gBAAAA,IAAI,EAAEpM,gBAAgB,CAACS,WADT;CAEduJ,gBAAAA,QAAQ,EAAE,kBAAU6X,KAAV,EACV;CACCD,kBAAAA,OAAO,CAAC;CAACE,oBAAAA,MAAM,EAAER,YAAT;CAAuBjW,oBAAAA,IAAI,EAAEoU,IAAI,CAACC,SAAL,CAAe;CAAC9B,sBAAAA,MAAM,EAAE;CAAT,qBAAf,CAA7B;CAAsEiE,oBAAAA,KAAK,EAALA;CAAtE,mBAAD,CAAP;CACA;CALa,eAAf;CAOA,aATD,MAWA;CACCjY,cAAAA,OAAO,CAACe,IAAR,CAAa,sFAAb;CACA;CACD,WAvBmB;CAwBpBoX,UAAAA,SAAS,EAAE,qBAAM,EAxBG;CAyBpBC,UAAAA,SAAS,EAAE,qBAAM,EAzBG;CA0BpBV,UAAAA,YAAY,EAAZA;CA1BoB,SAArB;CA4BA;;CAED,UAAI,OAAO9d,MAAM,CAACye,cAAd,KAAiC,UAArC,EACA;CACC,YAAIvM,MAAM,GAAGlS,MAAM,CAACye,cAAP,EAAb;;CAEA,YAAIvM,MAAM,CAACjO,IAAX,EACA;CACC,eAAKoZ,kBAAL,CAAwBI,mBAAxB,CAA4CvL,MAAM,CAACjO,IAAnD;CACA;;CACD,YAAIiO,MAAM,CAACwM,YAAX,EACA;CACC,eAAKrB,kBAAL,CAAwBK,aAAxB,CAAsCxL,MAAM,CAACwM,YAA7C;CACA;CACD;;CAED,UAAI1e,MAAM,CAAC2e,gBAAP,YAAmC5Z,KAAvC,EACA;CACC/E,QAAAA,MAAM,CAAC2e,gBAAP,CAAwBpH,OAAxB,CAAgC,UAAA/Q,QAAQ;CAAA,iBAAIA,QAAQ,EAAZ;CAAA,SAAxC;CACA;;CAED,aAAO,IAAP;CACA;CA3HF;CAAA;CAAA;;CCZA;;;;;;;;AASA,CAQA;;;;AAIA8O,WAAG,CAACsJ,SAAJ,CAAc,aAAd,EACA;CACC/W,EAAAA,IADD,kBAEC;CACC,WAAO;CACNgX,MAAAA,oBAAoB,EAAE,IADhB;CAENC,MAAAA,sBAAsB,EAAE,IAFlB;CAGNC,MAAAA,aAAa,EAAE,EAHT;CAINC,MAAAA,UAAU,EAAE,IAJN;CAKNC,MAAAA,mBAAmB,EAAE,GALf;CAMNC,MAAAA,kBAAkB,EAAE,GANd;CAONC,MAAAA,gBAAgB,EAAE,GAPZ;CAQNC,MAAAA,YAAY,EAAE,EARR;CASNC,MAAAA,qBAAqB,EAAE,CATjB;CAUNC,MAAAA,oBAAoB,EAAE,CAVhB;CAWNC,MAAAA,mBAAmB,EAAE,CAXf;CAYNC,MAAAA,kBAAkB,EAAE,CAZd;CAaNC,MAAAA,UAAU,EAAE,KAbN;CAcNC,MAAAA,eAAe,EAAE,KAdX;CAeNC,MAAAA,YAAY,EAAE,KAfR;CAgBN5c,MAAAA,cAAc,EAAE,GAhBV;CAiBN6c,MAAAA,qBAAqB,EAAE,GAjBjB;CAkBNC,MAAAA,qBAAqB,EAAEnb,cAAK,CAACG,MAAN,CAAaC,QAAb,KAAyB,GAAzB,GAA8B;CAlB/C,KAAP;CAoBA,GAvBF;CAwBCgb,EAAAA,OAxBD,qBAyBC;CACC,SAAKC,SAAL;CAEAxgB,IAAAA,QAAQ,CAACmM,gBAAT,CAA0B,SAA1B,EAAqC,KAAKsU,eAA1C;;CACA,QAAG,CAACtb,cAAK,CAACG,MAAN,CAAaC,QAAb,EAAD,IAA4B,CAAC,KAAK8C,MAAL,CAAY5G,MAAZ,CAAmBO,QAAnD,EACA;CACCvB,MAAAA,MAAM,CAAC0L,gBAAP,CAAwB,QAAxB,EAAkC,KAAKuU,qBAAL,GAA6Bvb,cAAK,CAACwb,QAAN,CAAe,KAAKC,iBAApB,EAAuC,EAAvC,CAA/D;CACA;;CACD,SAAK3L,KAAL,CAAW4L,GAAX,CAAe,iBAAf,EAAkC,KAAKC,iBAAvC;CACA,GAlCF;CAmCCC,EAAAA,aAnCD,2BAoCC;CACC/gB,IAAAA,QAAQ,CAACghB,mBAAT,CAA6B,SAA7B,EAAwC,KAAKP,eAA7C;;CACA,QAAG,CAACtb,cAAK,CAACG,MAAN,CAAaC,QAAb,EAAD,IAA4B,CAAC,KAAK8C,MAAL,CAAY5G,MAAZ,CAAmBO,QAAnD,EACA;CACCvB,MAAAA,MAAM,CAACugB,mBAAP,CAA2B,QAA3B,EAAqC,KAAKN,qBAA1C;CACA;;CACD,SAAKzL,KAAL,CAAWgM,IAAX,CAAgB,iBAAhB,EAAmC,KAAKH,iBAAxC;CAEA,SAAKI,yBAAL;CACA,GA7CF;CA8CCC,EAAAA,QAAQ;CAEPhlB,IAAAA,QAAQ,EAAE;CAAA,aAAMA,QAAN;CAAA,KAFH;CAGPV,IAAAA,QAAQ,EAAE;CAAA,aAAMA,QAAN;CAAA,KAHH;CAIP8Q,IAAAA,UAAU,EAAE;CAAA,aAAMA,mBAAN;CAAA,KAJL;CAKPwN,IAAAA,SAAS,EAAE;CAAA,aAAMA,kBAAN;CAAA,KALJ;CAOPqH,IAAAA,mBAPO,+BAOanc,KAPb,EAQP;CACC,aAAO;CAACoc,QAAAA,IAAI,EAAE,SAAO,KAAK7d,cAAZ,GAA2B;CAAlC,OAAP;CACA,KAVM;CAWP8d,IAAAA,oBAXO,kCAYP;CACC,UAAI,CAAC,KAAKjZ,MAAL,CAAY5G,MAAZ,CAAmBQ,SAApB,IAAiC,CAAC,KAAKsf,gBAA3C,EACA;CACC,eAAO;CAACC,UAAAA,YAAY,EAAE;CAAf,SAAP;CACA;;CACD,aAAO,EAAP;CACA,KAlBM;CAmBPC,IAAAA,iBAnBO,+BAoBP;CACC,UAAGtc,cAAK,CAACG,MAAN,CAAaC,QAAb,MAA2B,KAAK8C,MAAL,CAAY5G,MAAZ,CAAmBO,QAAjD,EACA;CACC;CACA;;CAED,UAAI,KAAK8d,qBAAL,GAA6B,KAAKF,gBAAlC,IAAsD,KAAKE,qBAAL,GAA6B,KAAKE,mBAA5F,EACA;CACC,aAAKA,mBAAL,GAA2BvN,IAAI,CAACiP,GAAL,CAAS,KAAK5B,qBAAd,EAAqC,KAAKJ,mBAA1C,CAA3B;CACA;;CAED,aAAO,KAAKM,mBAAL,GAAyB,IAAhC;CACA,KAhCM;CAiCP2B,IAAAA,gBAjCO,8BAkCP;CACC,UAAGxc,cAAK,CAACG,MAAN,CAAaC,QAAb,MAA2B,KAAK8C,MAAL,CAAY5G,MAAZ,CAAmBO,QAAjD,EACA;CACC;CACA;;CAED,UAAI,KAAK+d,oBAAL,GAA4B,KAAKJ,kBAAjC,IAAuD,KAAKI,oBAAL,GAA4B,KAAKE,kBAA5F,EACA;CACC,aAAKA,kBAAL,GAA0BxN,IAAI,CAACiP,GAAL,CAAS,KAAK3B,oBAAd,EAAoC,KAAKJ,kBAAzC,CAA1B;CACA;;CAED,aAAO,KAAKM,kBAAL,GAAwB,IAA/B;CACA,KA9CM;CA+CP2B,IAAAA,eA/CO,6BAgDP;CACC,aAAO,KAAK1B,UAAL,GAAkB,MAAlB,GAA2B,MAAlC;CACA,KAlDM;CAmDPqB,IAAAA,gBAnDO,8BAoDP;CACC,aAAO,CAAC9kB,YAAY,CAACI,UAAd,EAA0BJ,YAAY,CAACK,YAAvC,EAAqDL,YAAY,CAACM,WAAlE,EAA+E0gB,QAA/E,CAAwF,KAAKpV,MAAL,CAAY5G,MAAZ,CAAmBK,QAA3G,CAAP;CACA,KAtDM;CAuDP+f,IAAAA,cAvDO,4BAwDP;CACC,aAAO,CAACplB,YAAY,CAACI,UAAd,EAA0BJ,YAAY,CAACC,OAAvC,EAAgDD,YAAY,CAACE,SAA7D,EAAwE8gB,QAAxE,CAAiF,KAAKpV,MAAL,CAAY5G,MAAZ,CAAmBK,QAApG,CAAP;CACA,KA1DM;CA2DP0J,IAAAA,QA3DO,sBA4DP;CACC,aAAOuK,UAAG,CAAC+L,kBAAJ,CAAuB,cAAvB,EAAuC,KAAK7M,KAAL,CAAWmB,eAAlD,CAAP;CACA,KA9DM;CA+DP2L,IAAAA,oBA/DO,gCA+Dc9c,KA/Dd,EAgEP;CACC,UAAIA,KAAK,CAACqH,WAAN,CAAkBhH,MAAlB,CAAyB+D,IAAzB,KAAkCkD,mBAAU,CAACC,MAAjD,EACA;CACC,YAAI3M,SAAS,CAACmiB,SAAV,CAAoBrc,QAApB,GAA+B8X,QAA/B,CAAwC,MAAxC,CAAJ,EACA,CADA,MAGK,IAAIxY,KAAK,CAACqH,WAAN,CAAkBhH,MAAlB,CAAyB8G,WAAzB,KAAyCK,0BAAiB,CAACC,UAA/D,EACL;CACC,cAAI7M,SAAS,CAACmiB,SAAV,CAAoBrc,QAApB,GAA+B8X,QAA/B,CAAwC,QAAxC,CAAJ,EACA;CACC,mBAAO,IAAP;CACA,WAHD,MAKA;CACC,mBAAO,EAAE,oBAAOhd,MAAM,CAACwhB,MAAd,MAAyB,QAAzB,IAAqCxhB,MAAM,CAACwhB,MAAP,CAAcC,WAAd,IAA6B,GAApE,CAAP;CACA;CACD;CACD;;CAED,aAAO,KAAP;CACA,KApFM;CAqFPC,IAAAA,eArFO,2BAqFSld,KArFT,EAsFP;CACC,UAAImd,SAAS,GAAG,CAAC,qBAAD,CAAhB;CAEAA,MAAAA,SAAS,CAAC5mB,IAAV,CAAe,kBAAf;;CAEA,UAAIyJ,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBO,QAAxB,EACA;CACCogB,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,uBAAf;CACA,OAHD,MAKA;CACC4mB,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,0BAAwBwB,aAAa,CAACiI,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBK,QAArB,CAApD;CACA;;CAED,UAAImD,KAAK,CAACqH,WAAN,CAAkB7K,MAAlB,CAAyByL,UAAzB,KAAwCnR,YAAY,CAACC,OAAzD,EACA;CACComB,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,qBAAf;CACA,OAHD,MAIK,IAAIyJ,KAAK,CAACqH,WAAN,CAAkB7K,MAAlB,CAAyByL,UAAzB,KAAwCnR,YAAY,CAACE,OAAzD,EACL;CACCmmB,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,qBAAf;CACA,OAHI,MAKL;CACC4mB,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,qBAAf;CACA;;CAED,UAAI,CAACyJ,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBwB,MAAzB,EACA;CACCmf,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,2BAAf;CACA;;CAED,UAAIyJ,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoB8B,OAAxB,EACA;CACC6e,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,yBAAf;CACA;;CAED,UAAIyJ,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBoC,WAAxB,EACA;CACCue,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,wBAAf;CACA;;CAED,UACCyJ,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoB7E,QAApB,CAA6BS,IAA7B,IACG,EAAEsF,KAAK,CAACqH,WAAN,CAAkBhH,MAAlB,CAAyB+D,IAAzB,KAAkCkD,mBAAU,CAACC,MAA7C,IAAuDvH,KAAK,CAACqH,WAAN,CAAkBhH,MAAlB,CAAyB8G,WAAzB,KAAyCK,0BAAiB,CAACC,UAApH,CAFJ,EAIA;CACC0V,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,0BAAf;CACA;;CAED,UAAI2J,cAAK,CAACG,MAAN,CAAaC,QAAb,EAAJ,EACA;CACC6c,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,oBAAf;CACA,OAHD,MAIK,IAAI2J,cAAK,CAACsI,OAAN,CAAc4U,QAAd,EAAJ,EACL;CACCD,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,4BAAf;CACA,OAHI,MAIA,IAAI2J,cAAK,CAACsI,OAAN,CAAcC,IAAd,EAAJ,EACL;CACC0U,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,wBAAf;CACA;;CAED,UAAI2J,cAAK,CAACwO,QAAN,CAAe2O,KAAf,EAAJ,EACA;CACCF,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,iBAAf;CACA,OAHD,MAKA;CACC4mB,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,2BAAf;CACA;;CAED,UAAIyJ,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBU,MAApB,CAA2BC,eAA3B,IAA8C+C,cAAK,CAACod,WAAN,CAAkBtd,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBU,MAApB,CAA2BE,SAA7C,CAAlD,EACA;CACC+f,QAAAA,SAAS,CAAC5mB,IAAV,CAAe,2BAAf;CACA;;CAED,aAAO4mB,SAAS,CAAC7J,IAAV,CAAe,GAAf,CAAP;CACA,KApKM;CAqKPiK,IAAAA,iBArKO,+BAsKP;CACC,aAAO,KAAKC,iBAAL,CAAuBhZ,MAAvB,GAAgC,CAAvC;CACA,KAxKM;CAyKPiZ,IAAAA,cAzKO,4BA0KP;CACC,UAAI3iB,MAAM,GAAG;CACZsE,QAAAA,EAAE,EAAE,CADQ;CAEZse,QAAAA,KAAK,EAAE,EAFK;CAGZtF,QAAAA,WAAW,EAAE,EAHD;CAIZuF,QAAAA,KAAK,EAAE;CAJK,OAAb;;CAMA,UAAI,CAAC,KAAK7e,MAAL,CAAY2W,OAAjB,EACA;CACC,eAAO3a,MAAP;CACA;;CAED,UAAI6J,OAAO,GAAG,KAAKiZ,MAAL,CAAYzK,OAAZ,CAAoB,qBAApB,EAA2C,KAAKrU,MAAL,CAAYkF,MAAvD,EAA+D,KAAKlF,MAAL,CAAY2W,OAA3E,CAAd;;CACA,UAAI,CAAC9Q,OAAL,EACA;CACC,eAAO7J,MAAP;CACA;;CAED,UAAI2E,IAAI,GAAG,KAAKme,MAAL,CAAYzK,OAAZ,CAAoB,WAApB,EAAiCxO,OAAO,CAACkN,QAAzC,CAAX;CAEA/W,MAAAA,MAAM,GAAG;CACRsE,QAAAA,EAAE,EAAE,KAAKN,MAAL,CAAY2W,OADR;CAERiI,QAAAA,KAAK,EAAEje,IAAI,GAAEA,IAAI,CAAC/E,IAAP,GAAa,EAFhB;CAGRijB,QAAAA,KAAK,EAAEle,IAAI,GAAEA,IAAI,CAACke,KAAP,GAAc,EAHjB;CAIRvF,QAAAA,WAAW,EAAEzT,OAAO,CAACkZ,aAAR,GAAuBlZ,OAAO,CAACkZ,aAA/B,GAA8C,KAAKtX,QAAL,CAAcuX;CAJjE,OAAT;CAOA,aAAOhjB,MAAP;CACA;CAtMM,KAuMJijB,gBAAI,CAACC,QAAL,CAAc;CAChB5a,IAAAA,MAAM,EAAE,gBAAApD,KAAK;CAAA,aAAIA,KAAK,CAACoD,MAAV;CAAA,KADG;CAEhBiE,IAAAA,WAAW,EAAE,qBAAArH,KAAK;CAAA,aAAIA,KAAK,CAACqH,WAAV;CAAA,KAFF;CAGhBvI,IAAAA,MAAM,EAAE,gBAAAkB,KAAK;CAAA,aAAIA,KAAK,CAAC2X,SAAN,CAAgB9T,UAAhB,CAA2B7D,KAAK,CAACqH,WAAN,CAAkBvI,MAAlB,CAAyBmF,QAApD,CAAJ;CAAA,KAHG;CAIhBuZ,IAAAA,iBAAiB,EAAE,2BAAAxd,KAAK;CAAA,aAAIA,KAAK,CAAC4D,QAAN,CAAeC,UAAf,CAA0B7D,KAAK,CAACqH,WAAN,CAAkBvI,MAAlB,CAAyBkF,MAAnD,CAAJ;CAAA;CAJR,GAAd,CAvMI,CA9CT;CA4PCia,EAAAA,KAAK,EACL;CACCjf,IAAAA,YADD,wBACc3I,KADd,EAEC;CACCob,MAAAA,sBAAM,CAACyM,GAAP,CAAW,qBAAX,EAAkC7nB,KAAlC;CACA;CAJF,GA7PD;CAmQC8nB,EAAAA,OAAO,EACP;CACChkB,IAAAA,KADD,iBACO0f,KADP,EAEC;CACC,UAAI,KAAKzW,MAAL,CAAY5G,MAAZ,CAAmBO,QAAvB,EACA;CACC,eAAO,KAAP;CACA;;CAED,WAAKqhB,aAAL;CACA,WAAKR,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC1C,QAAAA,MAAM,EAAE;CAAT,OAApC;CACA,KAVF;CAWCud,IAAAA,iBAXD,+BAYC;CACC,UAAI,KAAKW,gBAAT,EACA;CACC,YAAI+B,cAAc,GAAG,KAAKC,KAAL,CAAWC,aAAX,CAAyBC,qBAAzB,GAAiDC,MAAtE;CACA,YAAIC,kBAAkB,GAAGljB,MAAM,CAACmjB,WAAP,GAAqBN,cAA9C;CACA,aAAKxD,qBAAL,GAA6Brf,MAAM,CAACmjB,WAAP,GAAqB,KAAK/D,YAA1B,GAAyC8D,kBAAtE;CACA,OALD,MAOA;CACC,YAAIE,WAAW,GAAG,KAAKN,KAAL,CAAWC,aAAX,CAAyBC,qBAAzB,GAAiDK,GAAnE;CACA,aAAKhE,qBAAL,GAA6Brf,MAAM,CAACmjB,WAAP,GAAqB,KAAK/D,YAA1B,GAAyCgE,WAAtE;CACA;;CAED,WAAK9D,oBAAL,GAA4Btf,MAAM,CAACsjB,UAAP,GAAoB,KAAKlE,YAAL,GAAoB,CAApE;CACA,KA1BF;CA2BCmE,IAAAA,YA3BD,0BA4BC;CACC,UAAI,KAAKznB,OAAT,EACA;CACC,eAAO,KAAP;CACA;;CAED+e,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;;CACA,UAAI,CAAC,KAAK5b,MAAL,CAAY5G,MAAZ,CAAmBa,IAAnB,CAAwBC,MAA7B,EACA;CACC,eAAO,KAAP;CACA;;CACD,UACC,KAAK8F,MAAL,CAAYtE,MAAZ,CAAmBE,YAAnB,IACG,KAAKoE,MAAL,CAAYtE,MAAZ,CAAmBnG,QAAnB,KAAgCnC,QAAQ,CAACG,IAF7C,EAIA;CACC,eAAO,KAAP;CACA;;CACD,WAAKinB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,QAAAA,QAAQ,EAAEjH,QAAQ,CAACN;CAApB,OAApC;CACA,KA/CF;CAgDCqoB,IAAAA,eAhDD,6BAiDC;CACC5I,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;CACA,WAAKpB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,QAAAA,QAAQ,EAAEjH,QAAQ,CAACG;CAApB,OAApC;CACA,KApDF;CAqDC6nB,IAAAA,eArDD,6BAsDC;CACC7I,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;;CAEA,UAAI,KAAK5b,MAAL,CAAYtE,MAAZ,CAAmBX,QAAnB,KAAgCjH,QAAQ,CAACG,OAA7C,EACA;CACC,aAAKumB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,UAAAA,QAAQ,EAAEjH,QAAQ,CAACI;CAApB,SAApC;CACA;CACD,KA7DF;CA8DC6nB,IAAAA,eA9DD,6BA+DC;CACC9I,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;CACA,WAAKpB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,QAAAA,QAAQ,EAAEjH,QAAQ,CAACK;CAApB,OAApC;CACA,KAlEF;CAmEC6nB,IAAAA,QAnED,sBAoEC;CACC/I,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;;CAEA,UAAI,KAAK5b,MAAL,CAAY5G,MAAZ,CAAmB2B,QAAnB,KAAgCjH,QAAQ,CAACP,IAA7C,EACA;CACC,aAAKinB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,UAAAA,QAAQ,EAAEjH,QAAQ,CAACP;CAApB,SAApC;CACA;CACD,KA3EF;CA4EC0oB,IAAAA,gBA5ED,8BA6EC;CACC,WAAKzB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAACpC,QAAAA,WAAW,EAAE;CAAd,OAApC;CACA,KA/EF;CAgFC4gB,IAAAA,iBAhFD,+BAiFC;CACC,WAAK1B,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAACpC,QAAAA,WAAW,EAAE;CAAd,OAApC;CAEA,WAAKsR,KAAL,CAAWgB,aAAX,CAAyBuO,mBAAzB,CAA6C,IAA7C;;CAEA,UAAI,KAAKhF,aAAL,IAAsB,KAAKC,UAA/B,EACA;CACC,YAAI,KAAKD,aAAT,EACA;CACC,eAAKiF,cAAL,CAAoB;CAACC,YAAAA,KAAK,EAAE,KAAKpY,WAAL,CAAiBhH,MAAjB,CAAwB+D,IAAxB,KAAiCkD,mBAAU,CAACC;CAApD,WAApB;CACA,eAAKgT,aAAL,GAAqB,EAArB;CACA;;CACD,YAAI,KAAKC,UAAT,EACA;CACC,eAAKkF,sBAAL;CACA,eAAKlF,UAAL,GAAkB,EAAlB;CACA;CACD,OAZD,MAaK,IAAI,KAAKpX,MAAL,CAAY5G,MAAZ,CAAmB2B,QAAnB,KAAgCjH,QAAQ,CAACP,IAA7C,EACL;CACC,aAAKqZ,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBF,KAApC;CACA;CACD,KAvGF;CAwGCG,IAAAA,oBAxGD,kCAyGC;CACC,WAAKhC,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,QAAAA,QAAQ,EAAGjH,QAAQ,CAACP;CAArB,OAApC;CACA,WAAKinB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAACpC,QAAAA,WAAW,EAAG;CAAf,OAApC;CAEA,WAAKsR,KAAL,CAAWgB,aAAX,CAAyBuO,mBAAzB,CAA6C,KAA7C;;CAEA,UAAI,KAAKhF,aAAT,EACA;CACC,aAAKvK,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBE,UAApC,EAAgD;CAC/C7a,UAAAA,IAAI,EAAE,KAAKuV,aADoC;CAE/CkF,UAAAA,KAAK,EAAE,KAAKpY,WAAL,CAAiBhH,MAAjB,CAAwB+D,IAAxB,KAAiCkD,mBAAU,CAACC;CAFJ,SAAhD;CAIA,aAAKgT,aAAL,GAAqB,EAArB;CACA;;CACD,UAAI,KAAKC,UAAT,EACA;CACC,aAAKA,UAAL,GAAkB,EAAlB;CACA;;CAED,UAAI,KAAKnT,WAAL,CAAiBhH,MAAjB,CAAwB+D,IAAxB,KAAiCkD,mBAAU,CAACC,MAAhD,EACA;CACC,aAAKyI,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBF,KAApC;CACA;CACD,KAhIF;CAiICK,IAAAA,QAjID,oBAiIUplB,IAjIV,EAkIC;CAAA,wCADkBuG,MAClB;CADkBA,QAAAA,MAClB;CAAA;;CACCwQ,MAAAA,sBAAM,CAACuE,IAAP,OAAAvE,sBAAM,GAAM/W,IAAN,SAAeuG,MAAf,EAAN;CACA,KApIF;CAqICsa,IAAAA,SArID,uBAsIC;CAAA;;CACC,UAAGrb,cAAK,CAACG,MAAN,CAAaC,QAAb,EAAH,EACA;CACC,YAAI+Z,oBAAoB,GAAG9Z,KAAK,CAACwf,IAAN,CAC1BhlB,QAAQ,CAACilB,IAAT,CAAcC,oBAAd,CAAmC,MAAnC,CAD0B,EAEzBpb,MAFyB,CAElB,UAAAgO,OAAO;CAAA,iBAAIA,OAAO,CAACnY,IAAR,KAAiB,UAArB;CAAA,SAFW,EAEsB,CAFtB,CAA3B;;CAIA,YAAI2f,oBAAJ,EACA;CACC,eAAKA,oBAAL,GAA4BA,oBAA5B;CACAtf,UAAAA,QAAQ,CAACilB,IAAT,CAAcE,WAAd,CAA0B,KAAK7F,oBAA/B;CACA,SAJD,MAMA;CACC,cAAI8F,YAAY,GAAGplB,QAAQ,CAAC8L,IAAT,CAAcuZ,WAAjC;;CACA,cAAID,YAAY,GAAG3kB,MAAM,CAACsjB,UAA1B,EACA;CACCqB,YAAAA,YAAY,GAAG3kB,MAAM,CAACsjB,UAAtB;CACA;;CACD,cAAIqB,YAAY,GAAG,IAAnB,EACA;CACCA,YAAAA,YAAY,GAAG,IAAf;CACA;;CAED,eAAK9F,oBAAL,GAA4Btf,QAAQ,CAAC6L,aAAT,CAAuB,MAAvB,CAA5B;CACA,eAAKyT,oBAAL,CAA0BgG,YAA1B,CAAuC,MAAvC,EAA+C,UAA/C;CACA,eAAKhG,oBAAL,CAA0BgG,YAA1B,CAAuC,SAAvC,kBAA2DF,YAA3D;CACA;;CAED,YAAI,CAAC,KAAK7F,sBAAV,EACA;CACC,eAAKA,sBAAL,GAA8Bvf,QAAQ,CAAC6L,aAAT,CAAuB,MAAvB,CAA9B;CACA,eAAK0T,sBAAL,CAA4B+F,YAA5B,CAAyC,MAAzC,EAAiD,UAAjD;CACA,eAAK/F,sBAAL,CAA4B+F,YAA5B,CAAyC,SAAzC,EAAoD,wDAApD;CACAtlB,UAAAA,QAAQ,CAACilB,IAAT,CAAchZ,WAAd,CAA0B,KAAKsT,sBAA/B;CACA;;CAEDvf,QAAAA,QAAQ,CAAC8L,IAAT,CAAcyZ,SAAd,CAAwBC,GAAxB,CAA4B,0BAA5B;;CAEA,YAAIrgB,cAAK,CAACsI,OAAN,CAAcgY,aAAd,EAAJ,EACA;CACCzlB,UAAAA,QAAQ,CAAC8L,IAAT,CAAcyZ,SAAd,CAAwBC,GAAxB,CAA4B,iCAA5B;CACA;;CAEDE,QAAAA,UAAU,CAAC,YAAM;CAChB,UAAA,KAAI,CAAC7C,MAAL,CAAYvZ,QAAZ,CAAqB,aAArB;CACA,SAFS,EAEP,EAFO,CAAV;CAGA,OA9CD,MAgDA;CACC,aAAKuZ,MAAL,CAAYvZ,QAAZ,CAAqB,aAArB,EAAoC9B,IAApC,CAAyC,YAAM;CAC9C,UAAA,KAAI,CAACwY,mBAAL,GAA2B,KAAI,CAACJ,gBAAhC;CACA,UAAA,KAAI,CAACK,kBAAL,GAA0B,KAAI,CAACN,kBAA/B;;CACA,UAAA,KAAI,CAACiB,iBAAL;;CAEA,UAAA,KAAI,CAACZ,mBAAL,GAA2B,KAAI,CAAC3X,MAAL,CAAY5G,MAAZ,CAAmBgC,YAAnB,IAAmC,KAAI,CAACuc,mBAAnE;CACA,UAAA,KAAI,CAACC,kBAAL,GAA0B,KAAI,CAAC5X,MAAL,CAAY5G,MAAZ,CAAmBiC,WAAnB,IAAkC,KAAI,CAACuc,kBAAjE;CACA,SAPD;CAQA;;CAED,WAAKzc,cAAL,GAAsB,KAAK6E,MAAL,CAAY5G,MAAZ,CAAmB+B,cAAnB,IAAqC,KAAKA,cAAhE;CAEA,WAAKqf,MAAL,CAAY9c,MAAZ,CAAmB,sBAAnB,EAA2C;CAACkD,QAAAA,MAAM,EAAE,KAAKgM,KAAL,CAAWgB,aAAX,CAAyBjN,SAAzB;CAAT,OAA3C;CACA,WAAK6Z,MAAL,CAAY9c,MAAZ,CAAmB,yBAAnB,EAA8C;CAACkD,QAAAA,MAAM,EAAE,KAAKgM,KAAL,CAAWgB,aAAX,CAAyBjN,SAAzB;CAAT,OAA9C;CACA,WAAK6Z,MAAL,CAAY9c,MAAZ,CAAmB,0BAAnB,EAA+C;CAACmD,QAAAA,QAAQ,EAAE,KAAK+L,KAAL,CAAWgB,aAAX,CAAyB5D,WAAzB,EAAX;CAAmDlJ,QAAAA,MAAM,EAAE;CACzGC,UAAAA,UAAU,EAAE,UAD6F;CAEzGC,UAAAA,IAAI,EAAE;CAFmG;CAA3D,OAA/C;CAIA,KA1MF;CA2MCga,IAAAA,aA3MD,2BA4MC;CACC,UAAGle,cAAK,CAACG,MAAN,CAAaC,QAAb,EAAH,EACA;CACCvF,QAAAA,QAAQ,CAAC8L,IAAT,CAAcyZ,SAAd,CAAwBI,MAAxB,CAA+B,0BAA/B;;CAEA,YAAIxgB,cAAK,CAACsI,OAAN,CAAcgY,aAAd,EAAJ,EACA;CACCzlB,UAAAA,QAAQ,CAAC8L,IAAT,CAAcyZ,SAAd,CAAwBI,MAAxB,CAA+B,iCAA/B;CACA;;CAED,YAAI,KAAKpG,sBAAT,EACA;CACCvf,UAAAA,QAAQ,CAACilB,IAAT,CAAcE,WAAd,CAA0B,KAAK5F,sBAA/B;CACA,eAAKA,sBAAL,GAA8B,IAA9B;CACA;;CAED,YAAI,KAAKD,oBAAT,EACA;CACCtf,UAAAA,QAAQ,CAACilB,IAAT,CAAchZ,WAAd,CAA0B,KAAKqT,oBAA/B;CACA,eAAKA,oBAAL,GAA4B,IAA5B;CACA;CACD;CACD,KAlOF;CAmOCsG,IAAAA,YAnOD,0BAoOC;CACC,WAAK3Q,KAAL,CAAWgB,aAAX,CAAyB7W,KAAzB;CACA,KAtOF;CAuOC0hB,IAAAA,iBAvOD,6BAuOmBhC,KAvOnB,EAwOC;CAAA;;CACCxD,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;;CACA,UAAInF,KAAK,CAACzV,IAAN,KAAelN,QAAQ,CAACG,OAA5B,EACA;CACC,YAAIwiB,KAAK,CAAC+G,OAAV,EACA;CACC,eAAK5B,eAAL,GAAuByB,UAAU,CAAC,YAAM;CACvC,YAAA,MAAI,CAACxB,eAAL;CACA,WAFgC,EAE9B,IAF8B,CAAjC;CAGA,SALD,MAOA;CACC,eAAKA,eAAL;CACA;CACD,OAZD,MAaK,IAAIpF,KAAK,CAACzV,IAAN,KAAelN,QAAQ,CAACI,OAA5B,EACL;CACC,YAAIuiB,KAAK,CAAC+G,OAAV,EACA;CACC,eAAK5B,eAAL,GAAuByB,UAAU,CAAC,YAAM;CACvC,YAAA,MAAI,CAACvB,eAAL;CACA,WAFgC,EAE9B,IAF8B,CAAjC;CAGA,SALD,MAOA;CACC,eAAKA,eAAL;CACA;CACD,OAZI,MAaA,IAAIrF,KAAK,CAACzV,IAAN,KAAelN,QAAQ,CAACN,IAA5B,EACL;CACC,YAAIijB,KAAK,CAAC+G,OAAV,EACA;CACC,eAAK5B,eAAL,GAAuByB,UAAU,CAAC,YAAM;CACvC,YAAA,MAAI,CAAC1B,YAAL;CACA,WAFgC,EAE9B,IAF8B,CAAjC;CAGA,SALD,MAOA;CACC,eAAKA,YAAL;CACA;CACD;CACD,KAjRF;CAkRC8B,IAAAA,sBAlRD,kCAkRwBhH,KAlRxB,EAmRC;CACC,WAAK7J,KAAL,CAAWgB,aAAX,CAAyB8P,gBAAzB,CAA0CjH,KAAK,CAAChF,MAAhD;CACA,KArRF;CAsRCkM,IAAAA,qBAtRD,iCAsRuBlH,KAtRvB,EAuRC;CACC,WAAK7J,KAAL,CAAWgB,aAAX,CAAyBP,eAAzB,CAAyCoJ,KAAK,CAAChF,MAA/C;CACA,KAzRF;CA0RCmM,IAAAA,8BA1RD,0CA0RgCnH,KA1RhC,EA2RC;CACC;CACA,WAAK7J,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBE,UAApC,EAAgD;CAAC7a,QAAAA,IAAI,EAAE6U,KAAK,CAACpa,IAAN,CAAW/E,IAAX,GAAgB;CAAvB,OAAhD;CACA,KA9RF;CA+RCumB,IAAAA,kCA/RD,8CA+RoCpH,KA/RpC,EAgSC;CACC,WAAK7J,KAAL,CAAWgB,aAAX,CAAyBkQ,gBAAzB,CAA0CrH,KAAK,CAACzL,IAAN,CAAWhP,EAArD;CACA,KAlSF;CAmSC+hB,IAAAA,oCAnSD,gDAmSsCtH,KAnStC,EAoSC;CACC,WAAK7J,KAAL,CAAWgB,aAAX,CAAyBoQ,0BAAzB,CAAoDvH,KAApD;CACA,KAtSF;CAuSCwH,IAAAA,6BAvSD,yCAuS+BxH,KAvS/B,EAwSC;CACC,UAAIA,KAAK,CAACzV,IAAN,KAAe,KAAnB,EACA;CACC,aAAK4L,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBE,UAApC,EAAgD;CAAC7a,UAAAA,IAAI,EAAE6U,KAAK,CAACxjB,KAAN,GAAY;CAAnB,SAAhD;CACA,OAHD,MAIK,IAAIwjB,KAAK,CAACzV,IAAN,KAAe,MAAnB,EACL;CACC,aAAK4L,KAAL,CAAWgB,aAAX,CAAyBkB,UAAzB,CAAoC2H,KAAK,CAACxjB,KAA1C;CACA,OAHI,MAKL;CACCob,QAAAA,sBAAM,CAAC9O,IAAP,CAAY,qBAAZ,EAAmCkX,KAAnC;CACA;CACD,KArTF;CAsTCyH,IAAAA,wBAtTD,oCAsT0BzH,KAtT1B,EAuTC;CACCpI,MAAAA,sBAAM,CAAC9O,IAAP,CAAY,eAAZ,EAA6BkX,KAA7B;CACA,KAzTF;CA0TC0H,IAAAA,yBA1TD,qCA0T2B1H,KA1T3B,EA2TC;CACCpI,MAAAA,sBAAM,CAAC9O,IAAP,CAAY,gBAAZ,EAA8BkX,KAA9B;CACA,WAAK7J,KAAL,CAAWgB,aAAX,CAAyBwQ,gBAAzB,CAA0C3H,KAAK,CAAClV,OAAhD;CACA,KA9TF;CA+TC8c,IAAAA,mBA/TD,+BA+TqB5H,KA/TrB,EAgUC;CACC,WAAK7J,KAAL,CAAWgB,aAAX,CAAyBN,WAAzB,CAAqCmJ,KAAK,CAACza,EAA3C;CACA,KAlUF;CAmUCsiB,IAAAA,oBAnUD,gCAmUsB7H,KAnUtB,EAoUC;CACC,WAAK7J,KAAL,CAAWgB,aAAX,CAAyBoC,YAAzB,CAAsCyG,KAAK,CAAClV,OAAN,CAAcvF,EAApD;CACA,KAtUF;CAuUCuiB,IAAAA,0BAvUD,sCAuU4B9H,KAvU5B,EAwUC;CACC,WAAK7J,KAAL,CAAWgB,aAAX,CAAyB2E,YAAzB,CAAsCkE,KAAK,CAAClV,OAAN,CAAcvF,EAApD,EAAwDya,KAAK,CAACnE,QAA9D;CACA,KA1UF;CA2UCkM,IAAAA,aA3UD,yBA2Ue/H,KA3Uf,EA4UC;CACC,UAAI,KAAKzW,MAAL,CAAY5G,MAAZ,CAAmB2B,QAAnB,KAAgCjH,QAAQ,CAACP,IAA7C,EACA;CACC,aAAKinB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,UAAAA,QAAQ,EAAEjH,QAAQ,CAACP;CAApB,SAApC;CACA;CACD,KAjVF;CAkVCkrB,IAAAA,eAlVD,2BAkViBhI,KAlVjB,EAmVC;CACC,UACC,KAAKzW,MAAL,CAAY5G,MAAZ,CAAmBqC,WAAnB,IACG,KAAKuE,MAAL,CAAYtE,MAAZ,CAAmBC,SADtB,IAEG,CAAC,KAAKqE,MAAL,CAAYtE,MAAZ,CAAmBE,YAFvB,IAGG,KAAKoE,MAAL,CAAYtE,MAAZ,CAAmB7E,QAAnB,CAA4BmF,EAH/B,IAIG,KAAKgE,MAAL,CAAYtE,MAAZ,CAAmBK,cAJtB,IAKG,KAAK6Q,KAAL,CAAWC,iBAAX,CAA6B6R,mBAA7B,EANJ,EAQA;CACC,YAAIC,UAAU,GAAG1T,YAAG,CACnB,KAAKjL,MAAL,CAAYtE,MAAZ,CAAmBC,SAAnB,GACE,GADF,GACQ,KAAKsI,WAAL,CAAiBvI,MAAjB,CAAwBkF,MADhC,GAEE,GAFF,GAEQ,KAAKZ,MAAL,CAAY3D,IAAZ,CAAiBL,EAHN,CAApB;CAKA,aAAK4Q,KAAL,CAAWC,iBAAX,CAA6B0B,WAA7B,CACC,CAAC,KAAKvO,MAAL,CAAYtE,MAAZ,CAAmB7E,QAAnB,CAA4BmF,EAA7B,CADD,EAEC,aAFD,EAGC,mBAHD,EAIC;CACC4F,UAAAA,IAAI,EAAE6U,KAAK,CAAC7U,IADb;CAEC+c,UAAAA,UAAU,EAAVA,UAFD;CAGC5iB,UAAAA,cAAc,EAAE,KAAKiE,MAAL,CAAYtE,MAAZ,CAAmBK;CAHpC,SAJD;CAUA;CACD,KA7WF;CA8WCqgB,IAAAA,cA9WD,0BA8WgB3F,KA9WhB,EA+WC;CACCA,MAAAA,KAAK,CAAC4F,KAAN,GAAc5F,KAAK,CAAC4F,KAAN,KAAgB,KAA9B;;CAEA,UAAI,KAAKrc,MAAL,CAAY5G,MAAZ,CAAmB2B,QAAnB,KAAgCjH,QAAQ,CAACC,KAA7C,EACA;CACC,aAAKymB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,UAAAA,QAAQ,EAAEjH,QAAQ,CAACP;CAApB,SAApC;CACA;;CAED,UAAI,CAAC,KAAKyM,MAAL,CAAYtE,MAAZ,CAAmBI,WAApB,IAAmC,KAAKkE,MAAL,CAAY5G,MAAZ,CAAmBmC,UAA1D,EACA;CACC,YAAIkb,KAAK,CAAC7U,IAAV,EACA;CACC,eAAKuV,aAAL,GAAqBV,KAAK,CAAC7U,IAA3B;CACA;;CACD,aAAKqa,gBAAL;CAEA,eAAO,KAAP;CACA;;CAEDxF,MAAAA,KAAK,CAAC7U,IAAN,GAAa6U,KAAK,CAAC7U,IAAN,GAAY6U,KAAK,CAAC7U,IAAlB,GAAwB,KAAKuV,aAA1C;;CACA,UAAI,CAACV,KAAK,CAAC7U,IAAX,EACA;CACC,eAAO,KAAP;CACA;;CAED,WAAKoa,QAAL;CACA,WAAKpP,KAAL,CAAWgB,aAAX,CAAyBkB,UAAzB,CAAoC2H,KAAK,CAAC7U,IAA1C;;CAEA,UAAI6U,KAAK,CAAC4F,KAAV,EACA;CACC,aAAKzP,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBF,KAApC;CACA;;CAED,aAAO,IAAP;CACA,KAjZF;CAkZCuC,IAAAA,gBAlZD,4BAkZkBnI,KAlZlB,EAmZC;CACC,WAAK7J,KAAL,CAAWiB,iBAAX,CAA6BgR,YAA7B;CACA,KArZF;CAsZCC,IAAAA,eAtZD,2BAsZiBrI,KAtZjB,EAuZC;CAAA;;CACC,UACC,KAAKzW,MAAL,CAAY5G,MAAZ,CAAmBQ,SAAnB,IACA,KAAKqK,WAAL,CAAiBhH,MAAjB,CAAwB+D,IAAxB,KAAiCkD,mBAAU,CAACC,MAF7C,EAIA;CACC,aAAKnE,MAAL,CAAY5G,MAAZ,CAAmBQ,SAAnB,GAA+B,KAA/B;CACA;;CACD,UAAIkD,cAAK,CAACG,MAAN,CAAaC,QAAb,EAAJ,EACA;CACC+V,QAAAA,YAAY,CAAC,KAAK8L,4BAAN,CAAZ;CACA,aAAKA,4BAAL,GAAoC1B,UAAU,CAAC,YAAM;CACpD1lB,UAAAA,QAAQ,CAACmM,gBAAT,CAA0B,QAA1B,EAAoC,MAAI,CAACkb,cAAzC;CACA,SAF6C,EAE3C,IAF2C,CAA9C;CAGA;;CACD,WAAKlH,eAAL,GAAuB,IAAvB;CACA,KAvaF;CAwaCmH,IAAAA,cAxaD,0BAwagBxI,KAxahB,EAyaC;CAAA;;CACC,UAAI,CAAC,KAAKzW,MAAL,CAAY5G,MAAZ,CAAmBQ,SAApB,IAAiC,KAAKoG,MAAL,CAAY5G,MAAZ,CAAmBQ,SAAnB,KAAiC,KAAKgT,KAAL,CAAWgB,aAAX,CAAyBhU,SAA/F,EACA;CACC,aAAKoG,MAAL,CAAY5G,MAAZ,CAAmBQ,SAAnB,GAA+B,KAAKgT,KAAL,CAAWgB,aAAX,CAAyBhU,SAAxD;CACA,aAAKslB,SAAL,CAAe,YAAM;CACpB,UAAA,MAAI,CAACtS,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAChW,MAAV,CAAiByjB,cAAlC,EAAkD;CAACC,YAAAA,KAAK,EAAE;CAAR,WAAlD;CACA,SAFD;CAGA;;CACD,UAAItiB,cAAK,CAACG,MAAN,CAAaC,QAAb,EAAJ,EACA;CACC+V,QAAAA,YAAY,CAAC,KAAK8L,4BAAN,CAAZ;CACApnB,QAAAA,QAAQ,CAACghB,mBAAT,CAA6B,QAA7B,EAAuC,KAAKqG,cAA5C;CACA;;CAED,WAAKlH,eAAL,GAAuB,KAAvB;CACA,KAxbF;CAybCuH,IAAAA,mBAzbD,+BAybqB5I,KAzbrB,EA0bC;CACC,UAAI,KAAKsB,YAAT,EACA;CACC;CACA;;CAED1J,MAAAA,sBAAM,CAACyM,GAAP,CAAW,iCAAX;CAEA,WAAK/C,YAAL,GAAoB,IAApB;CAEAtB,MAAAA,KAAK,GAAGA,KAAK,CAAC6I,cAAN,GAAuB7I,KAAK,CAAC6I,cAAN,CAAqB,CAArB,CAAvB,GAAiD7I,KAAzD;CAEA,WAAK8I,4BAAL,GAAoC9I,KAAK,CAAC+I,OAA1C;CACA,WAAKC,4BAAL,GAAoC,KAAKtkB,cAAzC;CAEA,WAAKukB,sBAAL;CAEA,WAAK9S,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBhY,IAApC,EAA0C,IAA1C;CACA,KA5cF;CA6cCob,IAAAA,sBA7cD,kCA6cwBlJ,KA7cxB,EA8cC;CACC,UAAI,CAAC,KAAKsB,YAAV,EACA;CACC;CACA;;CAEDtB,MAAAA,KAAK,GAAGA,KAAK,CAAC6I,cAAN,GAAuB7I,KAAK,CAAC6I,cAAN,CAAqB,CAArB,CAAvB,GAAiD7I,KAAzD;CAEA,WAAKmJ,8BAAL,GAAsCnJ,KAAK,CAAC+I,OAA5C;CAEA,UAAIrkB,cAAc,GAAGiP,IAAI,CAACiP,GAAL,CACpBjP,IAAI,CAACyV,GAAL,CAAS,KAAKJ,4BAAL,GAAoC,KAAKF,4BAAzC,GAAwE,KAAKK,8BAAtF,EAAsH,KAAK3H,qBAA3H,CADoB,EAEnB,KAAKD,qBAFc,CAArB;CAIA3J,MAAAA,sBAAM,CAACyM,GAAP,CAAW,yBAAX,EAAsC,UAAQ3f,cAA9C,EAA8D,WAAS,KAAKA,cAA5E;;CAEA,UAAI,KAAKA,cAAL,KAAwBA,cAA5B,EACA;CACC,aAAKA,cAAL,GAAsBA,cAAtB;CACA;CACD,KAleF;CAmeC2kB,IAAAA,kBAneD,gCAoeC;CACC,UAAI,CAAC,KAAK/H,YAAV,EACA;CACC;CACA;;CAED1J,MAAAA,sBAAM,CAACyM,GAAP,CAAW,+BAAX;CAEA,WAAK/C,YAAL,GAAoB,KAApB;CAEA,WAAKc,yBAAL;CAEA,WAAK2B,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAACvC,QAAAA,cAAc,EAAE,KAAKA;CAAtB,OAApC;CACA,WAAKyR,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAChW,MAAV,CAAiByjB,cAAlC,EAAkD;CAACC,QAAAA,KAAK,EAAE;CAAR,OAAlD;CACA,KAlfF;CAmfCM,IAAAA,sBAnfD,oCAofC;CACC/nB,MAAAA,QAAQ,CAACmM,gBAAT,CAA0B,WAA1B,EAAuC,KAAK6b,sBAA5C;CACAhoB,MAAAA,QAAQ,CAACmM,gBAAT,CAA0B,WAA1B,EAAuC,KAAK6b,sBAA5C;CACAhoB,MAAAA,QAAQ,CAACmM,gBAAT,CAA0B,UAA1B,EAAsC,KAAKgc,kBAA3C;CACAnoB,MAAAA,QAAQ,CAACmM,gBAAT,CAA0B,SAA1B,EAAqC,KAAKgc,kBAA1C;CACAnoB,MAAAA,QAAQ,CAACmM,gBAAT,CAA0B,YAA1B,EAAwC,KAAKgc,kBAA7C;CACA,KA1fF;CA2fCjH,IAAAA,yBA3fD,uCA4fC;CACClhB,MAAAA,QAAQ,CAACghB,mBAAT,CAA6B,WAA7B,EAA0C,KAAKgH,sBAA/C;CACAhoB,MAAAA,QAAQ,CAACghB,mBAAT,CAA6B,WAA7B,EAA0C,KAAKgH,sBAA/C;CACAhoB,MAAAA,QAAQ,CAACghB,mBAAT,CAA6B,UAA7B,EAAyC,KAAKmH,kBAA9C;CACAnoB,MAAAA,QAAQ,CAACghB,mBAAT,CAA6B,SAA7B,EAAwC,KAAKmH,kBAA7C;CACAnoB,MAAAA,QAAQ,CAACghB,mBAAT,CAA6B,YAA7B,EAA2C,KAAKmH,kBAAhD;CACA,KAlgBF;CAmgBCxD,IAAAA,sBAngBD,kCAmgBwB7F,KAngBxB,EAogBC;CACC,UAAI9H,SAAS,GAAG8H,KAAK,IAAIA,KAAK,CAAC9H,SAAf,GAA0B8H,KAAK,CAAC9H,SAAhC,GAA2C,KAAKyI,UAAhE;;CACA,UAAI,CAACzI,SAAL,EACA;CACC,eAAO,KAAP;CACA;;CAED,UAAIA,SAAS,CAAC9D,KAAV,CAAgB,CAAhB,EAAmB+D,IAAnB,GAA0B,KAAK3K,WAAL,CAAiB9D,IAAjB,CAAsB4f,WAApD,EACA;CACC;CACAtM,QAAAA,KAAK,CAAC,KAAKtQ,QAAL,CAAc6c,8BAAd,CAA6CjoB,OAA7C,CAAqD,SAArD,EAAgEqS,IAAI,CAAC6V,KAAL,CAAW,KAAKhc,WAAL,CAAiB9D,IAAjB,CAAsB4f,WAAtB,GAAkC,IAAlC,GAAuC,IAAlD,CAAhE,CAAD,CAAL;CACA,eAAO,KAAP;CACA;;CAED,UAAI,CAAC,KAAK/f,MAAL,CAAYtE,MAAZ,CAAmBI,WAApB,IAAmC,KAAKkE,MAAL,CAAY5G,MAAZ,CAAmBmC,UAA1D,EACA;CACC,aAAK6b,UAAL,GAAkBX,KAAK,CAAC9H,SAAxB;CACA,aAAKsN,gBAAL;CAEA,eAAO,KAAP;CACA;;CAED,WAAKrP,KAAL,CAAWgB,aAAX,CAAyBsS,UAAzB,CAAoCvR,SAApC;CACA,KA3hBF;CA4hBCwR,IAAAA,wBA5hBD,oCA4hB0B1J,KA5hB1B,EA6hBC;CACC,UAAIA,KAAK,CAAC2J,KAAN,KAAgBtsB,QAAQ,CAACC,KAA7B,EACA;CACC,YAAI,KAAKiM,MAAL,CAAY5G,MAAZ,CAAmB2B,QAAnB,KAAgCjH,QAAQ,CAACC,KAA7C,EACA;CACC,eAAKymB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,YAAAA,QAAQ,EAAEjH,QAAQ,CAACP;CAApB,WAApC;CACA,SAHD,MAKA;CACC,eAAKinB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,YAAAA,QAAQ,EAAEjH,QAAQ,CAACC;CAApB,WAApC;CACA;CACD,OAVD,MAYA;CACC,aAAK6Y,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBF,KAApC;CACA;CACD,KA7iBF;CA8iBCgE,IAAAA,mBA9iBD,+BA8iBqB5J,KA9iBrB,EA+iBC;CACC,WAAK7J,KAAL,CAAWgB,aAAX,CAAyB0S,qBAAzB;CACA,KAjjBF;CAkjBCC,IAAAA,mBAljBD,+BAkjBqB9J,KAljBrB,EAmjBC;CACC,WAAK7J,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBE,UAApC,EAAgD;CAAC7a,QAAAA,IAAI,EAAE6U,KAAK,CAAC7U;CAAb,OAAhD;CACA,KArjBF;CAsjBC4e,IAAAA,iBAtjBD,+BAujBC;CACC,WAAK5T,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBF,KAApC;CACA,KAzjBF;CA0jBCoE,IAAAA,iBA1jBD,+BA2jBC;CACC,WAAK7T,KAAL,CAAWgB,aAAX,CAAyBuC,iBAAzB;CACA,KA7jBF;CA8jBCuQ,IAAAA,iBA9jBD,6BA8jBmBjK,KA9jBnB,EA+jBC;CACC,UAAI,KAAKoB,UAAT,EACA;CACC;CACA;;CAED,WAAKA,UAAL,GAAkB,IAAlB;CAEApB,MAAAA,KAAK,GAAGA,KAAK,CAAC6I,cAAN,GAAuB7I,KAAK,CAAC6I,cAAN,CAAqB,CAArB,CAAvB,GAAiD7I,KAAzD;CAEA,WAAKkK,2BAAL,GAAmClK,KAAK,CAAC+I,OAAzC;CACA,WAAKoB,2BAAL,GAAmCnK,KAAK,CAACoK,OAAzC;CACA,WAAKC,0BAAL,GAAkC,KAAKnJ,mBAAvC;CACA,WAAKoJ,yBAAL,GAAiC,KAAKnJ,kBAAtC;CAEA,WAAKoJ,oBAAL;CACA,KA/kBF;CAglBCC,IAAAA,oBAhlBD,gCAglBsBxK,KAhlBtB,EAilBC;CACC,UAAI,CAAC,KAAKoB,UAAV,EACA;CACC;CACA;;CAEDpB,MAAAA,KAAK,GAAGA,KAAK,CAAC6I,cAAN,GAAuB7I,KAAK,CAAC6I,cAAN,CAAqB,CAArB,CAAvB,GAAiD7I,KAAzD;CAEA,WAAKyK,6BAAL,GAAqCzK,KAAK,CAAC+I,OAA3C;CACA,WAAK2B,6BAAL,GAAqC1K,KAAK,CAACoK,OAA3C;CAEA,UAAIzlB,YAAY,GAAG,CAAnB;;CAEA,UAAI,KAAK8d,gBAAT,EACA;CACC9d,QAAAA,YAAY,GAAGgP,IAAI,CAACiP,GAAL,CACdjP,IAAI,CAACyV,GAAL,CAAS,KAAKiB,0BAAL,GAAkC,KAAKH,2BAAvC,GAAqE,KAAKO,6BAAnF,EAAkH,KAAKzJ,qBAAvH,CADc,EAEd,KAAKJ,mBAFS,CAAf;CAIA,OAND,MAQA;CACCjc,QAAAA,YAAY,GAAGgP,IAAI,CAACiP,GAAL,CACdjP,IAAI,CAACyV,GAAL,CAAS,KAAKiB,0BAAL,GAAkC,KAAKH,2BAAvC,GAAqE,KAAKO,6BAAnF,EAAkH,KAAKzJ,qBAAvH,CADc,EAEd,KAAKJ,mBAFS,CAAf;CAIA;;CAED,UAAIhc,WAAW,GAAG,CAAlB;;CACA,UAAI,KAAKme,cAAT,EACA;CACCne,QAAAA,WAAW,GAAG+O,IAAI,CAACiP,GAAL,CACbjP,IAAI,CAACyV,GAAL,CAAS,KAAKkB,yBAAL,GAAiC,KAAKH,2BAAtC,GAAoE,KAAKO,6BAAlF,EAAiH,KAAKzJ,oBAAtH,CADa,EAEb,KAAKJ,kBAFQ,CAAd;CAIA,OAND,MAQA;CACCjc,QAAAA,WAAW,GAAG+O,IAAI,CAACiP,GAAL,CACbjP,IAAI,CAACyV,GAAL,CAAS,KAAKkB,yBAAL,GAAiC,KAAKH,2BAAtC,GAAoE,KAAKO,6BAAlF,EAAiH,KAAKzJ,oBAAtH,CADa,EAEb,KAAKJ,kBAFQ,CAAd;CAIA;;CAED,UAAI,KAAKK,mBAAL,KAA6Bvc,YAAjC,EACA;CACC,aAAKuc,mBAAL,GAA2Bvc,YAA3B;CACA;;CAED,UAAI,KAAKwc,kBAAL,KAA4Bvc,WAAhC,EACA;CACC,aAAKuc,kBAAL,GAA0Bvc,WAA1B;CACA;CACD,KAtoBF;CAuoBC+lB,IAAAA,gBAvoBD,8BAwoBC;CACC,UAAI,CAAC,KAAKvJ,UAAV,EACA;CACC;CACA;;CAED,WAAKA,UAAL,GAAkB,KAAlB;CAEA,WAAKwJ,uBAAL;CAEA,WAAK7G,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAACtC,QAAAA,YAAY,EAAE,KAAKuc,mBAApB;CAAyCtc,QAAAA,WAAW,EAAE,KAAKuc;CAA3D,OAApC;CACA,KAnpBF;CAopBCoJ,IAAAA,oBAppBD,kCAqpBC;CACCrpB,MAAAA,QAAQ,CAACmM,gBAAT,CAA0B,WAA1B,EAAuC,KAAKmd,oBAA5C;CACAtpB,MAAAA,QAAQ,CAACmM,gBAAT,CAA0B,SAA1B,EAAqC,KAAKsd,gBAA1C;CACAzpB,MAAAA,QAAQ,CAACmM,gBAAT,CAA0B,YAA1B,EAAwC,KAAKsd,gBAA7C;CACA,KAzpBF;CA0pBCC,IAAAA,uBA1pBD,qCA2pBC;CACC1pB,MAAAA,QAAQ,CAACghB,mBAAT,CAA6B,WAA7B,EAA0C,KAAKsI,oBAA/C;CACAtpB,MAAAA,QAAQ,CAACghB,mBAAT,CAA6B,SAA7B,EAAwC,KAAKyI,gBAA7C;CACAzpB,MAAAA,QAAQ,CAACghB,mBAAT,CAA6B,YAA7B,EAA2C,KAAKyI,gBAAhD;CACA,KA/pBF;CAgqBChJ,IAAAA,eAhqBD,2BAgqBiB3B,KAhqBjB,EAiqBC;CACC,UAAIA,KAAK,CAAC6K,OAAN,KAAkB,EAAtB,EACA;CACC,YAAI,KAAKthB,MAAL,CAAY5G,MAAZ,CAAmB2B,QAAnB,KAAgCjH,QAAQ,CAACP,IAA7C,EACA;CACC,eAAKinB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,YAAAA,QAAQ,EAAEjH,QAAQ,CAACP;CAApB,WAApC;CACA,SAHD,MAIK,IAAI,KAAKyM,MAAL,CAAY5G,MAAZ,CAAmBkC,WAAvB,EACL;CACC,eAAKkhB,oBAAL;CACA,SAHI,MAKL;CACC,eAAKzlB,KAAL;CACA;;CAED0f,QAAAA,KAAK,CAAC8K,cAAN;CACA9K,QAAAA,KAAK,CAAC+K,eAAN;CAEA,aAAK5U,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBF,KAApC;CACA;CACD,KAtrBF;CAurBC2C,IAAAA,cAvrBD,0BAurBgBvI,KAvrBhB,EAwrBC;CAAA;;CACCxD,MAAAA,YAAY,CAAC,KAAKwO,qBAAN,CAAZ;CACA,WAAKA,qBAAL,GAA6BpE,UAAU,CAAC,YAAM;CAC7C,QAAA,MAAI,CAACzQ,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAC6K,QAAV,CAAmBhY,IAApC,EAA0C,IAA1C;CACA,OAFsC,EAEpC,EAFoC,CAAvC;CAGA;CA7rBF,GApQD;CAm8BCV,EAAAA,QAAQ;CAn8BT,CADA;;CCrBA;;;;;;;;AASA,AAGA6J,WAAG,CAACsJ,SAAJ,CAAc,wBAAd,EACA;CACC8B,EAAAA,QAAQ;CAEP3V,IAAAA,QAFO,sBAGP;CACC,aAAQ9P,MAAM,CAACC,MAAP,CAAc;CACrBouB,QAAAA,uBAAuB,EAAE,KAAK9U,KAAL,CAAWmB,eAAX,CAA2B2T,uBAD/B;CAErBC,QAAAA,sBAAsB,EAAE,KAAK/U,KAAL,CAAWmB,eAAX,CAA2B4T;CAF9B,OAAd,CAAR;CAIA;CARM,KASJhH,gBAAI,CAACC,QAAL,CAAc;CAChB3W,IAAAA,WAAW,EAAE,qBAAArH,KAAK;CAAA,aAAIA,KAAK,CAACqH,WAAV;CAAA;CADF,GAAd,CATI,CADT;CAcCJ,EAAAA,QAAQ;CAdT,CADA;;CCZA;;;;;;;;AASA,AAKA6J,WAAG,CAACsJ,SAAJ,CAAc,kBAAd,EACA;CACC;;;;;CAKAjX,EAAAA,KAAK,EACL;CACC6hB,IAAAA,gBAAgB,EAAE;CAAE7b,MAAAA,OAAO,EAAE;CAAX;CADnB,GAPD;CAUCgV,EAAAA,OAAO,EACP;CACChkB,IAAAA,KADD,iBACO0f,KADP,EAEC;CACC,WAAK3J,KAAL,CAAW,OAAX;CACA,KAJF;CAKCtZ,IAAAA,IALD,gBAKMijB,KALN,EAMC;CACC,WAAK3J,KAAL,CAAW,MAAX;CACA,KARF;CASC3Y,IAAAA,OATD,mBASSsiB,KATT,EAUC;CACC,WAAK3J,KAAL,CAAW,SAAX;CACA;CAZF,GAXD;CAyBCgM,EAAAA,QAAQ;CAEP1lB,IAAAA,QAAQ,EAAE;CAAA,aAAMA,QAAN;CAAA,KAFH;CAIPyuB,IAAAA,qBAJO,iCAIejlB,KAJf,EAKP;CACC,aAAOA,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBU,MAApB,CAA2BC,eAA3B,GAA4C,uBAAqB6C,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBU,MAApB,CAA2BC,eAAhD,GAAgE,aAA5G,GAA2H,EAAlI;CACA,KAPM;CAQP+nB,IAAAA,2BARO,uCAQqBllB,KARrB,EASP;CACC,aAAOA,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBU,MAApB,CAA2BC,eAA3B,GAA4C,mBAAiB6C,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBU,MAApB,CAA2BC,eAA5C,GAA4D,aAAxG,GAAuH,EAA9H;CACA,KAXM;CAYPgoB,IAAAA,QAZO,oBAYEnlB,KAZF,EAaP;CACC,aAAOA,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoB7E,QAApB,CAA6BoF,SAA7B,IAA0CW,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoB7E,QAApB,CAA6BqF,QAA9E;CACA,KAfM;CAgBP8lB,IAAAA,UAhBO,sBAgBIplB,KAhBJ,EAiBP;CACC,UACC,CAACA,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBa,IAApB,CAAyBE,YAA1B,IACGyC,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoBG,aAApB,GAAoCtF,aAAa,CAACO,UAFtD,EAIA;CACC,eAAO,KAAP;CACA;;CAED,UAAI,CAAC8F,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoBE,YAArB,IAAqCgB,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoBE,YAApB,IAAoCgB,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoBnG,QAApB,KAAiCnC,QAAQ,CAACG,IAAvH,EACA;CACC,eAAO,IAAP;CACA;;CAED,UAAIqJ,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoBE,YAApB,IAAoCgB,KAAK,CAACoD,MAAN,CAAatE,MAAb,CAAoBnG,QAApB,KAAiCnC,QAAQ,CAACG,IAAlF,EACA;CACC,eAAO,IAAP;CACA;;CAED,aAAO,KAAP;CACA,KArCM;CAsCP0uB,IAAAA,SAtCO,qBAsCGrlB,KAtCH,EAuCP;CACC,aAAOA,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBmB,YAApB,CAAiCI,eAAjC,IACHiC,KAAK,CAACoD,MAAN,CAAa5G,MAAb,CAAoBE,UADjB,IAEH,KAAK6J,QAAL,CAAc+e,iBAFlB;CAGA,KA3CM;CA4CP/e,IAAAA,QA5CO,sBA6CP;CACC,aAAOuK,UAAG,CAAC+L,kBAAJ,CAAuB,cAAvB,EAAuC,KAAK7M,KAAL,CAAWmB,eAAlD,CAAP;CACA;CA/CM,KAgDJ4M,gBAAI,CAACC,QAAL,CAAc;CAChB5a,IAAAA,MAAM,EAAE,gBAAApD,KAAK;CAAA,aAAIA,KAAK,CAACoD,MAAV;CAAA,KADG;CAEhBiE,IAAAA,WAAW,EAAE,qBAAArH,KAAK;CAAA,aAAIA,KAAK,CAACqH,WAAV;CAAA;CAFF,GAAd,CAhDI,CAzBT;CA8EC4W,EAAAA,KAAK,EACL;CACCkH,IAAAA,QADD,oBACU9uB,KADV,EAEC;CAAA;;CACC,UAAIA,KAAJ,EACA;CACCoqB,QAAAA,UAAU,CAAC,YAAM;CAChB,UAAA,KAAI,CAACzQ,KAAL,CAAWE,KAAX,CAAiB4E,kBAAS,CAAChW,MAAV,CAAiByjB,cAAlC;CACA,SAFS,EAEP,GAFO,CAAV;CAGA;CACD;CATF,GA/ED;CA0FCtb,EAAAA,QAAQ;CA1FT,CADA;;CCdA;;;;;;;;AASA,AAEA6J,WAAG,CAACsJ,SAAJ,CAAc,0BAAd,EACA;CACC8B,EAAAA,QAAQ,EACR;CACC3V,IAAAA,QADD,sBAEC;CACC,aAAQ9P,MAAM,CAACC,MAAP,CAAc;CACrB6uB,QAAAA,mBAAmB,EAAE,KAAKvV,KAAL,CAAWmB,eAAX,CAA2BoU;CAD3B,OAAd,CAAR;CAGA;CANF,GAFD;CAUCte,EAAAA,QAAQ;CAVT,CADA;;CCXA;;;;;;;;AASA,AAGA6J,WAAG,CAACsJ,SAAJ,CAAc,4BAAd,EACA;CACC8B,EAAAA,QAAQ;CAEP3V,IAAAA,QAFO,sBAGP;CACC,aAAOuK,UAAG,CAAC+L,kBAAJ,CAAuB,cAAvB,EAAuC,KAAK7M,KAAL,CAAWmB,eAAlD,CAAP;CACA;CALM,KAMJ4M,gBAAI,CAACC,QAAL,CAAc;CAChB5a,IAAAA,MAAM,EAAE,gBAAApD,KAAK;CAAA,aAAIA,KAAK,CAACoD,MAAV;CAAA;CADG,GAAd,CANI,CADT;CAWC6D,EAAAA,QAAQ;CAXT,CADA;;CCZA;;;;;;;;AASA,AAEA6J,WAAG,CAACsJ,SAAJ,CAAc,uCAAd,EACA;CACC8B,EAAAA,QAAQ,EACR;CACC3V,IAAAA,QADD,sBAEC;CACC,aAAQ9P,MAAM,CAACC,MAAP,CAAc;CACrB8uB,QAAAA,yBAAyB,EAAE,KAAKxV,KAAL,CAAWmB,eAAX,CAA2BqU;CADjC,OAAd,CAAR;CAGA;CANF,GAFD;CAUCve,EAAAA,QAAQ;CAVT,CADA;;CCXA;;;;;;;;AASA,AAGA6J,WAAG,CAACsJ,SAAJ,CAAc,0BAAd,EACA;CACC;;;;CAIA8B,EAAAA,QAAQ;CAEP3V,IAAAA,QAFO,sBAGP;CACC,aAAOuK,UAAG,CAAC+L,kBAAJ,CAAuB,cAAvB,EAAuC,KAAK7M,KAAL,CAAWmB,eAAlD,CAAP;CACA;CALM,KAMJ4M,gBAAI,CAACC,QAAL,CAAc;CAChB5a,IAAAA,MAAM,EAAE,gBAAApD,KAAK;CAAA,aAAIA,KAAK,CAACoD,MAAV;CAAA;CADG,GAAd,CANI,CALT;CAeC+a,EAAAA,OAAO,EACP;CACCsH,IAAAA,KADD,iBACO5L,KADP,EAEC;CACC,WAAK3J,KAAL,CAAW,OAAX,EAAoB;CAAC2J,QAAAA,KAAK,EAALA;CAAD,OAApB;CACA,KAJF;CAKC6L,IAAAA,QALD,oBAKU7L,KALV,EAMC;CACC,WAAK3J,KAAL,CAAW,UAAX,EAAuB;CAAC2J,QAAAA,KAAK,EAALA;CAAD,OAAvB;CACA,KARF;CASC8L,IAAAA,MATD,kBASQ9S,OATR,EASiB+S,IATjB,EAUC;CACC/S,MAAAA,OAAO,CAACyN,SAAR,CAAkBC,GAAlB,CAAsB,iCAAtB;CACAqF,MAAAA,IAAI;CACJ,KAbF;CAcCC,IAAAA,MAdD,kBAcQhT,OAdR,EAciB+S,IAdjB,EAeC;CACC/S,MAAAA,OAAO,CAACyN,SAAR,CAAkBI,MAAlB,CAAyB,iCAAzB;CACA7N,MAAAA,OAAO,CAACyN,SAAR,CAAkBC,GAAlB,CAAsB,kCAAtB;CACAE,MAAAA,UAAU,CAAC,YAAW;CACrBmF,QAAAA,IAAI;CACJ,OAFS,EAEP,GAFO,CAAV;CAGA,KArBF;CAsBCE,IAAAA,SAtBD,qBAsBWjM,KAtBX,EAuBC;CACC,UAAIA,KAAK,CAAC6K,OAAN,IAAiB,CAArB,EACA;CACC,YAAI7K,KAAK,CAACkM,MAAN,KAAiB,KAAKzH,KAAL,CAAW0H,MAAhC,EACA;CACC,cAAInM,KAAK,CAACoM,QAAV,EACA;CACC,iBAAK3H,KAAL,CAAW4H,MAAX,CAAkBzG,KAAlB;CACA,WAHD,MAKA;CACC,iBAAKnB,KAAL,CAAW6H,OAAX,CAAmB1G,KAAnB;CACA;CACD,SAVD,MAWK,IAAI5F,KAAK,CAACkM,MAAN,KAAiB,KAAKzH,KAAL,CAAW6H,OAAhC,EACL;CACC,cAAItM,KAAK,CAACoM,QAAV,EACA;CACC,iBAAK3H,KAAL,CAAW0H,MAAX,CAAkBvG,KAAlB;CACA,WAHD,MAKA;CACC,iBAAKnB,KAAL,CAAW4H,MAAX,CAAkBzG,KAAlB;CACA;CACD,SAVI,MAWA,IAAI5F,KAAK,CAACkM,MAAN,KAAiB,KAAKzH,KAAL,CAAW4H,MAAhC,EACL;CACC,cAAIrM,KAAK,CAACoM,QAAV,EACA;CACC,iBAAK3H,KAAL,CAAW6H,OAAX,CAAmB1G,KAAnB;CACA,WAHD,MAKA;CACC,iBAAKnB,KAAL,CAAW0H,MAAX,CAAkBvG,KAAlB;CACA;CACD;;CACD5F,QAAAA,KAAK,CAAC8K,cAAN;CACA,OApCD,MAqCK,IAAI9K,KAAK,CAAC6K,OAAN,IAAiB,EAAjB,IAAuB7K,KAAK,CAAC6K,OAAN,IAAiB,EAA5C,EACL;CACC,YAAI7K,KAAK,CAACkM,MAAN,CAAaK,kBAAjB,EACA;CACCvM,UAAAA,KAAK,CAACkM,MAAN,CAAaK,kBAAb,CAAgC3G,KAAhC;CACA,SAHD,MAIK,IAAI5F,KAAK,CAACkM,MAAN,CAAaM,sBAAjB,EACL;CACCxM,UAAAA,KAAK,CAACkM,MAAN,CAAaM,sBAAb,CAAoC5G,KAApC;CACA;;CACD5F,QAAAA,KAAK,CAAC8K,cAAN;CACA;CACD;CAzEF,GAhBD;CA2FC2B,EAAAA,UAAU,EACV;CACC7G,IAAAA,KAAK,EACL;CACC8G,MAAAA,QADD,oBACU1T,OADV,EACmB5R,MADnB,EAEC;CACC4R,QAAAA,OAAO,CAAC4M,KAAR;CACA;CAJF;CAFD,GA5FD;CAqGCxY,EAAAA,QAAQ;CArGT,CADA;;CCZA;;;;;;;;AASA,AAQA6J,WAAG,CAACsJ,SAAJ,CAAc,0BAAd,EACA;CACC/W,EAAAA,IADD,kBAEC;CACC,WAAO;CACNmjB,MAAAA,UAAU,EAAE;CADN,KAAP;CAGA,GANF;CAOCvI,EAAAA,KAAK,EACL;CACCuI,IAAAA,UADD,sBACYnwB,KADZ,EAEC;CACCggB,MAAAA,YAAY,CAAC,KAAKoQ,iBAAN,CAAZ;CACA,WAAKA,iBAAL,GAAyBhG,UAAU,CAAC,KAAKiG,eAAN,EAAuB,GAAvB,CAAnC;CACA;CALF,GARD;CAeCxK,EAAAA,QAAQ;CAEP3V,IAAAA,QAFO,sBAGP;CACC,aAAOuK,UAAG,CAAC+L,kBAAJ,CAAuB,cAAvB,EAAuC,KAAK7M,KAAL,CAAWmB,eAAlD,CAAP;CACA;CALM,KAMJ4M,gBAAI,CAACC,QAAL,CAAc;CAChB5a,IAAAA,MAAM,EAAE,gBAAApD,KAAK;CAAA,aAAIA,KAAK,CAACoD,MAAV;CAAA;CADG,GAAd,CANI,CAfT;CAyBCkY,EAAAA,OAzBD,qBA0BC;CACC,SAAKkL,UAAL,GAAkB,KAAK,KAAKpjB,MAAL,CAAY3D,IAAZ,CAAiBE,KAAxC;CACA,GA5BF;CA6BCwe,EAAAA,OAAO,EACP;CACCwI,IAAAA,UADD,wBAEC;CACC,UAAI,CAACzmB,cAAK,CAACwO,QAAN,CAAepO,QAAf,EAAL,EACA;CACC,aAAKge,KAAL,CAAWsI,UAAX,CAAsBnH,KAAtB;CACA;CACD,KAPF;CAQCoH,IAAAA,QARD,sBASC;CACC,UAAIlnB,KAAK,GAAG,KAAK+mB,eAAL,KAAwB,KAAKF,UAA7B,GAAyC,EAArD;;CACA,UAAI7mB,KAAJ,EACA;CACC,aAAKqQ,KAAL,CAAWgB,aAAX,CAAyB6V,QAAzB,CAAkC3vB,QAAQ,CAACK,OAA3C,EAAoD;CAACoI,UAAAA,KAAK,EAALA;CAAD,SAApD;CACA;;CAED,WAAKyf,QAAL;CACA,KAjBF;CAkBCA,IAAAA,QAlBD,oBAkBUvF,KAlBV,EAmBC;CACCxD,MAAAA,YAAY,CAAC,KAAKoQ,iBAAN,CAAZ;CACA,WAAKK,OAAL,CAAa1H,QAAb;CACA,KAtBF;CAuBC2H,IAAAA,iBAvBD,6BAuBmBlN,KAvBnB,EAwBC;CACC,WAAKgN,QAAL;CACAhN,MAAAA,KAAK,CAAC8K,cAAN;CACA,KA3BF;CA4BC+B,IAAAA,eA5BD,6BA6BC;CACC,UAAI,KAAKF,UAAL,CAAgBvrB,KAAhB,CAAsB,2BAAtB,CAAJ,EACA;CACC,YAAI,KAAKqjB,KAAL,CAAW3e,KAAf,EACA;CACC,eAAK2e,KAAL,CAAW3e,KAAX,CAAiB2gB,SAAjB,CAA2BI,MAA3B,CAAkC,eAAlC;CACA;;CACD,eAAO,IAAP;CACA,OAPD,MASA;CACC,YAAI3lB,QAAQ,CAAC2M,aAAT,KAA2B,KAAK4W,KAAL,CAAWsI,UAA1C,EACA;CACC,cAAI,KAAKtI,KAAL,CAAW3e,KAAf,EACA;CACC,iBAAK2e,KAAL,CAAW3e,KAAX,CAAiB2gB,SAAjB,CAA2BC,GAA3B,CAA+B,eAA/B;CACA;CACD;;CACD,eAAO,KAAP;CACA;CACD;CAjDF,GA9BD;CAiFCtZ,EAAAA,QAAQ;CAjFT,CADA;;CCjBA;;;;;;;;AASA,AAOA6J,WAAG,CAACkW,cAAJ,CAAmB,0BAAnB,EAA+C,0BAA/C,EACA;CACC7I,EAAAA,OAAO,EACP;CACCwI,IAAAA,UADD,wBAEC;CACC,UAAI,CAACzmB,cAAK,CAACwO,QAAN,CAAepO,QAAf,EAAL,EACA;CACC,aAAKge,KAAL,CAAWsI,UAAX,CAAsBnH,KAAtB;CACA;CACD,KAPF;CAQCoH,IAAAA,QARD,sBASC;CACC,UAAInsB,IAAI,GAAG,KAAKusB,SAAhB;CACA,UAAItnB,KAAK,GAAG,KAAK+mB,eAAL,KAAwB,KAAKF,UAA7B,GAAyC,EAArD;CACA,UAAI5mB,KAAK,GAAG,KAAKsnB,eAAL,KAAwB,KAAKC,UAA7B,GAAyC,EAArD;;CAEA,UAAIzsB,IAAI,IAAIiF,KAAR,IAAiBC,KAArB,EACA;CACC,aAAKoQ,KAAL,CAAWgB,aAAX,CAAyB6V,QAAzB,CAAkC3vB,QAAQ,CAACI,OAA3C,EAAoD;CAACoD,UAAAA,IAAI,EAAJA,IAAD;CAAOiF,UAAAA,KAAK,EAALA,KAAP;CAAcC,UAAAA,KAAK,EAALA;CAAd,SAApD;CACA;;CAED,WAAKwf,QAAL;CACA,KApBF;CAqBC2H,IAAAA,iBArBD,6BAqBmBlN,KArBnB,EAsBC;CACC,UAAIA,KAAK,CAACkM,MAAN,KAAiB,KAAKzH,KAAL,CAAWsI,UAAhC,EACA;CACC,aAAKQ,YAAL;CACA,aAAK9I,KAAL,CAAW+I,UAAX,CAAsB5H,KAAtB;CACA,OAJD,MAKK,IAAI5F,KAAK,CAACkM,MAAN,KAAiB,KAAKzH,KAAL,CAAW+I,UAAhC,EACL;CACC,aAAK/I,KAAL,CAAWgJ,SAAX,CAAqB7H,KAArB;CACA,OAHI,MAKL;CACC,aAAKoH,QAAL;CACA;;CAEDhN,MAAAA,KAAK,CAAC8K,cAAN;CACA;CAtCF,GAFD;CA0CC1G,EAAAA,KAAK,EACL;CACCgJ,IAAAA,SADD,uBAEC;CACC5Q,MAAAA,YAAY,CAAC,KAAKkR,gBAAN,CAAZ;CACA,WAAKA,gBAAL,GAAwB9G,UAAU,CAAC,KAAK+G,cAAN,EAAsB,GAAtB,CAAlC;CACA,KALF;CAMChB,IAAAA,UAND,wBAOC;CACCnQ,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;CACA,WAAKA,eAAL,GAAuByB,UAAU,CAAC,KAAK2G,YAAN,EAAoB,IAApB,CAAjC;CAEA/Q,MAAAA,YAAY,CAAC,KAAKoQ,iBAAN,CAAZ;CACA,WAAKA,iBAAL,GAAyBhG,UAAU,CAAC,KAAKiG,eAAN,EAAuB,GAAvB,CAAnC;CACA;CAbF,GA3CD;CA0DCzf,EAAAA,QAAQ;CA1DT,CADA;;CChBA;;;;;;;;AASA,AAIA6J,WAAG,CAACsJ,SAAJ,CAAc,uBAAd,EACA;CACC8B,EAAAA,QAAQ;CAEP1lB,IAAAA,QAAQ,EAAE;CAAA,aAAMA,QAAN;CAAA,KAFH;CAIP+P,IAAAA,QAJO,sBAKP;CACC,aAAOuK,UAAG,CAAC+L,kBAAJ,CAAuB,cAAvB,EAAuC,KAAK7M,KAAL,CAAWmB,eAAlD,CAAP;CACA;CAPM,KAQJ4M,gBAAI,CAACC,QAAL,CAAc;CAChB5a,IAAAA,MAAM,EAAE,gBAAApD,KAAK;CAAA,aAAIA,KAAK,CAACoD,MAAV;CAAA;CADG,GAAd,CARI,CADT;CAaC+a,EAAAA,OAAO,EAAE;CACRxlB,IAAAA,QADQ,oBACC0E,IADD,EAER;CACC,WAAKugB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAAC3C,QAAAA,QAAQ,EAAEjH,QAAQ,CAACP;CAApB,OAApC;CACA,WAAKinB,MAAL,CAAY9c,MAAZ,CAAmB,eAAnB,EAAoC;CAACnI,QAAAA,QAAQ,EAAE0E;CAAX,OAApC;CAEA,WAAK2S,KAAL,CAAWgB,aAAX,CAAyByW,cAAzB,CAAwCpqB,IAAxC;CACA,KAPO;CAQR+hB,IAAAA,QARQ,oBAQCvF,KARD,EASR;CACC,WAAKiN,OAAL,CAAa1H,QAAb;CACA;CAXO,GAbV;CA0BCnY,EAAAA,QAAQ;CA1BT,CADA;;CCbA;;;;;;;;AASA,AAQA6J,WAAG,CAACsJ,SAAJ,CAAc,0BAAd,EACA;CACC/W,EAAAA,IADD,kBAEC;CACC,WAAO;CACN4jB,MAAAA,SAAS,EAAE,EADL;CAENT,MAAAA,UAAU,EAAE,EAFN;CAGNW,MAAAA,UAAU,EAAE,EAHN;CAINO,MAAAA,UAAU,EAAExnB,cAAK,CAACwO,QAAN,CAAepO,QAAf;CAJN,KAAP;CAMA,GATF;CAUC2d,EAAAA,KAAK,EACL;CACCgJ,IAAAA,SADD,uBAEC;CACC5Q,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;CACA,WAAKA,eAAL,GAAuByB,UAAU,CAAC,KAAK2G,YAAN,EAAoB,IAApB,CAAjC;CAEA/Q,MAAAA,YAAY,CAAC,KAAKkR,gBAAN,CAAZ;CACA,WAAKA,gBAAL,GAAwB9G,UAAU,CAAC,KAAK+G,cAAN,EAAsB,GAAtB,CAAlC;CACA,KARF;CASChB,IAAAA,UATD,sBASYnwB,KATZ,EAUC;CACCggB,MAAAA,YAAY,CAAC,KAAKoQ,iBAAN,CAAZ;CACA,WAAKA,iBAAL,GAAyBhG,UAAU,CAAC,KAAKiG,eAAN,EAAuB,GAAvB,CAAnC;CACA,KAbF;CAcCS,IAAAA,UAdD,sBAcY9wB,KAdZ,EAeC;CACCggB,MAAAA,YAAY,CAAC,KAAKsR,iBAAN,CAAZ;CACA,WAAKA,iBAAL,GAAyBlH,UAAU,CAAC,KAAKyG,eAAN,EAAuB,GAAvB,CAAnC;CACA;CAlBF,GAXD;CA+BChL,EAAAA,QAAQ;CAEP3V,IAAAA,QAFO,sBAGP;CACC,aAAOuK,UAAG,CAAC+L,kBAAJ,CAAuB,cAAvB,EAAuC,KAAK7M,KAAL,CAAWmB,eAAlD,CAAP;CACA;CALM,KAMJ4M,gBAAI,CAACC,QAAL,CAAc;CAChB5a,IAAAA,MAAM,EAAE,gBAAApD,KAAK;CAAA,aAAIA,KAAK,CAACoD,MAAV;CAAA;CADG,GAAd,CANI,CA/BT;CAyCCkY,EAAAA,OAzCD,qBA0CC;CACC,SAAK2L,SAAL,GAAiB,KAAK,KAAK7jB,MAAL,CAAY3D,IAAZ,CAAiB/E,IAAvC;CACA,SAAK8rB,UAAL,GAAkB,KAAK,KAAKpjB,MAAL,CAAY3D,IAAZ,CAAiBE,KAAxC;CACA,SAAKwnB,UAAL,GAAkB,KAAK,KAAK/jB,MAAL,CAAY3D,IAAZ,CAAiBG,KAAxC;CACA,GA9CF;CA+CCue,EAAAA,OAAO,EACP;CACCwI,IAAAA,UADD,wBAEC;CACC,UAAI,CAACzmB,cAAK,CAACwO,QAAN,CAAepO,QAAf,EAAL,EACA;CACC,aAAKge,KAAL,CAAWgJ,SAAX,CAAqB7H,KAArB;CACA;CACD,KAPF;CAQC2H,IAAAA,YARD,0BASC;CACC/Q,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;CACA,WAAK0I,UAAL,GAAkB,IAAlB;CACA,KAZF;CAaCb,IAAAA,QAbD,sBAcC;CACC,UAAInsB,IAAI,GAAG,KAAKusB,SAAhB;CACA,UAAItnB,KAAK,GAAG,KAAK+mB,eAAL,KAAwB,KAAKF,UAA7B,GAAyC,EAArD;CACA,UAAI5mB,KAAK,GAAG,KAAKsnB,eAAL,KAAwB,KAAKC,UAA7B,GAAyC,EAArD;;CAEA,UAAIzsB,IAAI,IAAIiF,KAAR,IAAiBC,KAArB,EACA;CACC,aAAKoQ,KAAL,CAAWgB,aAAX,CAAyB6V,QAAzB,CAAkC3vB,QAAQ,CAACG,OAA3C,EAAoD;CAACqD,UAAAA,IAAI,EAAJA,IAAD;CAAOiF,UAAAA,KAAK,EAALA,KAAP;CAAcC,UAAAA,KAAK,EAALA;CAAd,SAApD;CACA;;CAED,WAAKwf,QAAL;CACA,KAzBF;CA0BCA,IAAAA,QA1BD,oBA0BUvF,KA1BV,EA2BC;CACCxD,MAAAA,YAAY,CAAC,KAAK2I,eAAN,CAAZ;CACA3I,MAAAA,YAAY,CAAC,KAAKkR,gBAAN,CAAZ;CACAlR,MAAAA,YAAY,CAAC,KAAKoQ,iBAAN,CAAZ;CACApQ,MAAAA,YAAY,CAAC,KAAKsR,iBAAN,CAAZ;CAEA,WAAKb,OAAL,CAAa1H,QAAb;CACA,KAlCF;CAmCC2H,IAAAA,iBAnCD,6BAmCmBlN,KAnCnB,EAoCC;CACC,UAAIA,KAAK,CAACkM,MAAN,KAAiB,KAAKzH,KAAL,CAAWgJ,SAAhC,EACA;CACC,aAAKF,YAAL;CACA,aAAK9I,KAAL,CAAWsI,UAAX,CAAsBnH,KAAtB;CACA,OAJD,MAKK,IAAI5F,KAAK,CAACkM,MAAN,KAAiB,KAAKzH,KAAL,CAAWsI,UAAhC,EACL;CACC,aAAKtI,KAAL,CAAW+I,UAAX,CAAsB5H,KAAtB;CACA,OAHI,MAKL;CACC,aAAKoH,QAAL;CACA;;CAEDhN,MAAAA,KAAK,CAAC8K,cAAN;CACA,KApDF;CAqDC6C,IAAAA,cArDD,4BAsDC;CACC,UAAI,KAAKP,SAAL,CAAeziB,MAAf,GAAwB,CAA5B,EACA;CACC,YAAI,KAAK8Z,KAAL,CAAW5jB,IAAf,EACA;CACC,eAAK4jB,KAAL,CAAW5jB,IAAX,CAAgB4lB,SAAhB,CAA0BI,MAA1B,CAAiC,eAAjC;CACA;;CACD,eAAO,IAAP;CACA,OAPD,MASA;CACC,YAAI3lB,QAAQ,CAAC2M,aAAT,KAA2B,KAAK4W,KAAL,CAAWgJ,SAA1C,EACA;CACC,cAAI,KAAKhJ,KAAL,CAAW5jB,IAAf,EACA;CACC,iBAAK4jB,KAAL,CAAW5jB,IAAX,CAAgB4lB,SAAhB,CAA0BC,GAA1B,CAA8B,eAA9B;CACA;CACD;;CACD,eAAO,KAAP;CACA;CACD,KA1EF;CA2ECmG,IAAAA,eA3ED,6BA4EC;CACC,UAAI,KAAKF,UAAL,CAAgBvrB,KAAhB,CAAsB,2BAAtB,CAAJ,EACA;CACC,YAAI,KAAKqjB,KAAL,CAAW3e,KAAf,EACA;CACC,eAAK2e,KAAL,CAAW3e,KAAX,CAAiB2gB,SAAjB,CAA2BI,MAA3B,CAAkC,eAAlC;CACA;;CACD,eAAO,IAAP;CACA,OAPD,MASA;CACC,YAAI3lB,QAAQ,CAAC2M,aAAT,KAA2B,KAAK4W,KAAL,CAAWsI,UAA1C,EACA;CACC,cAAI,KAAKtI,KAAL,CAAW3e,KAAf,EACA;CACC,iBAAK2e,KAAL,CAAW3e,KAAX,CAAiB2gB,SAAjB,CAA2BC,GAA3B,CAA+B,eAA/B;CACA;CACD;;CACD,eAAO,KAAP;CACA;CACD,KAhGF;CAiGC2G,IAAAA,eAjGD,6BAkGC;CACC,UAAI,KAAKC,UAAL,CAAgBlsB,KAAhB,CAAsB,sDAAtB,CAAJ,EACA;CACC,YAAI,KAAKqjB,KAAL,CAAW1e,KAAf,EACA;CACC,eAAK0e,KAAL,CAAW1e,KAAX,CAAiB0gB,SAAjB,CAA2BI,MAA3B,CAAkC,eAAlC;CACA;;CACD,eAAO,IAAP;CACA,OAPD,MASA;CACC,YAAI3lB,QAAQ,CAAC2M,aAAT,KAA2B,KAAK4W,KAAL,CAAW+I,UAA1C,EACA;CACC,cAAI,KAAK/I,KAAL,CAAW1e,KAAf,EACA;CACC,iBAAK0e,KAAL,CAAW1e,KAAX,CAAiB0gB,SAAjB,CAA2BC,GAA3B,CAA+B,eAA/B;CACA;CACD;;CACD,eAAO,KAAP;CACA;CACD;CAtHF,GAhDD;CAwKCtZ,EAAAA,QAAQ;CAxKT,CADA;;CCjBA;;;;;;;;AASA,AAEA6J,WAAG,CAACkW,cAAJ,CAAmB,oBAAnB,EAAyC,WAAzC,EACA;CACC7I,EAAAA,OAAO,EACP;CACCiB,IAAAA,QADD,oBACUvF,KADV,EAEC;CACC,WAAKiN,OAAL,CAAa1H,QAAb;CACA;CAJF,GAFD;CAQCnY,EAAAA,QAAQ;CART,CADA;;CCXA;;;;;;;;AASA,AAGA6J,WAAG,CAACsJ,SAAJ,CAAc,oBAAd,EACA;CACC8B,EAAAA,QAAQ;CAEP3V,IAAAA,QAFO,sBAGP;CACC,aAAOuK,UAAG,CAAC+L,kBAAJ,CAAuB,wBAAvB,EAAiD,KAAK7M,KAAL,CAAWmB,eAA5D,CAAP;CACA;CALM,KAMJ4M,gBAAI,CAACC,QAAL,CAAc;CAChB5a,IAAAA,MAAM,EAAE,gBAAApD,KAAK;CAAA,aAAIA,KAAK,CAACoD,MAAV;CAAA;CADG,GAAd,CANI,CADT;CAWC6D,EAAAA,QAAQ;CAXT,CADA;;CCZA;;;;;;;;AASA,CAsCAxL,EAAE,CAACmsB,cAAH,GAAoBjP,mBAApB;CACAld,EAAE,CAACmsB,cAAH,CAAkBpxB,QAAlB,GAA6BA,QAA7B;CACAiF,EAAE,CAACmsB,cAAH,CAAkB5vB,gBAAlB,GAAqCA,gBAArC;CACAyD,EAAE,CAACmsB,cAAH,CAAkB7vB,aAAlB,GAAkCA,aAAlC;CACA0D,EAAE,CAACmsB,cAAH,CAAkBrtB,MAAlB,GAA2BA,MAA3B;CAEAiB,MAAM,CAAC4O,aAAP,CAAqB,IAAIC,WAAJ,CAAgB,8BAAhB,EAAgD;CAACC,EAAAA,MAAM,EAAE;CAAT,CAAhD,CAArB;;;;"}