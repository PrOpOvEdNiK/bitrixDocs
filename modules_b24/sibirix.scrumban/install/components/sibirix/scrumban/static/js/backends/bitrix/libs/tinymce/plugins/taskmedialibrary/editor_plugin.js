/**
 * editor_plugin.js
 */
(function($){tinymce.create("tinymce.plugins.BitrixImagePlugin",{init:function(e){if(!window.LHEDailogs||!window.LHEDailogs["Image"]){return}var t=$("#"+e.editorId);t.arConfig={bUseMedialib:true,bUseFileDialogs:false,bBBCode:(typeof e.plugins.bbcode !== 'undefined')};var n=new window.LHEDailogs["Image"]({pLEditor:t});var r={title:n.title,width:500,height:320,resizable:false};e.addCommand("mceBxImage",function(){var t=new BX.CDialog(r);t.Show();t.SetContent(n.innerHTML);if(n.OnLoad&&typeof n.OnLoad=="function"){n.OnLoad()}t.oDialog=n;t.ClearButtons();t.SetButtons([new BX.CWindowButton({title:window.LHE_MESS.DialogSave ? window.LHE_MESS.DialogSave: BX.message('DialogSave'),action:function(){var n=$("#lhed_img_src").val();e.execCommand("mceInsertContent",false,e.dom.createHTML("img",{src:n,alt:""}));e.execCommand("mceRepaint",false);t.Close();$(".bx-core-dialog-overlay, .bx-core-dialog, #bxmedialib_shadow").remove()}}),new BX.CWindowButton({title:window.LHE_MESS.DialogCancel ? window.LHE_MESS.DialogCancel: BX.message('DialogCancel'),action:function(){t.Close();$(".bx-core-dialog-overlay, .bx-core-dialog, #bxmedialib_shadow").remove()}})]);BX.addClass(t.PARTS.CONTENT,"lhe-dialog");t.adjustSizeEx()});e.addButton("image",{title:"Bitrix image selector",cmd:"mceBxImage"})},getInfo:function(){return{longname:"Bitrix image selector",author:"Smiling Cheater <ivan.kozhevin@sibirix.ru>",authorurl:"http://www.sibirix.ru/",infourl:"",version:"0.1"}}});tinymce.PluginManager.add("bitriximage",tinymce.plugins.BitrixImagePlugin)})(SCRUMBAN.jQuery);