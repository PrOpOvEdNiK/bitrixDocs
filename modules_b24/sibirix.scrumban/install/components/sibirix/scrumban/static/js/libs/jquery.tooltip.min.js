/*
 * jQuery Tooltip plugin 1.3
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/
 * http://docs.jquery.com/Plugins/Tooltip
 *
 * Copyright (c) 2006 - 2008 JÃ¶rn Zaefferer
 *
 * $Id: jquery.tooltip.js 5741 2008-06-21 15:22:16Z joern.zaefferer $
 * 
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
;(function(e){function u(n){if(t.parent)return;t.parent=e('<div id="'+n.id+'" style="display: none;"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body);if(e.fn.bgiframe)t.parent.bgiframe();t.title=e("h3",t.parent);t.body=e("div.body",t.parent);t.url=e("div.url",t.parent)}function a(t){return e.data(t,"tooltip")}function f(t){if(a(this).delay)i=setTimeout(c,a(this).delay);else c();o=!!a(this).track;e(document.body).bind("mousemove",h);h(t)}function l(i){if(i.originalEvent.tooltip)return;if(e.tooltip.blocked||this==n||!this.tooltipText&&!a(this).bodyHandler)return;n=this;r=this.tooltipText;if(a(this).bodyHandler){t.title.hide();var s=a(this).bodyHandler.call(this);if(s.nodeType||s.jquery){t.body.empty().append(s)}else{t.body.html(s)}t.body.show()}else if(a(this).showBody){var o=r.split(a(this).showBody);t.title.html(o.shift()).show();t.body.empty();for(var u=0,l;l=o[u];u++){if(u>0)t.body.append("<br/>");t.body.append(l)}t.body.hideWhenEmpty()}else{t.title.html(r).show();t.body.hide()}if(a(this).showURL&&e(this).url())t.url.html(e(this).url().replace("http://","")).show();else t.url.hide();t.parent.addClass(a(this).extraClass);if(a(this).fixPNG)t.parent.fixPNG();f.apply(this,arguments);i.originalEvent.tooltip=true}function c(){i=null;if((!s||!e.fn.bgiframe)&&n&&a(n)&&a(n).fade){if(t.parent.is(":animated"))t.parent.stop().show().fadeTo(a(n).fade,n.tOpacity);else t.parent.is(":visible")?t.parent.fadeTo(a(n).fade,n.tOpacity):t.parent.fadeIn(a(n).fade)}else{t.parent.show()}h()}function h(r){if(e.tooltip.blocked)return;if(r&&r.target.tagName=="OPTION"){return}if(!o&&t.parent.is(":visible")){e(document.body).unbind("mousemove",h)}if(n==null){e(document.body).unbind("mousemove",h);return}if(!a(n)){e(document.body).unbind("mousemove",h);return}t.parent.removeClass("viewport-right").removeClass("viewport-bottom");var i=t.parent[0].offsetLeft;var s=t.parent[0].offsetTop;if(r){i=r.pageX+a(n).left;s=r.pageY+a(n).top;var u="auto";if(a(n).positionLeft){u=e(window).width()-i;i="auto"}t.parent.css({left:i,right:u,top:s})}var f=p(),l=t.parent[0];if(f.x+f.cx<l.offsetLeft+l.offsetWidth+10){i-=l.offsetWidth+20+a(n).left;t.parent.css({left:i+"px"}).addClass("viewport-right")}if(f.y+f.cy<l.offsetTop+l.offsetHeight){s-=l.offsetHeight+20+a(n).top;t.parent.css({top:s+"px"}).addClass("viewport-bottom")}}function p(){return{x:e(window).scrollLeft(),y:e(window).scrollTop(),cx:e(window).width(),cy:e(window).height()}}function d(r){function u(){t.parent.removeClass(o.extraClass).hide().css("opacity","")}if(e.tooltip.blocked){return}if(i){clearTimeout(i)}n=null;var o=a(this);if((!s||!e.fn.bgiframe)&&o.fade){if(t.parent.is(":animated"))t.parent.stop().fadeTo(o.fade,0,u);else t.parent.stop().fadeOut(o.fade,u)}else u();if(a(this).fixPNG)t.parent.unfixPNG()}var t={},n,r,i,s=e.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),o=false;e.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:false,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){e.tooltip.blocked=!e.tooltip.blocked}};e.fn.extend({tooltip:function(t){if(e.isAppleDevice())return this;t=e.extend({},e.tooltip.defaults,t);u(t);return this.each(function(){e.data(this,"tooltip",t);this.tOpacity=1;if(t.title){this.tooltipText=t.title}else{this.tooltipText=this.title;e(this).removeAttr("title")}this.alt=""}).mouseover(l).mouseout(d).click(d)},fixPNG:s?function(){return this.each(function(){var t=e(this).css("backgroundImage");if(t.match(/^url\(["']?(.*\.png)["']?\)$/i)){t=RegExp.$1;e(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+t+"')"}).each(function(){var t=e(this).css("position");if(t!="absolute"&&t!="relative")e(this).css("position","relative")})}})}:function(){return this},unfixPNG:s?function(){return this.each(function(){e(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){e(this)[e(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})})(jQuery);