/************************
 jquery-timepicker
 http://jonthornton.github.com/jquery-timepicker/

 requires jQuery 1.6+
 ************************/
!function(e){function u(t){var r=t.data("timepicker-settings");var i=t.data("timepicker-list");if(i&&i.length){i.remove();t.data("timepicker-list",false)}i=e("<ul></ul>");i.attr("tabindex",-1);i.addClass("ui-timepicker-list");if(r.className){i.addClass(r.className)}i.css({display:"none",position:"absolute"});if(r.minTime!==null&&r.showDuration){i.addClass("ui-timepicker-with-duration")}var s=r.durationTime!==null?r.durationTime:r.minTime;var o=r.minTime!==null?r.minTime:0;var u=r.maxTime!==null?r.maxTime:o+n-1;if(u<=o){u+=n}for(var a=o;a<=u;a+=r.step*60){var l=a%n;var c=e("<li></li>");c.data("time",l);c.text(d(l,r.timeFormat));if(r.minTime!==null&&r.showDuration){var v=e("<span></span>");v.addClass("ui-timepicker-duration");v.text(" ("+p(a-s)+")");c.append(v)}i.append(c)}i.data("timepicker-input",t);t.data("timepicker-list",i);t.parent().prepend(i);if(!r.preventAutoChangeTime){f(t,i)}i.on("click","li",function(){t.addClass("ui-timepicker-hideme");t[0].focus();i.find("li").removeClass("ui-timepicker-selected");e(this).addClass("ui-timepicker-selected");h(t);i.hide()});i.on("mousewheel.timepicker",function(e){e.stopPropagation();return true})}function a(t,n,r){if(!r&&r!==0){return false}var i=t.data("timepicker-settings");var s=false;n.find("li").each(function(t,n){var o=e(n);if(Math.abs(o.data("time")-r)<=i.step*30){s=o;return false}return true});return s}function f(e,t){var n=v(e.val());var r=a(e,t,n);if(r)r.addClass("ui-timepicker-selected")}function l(){if(this.value==""){return}var t=e(this);var n=d(v(this.value),t.data("timepicker-settings").timeFormat);t.val(n)}function c(t){var n=e(this);var r=n.data("timepicker-list");var i=n.data("timepicker-settings");var s;if(!r||!r.is(":visible")){if(t.keyCode==40){n.focus()}else{return true}}switch(t.keyCode){case 13:if(i.preventAutoChangeTime){o.hide.apply(this);t.preventDefault();return false}h(n);o.hide.apply(this);t.preventDefault();return false;break;case 38:s=r.find(".ui-timepicker-selected");if(!s.length){r.children().each(function(t,n){if(e(n).position().top>0){s=e(n);return false}return true});s.addClass("ui-timepicker-selected")}else if(!s.is(":first-child")){s.removeClass("ui-timepicker-selected");s.prev().addClass("ui-timepicker-selected");if(s.prev().position().top<s.outerHeight()){r.scrollTop(r.scrollTop()-s.outerHeight())}}break;case 40:s=r.find(".ui-timepicker-selected");if(s.length==0){r.children().each(function(t,n){if(e(n).position().top>0){s=e(n);return false}return true});s.addClass("ui-timepicker-selected")}else if(!s.is(":last-child")){s.removeClass("ui-timepicker-selected");s.next().addClass("ui-timepicker-selected");if(s.next().position().top+2*s.outerHeight()>r.outerHeight()){r.scrollTop(r.scrollTop()+s.outerHeight())}}break;case 27:r.find("li").removeClass("ui-timepicker-selected");r.hide();break;case 9:o.hide();break;case 16:case 17:case 18:case 19:case 20:case 33:case 34:case 35:case 36:case 37:case 39:case 45:return true;default:r.find("li").removeClass("ui-timepicker-selected");return true}return true}function h(e){var t=e.data("timepicker-settings");var n=e.data("timepicker-list");var r=null;var i=n.find(".ui-timepicker-selected");if(i.length){r=i.data("time")}else if(e.val()){r=v(e.val());f(e,n)}if(r!==null){var s=d(r,t.timeFormat);e.attr("value",s)}e.trigger("change").trigger("changeTime")}function p(e){var t=Math.round(e/60);var n;if(t<60){n=[t,i.mins]}else if(t==60){n=["1",i.hr]}else{var r=(t/60).toFixed(1);if(i.decimal!=".")r=r.replace(".",i.decimal);n=[r,i.hrs]}return n.join(" ")}function d(e,n){var r,i=new Date(t.valueOf()+e*1e3);var s="";for(var o=0;o<n.length;o++){var u=n.charAt(o);switch(u){case"a":s+=i.getHours()>11?"pm":"am";break;case"A":s+=i.getHours()>11?"PM":"AM";break;case"g":r=i.getHours()%12;s+=r==0?"12":r;break;case"G":s+=i.getHours();break;case"h":r=i.getHours()%12;if(r!=0&&r<10){r="0"+r}s+=r==0?"12":r;break;case"H":r=i.getHours();s+=r>9?r:"0"+r;break;case"i":var a=i.getMinutes();s+=a>9?a:"0"+a;break;case"s":var f=i.getSeconds();s+=f>9?f:"0"+f;break;default:s+=u}}return s}function v(e){if(e=="")return null;if(e+0==e)return e;if(typeof e=="object"){e=e.getHours()+":"+e.getMinutes()}var t=e.toLowerCase().match(/(\d+)(?::(\d\d))?\s*([pa]?)/);if(!t){return null}var n,r=parseInt(t[1],10);if(t[3]){if(r==12){n=t[3]=="p"?12:0}else{n=r+(t[3]=="p"?12:0)}}else{n=r}var i=parseInt(t[2],10)||0;return n*3600+i*60}var t=new Date;t.setHours(0);t.setMinutes(0);t.setSeconds(0);var n=86400;var r={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:false,timeFormat:"g:ia",scrollDefaultNow:false,scrollDefaultTime:false,selectOnBlur:false,preventAutoChangeTime:false};var i={decimal:".",mins:"mins",hr:"hr",hrs:"hrs"};var s=false;var o={init:function(t){return this.each(function(){var n=e(this);if(n[0].tagName=="SELECT"){var u=e("<input />");var a={type:"text",value:n.val()};var f=n[0].attributes;for(var h=0;h<f.length;h++){a[f[h].nodeName]=f[h].nodeValue}u.attr(a);n.replaceWith(u);n=u}var p=e.extend({},r);if(t){p=e.extend(p,t)}if(p.minTime){p.minTime=v(p.minTime)}if(p.maxTime){p.maxTime=v(p.maxTime)}if(p.durationTime){p.durationTime=v(p.durationTime)}if(p.lang){i=e.extend(i,p.lang)}n.data("timepicker-settings",p);n.attr("autocomplete","off");n.click(o.show).focus(o.show).blur(l).keydown(c);n.addClass("ui-timepicker-input");if(n.val()){var m=d(v(n.val()),p.timeFormat);n.val(m)}if(!s){e("body").on("click",function(t){if(e(t.target).closest(".ui-timepicker-input").length==0&&e(t.target).closest(".ui-timepicker-list").length==0){o.hide()}});s=true}})},show:function(){var t=e(this);var n=t.data("timepicker-list");if(!n||n.length==0){u(t);n=t.data("timepicker-list")}var r=t.data("timepicker-settings");var i=n.find(".ui-timepicker-selected");if(t.hasClass("ui-timepicker-hideme")){t.removeClass("ui-timepicker-hideme");n.hide();return}if(n.is(":visible")){return}o.hide();var s=t.offsetParent();var f=r.marginLeft||t.offset().left-s.offset().left-s.leftPadding();var l;if(r.marginTop===undefined){if(t.offset().top+t.outerHeight(true)+n.outerHeight()>e(window).height()+e(window).scrollTop()){l=-n.outerHeight()}else{l=t.outerHeight()}}else{l=r.marginTop}n.css({"margin-left":f,"margin-top":l});n.show();if(!i.length){if(t.val()){i=a(t,n,v(t.val()))}else if(r.minTime===null&&r.scrollDefaultNow){i=a(t,n,v(new Date))}else if(r.scrollDefaultTime!==false){i=a(t,n,v(r.scrollDefaultTime))}}if(i&&i.length){var c=n.scrollTop()+i.position().top-i.outerHeight();n.scrollTop(c)}else{var h=9*60/parseInt(r.step)*23;n.scrollTop(h)}t.trigger("showTimepicker")},hide:function(){e(".ui-timepicker-list:visible").each(function(){var t=e(this);var n=t.data("timepicker-input");var r=n.data("timepicker-settings");if(r.selectOnBlur){h(n)}t.hide();n.trigger("hideTimepicker")})},option:function(t,n){var r=e(this);var i=r.data("timepicker-settings");var s=r.data("timepicker-list");if(typeof t=="object"){i=e.extend(i,t)}else if(typeof t=="string"&&typeof n!="undefined"){i[t]=n}else if(typeof t=="string"){return i[t]}if(i.minTime){i.minTime=v(i.minTime)}if(i.maxTime){i.maxTime=v(i.maxTime)}if(i.durationTime){i.durationTime=v(i.durationTime)}r.data("timepicker-settings",i);if(s){s.remove();r.data("timepicker-list",false)}return true},getSecondsFromMidnight:function(){return v(e(this).val())},getTime:function(){return new Date(t.valueOf()+v(e(this).val())*1e3)},setTime:function(t){var n=e(this);var r=d(v(t),n.data("timepicker-settings").timeFormat);n.val(r)}};e.fn.timepicker=function(t){if(o[t]){return o[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return o.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.timepicker");return false}}}(jQuery);