(function(e){var t={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},n=function(e,t,n){return e[t]!==undefined?e[t]:n&&(e[t]={})},r=function(e){var t=typeof e;return e&&(t=="function"||t=="object")},i,s=e.String=e.extend(e.String||{},{getObject:i=function(i,s,o){var u=i?i.split(t.dot):[],a=u.length,f,l,c,h=0,p;s=e.isArray(s)?s:[s||window];if(a==0){return s[0]}while(f=s[h++]){for(c=0;c<a-1&&r(f);c++){f=n(f,u[c],o)}if(r(f)){l=n(f,u[c],o);if(l!==undefined){if(o===false){delete f[u[c]]}return l}}}},capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){e=s.classize(e);return e.charAt(0).toLowerCase()+e.substr(1)},classize:function(e,n){var r=e.split(t.undHash),i=0;for(;i<r.length;i++){r[i]=s.capitalize(r[i])}return r.join(n||"")},niceName:function(e){return s.classize(e," ")},underscore:function(e){return e.replace(t.colons,"/").replace(t.words,"$1_$2").replace(t.lowUp,"$1_$2").replace(t.dash,"_").toLowerCase()},sub:function(e,n,s){var o=[],s=typeof s=="boolean"?!s:s;o.push(e.replace(t.replacer,function(e,t){var u=i(t,n,s);if(r(u)){o.push(u);return""}else{return""+u}}));return o.length<=1?o[0]:o},_regs:t})})(jQuery);(function(e){var t=false,n=e.makeArray,r=e.isFunction,i=e.isArray,s=e.extend,o=e.String.getObject,u=function(e,t){return e.concat(n(t))},a=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,f=function(e,t,n){n=n||e;for(var i in e){n[i]=r(e[i])&&r(t[i])&&a.test(e[i])?function(e,n){return function(){var r=this._super,i;this._super=t[e];i=n.apply(this,arguments);this._super=r;return i}}(i,e[i]):e[i]}},l="prototype";clss=e.Class=function(){if(arguments.length){clss.extend.apply(clss,arguments)}};s(clss,{proxy:function(e){var t=n(arguments),r;e=t.shift();if(!i(e)){e=[e]}r=this;return function(){var s=u(t,arguments),o,a=e.length,f=0,l;for(;f<a;f++){l=e[f];if(!l){continue}o=typeof l=="string";if(o&&r._set_called){r.called=l}s=(o?r[l]:l).apply(r,s||[]);if(f<a-1){s=!i(s)||s._use_call?[s]:s}}return s}},newInstance:function(){var e=this.rawInstance(),t;if(e.setup){t=e.setup.apply(e,arguments)}if(e.init){e.init.apply(e,i(t)?t:arguments)}return e},setup:function(e,t){this.defaults=s(true,{},e.defaults,this.defaults);return arguments},rawInstance:function(){t=true;var e=new this;t=false;return e},extend:function(e,n,r){function v(){if(t)return;if(this.constructor!==v&&arguments.length){return arguments.callee.extend.apply(arguments.callee,arguments)}else{return this.Class.newInstance.apply(this.Class,arguments)}}if(typeof e!="string"){r=n;n=e;e=null}if(!r){r=n;n=null}r=r||{};var i=this,a=this[l],c,h,p,d;t=true;d=new this;t=false;f(r,a,d);for(c in this){if(this.hasOwnProperty(c)){v[c]=this[c]}}f(n,this,v);if(e){var m=e.split(/\./),h=m.pop(),g=o(m.join("."),window,true),p=g;g[h]=v}s(v,{prototype:d,namespace:p,shortName:h,constructor:v,fullName:e});v[l].Class=v[l].constructor=v;var y=v.setup.apply(v,u([i],arguments));if(v.init){v.init.apply(v,y||u([i],arguments))}return v}});clss.callback=clss[l].callback=clss[l].proxy=clss.proxy})(jQuery);(function(e){var t=jQuery.cleanData;e.cleanData=function(n){for(var r=0,i;(i=n[r])!==undefined;r++){if (i.tagName.toLowerCase() == "object") { continue; }e(i).triggerHandler("destroyed")}t(n)}})(jQuery);(function(e){var t=function(t,n,r){var s,o=t.bind&&t.unbind?t:e(i(t)?[t]:t);if(n.indexOf(">")===0){n=n.substr(1);s=function(e){if(e.target===t){r.apply(this,arguments)}}}o.bind(n,s||r);return function(){o.unbind(n,s||r);t=n=r=s=null}},n=e.makeArray,r=e.isArray,i=e.isFunction,s=e.extend,o=e.String,u=e.each,a="prototype",f="constructor",l=Array[a].slice,c=function(t,n,r,s){var o=t.delegate&&t.undelegate?t:e(i(t)?[t]:t);o.delegate(n,r,s);return function(){o.undelegate(n,r,s);o=t=r=s=n=null}},h=function(e,n,r,i){return i?c(e,i,n,r):t(e,n,r)},p=function(n,r){var i=typeof r=="string"?n[r]:r;return function(){n.called=r;return i.apply(n,[this.nodeName?e(this):this].concat(l.call(arguments,0)))}},d=/\./g,v=/_?controllers?/ig,m=function(e){return o.underscore(e.replace("jQuery.","").replace(d,"_").replace(v,""))},g=/[^\w]/,y=/\{([^\}]+)\}/g,b=/^(?:(.*?)\s)?([\w\.\:>]+)$/,w,E=function(t,n){return e.data(t,"controllers",n)};e.Class("jQuery.Controller",{setup:function(){this._super.apply(this,arguments);if(!this.shortName||this.fullName=="jQuery.Controller"){return}this._fullName=m(this.fullName);this._shortName=m(this.shortName);var t=this,r=this.pluginName||this._fullName,s,o;if(!e.fn[r]){e.fn[r]=function(e){var s=n(arguments),o=typeof e=="string"&&i(t[a][e]),u=s[0];return this.each(function(){var e=E(this),n=e&&e[r];if(n){if(o){n[u].apply(n,s.slice(1))}else{n.update.apply(n,s)}}else{t.newInstance.apply(t,[this].concat(s))}})}}this.actions={};for(s in this[a]){if(s=="constructor"||!i(this[a][s])){continue}if(this._isAction(s)){this.actions[s]=this._action(s)}}},hookup:function(e){return new this(e)},_isAction:function(t){if(g.test(t)){return true}else{return e.inArray(t,this.listensTo)>-1||e.event.special[t]||S[t]}},_action:function(e,t){y.lastIndex=0;if(!t&&y.test(e)){return null}var n=t?o.sub(e,[t,window]):e,i=r(n),s=(i?n[1]:n).match(b),u=s[2],a=S[u]||w;return{processor:a,parts:s,delegate:i?n[0]:undefined}},processors:{},listensTo:[],defaults:{}},{setup:function(t,r){var i,o,u=this[f];t=(typeof t=="string"?e(t):t.jquery?t:[t])[0];var a=u.pluginName||u._fullName;this.element=e(t).addClass(a);(E(t)||E(t,{}))[a]=this;this.options=s(s(true,{},u.defaults),r);this.called="init";this.bind();return[this.element,this.options].concat(n(arguments).slice(2))},bind:function(t,n,r){if(t===undefined){this._bindings=[];var i=this[f],s=this._bindings,o=i.actions,u=this.element;for(funcName in o){if(o.hasOwnProperty(funcName)){ready=o[funcName]||i._action(funcName,this.options);s.push(ready.processor(ready.delegate||u,ready.parts[2],ready.parts[1],funcName,this))}}var a=p(this,"destroy");u.bind("destroyed",a);s.push(function(t){e(t).unbind("destroyed",a)});return s.length}if(typeof t=="string"){r=n;n=t;t=this.element}return this._binder(t,n,r)},_binder:function(e,t,n,r){if(typeof n=="string"){n=p(this,n)}this._bindings.push(h(e,t,n,r));return this._bindings.length},_unbind:function(){var e=this.element[0];u(this._bindings,function(t,n){n(e)});this._bindings=[]},delegate:function(e,t,n,r){if(typeof e=="string"){r=n;n=t;t=e;e=this.element}return this._binder(e,n,r,t)},update:function(e){s(this.options,e);this._unbind();this.bind()},destroy:function(){if(this._destroyed){throw this[f].shortName+" controller already deleted"}var t=this,n=this[f].pluginName||this[f]._fullName,r;this._destroyed=true;this.element.removeClass(n);this._unbind();delete this._actions;delete this.element.data("controllers")[n];e(this).triggerHandler("destroyed");this.element=null},find:function(e){return this.element.find(e)},_set_called:true});var S=e.Controller.processors,w=function(e,t,n,r,i){return h(e,t,p(i,r),n)};u("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(e,t){S[t]=w});var x,T=function(e,t){for(x=0;x<t.length;x++){if(typeof t[x]=="string"?e[f]._shortName==t[x]:e instanceof t[x]){return true}}return false};e.fn.extend({controllers:function(){var t=n(arguments),r=[],i,s,o;this.each(function(){i=e.data(this,"controllers");for(o in i){if(i.hasOwnProperty(o)){s=i[o];if(!t.length||T(s,t)){r.push(s)}}}});return r},controller:function(e){return this.controllers.apply(this,arguments)[0]}})})(jQuery);(function(){var e=$.String,t=e.getObject,n=e.underscore,r=e.classize,i=$.isArray,s=$.makeArray,o=$.extend,u=$.each,a=function(e,t,n){$.event.trigger(t,n,e,true)},f=function(t,n,r,s,u,a,f){if(typeof t=="string"){var l=t.indexOf(" ");if(l>-1){t={url:t.substr(l+1),type:t.substr(0,l)}}else{t={url:t}}}t.data=typeof n=="object"&&!i(n)?o(t.data||{},n):n;t.url=e.sub(t.url,t.data,true);return $.ajax(o({type:a||"post",dataType:f||"json",fixture:u,success:r,error:s},t))},l=function(e,t,r){var i=n(e.shortName),s="-"+i+(t||"");return $.fixture&&$.fixture[s]?s:r||"//"+n(e.fullName).replace(/\.models\..*/,"").replace(/\./g,"/")+"/fixtures/"+i+(t||"")+".json"},c=function(t,n,r){n=n||{};var i=t.id;if(n[i]&&n[i]!==r){n["new"+e.capitalize(r)]=n[i];delete n[i]}n[i]=r;return n},h=function(e){var t=e||$.Model.List||Array;return new t},p=function(e){return e[e.constructor.id]},d=function(e){var t=[];u(e,function(e,n){if(!n["__u Nique"]){t.push(n);n["__u Nique"]=1}});return u(t,function(e,t){delete t["__u Nique"]})},v=function(e,t,n,r,i){var s=$.Deferred(),o=function(n){e[i||t+"d"](n);s.resolveWith(e,[e,n,t])},u=function(t){s.rejectWith(e,[t])},a=[e.serialize(),o,u],f=e.constructor,l,c=s.promise();if(t=="destroy"){a.shift()}if(t!=="create"){a.unshift(p(e))}s.then(n);s.fail(r);l=f[t].apply(f,a);if(l&&l.abort){c.abort=function(){l.abort()}}return c},m=function(e){return typeof e==="object"&&e!==null&&e},g=function(e){return function(t,n){try{var r=$.fn[e].apply($([this]),arguments)}catch(i){console.log("catch: ",e,this,arguments);throw i}return r}},y=g("bind"),b=g("unbind"),w="constructor";ajaxMethods={create:function(e){return function(t,n,r){return f(e||this._shortName,t,n,r,l(this,"Create","-restCreate"))}},update:function(e){return function(t,n,r,i){return f(e||this._shortName+"/{"+this.id+"}",c(this,n,t),r,i,l(this,"Update","-restUpdate"),"put")}},destroy:function(e){return function(t,n,r){var i={};i[this.id]=t;return f(e||this._shortName+"/{"+this.id+"}",i,n,r,l(this,"Destroy","-restDestroy"),"delete")}},findAll:function(e){return function(t,n,r){return f(e||this._shortName,t,n,r,l(this,"s"),"get","json "+this._shortName+".models")}},findOne:function(e){return function(t,n,r){return f(e||this._shortName+"/{"+this.id+"}",t,n,r,l(this),"get","json "+this._shortName+".model")}}};jQuery.Class("jQuery.Model",{setup:function(e,t,r){var i=this,s=this.fullName;u(["attributes","validations"],function(t,n){if(!i[n]||e[n]===i[n]){i[n]={}}});u(["convert","serialize"],function(t,n){if(e[n]!=i[n]){i[n]=o({},e[n],i[n])}});this._fullName=n(s.replace(/\./g,"_"));this._shortName=n(this.shortName);if(s.indexOf("jQuery")==0){return}if(this.listType){this.list=new this.listType([])}u(ajaxMethods,function(e,t){var n=i[e];if(typeof n!=="function"){i[e]=t(n)}});var a={},f="* "+this._shortName+".model";a[f+"s"]=this.proxy("models");a[f]=this.proxy("model");$.ajaxSetup({converters:a})},attributes:{},model:function(e){if(!e){return null}if(e instanceof this){e=e.serialize()}return new this(m(e[this._shortName])||m(e.data)||m(e.attributes)||e)},models:function(e){if(!e){return null}var t=h(this.List),n=i(e),r=$.Model.List,s=r&&e instanceof r,o=n?e:s?e.serialize():e.data,a=o?o.length:null,f=0;for(;f<a;f++){t.push(this.model(o[f]))}if(!n){u(e,function(e,n){if(e!=="data"){t[e]=n}})}return t},id:"id",addAttr:function(e,t){var n,r=this.attributes;n=r[e]||(r[e]=t);return t},convert:{date:function(e){var t=typeof e;if(t==="string"){return isNaN(Date.parse(e))?null:Date.parse(e)}else if(t==="number"){return new Date(e)}else{return e}},number:function(e){return parseFloat(e)},"boolean":function(e){return Boolean(e==="false"?0:e)},"default":function(e,n,r){var i=t(r),s=window,o;if(r.indexOf(".")>=0){o=r.substring(0,r.lastIndexOf("."));s=t(o)}return typeof i=="function"?i.call(s,e):e}},serialize:{"default":function(e,t){return m(e)&&e.serialize?e.serialize():e},date:function(e){return e&&e.getTime()}},bind:y,unbind:b,_ajax:f},{setup:function(e){this._init=true;this.attrs(o({},this.constructor.defaults,e));delete this._init},update:function(e,t,n){this.attrs(e);return this.save(t,n)},errors:function(e){if(e){e=i(e)?e:s(arguments)}var t={},n=this,r,o=function(e,r){u(r,function(r,i){var s=i.call(n);if(s){if(!t[e]){t[e]=[]}t[e].push(s)}})},a=this.constructor.validations;u(e||a||{},function(e,t){if(typeof e=="number"){e=t;t=a[e]}o(e,t||[])});return $.isEmptyObject(t)?null:t},attr:function(e,t,n,i){var s=r(e),o="get"+s;if(t!==undefined){var u="set"+s,f=this[e],l=this,c=function(t){var n;n=i&&i.call(l,t);a(l,"error."+e,t)};if(this[u]&&(t=this[u](t,this.proxy("_updateProperty",e,t,f,n,c),c))===undefined){return}this._updateProperty(e,t,f,n,c);return this}return this[o]?this[o]():this[e]},bind:y,unbind:b,_updateProperty:function(e,t,n,r,i){var s=this.constructor,o,u=s.attributes[e]||s.addAttr(e,"string"),f=s.convert[u]||s.convert["default"],l=null,c="",h="updated.",p,d,v=r,m=s.list;o=this[e]=t===null?null:f.call(s,t,function(){},u);if(!this._init){l=this.errors(e)}p=[o];d=[e,o,n];if(l){c=h="error.";v=i;d.splice(1,0,l);p.unshift(l)}if(n!==o&&!this._init){!l&&a(this,c+e,p);a(this,h+"attr",d)}v&&v.apply(this,p);if(e===s.id&&o!==null&&m){if(!n){m.push(this)}else if(n!=o){m.remove(n);m.push(this)}}},removeAttr:function(e){var t=this[e],n=false,r=this.constructor.attributes;if(this[e]){delete this[e]}if(r[e]){delete r[e];n=true}if(!this._init&&n&&t){a(this,"updated.attr",[e,null,t])}},attrs:function(e){var t,n=this.constructor,r=n.attributes;if(!e){e={};for(t in r){if(r.hasOwnProperty(t)){e[t]=this.attr(t)}}}else{var i=n.id;for(t in e){if(t!=i){this.attr(t,e[t])}}if(i in e){this.attr(i,e[i])}}return e},serialize:function(){var e=this.constructor,t=e.attributes,n,r,i={},s;attributes={};for(s in t){if(t.hasOwnProperty(s)){n=t[s];r=e.serialize[n]||e.serialize["default"];i[s]=r.call(e,this[s],n)}}return i},isNew:function(){var e=p(this);return e===undefined||e===null||e===""},save:function(e,t){return v(this,this.isNew()?"create":"update",e,t)},destroy:function(e,t){return v(this,"destroy",e,t,"destroyed")},identity:function(){var e=p(this),t=this.constructor;return(t._fullName+"_"+(t.escapeIdentity?encodeURIComponent(e):e)).replace(/ /g,"_")},elements:function(e){var t=this.identity();if(this.constructor.escapeIdentity){t=t.replace(/([ #;&,.+*~\'%:"!^$[\]()=>|\/])/g,"\\$1")}return $("."+t,e)},hookup:function(e){var t=this.constructor._shortName,n=$.data(e,"models")||$.data(e,"models",{});$(e).addClass(t+" "+this.identity());n[t]=this}});u(["created","updated","destroyed"],function(e,t){$.Model.prototype[t]=function(e){var n,r=this.constructor;if(t==="destroyed"&&r.list){r.list.remove(p(this))}n=e&&typeof e=="object"&&this.attrs(e.attrs?e.attrs():e);a(this,t);a(r,t,this);return[this].concat(s(arguments))}});$.fn.models=function(e){var t=[],n,r,i;this.each(function(){u($.data(this,"models")||{},function(e,r){n=n===undefined?r.constructor.List||null:r.constructor.List===n?n:null;t.push(r)})});r=h(n);r.push.apply(r,d(t));return r};$.fn.model=function(e){if(e&&e instanceof $.Model){e.hookup(this[0]);return this}else{return this.models.apply(this,arguments)[0]}}})(jQuery);(function(e){var t=e.isArray,n=function(e){var t=0;for(var n in e)t++;return t},r=function(e,i,s){var o=typeof e,u=t(e);if(s===-1){return o==="object"||e===i}if(o!==typeof i||u!==t(i)){return false}if(e===i){return true}if(u){if(e.length!==i.length){return false}for(var a=0;a<e.length;a++){if(!r(e[a],i[a])){return false}}return true}else if(o==="object"||o==="function"){var f=0;for(var l in e){if(!r(e[l],i[l],s===false?-1:undefined)){return false}f++}return f===n(i)}return false},i=function(e){var t={};for(var n in e){if(typeof e[n]!=="object"||e[n]===null){t[n]=e[n]}}return t};e.extend(e.Model.prototype,{backup:function(){this._backupStore=this.serialize();return this},isDirty:function(e){if(!this._backupStore){return false}else{return!r(this.serialize(),this._backupStore,!!e)}},restore:function(e){var t=e?this._backupStore:i(this._backupStore);this.attrs(t);return this}})})(jQuery);(function(e){var t=function(t){if(t[0]&&e.isArray(t[0])){return t[0]}else if(t[0]instanceof e.Model.List){return e.makeArray(t[0])}else{return e.makeArray(t)}},n=0,r=function(e){return e[e.constructor.id]},i=jQuery.expando,s=e.each,o=e.Model._ajax,u={update:function(e){return function(t,n,r,i){return o(e,{ids:t,attrs:n},r,i,"-updateAll","put")}},destroy:function(e){return function(t,n,r){return o(e,t,n,r,"-destroyAll","post")}}};e.Class("jQuery.Model.List",{setup:function(){for(var e in u){if(typeof this[e]!=="function"){this[e]=u[e](this[e])}}}},{init:function(t,r){this.length=0;this._data={};this._namespace=".list"+ ++n,this.push.apply(this,e.makeArray(t||[]))},slice:function(){return new this.Class(Array.prototype.slice.apply(this,arguments))},match:function(e,t){return this.grep(function(n){return n[e]==t})},grep:function(t,n){return new this.Class(e.grep(this,t,n))},_makeData:function(){var e=this._data={};this.each(function(t,n){e[n[n.constructor.id]]=n})},get:function(){if(!this.length){return new this.Class([])}if(this._changed){this._makeData()}var e=[],n=this[0].constructor,r=n._fullName,i=n.id,s=new RegExp(r+"_([^ ]+)"),o,u,a=t(arguments);for(var f=0;f<a.length;f++){if(a[f].nodeName&&(o=a[f].className.match(s))){u=this._data[o[1]]}else{u=this._data[typeof a[f]=="string"||typeof a[f]=="number"?a[f]:a[f][i]]}u&&e.push(u)}return new this.Class(e)},remove:function(n){if(!this.length){return[]}var r=[],i=this[0].constructor,s=i._fullName,o=i.id,u=new RegExp(s+"_([^ ]+)"),a,f;n=t(arguments);var l=0;while(l<this.length){var c=this[l],h=false;for(var p=0;p<n.length;p++){var d=n[p].nodeName&&(a=n[p].className.match(u))&&a[1]||(typeof n[p]=="string"||typeof n[p]=="number"?n[p]:n[p][o]);if(c[o]==d){r.push.apply(r,this.splice(l,1));n.splice(p,1);h=true;break}}if(!h){l++}}var v=new this.Class(r);if(v.length){e([this]).trigger("remove",[v])}return v},elements:function(t){return e(this.map(function(e){return"."+e.identity()}).join(","),t)},model:function(){return this.constructor.namespace},findAll:function(e,t,n){var r=this;this.model().findAll(e,function(e){r.push(e);t&&t(r)},n)},destroy:function(e,t){var n=this.map(r),i=this.slice(0,this.length);if(n.length){this.constructor.destroy(n,function(){s(i,function(){this.destroyed()});e&&e(i)},t)}else{e&&e(this)}return this},update:function(t,n,i){var o=this.map(r),u=this.slice(0,this.length);if(o.length){this.constructor.update(o,t,function(r){var i=e.extend(t,r||{});s(u,function(){this.updated(i)});n&&n(u)},i)}else{n&&n(this)}return this},bind:function(){if(this[i]===undefined){this.bindings(this)}try{e.fn.bind.apply(e([this]),arguments)}catch(t){console.log("catch: ",e.fn.bind,this,arguments);throw t}return this},unbind:function(){e.fn.unbind.apply(e([this]),arguments);if(this[i]===undefined){e(this).unbind(this._namespace)}return this},bindings:function(t){var n=this;e(t).bind("destroyed"+this._namespace,function(){n.remove(this)}).bind("updated"+this._namespace,function(){e([n]).trigger("updated",this)})},push:function(){var n=t(arguments);if(this[i]!==undefined){this.bindings(n)}this._changed=true;var r=a.apply(this,n);if(this[i]&&n.length){e([this]).trigger("add",[n])}return r},serialize:function(){return this.map(function(e){return e.serialize()})}});var a=[].push,f={pop:[].pop,shift:[].shift,unshift:[].unshift,splice:[].splice,sort:[].sort,reverse:[].reverse};s(f,function(t,n){e.Model.List.prototype[t]=function(){this._changed=true;return n.apply(this,arguments)}});s(["each","map"],function(t,n){e.Model.List.prototype[n]=function(t,r){return e[n](this,t,r)}})})(jQuery);(function(e){var t=function(t,n,r){if(!r){r=n;n={}}n=n||{};t=e.makeArray(t);if(n.testIf&&!n.testIf.call(this)){return}var i=this;e.each(t,function(e,t){if(!i.validations[t]){i.validations[t]=[]}i.validations[t].push(function(){var e=r.call(this,this[t]);return e===undefined?undefined:n.message||e})})};e.extend(e.Model,{validate:t,validationMessages:{format:"is invalid",inclusion:"is not a valid option (perhaps out of range)",lengthShort:"is too short",lengthLong:"is too long",presence:"can't be empty",range:"is out of range"},validateFormatOf:function(e,n,r){t.call(this,e,r,function(e){if(typeof e!="undefined"&&e!=""&&String(e).match(n)==null){return this.Class.validationMessages.format}})},validateInclusionOf:function(n,r,i){t.call(this,n,i,function(t){if(typeof t=="undefined")return;if(e.grep(r,function(e){return e==t}).length==0)return this.Class.validationMessages.inclusion})},validateLengthOf:function(e,n,r,i){t.call(this,e,i,function(e){if(typeof e=="undefined"&&n>0||e.length<n)return this.Class.validationMessages.lengthShort+" (min="+n+")";else if(typeof e!="undefined"&&e.length>r)return this.Class.validationMessages.lengthLong+" (max="+r+")"})},validatePresenceOf:function(e,n){t.call(this,e,n,function(e){if(typeof e=="undefined"||e==""||e===null)return this.Class.validationMessages.presence})},validateRangeOf:function(e,n,r,i){t.call(this,e,i,function(e){if(typeof e!="undefined"&&e<n||e>r)return this.Class.validationMessages.range+" ["+n+","+r+"]"})}})})(jQuery);(function(e){"$:nomunge";function l(e){e=e||window[r][s];return e.replace(/^[^#]*#?(.*)$/,"$1")}var t,n=e.event.special,r="location",i="hashchange",s="href",o=e.browser,u=document.documentMode,a=o.msie&&(u===undefined||u<8),f="on"+i in window&&!a;e[i+"Delay"]=100;n[i]=e.extend(n[i],{setup:function(){if(f){return false}e(t.start)},teardown:function(){if(f){return false}e(t.stop)}});t=function(){function c(){u=f=function(e){return e};if(a){o=e('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;f=function(){return l(o.document[r][s])};u=function(e,t){if(e!==t){var n=o.document;n.open().close();n[r].hash="#"+e}};u(l())}}var t={},n,o,u,f;t.start=function(){if(n){return}var t=l();u||c();if(!navigator.userAgent.match(/Rhino/))(function o(){var a=l(),c=f(t);if(a!==t){u(t=a,c);e(window).trigger(i)}else if(c!==t){window[r][s]=window[r][s].replace(/#.*/,"")+"#"+c}n=setTimeout(o,e[i+"Delay"])})()};t.stop=function(){if(!o){n&&clearTimeout(n);n=0}};return t}()})(jQuery);(function(e){e.fn.triggerAsync=function(t,n,r,i){if(typeof n=="function"){r=n;n=undefined}if(this[0]){var s=e.Event(t),o=s.preventDefault;s.preventDefault=function(){o.apply(this,arguments);i&&i(this)};jQuery.event.trigger({type:t,_success:r},n,this[0])}else{r.call(this)}return this};var t={},n=/\.(.*)$/,r=e.event;r.special["default"]={add:function(e){t[e.namespace.replace(n,"")]=true},setup:function(){return true}};var i=r.trigger;r.trigger=function(n,r,s,o){var u=n.type||n,a=[],n=typeof n==="object"?n[jQuery.expando]?n:new jQuery.Event(u,n):new jQuery.Event(u);var f=i.call(e.event,n,r,s,o);if(!o&&!n.isDefaultPrevented()&&n.type.indexOf("default")!==0){i("default."+n.type,r,s);if(n._success){n._success(n)}}if(n.isPaused&&n.isPaused()){n.isDefaultPrevented=n.pausedState.isDefaultPrevented;n.isPropagationStopped=n.pausedState.isPropagationStopped}return f}})(jQuery);(function(e){var t=function(e){return e!==undefined?this.array[0]=e:this.array[0]},n=function(e){return e!==undefined?this.array[1]=e:this.array[1]};e.Vector=function(){this.update(e.makeArray(arguments))};e.Vector.prototype={app:function(t){var n,r,i=[];for(n=0;n<this.array.length;n++){i.push(t(this.array[n]))}r=new e.Vector;return r.update(i)},plus:function(){var t,n=arguments[0]instanceof e.Vector?arguments[0].array:e.makeArray(arguments),r=this.array.slice(0),i=new e.Vector;for(t=0;t<n.length;t++){r[t]=(r[t]?r[t]:0)+n[t]}return i.update(r)},minus:function(){var t,n=arguments[0]instanceof e.Vector?arguments[0].array:e.makeArray(arguments),r=this.array.slice(0),i=new e.Vector;for(t=0;t<n.length;t++){r[t]=(r[t]?r[t]:0)-n[t]}return i.update(r)},equals:function(){var t,n=arguments[0]instanceof e.Vector?arguments[0].array:e.makeArray(arguments),r=this.array.slice(0),i=new e.Vector;for(t=0;t<n.length;t++){if(r[t]!=n[t]){return null}}return i.update(r)},x:t,left:t,width:t,y:n,top:n,height:n,toString:function(){return"("+this.array[0]+","+this.array[1]+")"},update:function(e){var t;if(this.array){for(t=0;t<this.array.length;t++){delete this.array[t]}}this.array=e;for(t=0;t<e.length;t++){this[t]=this.array[t]}return this}};e.Event.prototype.vector=function(){if(this.originalEvent.synthetic){var t=document.documentElement,n=document.body;return new e.Vector(this.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t.clientLeft||0),this.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||0))}else{return new e.Vector(this.pageX,this.pageY)}};e.fn.offsetv=function(){if(this[0]==window){return new e.Vector(window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop)}else{var t=this.offset();return new e.Vector(t.left,t.top)}};e.fn.dimensionsv=function(t){if(this[0]==window||!t){return new e.Vector(this.width(),this.height())}else{return new e.Vector(this[t+"Width"](),this[t+"Height"]())}}})(jQuery);(function(){var e=jQuery.event,t=function(e,t,n,r){var i,s,o,u,a,f,l,c,h;for(i=0;i<t.length;i++){s=t[i];u=s.indexOf(".")<0;if(!u){l=s.split(".");s=l.shift();c=new RegExp("(^|\\.)"+l.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}o=(e[s]||[]).slice(0);for(a=0;a<o.length;a++){f=o[a];h=u||c.test(f.namespace);if(h){if(r){if(f.selector===r){n(s,f.origHandler||f.handler)}}else if(r===null){n(s,f.origHandler||f.handler,f.selector)}else if(!f.selector){n(s,f.origHandler||f.handler)}}}}};e.find=function(e,n,r){var i=($._data(e)||{}).events,s=[],o,u,a;if(!i){return s}t(i,n,function(e,t){s.push(t)},r);return s};e.findBySelector=function(e,n){var r=$._data(e).events,i={},s=function(e,t,n){var r=i[e]||(i[e]={}),s=r[t]||(r[t]=[]);s.push(n)};if(!r){return i}t(r,n,function(e,t,n){s(n||"",e,t)},null);return i};e.supportTouch="ontouchend"in document;$.fn.respondsTo=function(t){if(!this.length){return false}else{return e.find(this[0],$.isArray(t)?t:[t]).length>0}};$.fn.triggerHandled=function(e,t){e=typeof e=="string"?$.Event(e):e;this.trigger(e,t);return e.handled};e.setupHelper=function(t,n,r){if(!r){r=n;n=null}var i=function(i){var s,o=i.selector||"";if(o){s=e.find(this,t,o);if(!s.length){$(this).delegate(o,n,r)}}else{if(!e.find(this,t,o).length){e.add(this,n,r,{selector:o,delegate:this})}}},s=function(i){var s,o=i.selector||"";if(o){s=e.find(this,t,o);if(!s.length){$(this).undelegate(o,n,r)}}else{if(!e.find(this,t,o).length){e.remove(this,n,r,{selector:o,delegate:this})}}};$.each(t,function(){e.special[this]={add:i,remove:s,setup:function(){},teardown:function(){}}})}})(jQuery);(function(e){var t=function(t,n){var r=Array.prototype.slice.call(arguments,2);return function(){var i=[this].concat(r,e.makeArray(arguments));return n.apply(t,i)}},n=e.event,r=window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){};e.Drag=function(){};e.extend(e.Drag,{lowerName:"drag",current:null,distance:0,mousedown:function(t,r){var i=t.button===0||t.button==1;if(!i||this.current){return}var s=new e.Drag,o=t.delegateTarget||r,u=t.handleObj.selector,a=this;this.current=s;s.setup({element:r,delegate:t.delegateTarget||r,selector:t.handleObj.selector,moved:false,_distance:this.distance,callbacks:{dragdown:n.find(o,["dragdown"],u),draginit:n.find(o,["draginit"],u),dragover:n.find(o,["dragover"],u),dragmove:n.find(o,["dragmove"],u),dragout:n.find(o,["dragout"],u),dragend:n.find(o,["dragend"],u)},destroyed:function(){a.current=null}},t)}});e.extend(e.Drag.prototype,{setup:function(n,i){e.extend(this,n);this.element=e(this.element);this.event=i;this.moved=false;this.allowOtherDrags=false;var s=t(this,this.mousemove),o=t(this,this.mouseup);this._mousemove=s;this._mouseup=o;this._distance=n.distance?n.distance:0;this.mouseStartPosition=i.vector();e(document).bind("mousemove",s);e(document).bind("mouseup",o);if(!this.callEvents("down",this.element,i)){this.noSelection(this.delegate);r()}},destroy:function(){e(document).unbind("mousemove",this._mousemove);e(document).unbind("mouseup",this._mouseup);if(!this.moved){this.event=this.element=null}this.selection(this.delegate);this.destroyed()},mousemove:function(e,t){if(!this.moved){var n=Math.sqrt(Math.pow(t.pageX-this.event.pageX,2)+Math.pow(t.pageY-this.event.pageY,2));if(n<this._distance){return false}this.init(this.element,t);this.moved=true}var r=t.vector();if(this._start_position&&this._start_position.equals(r)){return}this.draw(r,t)},mouseup:function(e,t){if(this.moved){this.end(t)}this.destroy()},noSelection:function(t){t=t||this.delegate;document.documentElement.onselectstart=function(){return false};document.documentElement.unselectable="on";this.selectionDisabled=this.selectionDisabled?this.selectionDisabled.add(t):e(t);this.selectionDisabled.css("-moz-user-select","-moz-none")},selection:function(e){if(this.selectionDisabled){document.documentElement.onselectstart=function(){};document.documentElement.unselectable="off";this.selectionDisabled.css("-moz-user-select","")}},init:function(t,n){t=e(t);var r=this.movingElement=this.element=e(t);this._cancelled=false;this.event=n;this.mouseElementPosition=this.mouseStartPosition.minus(this.element.offsetv());this.callEvents("init",t,n);if(this._cancelled===true){return}this.startPosition=r!=this.movingElement?this.movingElement.offsetv():this.currentDelta();this.makePositioned(this.movingElement);this.oldZIndex=this.movingElement.css("zIndex");this.movingElement.css("zIndex",1e3);if(!this._only&&this.constructor.responder){this.constructor.responder.compile(n,this)}},makePositioned:function(e){var t,n=e.css("position");if(!n||n=="static"){t={position:"relative"};if(window.opera){t.top="0px";t.left="0px"}e.css(t)}},callEvents:function(e,t,n,r){var i,s=this.callbacks[this.constructor.lowerName+e];for(i=0;i<s.length;i++){s[i].call(t,n,this,r)}return s.length},currentDelta:function(){return new e.Vector(parseInt(this.movingElement.css("left"),10)||0,parseInt(this.movingElement.css("top"),10)||0)},draw:function(e,t){if(this._cancelled){return}r();this.location=e.minus(this.mouseElementPosition);this.move(t);if(this._cancelled){return}if(!t.isDefaultPrevented()){this.position(this.location)}if(!this._only&&this.constructor.responder){this.constructor.responder.show(e,this,t)}},position:function(e){var t,n=this.currentDelta(),r=this.movingElement.offsetv().minus(n);this.required_css_position=e.minus(r);this.offsetv=e;t=this.movingElement[0].style;if(!this._cancelled&&!this._horizontal){t.top=this.required_css_position.top()+"px"}if(!this._cancelled&&!this._vertical){t.left=this.required_css_position.left()+"px"}},move:function(e){this.callEvents("move",this.element,e)},over:function(e,t){this.callEvents("over",this.element,e,t)},out:function(e,t){this.callEvents("out",this.element,e,t)},end:function(e){if(this._cancelled){return}if(!this._only&&this.constructor.responder){this.constructor.responder.end(e,this)}this.callEvents("end",this.element,e);if(this._revert){var t=this;this.movingElement.animate({top:this.startPosition.top()+"px",left:this.startPosition.left()+"px"},function(){t.cleanup.apply(t,arguments)})}else{this.cleanup()}this.event=null},cleanup:function(){this.movingElement.css({zIndex:this.oldZIndex});if(this.movingElement[0]!==this.element[0]&&!this.movingElement.has(this.element[0]).length&&!this.element.has(this.movingElement[0]).length){this.movingElement.css({display:"none"})}if(this._removeMovingElement){this.movingElement.remove()}this.movingElement=this.element=this.event=null},cancel:function(){this._cancelled=true;if(!this._only&&this.constructor.responder){this.constructor.responder.clear(this.event.vector(),this,this.event)}this.destroy()},ghost:function(t){var n=this.movingElement.clone().css("position","absolute");(t?e(t):this.movingElement).after(n);n.width(this.movingElement.width()).height(this.movingElement.height());n.offset(this.movingElement.offset());this.movingElement=n;this.noSelection(n);this._removeMovingElement=true;return n},representative:function(t,n,r){this._offsetX=n||0;this._offsetY=r||0;var i=this.mouseStartPosition;this.movingElement=e(t);this.movingElement.css({top:i.y()-this._offsetY+"px",left:i.x()-this._offsetX+"px",display:"block",position:"absolute"}).show();this.noSelection(this.movingElement);this.mouseElementPosition=new e.Vector(this._offsetX,this._offsetY)},revert:function(e){this._revert=e===undefined?true:e;return this},vertical:function(){this._vertical=true;return this},horizontal:function(){this._horizontal=true;return true},only:function(e){return this._only=e===undefined?true:e},distance:function(e){if(e!==undefined){this._distance=e;return this}else{return this._distance}}});n.setupHelper(["dragdown","draginit","dragover","dragmove","dragout","dragend"],"mousedown",function(t){e.Drag.mousedown.call(e.Drag,t,this)})})(jQuery);(function(e){var t=document.defaultView&&document.defaultView.getComputedStyle,n=/([A-Z])/g,r=/-([a-z])/ig,i=function(e,t){return t.toUpperCase()},s=function(e){if(t){return t(e,null)}else if(e.currentStyle){return e.currentStyle}},o=/float/i,u=/^-?\d+(?:px)?$/i,a=/^-?\d/;e.curStyles=function(e,f){if(!e){return null}var l=s(e),c,h,p=e.style,d={},v=0,m,g,y,b;for(;v<f.length;v++){b=f[v];c=b.replace(r,i);if(o.test(b)){b=jQuery.support.cssFloat?"float":"styleFloat";c="cssFloat"}if(t){b=b.replace(n,"-$1").toLowerCase();h=l.getPropertyValue(b);if(b==="opacity"&&h===""){h="1"}d[c]=h}else{y=b.replace(r,i);d[c]=l[b]||l[y];if(!u.test(d[c])&&a.test(d[c])){m=p.left;g=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left;p.left=y==="fontSize"?"1em":d[c]||0;d[c]=p.pixelLeft+"px";p.left=m;e.runtimeStyle.left=g}}}return d};e.fn.curStyles=function(){return e.curStyles(this[0],e.makeArray(arguments))}})(jQuery);(function(e){e.Drag.prototype.limit=function(t,n){var r=t.curStyles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft"),i=new e.Vector(parseInt(r.borderLeftWidth,10)+parseInt(r.paddingLeft,10)||0,parseInt(r.borderTopWidth,10)+parseInt(r.paddingTop,10)||0);this._limit={offset:t.offsetv().plus(i),size:t.dimensionsv(),center:n===true?"both":n};return this};var t=e.Drag.prototype.position;e.Drag.prototype.position=function(e){if(this._limit){var n=this._limit,r=n.center&&n.center.toLowerCase(),i=this.movingElement.dimensionsv("outer"),s=r&&r!="x"?i.height()/2:0,o=r&&r!="y"?i.width()/2:0,u=n.offset.top(),a=n.offset.left(),f=n.size.height(),l=n.size.width();if(e.top()+s<u){e.top(u-s)}if(e.top()+i.height()-s>u+f){e.top(u+f-i.height()+s)}if(e.left()+o<a){e.left(a-o)}if(e.left()+i.width()-o>a+l){e.left(a+l-i.left()+o)}}t.call(this,e)}})(jQuery);(function(e){var t=function(e,t,n,r,i,s){return t>=r&&t<r+s&&e>=n&&e<n+i};e.fn.within=function(e,n,r){var i=[];this.each(function(){var s=jQuery(this);if(this==document.documentElement){return i.push(this)}var o=r?jQuery.data(this,"offsetCache")||jQuery.data(this,"offsetCache",s.offset()):s.offset();var u=t(e,n,o.left,o.top,this.offsetWidth,this.offsetHeight);if(u){i.push(this)}});return this.pushStack(jQuery.unique(i),"within",e+","+n)};e.fn.withinBox=function(e,t,n,r,i){var s=[];this.each(function(){var o=jQuery(this);if(this==document.documentElement)return this.ret.push(this);var u=i?jQuery.data(this,"offset")||jQuery.data(this,"offset",o.offset()):o.offset();var a=o.width(),f=o.height();res=!(u.top>t+r||u.top+f<t||u.left>e+n||u.left+a<e);if(res)s.push(this)});return this.pushStack(jQuery.unique(s),"withinBox",jQuery.makeArray(arguments).join(","))}})(jQuery);(function(e){jQuery.fn.compare=function(e){try{e=e.jquery?e[0]:e}catch(t){return null}if(window.HTMLElement){var n=HTMLElement.prototype.toString.call(e);if(n=="[xpconnect wrapped native prototype]"||n=="[object XULElement]"||n==="[object Window]"){return null}}if(this[0].compareDocumentPosition){return this[0].compareDocumentPosition(e)}if(this[0]==document&&e!=document)return 8;var r=(this[0]!==e&&this[0].contains(e)&&16)+(this[0]!=e&&e.contains(this[0])&&8),i=document.documentElement;if(this[0].sourceIndex){r+=this[0].sourceIndex<e.sourceIndex&&4;r+=this[0].sourceIndex>e.sourceIndex&&2;r+=(this[0].ownerDocument!==e.ownerDocument||this[0]!=i&&this[0].sourceIndex<=0||e!=i&&e.sourceIndex<=0)&&1}else{var s=document.createRange(),o=document.createRange(),u;s.selectNode(this[0]);o.selectNode(e);u=s.compareBoundaryPoints(Range.START_TO_START,o)}return r}})(jQuery);(function(e){var t=e.event;var n=["dropover","dropon","dropout","dropinit","dropmove","dropend"];e.Drop=function(t,n){jQuery.extend(this,t);this.element=e(n)};e.each(n,function(){t.special[this]={add:function(t){var n=e(this),r=n.data("dropEventCount")||0;n.data("dropEventCount",r+1);if(r==0){e.Drop.addElement(this)}},remove:function(){var t=e(this),n=t.data("dropEventCount")||0;t.data("dropEventCount",n-1);if(n<=1){e.Drop.removeElement(this)}}}});e.extend(e.Drop,{lowerName:"drop",_rootElements:[],_elements:e(),last_active:[],endName:"dropon",addElement:function(e){for(var t=0;t<this._rootElements.length;t++){if(e==this._rootElements[t])return}this._rootElements.push(e)},removeElement:function(e){for(var t=0;t<this._rootElements.length;t++){if(e==this._rootElements[t]){this._rootElements.splice(t,1);return}}},sortByDeepestChild:function(e,t){var n=e.element.compare(t.element);if(n&16||n&4)return 1;if(n&8||n&2)return-1;return 0},isAffected:function(e,t,n){return n.element!=t.element&&n.element.within(e[0],e[1],n._cache).length==1},deactivate:function(e,t,n){t.out(n,e);e.callHandlers(this.lowerName+"out",e.element[0],n,t)},activate:function(e,t,n){t.over(n,e);e.callHandlers(this.lowerName+"over",e.element[0],n,t)},move:function(e,t,n){e.callHandlers(this.lowerName+"move",e.element[0],n,t)},compile:function(t,r){if(!this.dragging&&!r){return}else if(!this.dragging){this.dragging=r;this.last_active=[]}var i,s,o,u,a=[],f=this.dragging;for(var l=0;l<this._rootElements.length;l++){i=this._rootElements[l];var s=e.event.findBySelector(i,n);for(o in s){u=o?jQuery(o,i):[i];for(var c=0;c<u.length;c++){if(this.addCallbacks(u[c],s[o],f)){a.push(u[c])}}}}this.add(a,t,f)},addCallbacks:function(t,n,r){var i=e.data(t,"_dropData");if(!i){e.data(t,"_dropData",new e.Drop(n,t));return true}else if(!r){var s=i;for(var o in n){s[o]=s[o]?s[o].concat(n[o]):n[o]}return false}},add:function(t,n,r,i){var s=0,o;while(s<t.length){o=e.data(t[s],"_dropData");o.callHandlers(this.lowerName+"init",t[s],n,r);if(o._canceled){t.splice(s,1)}else{s++}}this._elements.push.apply(this._elements,t)},show:function(t,n,r){var i=n.element;if(!this._elements.length)return;var s,o=[],u=true,a=0,f,l,c,h,p=this.last_active,d=[],v=this,m;while(a<this._elements.length){m=e.data(this._elements[a],"_dropData");if(!m){this._elements.splice(a,1)}else{a++;if(v.isAffected(t,n,m)){o.push(m)}}}o.sort(this.sortByDeepestChild);r.stopRespondPropagate=function(){u=false};c=o.slice();this.last_active=o;for(f=0;f<p.length;f++){l=p[f];a=0;while(h=c[a]){if(l==h){c.splice(a,1);break}else{a++}}if(!h){this.deactivate(l,n,r)}if(!u)return}for(var a=0;a<c.length;a++){this.activate(c[a],n,r);if(!u)return}for(a=0;a<o.length;a++){this.move(o[a],n,r);if(!u)return}},end:function(t,n){var r,i,s=this.lowerName+"end",o;for(var u=0;u<this.last_active.length;u++){i=this.last_active[u];if(this.isAffected(t.vector(),n,i)&&i[this.endName]){i.callHandlers(this.endName,null,t,n)}}for(var a=0;a<this._elements.length;a++){o=e.data(this._elements[a],"_dropData");o&&o.callHandlers(s,null,t,n)}this.clear()},clear:function(){this._elements.each(function(){e.removeData(this,"_dropData")});this._elements=e();delete this.dragging}});e.Drag.responder=e.Drop;e.extend(e.Drop.prototype,{callHandlers:function(e,t,n,r){var i=this[e]?this[e].length:0;for(var s=0;s<i;s++){this[e][s].call(t||this.element[0],n,this,r)}},cache:function(e){this._cache=e!=null?e:true},cancel:function(){this._canceled=true}})})(jQuery);(function(e){e.Drag.prototype.scrolls=function(t,n){var t=e(t);for(var r=0;r<t.length;r++){this.constructor.responder._elements.push(t.eq(r).data("_dropData",new e.Scrollable(t[r],n))[0])}},e.Scrollable=function(t,n){this.element=jQuery(t);this.options=e.extend({distance:30,delta:function(e,t){return(t-e)/2},direction:"xy"},n);this.x=this.options.direction.indexOf("x")!=-1;this.y=this.options.direction.indexOf("y")!=-1};e.extend(e.Scrollable.prototype,{init:function(e){this.element=jQuery(e)},callHandlers:function(e,t,n,r){this[e](t||this.element[0],n,this,r)},dropover:function(){},dropon:function(){this.clear_timeout()},dropout:function(){this.clear_timeout()},dropinit:function(){},dropend:function(){},clear_timeout:function(){if(this.interval){clearTimeout(this.interval);this.interval=null}},distance:function(e){return(30-e)/2},dropmove:function(t,n,r,i){this.clear_timeout();var s=n.vector(),o=e(t==document.documentElement?window:t),u=o.dimensionsv("outer"),a=o.offsetv(),f=a.y()+u.y()-s.y(),l=s.y()-a.y(),c=a.x()+u.x()-s.x(),h=s.x()-a.x(),p=0,d=0,v=this.options.distance;if(f<v&&this.y)d=this.options.delta(f,v);else if(l<v&&this.y)d=-this.options.delta(l,v);if(c<v&&this.options&&this.x)p=this.options.delta(c,v);else if(h<v&&this.x)p=-this.options.delta(h,v);if(p||d){var m=this;this.interval=setTimeout(function(){m.move(e(t),i.movingElement,p,d,n,n.clientX,n.clientY,n.screenX,n.screenY)},15)}},move:function(t,n,r,i,s){t.scrollTop(t.scrollTop()+i);t.scrollLeft(t.scrollLeft()+r);n.trigger(e.event.fix({type:"mousemove",clientX:s.clientX,clientY:s.clientY,screenX:s.screenX,screenY:s.screenY,pageX:s.pageX,pageY:s.pageY}))}})})(jQuery);(function(e){var t=function(e,t){return Math.round(e/t)*t};e.Drag.prototype.step=function(t,n,r){if(typeof t=="number"){t={x:t,y:t}}n=n||e(document.body);this._step=t;var i=n.curStyles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft");var s=parseInt(i.borderTopWidth)+parseInt(i.paddingTop),o=parseInt(i.borderLeftWidth)+parseInt(i.paddingLeft);this._step.offset=n.offsetv().plus(o,s);this._step.center=r;return this};var n=e.Drag.prototype.position;e.Drag.prototype.position=function(e){if(this._step){var r=this._step,i=r.center&&r.center.toLowerCase(),s=this.movingElement.dimensionsv("outer"),o=r.offset.top()-(i&&i!="x"?s.height()/2:0),u=r.offset.left()-(i&&i!="y"?s.width()/2:0);if(this._step.x){e.left(Math.round(u+t(e.left()-u,this._step.x)))}if(this._step.y){e.top(Math.round(o+t(e.top()-o,this._step.y)))}}n.call(this,e)}})(jQuery);(function(e){e.Hover=function(){this._delay=e.Hover.delay;this._distance=e.Hover.distance;this._leave=e.Hover.leave};e.extend(e.Hover,{delay:100,distance:10,leave:0});e.extend(e.Hover.prototype,{delay:function(e){this._delay=e;return this},distance:function(e){this._distance=e;return this},leave:function(e){this._leave=e;return this}});var t=e.event,n=t.handle,r=function(n){var r=n.delegateTarget||n.currentTarget;var i=n.handleObj.selector;if(e.data(r,"_hover"+i)){return}e.data(r,"_hover"+i,true);var s={pageX:n.pageX,pageY:n.pageY},o=0,u,a=this,f=false,l=n,c=new e.Hover,h,p=function(){e.each(t.find(r,["hoverleave"],i),function(){this.call(a,n,c)});m()},d=function(e){clearTimeout(h);o+=Math.pow(e.pageX-s.pageX,2)+Math.pow(e.pageY-s.pageY,2);s={pageX:e.pageX,pageY:e.pageY};l=e},v=function(e){clearTimeout(u);if(f){if(c._leave===0){p()}else{clearTimeout(h);h=setTimeout(function(){p()},c._leave)}}else{m()}},m=function(){e(a).unbind("mouseleave",v);e(a).unbind("mousemove",d);e.removeData(r,"_hover"+i)};e(a).bind("mousemove",d).bind("mouseleave",v);e.each(t.find(r,["hoverinit"],i),function(){this.call(a,n,c)});u=setTimeout(function(){if(o<c._distance&&e(a).queue().length==0){e.each(t.find(r,["hoverenter"],i),function(){this.call(a,l,c)});f=true;return}else{o=0;u=setTimeout(arguments.callee,c._delay)}},c._delay)};t.setupHelper(["hoverinit","hoverenter","hoverleave","hovermove"],"mouseenter",r)})(jQuery);(function(e){var t=e(),n=0,r=e(window),i=0,s=0,o;e(function(){i=r.width();s=r.height()});e.event.special.resize={setup:function(n){if(this!==window){t.push(this);e.unique(t)}return this!==window},teardown:function(){t=t.not(this);return this!==window},add:function(u){var a=u.handler;u.origHandler=a;u.handler=function(a,f){var l=this===window;if(l&&a.originalEvent){var c=r.width(),h=r.height();if(c!=i||h!=s){i=c;s=h;clearTimeout(o);o=setTimeout(function(){r.trigger("resize")},1)}return}if(n===0){n++;var p=f===false?a.target:this;e.event.handle.call(p,a);if(a.isPropagationStopped()){n--;return}var d=t.index(this),v=t.length,m,g;while(++d<v&&(m=t[d])&&(l||e.contains(p,m))){e.event.handle.call(m,a);if(a.isPropagationStopped()){while(++d<v&&(g=t[d])){if(!e.contains(m,g)){d--;break}}}}a.stopImmediatePropagation();n--}else{u.origHandler.call(this,a,f)}}}};e([document,window]).bind("resize",function(){})})(jQuery);(function(e){var t,n=/\.(.*)$/,r=function(){return false},i=function(){return true};e.Event.prototype.isPaused=r;e.Event.prototype.pause=function(){this.pausedState={isDefaultPrevented:this.isDefaultPrevented()?i:r,isPropagationStopped:this.isPropagationStopped()?i:r};this.stopImmediatePropagation();this.preventDefault();this.isPaused=i};e.Event.prototype.resume=function(){var t=this.handleObj,n=this.currentTarget;var i=jQuery.event.special[t.origType],s=i&&i.handle;if(!i){jQuery.event.special[t.origType]={}}jQuery.event.special[t.origType].handle=function(e){if(e.handleObj===t&&e.currentTarget===n){if(!i){delete jQuery.event.special[t.origType]}else{jQuery.event.special[t.origType].handle=s}}};delete this.pausedState;this.isPaused=this.isImmediatePropagationStopped=r;if(!this.isPropagationStopped()){e.event.trigger(this,[],this.target)}}})(jQuery);(function(e){var t=function(e){return e.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},n=e.makeArray,r=1;var i=e.View=function(t,r,i,s){if(typeof i==="function"){s=i;i=undefined}var l=a(r);if(l.length){var c=e.Deferred();l.push(o(t,true));e.when.apply(e,l).then(function(e){var t=n(arguments),o=t.pop()[0],a;if(u(r)){r=f(e)}else{for(var l in r){if(u(r[l])){r[l]=f(t.shift())}}}a=o(r,i);c.resolve(a);s&&s(a)});return c.promise()}else{var h,p=typeof s==="function",c=o(t,p);if(p){h=c;c.done(function(e){s(e(r,i))})}else{c.done(function(e){h=e(r,i)})}return h}},s=function(e,t){if(!e.match(/[^\s]/)){throw"$.View ERROR: There is no template or an empty template at "+t}},o=function(t,n){return e.ajax({url:t,dataType:"view",async:n})},u=function(t){return t&&e.isFunction(t.always)},a=function(e){var t=[];if(u(e)){return[e]}else{for(var n in e){if(u(e[n])){t.push(e[n])}}}return t},f=function(t){return e.isArray(t)&&t.length===3&&t[1]==="success"?t[0]:t};e.ajaxTransport("view",function(n,r){var o=r.url,u=o.match(/\.[\w\d]+$/),a,f,l,c,h=function(e){var t=a.renderer(l,e);if(i.cache){i.cached[l]=t}return{view:t}};if(f=document.getElementById(o)){u="."+f.type.match(/\/(x\-)?(.+)/)[2]}if(!u){u=i.ext;o=o+i.ext}l=t(o);if(o.match(/^\/\//)){var p=o.substr(2);o=typeof steal==="undefined"?o="/"+p:steal.root.mapJoin(p)+""}a=i.types[u];return{send:function(t,n){if(i.cached[l]){return n(200,"success",{view:i.cached[l]})}else if(f){n(200,"success",h(f.innerHTML))}else{c=e.ajax({async:r.async,url:o,dataType:"text",error:function(){s("",o);n(404)},success:function(e){s(e,o);n(200,"success",h(e))}})}},abort:function(){c&&c.abort()}}});e.extend(i,{hookups:{},hookup:function(e){var t=++r;i.hookups[t]=e;return t},cached:{},cache:true,register:function(e){this.types["."+e.suffix]=e;if(window.steal){steal.type(e.suffix+" view js",function(e,n,r){var s=i.types["."+e.type],o=t(e.rootSrc+"");e.text=s.script(o,e.text);n()})}},types:{},ext:".ejs",registerScript:function(e,t,n){return"$.View.preload('"+t+"',"+i.types["."+e].script(t,n)+");"},preload:function(e,t){i.cached[e]=function(e,n){return t.call(e,e,n)}}});if(window.steal){steal.type("view js",function(e,n,r){var s=i.types["."+e.type],o=t(e.rootSrc+"");e.text="steal('"+(s.plugin||"jquery/view/"+e.type)+"').then(function($){"+"$.View.preload('"+o+"',"+e.text+");\n})";n()})}var l,c,h,p,d,v,m,g,y={val:true,text:true};l=function(t){var r=e.fn[t];e.fn[t]=function(){var e=n(arguments),s,o,a=this,f;if(u(e[0])){e[0].done(function(e){c.call(a,[e],r)});return this}else if(h(e)){if(s=v(e)){o=e[s];e[s]=function(e){c.call(a,[e],r);o.call(a,e)};i.apply(i,e);return this}f=i.apply(i,e);if(!u(f)){e=[f]}else{f.done(function(e){c.call(a,[e],r)});return this}}return y[t]?r.apply(this,e):c.call(this,e,r)}};c=function(t,n){var r,s,o;for(var u in i.hookups){break}if(u&&t[0]&&p(t[0])){o=i.hookups;i.hookups={};t[0]=e(t[0])}r=n.apply(this,t);if(o){m(t[0],o)}return r};h=function(e){var t=typeof e[1];return typeof e[0]=="string"&&(t=="object"||t=="function")&&!d(e[1])};d=function(e){return e.nodeType||e.jquery};p=function(t){if(d(t)){return true}else if(typeof t==="string"){t=e.trim(t);return t.substr(0,1)==="<"&&t.substr(t.length-1,1)===">"&&t.length>=3}else{return false}};v=function(e){return typeof e[3]==="function"?3:typeof e[2]==="function"&&2};m=function(t,n){var r,s,o=0,u,a;t=t.filter(function(){return this.nodeType!=3});r=t.add("[data-view-id]",t);s=r.length;for(;o<s;o++){if(r[o].getAttribute&&(u=r[o].getAttribute("data-view-id"))&&(a=n[u])){a(r[o],u);delete n[u];r[o].removeAttribute("data-view-id")}}e.extend(i.hookups,n)};e.fn.hookup=function(){var e=i.hookups;i.hookups={};m(this,e);return this};e.each(["prepend","append","after","before","text","html","replaceWith","val"],function(e,t){l(t)})})(jQuery);(function(e){e.String.rsplit=function(e,t){var n=t.exec(e),r=[],i,s;while(n!==null){i=n.index;s=t.lastIndex;if(i!==0){r.push(e.substring(0,i));e=e.slice(i)}r.push(n[0]);e=e.slice(n[0].length);n=t.exec(e)}if(e!==""){r.push(e)}return r}})(jQuery);(function($){var myEval=function(script){eval(script)},rSplit=$.String.rsplit,extend=$.extend,isArray=$.isArray,returnReg=/\r\n/g,retReg=/\r/g,newReg=/\n/g,nReg=/\n/,slashReg=/\\/g,quoteReg=/"/g,singleQuoteReg=/'/g,tabReg=/\t/g,leftBracket=/\{/g,rightBracket=/\}/g,quickFunc=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,clean=function(e){return e.replace(slashReg,"\\\\").replace(newReg,"\\n").replace(quoteReg,'\\"').replace(tabReg,"\\t")},escapeHTML=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(quoteReg,"&#34;").replace(singleQuoteReg,"&#39;")},$View=$.View,bracketNum=function(e){var t=e.match(leftBracket),n=e.match(rightBracket);return(t?t.length:0)-(n?n.length:0)},EJS=function(e){if(this.constructor!=EJS){var t=new EJS(e);return function(e,n){return t.render(e,n)}}if(typeof e=="function"){this.template={fn:e};return}extend(this,EJS.options,e);this.template=compile(this.text,this.type,this.name)};window.SCRUMBAN.jQuery&&(window.SCRUMBAN.jQuery.EJS=EJS);EJS.prototype.render=function(e,t){e=e||{};this._extra_helpers=t;var n=new EJS.Helpers(e,t||{});return this.template.fn.call(e,e,n)};extend(EJS,{text:function(e){if(typeof e=="string"){return e}if(e===null||e===undefined){return""}var t=e.hookup&&function(t,n){e.hookup.call(e,t,n)}||typeof e=="function"&&e||isArray(e)&&function(t,n){for(var r=0;r<e.length;r++){e[r].hookup?e[r].hookup(t,n):e[r](t,n)}};if(t){return"data-view-id='"+$View.hookup(t)+"'"}return e.toString?e.toString():""},clean:function(e){if(typeof e=="string"){return escapeHTML(e)}else if(typeof e=="number"){return e}else{return EJS.text(e)}},options:{type:"<",ext:".ejs"}});var scan=function(e,t,n){var r=rSplit(t,nReg),i=0;for(;i<r.length;i++){scanline(e,r[i],n)}},scanline=function(e,t,n){e.lines++;var r=rSplit(t,e.splitter),i;for(var s=0;s<r.length;s++){i=r[s];if(i!==null){n(i,e)}}},makeScanner=function(e,t){var n={};extend(n,{left:e+"%",right:"%"+t,dLeft:e+"%%",dRight:"%%"+t,eeLeft:e+"%==",eLeft:e+"%=",cmnt:e+"%#",scan:scan,lines:0});n.splitter=new RegExp("("+[n.dLeft,n.dRight,n.eeLeft,n.eLeft,n.cmnt,n.left,n.right+"\n",n.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return n},compile=function(e,t,n){e=e.replace(returnReg,"\n").replace(retReg,"\n");t=t||"<";var r="___v1ew.push(",i=r,s="var ___v1ew = [];",o="return ___v1ew.join('')",u=new EJS.Buffer([s],[]),a="",f=function(e){u.push(r,'"',clean(e),'");')},l=null,c=function(){a=""},h="));",p=[];scan(makeScanner(t,t==="["?"]":">"),e||"",function(e,t){var n;if(l===null){switch(e){case"\n":a=a+"\n";f(a);u.cr();c();break;case t.left:case t.eLeft:case t.eeLeft:case t.cmnt:l=e;if(a.length>0){f(a)}c();break;case t.dLeft:a+=t.left;break;default:a+=e;break}}else{switch(e){case t.right:switch(l){case t.left:n=bracketNum(a);var r=p.length&&n==-1?p.pop():";";if(r===h){u.push(o)}u.push(a,r);if(n===1){p.push(";")}break;case t.eLeft:n=bracketNum(a);if(n){p.push(h)}if(quickFunc.test(a)){var d=a.match(quickFunc);a="function(__){var "+d[1]+"=$(__);"+d[2]+"}"}u.push(i,"jQuery.EJS.clean(",a,n?s:h);break;case t.eeLeft:n=bracketNum(a);if(n){p.push(h)}u.push(i,"jQuery.EJS.text(",a,n?s:h);break}l=null;c();break;case t.dRight:a+=t.right;break;default:a+=e;break}}});if(a.length>0){u.push(r,'"',clean(a)+'");')}var d=u.close(),v={out:"try { with(_VIEW) { with (_CONTEXT) {"+d+" "+o+"}}}catch(e){e.lineNumber=null;throw e;}"};myEval.call(v,"this.fn = (function(_CONTEXT,_VIEW){"+v.out+"});\r\n//@ sourceURL="+n+".js");return v};EJS.Buffer=function(e,t){this.line=[];this.script=[];this.post=t;this.push.apply(this,e)};EJS.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){if(this.line.length>0){this.script.push(this.line.join(""));this.line=[]}this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};EJS.Helpers=function(e,t){this._data=e;this._extras=t;extend(this,t)};EJS.Helpers.prototype={plugin:function(e){var t=$.makeArray(arguments),n=t.shift();return function(e){var r=$(e);r[n].apply(r,t)}},view:function(e,t,n){n=n||this._extras;t=t||this._data;return $View(e,t,n)}};$View.register({suffix:"ejs",script:function(e,t){return"jQuery.EJS(function(_CONTEXT,_VIEW) { "+(new EJS({text:t,name:e})).template.out+" })"},renderer:function(e,t){return EJS({text:t,name:e})}})})(jQuery);(function(){Jaml=function(){return{templates:{},helpers:{},register:function(e,t){this.templates[e]=t},render:function(e,t){var n=this.templates[e],r=new Jaml.Template(n);return r.render(t)},registerHelper:function(e,t){this.helpers[e]=t}}}();Jaml.Node=function(e){this.tagName=e;this.attributes={};this.children=[]};Jaml.Node.prototype={setAttributes:function(e){for(var t in e){var n=t=="cls"?"class":t;this.attributes[n]=e[t]}},addChild:function(e){this.children.push(e)},render:function(e){e=e||0;var t=[],n=[],r=this instanceof Jaml.TextNode,i=this.multiLineTag();for(var s in this.attributes){n.push(s+"="+this.attributes[s])}if(!r)t.push(this.getPadding(e));t.push("<"+this.tagName);for(var s in this.attributes){t.push(" "+s+'="'+this.attributes[s]+'"')}if(this.isSelfClosing()){t.push(" />\n")}else{t.push(">");if(i)t.push("\n");for(var o=0;o<this.children.length;o++){t.push(this.children[o].render(e+2))}if(i)t.push(this.getPadding(e));t.push("</",this.tagName,">\n")}return t.join("")},multiLineTag:function(){var e=this.children.length,t=e>0;if(e==1&&this.children[0]instanceof Jaml.TextNode)t=false;return t},getPadding:function(e){return(new Array(e+1)).join(" ")},isSelfClosing:function(){var e=false;for(var t=this.selfClosingTags.length-1;t>=0;t--){if(this.tagName==this.selfClosingTags[t])e=true}return e},selfClosingTags:["img","meta","br","hr"]};Jaml.TextNode=function(e){this.text=e};Jaml.TextNode.prototype={render:function(){return this.text}};Jaml.Template=function(e){this.tpl=e;this.nodes=[]};Jaml.Template.prototype={render:function(data){data=data||{};if(data.constructor.toString().indexOf("Array")==-1){data=[data]}with(this){for(var i=0;i<data.length;i++){eval("("+this.tpl.toString()+")(data[i])")}}var roots=this.getRoots(),output="";for(var i=0;i<roots.length;i++){output+=roots[i].render()}return output},getRoots:function(){var e=[];for(var t=0;t<this.nodes.length;t++){var n=this.nodes[t];if(n.parent==undefined)e.push(n)}return e},tags:["html","head","body","script","meta","title","link","script","div","p","span","a","img","br","hr","table","tr","th","td","thead","tbody","ul","ol","li","dl","dt","dd","h1","h2","h3","h4","h5","h6","h7","form","input","label"]};(function(){var e=Jaml.Template.prototype.tags;for(var t=e.length-1;t>=0;t--){var n=e[t];var r=function(e){return function(t){var n=new Jaml.Node(e);var r=typeof t=="object"&&!(t instanceof Jaml.Node)&&!(t instanceof Jaml.TextNode);if(r)n.setAttributes(t);var i=r?1:0;for(var s=i;s<arguments.length;s++){var o=arguments[s];if(typeof o=="string"||o==undefined){o=new Jaml.TextNode(o||"")}if(o instanceof Jaml.Node||o instanceof Jaml.TextNode){o.parent=n}n.addChild(o)}this.nodes.push(n);return n}};Jaml.Template.prototype[n]=r(n)}})();$.View.register({suffix:"jaml",script:function(e,t){return"((function(){ Jaml.register("+e+", "+t+"); return function(data){return Jaml.render("+e+", data)} })())"},renderer:function(id,text){var func;eval("func = ("+text+")");Jaml.register(id,func);return function(e){return Jaml.render(id,e)}}})})(jQuery);(function(){function t(e,t){var n="var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%})/g,"    ").split("'").join("\\'").split("   ").join("'").replace(/{%=(.+?)%}/g,"',$1,'").split("{%").join("');").split("%}").join("p.push('")+"');}return p.join('');";var r=new Function("obj",n);r.body=n;return t?r(t):r}var e={};$.View.register({suffix:"micro",renderer:function(e,n){var r=t(n);return function(e){return r(e)}},script:function(e,n){return"function(obj){"+t(n).body+"}"}});jQuery.View.ext=".micro"})(jQuery);(function(){function l(e,t,n,s){var o={data:s||(t?t.data:{}),_wrap:t?t._wrap:null,tmpl:null,parent:t||null,nodes:[],calls:y,nest:b,wrap:w,html:E,update:S};if(e){jQuery.extend(o,e,{nodes:[],parent:t})}if(n){o.tmpl=n;o._ctnt=o._ctnt||o.tmpl(jQuery,o);o.key=++u;(f.length?i:r)[u]=o}return o}function c(e,n,r){var i,s=r?jQuery.map(r,function(n){return typeof n==="string"?e.key?n.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+t+'="'+e.key+'" $2'):n:c(n,e,n._ctnt)}):e;if(n){return s}s=s.join("");s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(e,t,n,r){i=jQuery(n).get();g(i);if(t){i=h(t).concat(i)}if(r){i=i.concat(h(r))}});return i?i:h(s)}function h(e){var t=document.createElement("div");t.innerHTML=e;return jQuery.makeArray(t.childNodes)}function p(e){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;"+"with($data){_.push('"+jQuery.trim(e).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(e,t,n,r,i,s,o){var u=jQuery.tmpl.tag[n],a,f,l;if(!u){throw"Template command not found: "+n}a=u._default||[];if(s&&!/\w$/.test(i)){i+=s;s=""}if(i){i=v(i);o=o?","+v(o)+")":s?")":"";f=s?i.indexOf(".")>-1?i+s:"("+i+").call($item"+o:i;l=s?f:"(typeof("+i+")==='function'?("+i+").call($item):("+i+"))"}else{l=f=a.$1||"null"}r=v(r);return"');"+u[t?"close":"open"].split("$notnull_1").join(i?"typeof("+i+")!=='undefined' && ("+i+")!=null":"true").split("$1a").join(l).split("$1").join(f).split("$2").join(r?r.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(e,t,n,r){r=r?","+r+")":n?")":"";return r?"("+t+").call($item"+r:e}):a.$2||"")+"_.push('"})+"');}return _;")}function d(e,t){e._wrap=c(e,true,jQuery.isArray(t)?t:[n.test(t)?t:jQuery(t).html()]).join("")}function v(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function m(e){var t=document.createElement("div");t.appendChild(e.cloneNode(true));return t.innerHTML}function g(e){function d(e){function d(e){e=e+n;h=f[e]=f[e]||l(h,r[h.parent.key+n]||h.parent,null,true)}var s,o=e,c,h,p;if(p=e.getAttribute(t)){while(o.parentNode&&(o=o.parentNode).nodeType===1&&!(s=o.getAttribute(t))){}if(s!==p){o=o.parentNode?o.nodeType===11?0:o.getAttribute(t)||0:0;if(!(h=r[p])){h=i[p];h=l(h,r[o]||i[o],null,true);h.key=++u;r[u]=h}if(a){d(p)}}e.removeAttribute(t)}else if(a&&(h=jQuery.data(e,"tmplItem"))){d(h.key);r[h.key]=h;o=jQuery.data(e.parentNode,"tmplItem");o=o?o.key:0}if(h){c=h;while(c&&c.key!=o){c.nodes.push(e);c=c.parent}delete h._ctnt;delete h._wrap;jQuery.data(e,"tmplItem",h)}}var n="_"+a,s,o,f={},c,h,p;for(c=0,h=e.length;c<h;c++){if((s=e[c]).nodeType!==1){continue}o=s.getElementsByTagName("*");for(p=o.length-1;p>=0;p--){d(o[p])}d(s)}}function y(e,t,n,r){if(!e){return f.pop()}f.push({_:e,tmpl:t,item:this,data:n,options:r})}function b(e,t,n){return jQuery.tmpl(jQuery.template(e),t,n,this)}function w(e,t){var n=e.options||{};n.wrapped=t;return jQuery.tmpl(jQuery.template(e.tmpl),e.data,n,e.item)}function E(e,t){var n=this._wrap;return jQuery.map(jQuery(jQuery.isArray(n)?n.join(""):n).filter(e||"*"),function(e){return t?e.innerText||e.textContent:e.outerHTML||m(e)})}function S(){var e=this.nodes;jQuery.tmpl(null,null,null,this).insertBefore(e[0]);jQuery(e).remove()}var e=jQuery.fn.domManip,t="_tmplitem",n=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,r={},i={},s,o={key:0,data:{}},u=0,a=0,f=[];jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){jQuery.fn[e]=function(n){var i=[],o=jQuery(n),u,f,l,c,h=this.length===1&&this[0].parentNode;s=r||{};if(h&&h.nodeType===11&&h.childNodes.length===1&&o.length===1){o[t](this[0]);i=this}else{for(f=0,l=o.length;f<l;f++){a=f;u=(f>0?this.clone(true):this).get();jQuery.fn[t].apply(jQuery(o[f]),u);i=i.concat(u)}a=0;i=this.pushStack(i,e,o.selector)}c=s;s=null;jQuery.tmpl.complete(c);return i}});jQuery.fn.extend({tmpl:function(e,t,n){return jQuery.tmpl(this[0],e,t,n)},tmplItem:function(){return jQuery.tmplItem(this[0])},template:function(e){return jQuery.template(e,this[0])},domManip:function(t,n,i,o){if(t[0]&&t[0].nodeType){var u=jQuery.makeArray(arguments),f=t.length,l=0,c;while(l<f&&!(c=jQuery.data(t[l++],"tmplItem"))){}if(f>1){u[0]=[jQuery.makeArray(t)]}if(c&&a){u[2]=function(e){jQuery.tmpl.afterManip(this,e,i)}}e.apply(this,u)}else{e.apply(this,arguments)}a=0;if(!s){jQuery.tmpl.complete(r)}return this}});jQuery.extend({tmpl:function(e,t,n,s){var u,a=!s;if(a){s=o;e=jQuery.template[e]||jQuery.template(null,e);i={}}else if(!e){e=s.tmpl;r[s.key]=s;s.nodes=[];if(s.wrapped){d(s,s.wrapped)}return jQuery(c(s,null,s.tmpl(jQuery,s)))}if(!e){return[]}if(typeof t==="function"){t=t.call(s||{})}if(n&&n.wrapped){d(n,n.wrapped)}u=jQuery.isArray(t)?jQuery.map(t,function(t){return t?l(n,s,e,t):null}):[l(n,s,e,t)];return a?jQuery(c(s,null,u)):u},tmplItem:function(e){var t;if(e instanceof jQuery){e=e[0]}while(e&&e.nodeType===1&&!(t=jQuery.data(e,"tmplItem"))&&(e=e.parentNode)){}return t||o},template:function(e,t){if(t){if(typeof t==="string"){t=p(t)}else if(t instanceof jQuery){t=t[0]||{}}if(t.nodeType){t=jQuery.data(t,"tmpl")||jQuery.data(t,"tmpl",p(t.innerHTML))}return typeof e==="string"?jQuery.template[e]=t:t}return e?typeof e!=="string"?jQuery.template(null,e):jQuery.template[e]||jQuery.template(null,n.test(e)?e:jQuery(e)):null},encode:function(e){return(""+e).split("<").join("<").split(">").join(">").split('"').join("&#34;").split("'").join("&#39;")}});jQuery.extend(jQuery.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(e){r={}},afterManip:function(t,n,r){var i=n.nodeType===11?jQuery.makeArray(n.childNodes):n.nodeType===1?[n]:[];r.call(t,n);g(i);a++}});$.View.register({suffix:"tmpl",renderer:function(e,t){var n=$.template(null,t);return function(e){return n.call($,$,{data:e}).join("")}},script:function(e,t){var n=$.template(null,t);return"function(data){return ("+n+").call(jQuery, jQuery, {data: data}).join(''); }"}});jQuery.View.ext=".tmpl"})(jQuery);(function($){$.toJSON=function(e,t,n,r){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(e,t,n);if(!r&&$.isFunction(t))e=t("",e);if(typeof n=="number")n="          ".substring(0,n);n=typeof n=="string"?n.substring(0,10):"";var i=typeof e;if(e===null)return"null";if(i=="undefined"||i=="function")return undefined;if(i=="number"||i=="boolean")return e+"";if(i=="string")return $.quoteString(e);if(i=="object"){if(typeof e.toJSON=="function")return $.toJSON(e.toJSON(),t,n,true);if(e.constructor===Date){var s=e.getUTCMonth()+1;if(s<10)s="0"+s;var o=e.getUTCDate();if(o<10)o="0"+o;var u=e.getUTCFullYear();var a=e.getUTCHours();if(a<10)a="0"+a;var f=e.getUTCMinutes();if(f<10)f="0"+f;var l=e.getUTCSeconds();if(l<10)l="0"+l;var c=e.getUTCMilliseconds();if(c<100)c="0"+c;if(c<10)c="0"+c;return'"'+u+"-"+s+"-"+o+"T"+a+":"+f+":"+l+"."+c+'Z"'}var h=$.isFunction(t)?function(e,n){return t(e,n)}:function(e,t){return t},p=n?"\n":"",d=n?" ":"";if(e.constructor===Array){var v=[];for(var m=0;m<e.length;m++)v.push(($.toJSON(h(m,e[m]),t,n,true)||"null").replace(/^/gm,n));return"["+p+v.join(","+p)+p+"]"}var g=[],y;if($.isArray(t)){y=$.map(t,function(e){return typeof e=="string"||typeof e=="number"?e+"":null})}for(var b in e){var w,E,i=typeof b;if(y&&$.inArray(b+"",y)==-1)continue;if(i=="number")w='"'+b+'"';else if(i=="string")w=$.quoteString(b);else continue;E=$.toJSON(h(b,e[b]),t,n,true);if(typeof E=="undefined")continue;g.push((w+":"+d+E).replace(/^/gm,n))}return"{"+p+g.join(","+p)+p+"}"}};$.evalJSON=function(src){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(src);return eval("("+src+")")};$.secureEvalJSON=function(src){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");else throw new SyntaxError("Error parsing JSON, source is not valid.")};$.quoteString=function(e){if(e.match(_escapeable)){return'"'+e.replace(_escapeable,function(e){var t=_meta[e];if(typeof t==="string")return t;t=e.charCodeAt();return"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)})+'"'}return'"'+e+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={"\b":"\\b","  ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(jQuery);(function(){jQuery.cookie=function(e,t,n){if(typeof t!="undefined"){n=n||{};if(t===null){t="";n.expires=-1}if(typeof t=="object"&&jQuery.toJSON){t=jQuery.toJSON(t)}var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var i;if(typeof n.expires=="number"){i=new Date;i.setTime(i.getTime()+n.expires*24*60*60*1e3)}else{i=n.expires}r="; expires="+i.toUTCString()}var s=n.path?"; path="+n.path:"";var o=n.domain?"; domain="+n.domain:"";var u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,s,o,u].join("")}else{var a=null;if(document.cookie&&document.cookie!=""){var f=document.cookie.split(";");for(var l=0;l<f.length;l++){var c=jQuery.trim(f[l]);if(c.substring(0,e.length+1)==e+"="){a=decodeURIComponent(c.substring(e.length+1));break}}}if(jQuery.evalJSON&&a&&a.match(/^\s*\{/)){try{a=jQuery.evalJSON(a)}catch(h){}}return a}}})(jQuery);(function(e){var t=/button|select/i,n={},r={width:["Left","Right"],height:["Top","Bottom"],oldOuterHeight:e.fn.outerHeight,oldOuterWidth:e.fn.outerWidth,oldInnerWidth:e.fn.innerWidth,oldInnerHeight:e.fn.innerHeight};e.each({width:"Width",height:"Height"},function(i,s){n[i]=function(n,s){var o=0;if(!t.test(n.nodeName)){var u=[];e.each(r[i],function(){var t=this;e.each(s,function(e,n){if(n)u.push(e+t+(e=="border"?"Width":""))})});e.each(e.curStyles(n,u),function(e,t){o+=parseFloat(t)||0})}return o};e.fn["outer"+s]=function(e,t){var o=this[0];if(typeof e=="number"){o&&this[i](e-n[i](o,{padding:true,border:true,margin:t}));return this}else{return o?r["oldOuter"+s].call(this,e):null}};e.fn["inner"+s]=function(e){var t=this[0];if(typeof e=="number"){t&&this[i](e-n[i](t,{padding:true}));return this}else{return t?r["oldInner"+s].call(this,e):null}};var o=function(t){return function(r){if(r.state==0){r.start=e(r.elem)[i]();r.end=r.end-n[i](r.elem,t)}r.elem.style[i]=r.pos*(r.end-r.start)+r.start+"px"}};e.fx.step["outer"+s]=o({padding:true,border:true});e.fx.step["outer"+s+"Margin"]=o({padding:true,border:true,margin:true});e.fx.step["inner"+s]=o({padding:true})})})(jQuery);(function(e){var t=e.isArray,n=function(t,n){var r=e.extend({},t);for(var s in r){var o=n[s]===undefined?n["*"]:n[s];if(i(r[s],undefined,o)){delete r[s]}}return r},r=function(e){var t=0;for(var n in e)t++;return t};e.Object={};var i=e.Object.same=function(n,r,o,u,a,f){var l=typeof n,c=t(n),h=typeof o,p;if(h=="string"||o===null){o=s[o];h="function"}if(h=="function"){return o(n,r,u,a)}o=o||{};if(f===-1){return l==="object"||n===r}if(l!==typeof r||c!==t(r)){return false}if(n===r){return true}if(c){if(n.length!==r.length){return false}for(var d=0;d<n.length;d++){p=o[d]===undefined?o["*"]:o[d];if(!i(n[d],r[d],n,r,p)){return false}}return true}else if(l==="object"||l==="function"){var v=e.extend({},r);for(var m in n){p=o[m]===undefined?o["*"]:o[m];if(!i(n[m],r[m],p,n,r,f===false?-1:undefined)){return false}delete v[m]}for(m in v){if(o[m]===undefined||!i(undefined,r[m],o[m],n,r,f===false?-1:undefined)){return false}}return true}return false};e.Object.subsets=function(t,n,i){var s=n.length,o=[],u=r(t),a;for(var f=0;f<s;f++){var l=n[f];if(e.Object.subset(t,l,i)){o.push(l)}}return o};e.Object.subset=function(e,t,n){var r=0,n=n||{};for(var s in t){if(!i(e[s],t[s],n[s],e,t)){return false}}return true};var s={"null":function(){return true},i:function(e,t){return(""+e).toLowerCase()==(""+t).toLowerCase()}}})(jQuery);(function(e){e.ajaxPrefilter(function(t,n,r){if(!e.fixture.on){return}var s=i(t);if(!t.fixture){if(window.location.protocol==="file:"){}return}if(typeof t.fixture==="string"&&e.fixture[t.fixture]){t.fixture=e.fixture[t.fixture]}if(typeof t.fixture=="string"){var o=t.fixture;if(/^\/\//.test(o)){o=steal.root.mapJoin(t.fixture.substr(2))+""}t.url=o;t.data=null;t.type="GET";if(!t.error){t.error=function(e,t,n){throw"fixtures.js Error "+t+" "+n}}}else{t.dataTypes.splice(0,0,"fixture");if(s){e.extend(n.data,s)}}});e.ajaxTransport("fixture",function(t,n){t.dataTypes.shift();var r=t.dataTypes[0],i;return{send:function(s,o){i=setTimeout(function(){var i=t.fixture(n,t,s);if(!e.isArray(i)){var u=[{}];u[0][r]=i;i=u}if(typeof i[0]!="number"){i.unshift(200,"success")}if(!i[2]||!i[2][r]){var u={};u[r]=i[2];i[2]=u}o.apply(null,i)},e.fixture.delay)},abort:function(){clearTimeout(i)}}});var t=/^(script|json|test|jsonp)$/,n=[],r=function(e,t){for(var r=0;r<n.length;r++){if(o._similar(e,n[r],t)){return r}}return-1},i=function(e){var t=r(e);if(t>-1){e.fixture=n[t].fixture;return o._getData(n[t].url,e.url)}},s=function(e){var t=e.data.id;if(t===undefined&&typeof e.data==="number"){t=e.data}if(t===undefined){e.url.replace(/\/(\d+)(\/|$|\.)/g,function(e,n){t=n})}if(t===undefined){t=e.url.replace(/\/(\w+)(\/|$|\.)/g,function(e,n){if(n!="update"){t=n}})}if(t===undefined){t=Math.round(Math.random()*1e3)}return t};var o=e.fixture=function(e,t){if(t!==undefined){if(typeof e=="string"){var i=e.match(/(GET|POST|PUT|DELETE) (.+)/i);if(!i){e={url:e}}else{e={url:i[2],type:i[1]}}}var s=r(e,!!t);if(s>-1){n.splice(s,1)}if(t==null){return}e.fixture=t;n.push(e)}};var u=e.String._regs.replacer;e.extend(e.fixture,{_similar:function(t,n,r){if(r){return e.Object.same(t,n,{fixture:null})}else{return e.Object.subset(t,n,e.fixture._compare)}},_compare:{url:function(e,t){return!!o._getData(t,e)},fixture:null,type:"i"},_getData:function(t,n){var r=[],i=t.replace(".","\\.").replace("?","\\?"),s=(new RegExp(i.replace(u,function(e,t){r.push(t);return"([^/]+)"})+"$")).exec(n),o={};if(!s){return null}s.shift();e.each(r,function(e,t){o[t]=s.shift()});return o},"-restUpdate":function(e){return[200,"succes",{id:s(e)},{location:e.url+"/"+s(e)}]},"-restDestroy":function(e,t){return{}},"-restCreate":function(e,t,n,r){var r=r||parseInt(Math.random()*1e5,10);return[200,"succes",{id:r},{location:e.url+"/"+r}]},make:function(t,n,r,i){if(typeof t==="string"){t=[t+"s",t]}var o=e.fixture["~"+t[0]]=[],u=function(e){for(var t=0;t<o.length;t++){if(e==o[t].id){return o[t]}}};for(var a=0;a<n;a++){var f=r(a,o);if(!f.id){f.id=a}o.push(f)}e.fixture["-"+t[0]]=function(t){var n=o.slice(0);t.data=t.data||{};e.each((t.data.order||[]).slice(0).reverse(),function(e,t){var r=t.split(" ");n=n.sort(function(e,t){if(r[1].toUpperCase()!=="ASC"){if(e[r[0]]<t[r[0]]){return 1}else if(e[r[0]]==t[r[0]]){return 0}else{return-1}}else{if(e[r[0]]<t[r[0]]){return-1}else if(e[r[0]]==t[r[0]]){return 0}else{return 1}}})});e.each((t.data.group||[]).slice(0).reverse(),function(e,t){var r=t.split(" ");n=n.sort(function(e,t){return e[r[0]]>t[r[0]]})});var r=parseInt(t.data.offset,10)||0,s=parseInt(t.data.limit,10)||o.length-r,u=0;for(var a in t.data){u=0;if(t.data[a]!==undefined&&(a.indexOf("Id")!=-1||a.indexOf("_id")!=-1)){while(u<n.length){if(t.data[a]!=n[u][a]){n.splice(u,1)}else{u++}}}}if(i){u=0;while(u<n.length){if(!i(n[u],t)){n.splice(u,1)}else{u++}}}return[{count:n.length,limit:t.data.limit,offset:t.data.offset,data:n.slice(r,r+s)}]};e.fixture["-"+t[1]]=function(e){var t=u(s(e));return t?[t]:[]};e.fixture["-"+t[1]+"Update"]=function(t,n){var r=s(t);e.extend(u(r),t.data);return e.fixture["-restUpdate"](t,n)};e.fixture["-"+t[1]+"Destroy"]=function(t,n){var r=s(t);for(var i=0;i<o.length;i++){if(o[i].id==r){o.splice(i,1);break}}e.extend(u(r),t.data);return e.fixture["-restDestroy"](t,n)};e.fixture["-"+t[1]+"Create"]=function(t,n){var i=r(o.length,o);e.extend(i,t.data);if(!i.id){i.id=o.length}o.push(i);return e.fixture["-restCreate"](t,n,undefined,i.id)};return{getId:s,findOne:u,find:function(e){return u(s(e))}}},rand:function(e,t,n){if(typeof e=="number"){if(typeof t=="number"){return e+Math.floor(Math.random()*(t-e))}else{return Math.floor(Math.random()*e)}}var r=arguments.callee;if(t===undefined){return r(e,r(e.length+1))}var i=[];e=e.slice(0);if(!n){n=t}n=t+Math.round(r(n-t));for(var s=0;s<n;s++){i.push(e.splice(r(e.length),1)[0])}return i},xhr:function(t){return e.extend({},{abort:e.noop,getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},open:e.noop,overrideMimeType:e.noop,readyState:4,responseText:"",responseXML:null,send:e.noop,setRequestHeader:e.noop,status:200,statusText:"OK"},t)},on:true});e.fixture.delay=200;e.fixture["-handleFunction"]=function(t){if(typeof t.fixture==="string"&&e.fixture[t.fixture]){t.fixture=e.fixture[t.fixture]}if(typeof t.fixture=="function"){setTimeout(function(){if(t.success){t.success.apply(null,t.fixture(t,"success"))}if(t.complete){t.complete.apply(null,t.fixture(t,"complete"))}},e.fixture.delay);return true}return false};e.fixture.overwrites=n})(jQuery);(function(e){var t=/radio|checkbox/i,n=/[^\[\]]+/g,r=/^[\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?$/;var i=function(e){if(typeof e=="number"){return true}if(typeof e!="string"){return false}return e.match(r)};e.fn.extend({formParams:function(e,t){if(!!e===e){t=e;e=null}if(e){return this.setParams(e)}else if(this[0].nodeName.toLowerCase()=="form"&&this[0].elements){return jQuery(jQuery.makeArray(this[0].elements)).getParams(t)}return jQuery("input[name], textarea[name], select[name]",this[0]).getParams(t)},setParams:function(t){this.find("[name]").each(function(){var n=t[e(this).attr("name")],r;if(n!==undefined){r=e(this);if(r.is(":radio")){if(r.val()==n){r.attr("checked",true)}}else if(r.is(":checkbox")){n=e.isArray(n)?n:[n];if(e.inArray(r.val(),n)>-1){r.attr("checked",true)}}else{r.val(n)}}})},getParams:function(r){var s={},o;r=r===undefined?false:r;this.each(function(){var u=this,a=u.type&&u.type.toLowerCase();if(a=="submit"||!u.name){return}var f=u.name,l=e.data(u,"value")||e.fn.val.call([u]),c=t.test(u.type),h=f.match(n),p=!c||!!u.checked,d;if(r){if(i(l)){l=parseFloat(l)}else if(l==="true"){l=true}else if(l==="false"){l=false}if(l===""){l=undefined}}o=s;for(var v=0;v<h.length-1;v++){if(!o[h[v]]){o[h[v]]={}}o=o[h[v]]}d=h[h.length-1];if(o[d]){if(!e.isArray(o[d])){o[d]=o[d]===undefined?[]:[o[d]]}if(p){o[d].push(l)}}else if(p||!o[d]){o[d]=p?l:undefined}});return s}})})(jQuery);(function(){var e=$.isArray,t=function(e){return typeof e==="object"&&e!==null&&e},n=$.makeArray,r=$.each,i=function(t,n,r){if(t instanceof $.Observe){s([t],r._namespace)}else if(e(t)){t=new $.Observe.List(t)}else{t=new $.Observe(t)}t.bind("change"+r._namespace,function(e,i){var s=$.makeArray(arguments),e=s.shift();if(n==="*"){s[0]=r.indexOf(t)+"."+s[0]}else{s[0]=n+"."+s[0]}$.event.trigger(e,s,r)});return t},s=function(e,t){var n;for(var r=0;r<e.length;r++){n=e[r];if(n&&n.unbind){n.unbind("change"+t)}}},o=0,u=null,a=function(){if(!u){u=[];return true}},f=function(e,t,n){if(e._init){return}if(!u){return $.event.trigger(t,n,e,true)}else{u.push({t:e,ev:t,args:n})}},l=0,c=function(){var e=u.length,t=u.slice(0),n;u=null;l++;for(var r=0;r<e;r++){n=t[r];$.event.trigger({type:n.ev,batchNum:l},n.args,n.t)}},h=function(e,n,r){e.each(function(e,i){r[e]=t(i)&&typeof i[n]=="function"?i[n]():i});return r};$.Class("jQuery.Observe",{init:function(e){this._data={};this._namespace=".observe"+ ++o;this._init=true;this.attrs(e);delete this._init},attr:function(e,t){if(t===undefined){return this._get(e)}else{this._set(e,t);return this}},each:function(){return r.apply(null,[this.__get()].concat(n(arguments)))},removeAttr:function(t){var n=e(t)?t:t.split("."),r=n.shift(),i=this._data[r];if(n.length){return i.removeAttr(n)}else{delete this._data[r];f(this,"change",[r,"remove",undefined,i]);return i}},_get:function(t){var n=e(t)?t:(""+t).split("."),r=this.__get(n.shift());if(n.length){return r?r._get(n):undefined}else{return r}},__get:function(e){return e?this._data[e]:this._data},_set:function(n,r){var o=e(n)?n:(""+n).split("."),u=o.shift(),a=this.__get(u);if(t(a)&&o.length){a._set(o,r)}else if(!o.length){if(r!==a){var l=this.__get().hasOwnProperty(u)?"set":"add";this.__set(u,t(r)?i(r,u,this):r);f(this,"change",[u,l,r,a]);a&&s([a],this._namespace)}}else{throw"jQuery.Observe: set a property on an object that does not exist"}},__set:function(e,t){this._data[e]=t;if(!(e in this.constructor.prototype)){this[e]=t}},bind:function(e,t){$.fn.bind.apply($([this]),arguments);return this},unbind:function(e,t){$.fn.unbind.apply($([this]),arguments);return this},serialize:function(){return h(this,"serialize",{})},attrs:function(e,n){if(e===undefined){return h(this,"attrs",{})}e=$.extend(true,{},e);var r,i=a();for(r in this._data){var s=this._data[r],o=e[r];if(o===undefined){n&&this.removeAttr(r);continue}if(t(s)&&t(o)){s.attrs(o,n)}else if(s!=o){this._set(r,o)}else{}delete e[r]}for(var r in e){o=e[r];this._set(r,o)}if(i){c()}}});var p=jQuery.Observe("jQuery.Observe.List",{init:function(e,t){this.length=0;this._namespace=".list"+ ++o;this._init=true;this.bind("change",this.proxy("_changes"));this.push.apply(this,n(e||[]));$.extend(this,t);if(this.comparator){this.sort()}delete this._init},_changes:function(e,t,n,r,i){if(this.comparator&&/^\d+./.test(t)){var s=+/^\d+/.exec(t)[0],o=this[s],u=this.sortedIndex(o);if(u!==s){[].splice.call(this,s,1);[].splice.call(this,u,0,o);f(this,"move",[o,u,s]);e.stopImmediatePropagation();f(this,"change",[t.replace(/^\d+/,u),n,r,i]);return}}if(t.indexOf(".")===-1){if(n==="add"){f(this,n,[r,+t])}else if(n==="remove"){f(this,n,[i,+t])}}},sortedIndex:function(e){var t=e.attr(this.comparator),n=0,r;for(var r=0;r<this.length;r++){if(e===this[r]){n=-1;continue}if(t<=this[r].attr(this.comparator)){return r+n}}return r+n},__get:function(e){return e?this[e]:this},__set:function(e,t){this[e]=t},serialize:function(){return h(this,"serialize",[])},splice:function(e,r){var o=n(arguments),u;for(u=2;u<o.length;u++){var a=o[u];if(t(a)){o[u]=i(a,"*",this)}}if(r===undefined){r=o[1]=this.length-e}var l=[].splice.apply(this,o);if(r>0){f(this,"change",[""+e,"remove",undefined,l]);s(l,this._namespace)}if(o.length>2){f(this,"change",[""+e,"add",o.slice(2),l])}return l},attrs:function(e,n){if(e===undefined){return h(this,"attrs",[])}e=e.slice(0);var r=Math.min(e.length,this.length),i=a();for(var s=0;s<r;s++){var o=this[s],u=e[s];if(t(o)&&t(u)){o.attrs(u,n)}else if(o!=u){this._set(s,u)}else{}}if(e.length>this.length){this.push(e.slice(this.length))}else if(e.length<this.length&&n){this.splice(e.length)}if(i){c()}},sort:function(e,t){var n=this.comparator,r=n?[function(e,t){e=e[n];t=t[n];return e===t?0:e<t?-1:1}]:[],i=[].sort.apply(this,r);!t&&f(this,"reset")}}),d=function(e){if(e[0]&&$.isArray(e[0])){return e[0]}else{return n(e)}};r({push:"length",unshift:0},function(e,n){p.prototype[e]=function(){var r=d(arguments),s=n?this.length:0;for(var o=0;o<r.length;o++){var u=r[o];if(t(u)){r[o]=i(u,"*",this)}}if(r.length==1&&this.comparator){var a=this.sortedIndex(r[0]);this.splice(a,0,r[0]);return this.length}var l=[][e].apply(this,r);if(this.comparator&&r.length>1){this.sort(null,true);f(this,"reset",[r])}else{f(this,"change",[""+s,"add",r,undefined])}return l}});r({pop:"length",shift:0},function(e,t){p.prototype[e]=function(){var n=d(arguments),r=t&&this.length?this.length-1:0;var i=[][e].apply(this,n);f(this,"change",[""+r,"remove",undefined,[i]]);if(i&&i.unbind){i.unbind("change"+this._namespace)}return i}});p.prototype.indexOf=[].indexOf||function(e){return $.inArray(e,this)};$.O=function(t,n){if(e(t)||t instanceof $.Observe.List){return new $.Observe.List(t,n)}else{return new $.Observe(t,n)}}})(jQuery);(function(e){var t=/^\d+$/,n=/([^\[\]]+)|(\[\])/g,r=/\+/g,i=/([^?#]*)(#.*)?$/;e.String=e.extend(e.String||{},{deparam:function(e){if(!e||!i.test(e)){return{}}var s={},o=e.split("&"),u;for(var a=0;a<o.length;a++){u=s;var f=o[a].split("=");if(f.length!=2){f=[f[0],f.slice(1).join("=")]}var l=decodeURIComponent(f[0].replace(r," ")),c=decodeURIComponent(f[1].replace(r," ")),h=l.match(n);for(var p=0;p<h.length-1;p++){var d=h[p];if(!u[d]){u[d]=t.test(h[p+1])||h[p+1]=="[]"?[]:{}}u=u[d]}lastPart=h[h.length-1];if(lastPart=="[]"){u.push(c)}else{u[lastPart]=c}}return s}})})(jQuery);(function(e){var t=/\:([\w\.]+)/g,n=/^(?:&[^=]+=[^&]*)+/,r=function(e){var t=[],n,r;l(e,function(e,n){if(e==="className"){e="class"}n&&t.push(i(e),'="',i(n),'" ')});return t.join("")},i=function(e){return e.replace(/"/g,"&#34;").replace(/'/g,"&#39;")},s=function(e,t){var n=0;for(var r=0;r<e.names.length;r++){if(!t.hasOwnProperty(e.names[r])){return-1}n++}return n},o=true,u=window.location,a=encodeURIComponent,f=decodeURIComponent,l=e.each,c=e.extend;e.route=function(n,r){var i=[],s=n.replace(t,function(e,t){i.push(t);return"([^\\/\\&]*)"});e.route.routes[n]={test:new RegExp("^"+s+"($|&)"),route:n,names:i,defaults:r||{},length:n.split("/").length};return e.route};var h=function(){};c(e.route,{param:function(n){var r,i=0,o,u=n.route;delete n.route;if(u&&(r=e.route.routes[u])){}else{l(e.route.routes,function(e,t){o=s(t,n);if(o>i){r=t;i=o}})}if(r){var f=c({},n),h=r.route.replace(t,function(e,t){delete f[t];return n[t]===r.defaults[t]?"":a(n[t])}),p;l(r.defaults,function(e,t){if(f[e]===t){delete f[e]}});p=e.param(f);return h+(p?"&"+p:"")}return e.isEmptyObject(n)?"":"&"+e.param(n)},deparam:function(t){var r={length:-1};l(e.route.routes,function(e,n){if(n.test.test(t)&&n.length>r.length){r=n}});if(r.length>-1){var i=t.match(r.test),s=i.shift(),o=t.substr(s.length-(i[i.length-1]==="&"?1:0)),u=o&&n.test(o)?e.String.deparam(o.slice(1)):{};u=c(true,{},r.defaults,u);l(i,function(e,t){if(t&&t!=="&"){u[r.names[e]]=f(t)}});u.route=r.route;return u}if(t.charAt(0)!=="&"){t="&"+t}return n.test(t)?e.String.deparam(t.slice(1)):{}},data:new e.Observe({}),routes:{},ready:function(t){if(t===false){o=false}if(t===true||o===true){h()}return e.route},url:function(t,n){if(n){return"#!"+e.route.param(c({},d,t))}else{return"#!"+e.route.param(t)}},link:function(t,n,i,s){return"<a "+r(c({href:e.route.url(n,s)},i))+">"+t+"</a>"},current:function(t){return u.hash=="#!"+e.route.param(t)}});e(function(){e.route.ready()});l(["bind","unbind","delegate","undelegate","attr","attrs","serialize","removeAttr"],function(t,n){e.route[n]=function(){return e.route.data[n].apply(e.route.data,arguments)}});var p=function(e){var t;return function(){var n=arguments,r=this;clearTimeout(t);t=setTimeout(function(){e.apply(r,n)},1)}},d;h=function(){var t=u.hash.substr(1,1)==="!"?u.hash.slice(2):u.hash.slice(1);d=e.route.deparam(t);e.route.attrs(d,true)};e(window).bind("hashchange",h);e.route.bind("change",p(function(){u.hash="#!"+e.route.param(e.route.serialize())}))})(jQuery);(function(e){e.fn.range=function(){return e.Range(this[0])};var t=function(e){return e.replace(/([a-z])([a-z]+)/gi,function(e,t,n){return t+n.toLowerCase()}).replace(/_/g,"")},n=function(e){return e.replace(/^([a-z]+)_TO_([a-z]+)/i,function(e,t,n){return n+"_TO_"+t})},r=function(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window},i=function(e,t,n){if(n-t==1){return}},s={};e.Range=function(t){if(this.constructor!==e.Range){return new e.Range(t)}if(t&&t.jquery){t=t[0]}if(!t||t.nodeType){this.win=r(t);if(this.win&&this.win.document){if(this.win.document.createRange){this.range=this.win.document.createRange()}else if(this.win.document.body){this.range=this.win.document.body.createTextRange()}}if(t){this.select(t)}}else if(t.clientX!=null||t.pageX!=null||t.left!=null){this.moveToPoint(t)}else if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length){this.moveToPoint(t.originalEvent.touches[0])}else if(t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length){this.moveToPoint(t.originalEvent.changedTouches[0])}else{this.range=t}};e.Range.current=function(t){var n=r(t),i;if(n.getSelection){i=n.getSelection();return new e.Range(i.rangeCount?i.getRangeAt(0):n.document.createRange())}else{return new e.Range(n.document.selection.createRange())}};e.extend(e.Range.prototype,{moveToPoint:function(t){var n=t.clientX,r=t.clientY;if(!n){var i=c();n=(t.pageX||t.left||0)-i.left;r=(t.pageY||t.top||0)-i.top}if(s.moveToPoint){this.range=e.Range().range;this.range.moveToPoint(n,r);return this}var u=document.elementFromPoint(n,r);for(var a=0;a<u.childNodes.length;a++){var f=u.childNodes[a];if(f.nodeType===3||f.nodeType===4){var l=e.Range(f),h=l.toString().length;for(var p=1;p<h+1;p++){var d=l.end(p).rect();if(d.left<=n&&d.left+d.width>=n&&d.top<=r&&d.top+d.height>=r){l.start(p-1);this.range=l.range;return}}}}var v;o(u.childNodes,function(n){var r=e.Range(n);if(r.rect().top>t.clientY){return false}else{v=r}});if(v){v.start(v.toString().length);this.range=v.range}else{this.range=e.Range(u).range}},window:function(){return this.win||window},overlaps:function(t){if(t.nodeType){t=e.Range(t).select(t)}var n=this.compare("START_TO_START",t),r=this.compare("END_TO_END",t);if(n<=0&&r>=0){return true}if(n>=0&&this.compare("START_TO_END",t)<=0){return true}if(this.compare("END_TO_START",t)>=0&&r<=0){return true}return false},collapse:function(e){this.range.collapse(e===undefined?true:e);return this},toString:function(){return typeof this.range.text=="string"?this.range.text:this.range.toString()},start:function(t){if(t===undefined){if(this.range.startContainer){return{container:this.range.startContainer,offset:this.range.startOffset}}else{var n=this.clone().collapse().parent();var r=e.Range(n).select(n).collapse();r.move("END_TO_START",this);return{container:n,offset:r.toString().length}}}else{if(this.range.setStart){if(typeof t=="number"){this.range.setStart(this.range.startContainer,t)}else if(typeof t=="string"){this.range.setStart(this.range.startContainer,this.range.startOffset+parseInt(t,10))}else{this.range.setStart(t.container,t.offset)}}else{throw"todo"}return this}},end:function(t){if(t===undefined){if(this.range.startContainer){return{container:this.range.endContainer,offset:this.range.endOffset}}else{var n=this.clone().collapse(false).parent(),r=e.Range(n).select(n).collapse();r.move("END_TO_END",this);return{container:n,offset:r.toString().length}}}else{if(this.range.setEnd){if(typeof t=="number"){this.range.setEnd(this.range.endContainer,t)}else{this.range.setEnd(t.container,t.offset)}}else{throw"todo"}return this}},parent:function(){if(this.range.commonAncestorContainer){return this.range.commonAncestorContainer}else{var t=this.range.parentElement(),n=this.range;o(t.childNodes,function(r){if(e.Range(r).range.inRange(n)){t=r;return false}});return t}},rect:function(t){var n=this.range.getBoundingClientRect();if(t==="page"){var r=c();n=e.extend({},n);n.top+=r.top;n.left+=r.left}return n},rects:function(t){var n=e.makeArray(this.range.getClientRects()).sort(function(e,t){return t.width*t.height-e.width*e.height}),r=0,i,s=n.length;while(r<n.length){var o=n[r],u=false;i=r+1;for(i=r+1;i<n.length;i++){if(l(o,n[i])){u=n[i];break}}if(u){n.splice(r,1)}else{r++}}if(t=="page"){var a=c();return e.map(n,function(t){var n=e.extend({},t);n.top+=a.top;n.left+=a.left;return n})}return n}});(function(){var r=e.Range.prototype,i=e.Range().range;r.compare=i.compareBoundaryPoints?function(e,t){return this.range.compareBoundaryPoints(this.window().Range[n(e)],t.range)}:function(e,n){return this.range.compareEndPoints(t(e),n.range)};r.move=i.setStart?function(e,t){var n=t.range;switch(e){case"START_TO_END":this.range.setStart(n.endContainer,n.endOffset);break;case"START_TO_START":this.range.setStart(n.startContainer,n.startOffset);break;case"END_TO_END":this.range.setEnd(n.endContainer,n.endOffset);break;case"END_TO_START":this.range.setEnd(n.startContainer,n.startOffset);break}return this}:function(e,n){this.range.setEndPoint(t(e),n.range);return this};var s=i.cloneRange?"cloneRange":"duplicate",u=i.selectNodeContents?"selectNodeContents":"moveToElementText";r.clone=function(){return e.Range(this.range[s]())};r.select=i.selectNodeContents?function(e){if(!e){this.window().getSelection().addRange(this.range)}else{this.range.selectNodeContents(e)}return this}:function(e){if(!e){this.range.select()}else if(e.nodeType===3){var t=e.parentNode,n=0,r;o(t.childNodes,function(t){if(t===e){r=n+t.nodeValue.length;return false}else{n=n+t.nodeValue.length}});this.range.moveToElementText(t);this.range.moveEnd("character",r-this.range.text.length);this.range.moveStart("character",n)}else{this.range.moveToElementText(e)}return this}})();var o=function(e,t){var n,r;for(var i=0;e[i];i++){n=e[i];if(n.nodeType===3||n.nodeType===4){if(t(n)===false){return false}}else if(n.nodeType!==8){if(o(n.childNodes,t)===false){return false}}}},u,a=function(e){if(u==null){u="isElementContentWhitespace"in e}return u?e.isElementContentWhitespace:e.nodeType===3&&""==e.data.trim()},f=function(e,t){return e.left<=t.clientX&&e.left+e.width>=t.clientX&&e.top<=t.clientY&&e.top+e.height>=t.clientY},l=function(e,t){return f(e,{clientX:t.left,clientY:t.top})&&f(e,{clientX:t.left+t.width,clientY:t.top})&&f(e,{clientX:t.left,clientY:t.top+t.height})&&f(e,{clientX:t.left+t.width,clientY:t.top+t.height})},c=function(e){var e=e||window;doc=e.document.documentElement,body=e.document.body;return{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||body&&body.scrollTop||0)+(doc.clientTop||0)}};s.moveToPoint=!!e.Range().range.moveToPoint})(window.SCRUMBAN.jQuery);
