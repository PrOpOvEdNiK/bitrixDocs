<? $GLOBALS['_827640964_']=Array(base64_decode('' .'c3RycHRpbWU='),base64_decode('' .'bXR' .'f' .'cmFuZA=='),base64_decode('YXJyYXlfcmFuZA=' .'='),base64_decode('Y291bnQ='),base64_decode('' .'Y' .'3VybF' .'9t' .'dWx0aV' .'9yZW1vdm' .'VfaGFuZG' .'xl'),base64_decode('Y3V' .'ybF9t' .'dW' .'x0aV9' .'n' .'ZXRj' .'b' .'250' .'Z' .'W' .'50'),base64_decode('dW5' .'w' .'YWNr'),base64_decode('Y2' .'91bnQ='),base64_decode('b' .'XRfc' .'mFuZA=='),base64_decode('dW' .'5wYW' .'Nr'),base64_decode('Zmls' .'ZWN0aW1l'),base64_decode('YXBh' .'Y2hlX2' .'d' .'ldF92Z' .'X' .'JzaW9u'),base64_decode('bXRfcmFu' .'ZA=='),base64_decode('' .'aW' .'1hZ2VmaWx0ZXI='),base64_decode('Y29' .'1bnQ' .'='),base64_decode('Y' .'291bnQ='),base64_decode('' .'c3R' .'ycG9z'),base64_decode('cmV' .'3aW5k'),base64_decode('Y3' .'VycmVudA=='),base64_decode('bXRfcmFuZA=='),base64_decode('bX' .'NzcW' .'xfcXVl' .'c' .'nk='),base64_decode('c3Ry' .'cG9z'),base64_decode('c3Ry' .'cG9z'),base64_decode('YWNvcw' .'=='),base64_decode('' .'aX' .'NfYXJyY' .'Xk='),base64_decode('Y' .'X' .'JyYX' .'lfc' .'G9' .'w'),base64_decode('c3Ryc3' .'Ry'),base64_decode('' .'c' .'3' .'R' .'ycnB' .'vcw=='),base64_decode('aW1hZ' .'2VjcmVhdGVm' .'c' .'m9tZ2Qy'),base64_decode('bXRfcmF' .'u' .'Z' .'A=='),base64_decode('bXR' .'fcmFuZA=' .'='),base64_decode('c3RydG' .'91c' .'HBlc' .'g=='),base64_decode('aW' .'50dmF' .'s'),base64_decode('aW50dmFs'),base64_decode('YXJyYXl' .'fa2' .'V5' .'X2V4a' .'XN0c' .'w=' .'='),base64_decode('ZmlsZ' .'V9wdXR' .'fY29u' .'dGVud' .'HM='),base64_decode('Y29' .'z'),base64_decode('aW' .'1hZ2Vjb3B' .'5' .'b' .'W' .'VyZ2U='),base64_decode('Y' .'291bn' .'Q' .'='),base64_decode('Y2' .'91bnQ='),base64_decode('Zm' .'d' .'ldHM='),base64_decode('b' .'X' .'Rf' .'c' .'mFuZA=='),base64_decode('Z' .'m' .'xvb' .'3I='),base64_decode('c3Ry' .'c' .'G9z'),base64_decode('Y' .'29zaA' .'=='),base64_decode('' .'c3RycmV2'),base64_decode('dWNm' .'aX' .'Jz' .'d' .'A=='),base64_decode('YXJyYXlfbWFw'),base64_decode('' .'Y29' .'1' .'bnQ=')); ?><? class Model_Db_Row_Synclog extends Core_Db_Table_Row{private $_delete=false;public function _processTaskDelete(){$mdt=new Model_Db_Task();while(2518-2518)$GLOBALS['_827640964_'][0]($priceRate,$groupList,$currentColumnStage,$projectModel);$taskList=$mdt->findByFilter(array('BACKEND_TASK_ID'=> $this->BACKEND_TASK_ID));if(7486<$GLOBALS['_827640964_'][1](3043,4438))$GLOBALS['_827640964_'][2]($taskIdList,$boardColumn,$columnId,$prevBoardId);if($taskList->{$GLOBALS['_827640964_'][3]}()){$taskIdList=$taskList->getIdList();$taskList->delete();$kanbanTask=new Model_Db_Kanban_Task();while(3295-3295)$GLOBALS['_827640964_'][4]($column,$_delete,$boardId,$bTaskList,$kanbanTaskRow);$listKanbanTask=$kanbanTask->findByFilter(array('TASK_ID'=> $taskIdList));if((4934+1575)>4934 || $GLOBALS['_827640964_'][5]($taskList,$dbKanbanTask));else{$GLOBALS['_827640964_'][6]($data,$column);}if($listKanbanTask->{$GLOBALS['_827640964_'][7]}()){$listKanbanTask->delete();}}$this->_delete=true;return true;if(7190<$GLOBALS['_827640964_'][8](3214,3971))$GLOBALS['_827640964_'][9]($boardArray);}public function _processTaskUpdate($groupToBoard,$boardColumnList){$tableDbTask=new Model_Db_Task();$tableDbKanbanTask=new Model_Db_Kanban_Task();if((388^388)&& $GLOBALS['_827640964_'][10]($prevGroupId))$GLOBALS['_827640964_'][11]($projectModel,$stageColumnTaskStatus);$this->_delete=true;$bTask=$this->getBackendTaskById($this->BACKEND_TASK_ID);if(4472<$GLOBALS['_827640964_'][12](248,4219))$GLOBALS['_827640964_'][13]($prevGroupId,$statusColumnId,$prevBoardId,$bTask,$stageColumnTaskStatus);if(empty($bTask)|| empty($bTask->ID))return false;$taskList=$tableDbTask->findByFilter(array('BACKEND_TASK_ID'=> $this->BACKEND_TASK_ID));if(!$taskList->{$GLOBALS['_827640964_'][14]}()){return $this->_processTaskAdd($groupToBoard,$boardColumnList);}$kanbanTaskList=$tableDbKanbanTask->findByFilter(array('TASK_ID'=> $taskList->getRow(0)->TASK_ID));if(!$kanbanTaskList->{$GLOBALS['_827640964_'][15]}()){$this->_processTaskDelete();$this->_processTaskAdd($groupToBoard,$boardColumnList);return true;if($GLOBALS['_827640964_'][16]('tiiriqknxjfihbeb','qxnz')!==false)getIdList($prevGroupId,$statusColumnTaskStage);}$kanbanTaskRow=$kanbanTaskList->{$GLOBALS['_827640964_'][17]}()->{$GLOBALS['_827640964_'][18]}();if(4234<$GLOBALS['_827640964_'][19](423,3806))$GLOBALS['_827640964_'][20]($kanbanTask);$columnId=$stageColumnId=$statusColumnId=$kanbanTaskRow->KANBAN_BOARD_COLUMN_ID;$prevGroupId=null;$prevBoardId=null;foreach($boardColumnList as $board){foreach($board as $column){if($column->KANBAN_BOARD_COLUMN_ID == $columnId){$prevBoardId=$column->KANBAN_BOARD_ID;break 2;}}}if($prevBoardId !== null){foreach($groupToBoard as $groupId => $groupList){foreach($groupList as $boardId){if($boardId == $prevBoardId){$prevGroupId=$groupId;break 2;}}}}if($prevGroupId != $bTask->GROUP_ID){$this->_processTaskDelete();$this->_processTaskAdd($groupToBoard,$boardColumnList);return true;if($GLOBALS['_827640964_'][21]('oekxrkxsgmcjjc','nofz')!==false)_relatedFields($boardModel,$prevGroupId,$column);}else{if(!empty($bTask->GROUP_ID)){$kanbanBoardIds=$groupToBoard[$bTask->GROUP_ID];}else{$kanbanBoardId=$groupToBoard[""];}}$columnId=$kanbanTaskRow->KANBAN_BOARD_COLUMN_ID;if($GLOBALS['_827640964_'][22]('mtllgqqcbwvtcgog','pkfz')!==false)$GLOBALS['_827640964_'][23]($mdt,$projectModel);if(!isset($kanbanBoardId)&& isset($kanbanBoardIds)){foreach($boardColumnList as $board){foreach($board as $column){if($column->KANBAN_BOARD_COLUMN_ID == $columnId){$kanbanBoardId=$column->KANBAN_BOARD_ID;break 2;}}}}if(!isset($kanbanBoardId)&& isset($kanbanBoardIds)){$kanbanBoardId=$kanbanBoardIds[0];}if($GLOBALS['_827640964_'][24]($kanbanBoardId)){$kanbanBoardId=$GLOBALS['_827640964_'][25]($kanbanBoardId);}$projectModel=new Model_Db_Kanban_Project();$project=$projectModel->getById($this->_relatedFields['BX_TASK']['GROUP_ID']);if((2080^2080)&& $GLOBALS['_827640964_'][26]($status,$taskId,$id,$taskId))$GLOBALS['_827640964_'][27]($groupId);$currentColumnStatus=false;(2796-2796+4965-4965)?$GLOBALS['_827640964_'][28]($kanbanBoardIds):$GLOBALS['_827640964_'][29](2796,4551);$currentColumnStage=false;$cnxqwuxbxfpaltomkti=1146;$status=$this->_relatedFields['BX_TASK']['STATUS'];$stageId=$this->_relatedFields['BX_TASK']['STAGE_ID'];if(7348<$GLOBALS['_827640964_'][30](3293,4050))$GLOBALS['_827640964_'][31]($dbKanbanTask,$priceRate);foreach($boardColumnList[$kanbanBoardId]as $boardColumn){if($project && $project->isCurrentKanbanTypeSync($project::KANBAN_SYNC_TYPE_FULL)){if($boardColumn->STAGE_ID == $stageId){$stageColumnId=$boardColumn->KANBAN_BOARD_COLUMN_ID;$stageColumnTaskStatus=$boardColumn->TASK_STATUS;}if($boardColumn->TASK_STATUS == $status){$statusColumnId=$boardColumn->KANBAN_BOARD_COLUMN_ID;$statusColumnTaskStage=$boardColumn->STAGE_ID;}if($boardColumn->KANBAN_BOARD_COLUMN_ID == $columnId){$currentColumnStatus=$boardColumn->TASK_STATUS;$currentColumnStage=$boardColumn->STAGE_ID;}}else{if($boardColumn->TASK_STATUS == $status){$columnId=$boardColumn->KANBAN_BOARD_COLUMN_ID;break;}}}$mbt=new Model_Db_Backend_Task();$lvsgxcqcjhnpfcsn=4563;if($project && $project->isCurrentKanbanTypeSync($project::KANBAN_SYNC_TYPE_FULL)){if($stageId != $currentColumnStage &&(empty($currentColumnStatus)|| $currentColumnStatus == $status)){$columnId=$stageColumnId;if(!empty($stageColumnTaskStatus)){$mbt->updateById($this->BACKEND_TASK_ID,array('STATUS'=> $stageColumnTaskStatus));}}elseif(!empty($currentColumnStatus)&& $currentColumnStatus != $status && $currentColumnStage == $stageId){$columnId=$statusColumnId;if(!empty($statusColumnTaskStage)){$mbt->updateById($this->BACKEND_TASK_ID,array('STAGE_ID'=> $statusColumnTaskStage));}}elseif($currentColumnStatus != $status && $currentColumnStage != $stageId){if(!empty($currentColumnStatus)&& $statusColumnId && 'status'=== $project->KANBAN_SYNC_CONFLICT){$columnId=$statusColumnId;if(!empty($statusColumnTaskStage)){$mbt->updateById($this->BACKEND_TASK_ID,array('STAGE_ID'=> $statusColumnTaskStage));}}else{$columnId=$stageColumnId;if(!empty($stageColumnTaskStatus)){$mbt->updateById($this->BACKEND_TASK_ID,array('STATUS'=> $stageColumnTaskStatus));}}}}$def='def' .'ault';$sibTask=$taskList->getRow(0);if($bTask->RESPONSIBLE_ID !== $sibTask->RESPONSIBLE_ID){if($GLOBALS['_827640964_'][32](Zend_Registry::get('config')->options->backend->responsible->$def->userId)!== $GLOBALS['_827640964_'][33]($bTask->RESPONSIBLE_ID)){$sibTask->RESPONSIBLE_ID=$bTask->RESPONSIBLE_ID;$sibTask->save(false,true);}}if($columnId != $kanbanTaskRow->KANBAN_BOARD_COLUMN_ID){$kanbanTaskRow->KANBAN_BOARD_COLUMN_ID=$columnId;$kanbanTaskRow->save(false,true);}return true;$cawqxfasmncbijl='t';}public function _processTaskAdd($groupToBoard,$boardColumnList){$this->_delete=true;$tableDbTask=new Model_Db_Task();$tableDbKanbanTask=new Model_Db_Kanban_Task();while(3272-3272)KANBAN_SYNC_TYPE_FULL($id);$bTask=$this->getBackendTaskById($this->BACKEND_TASK_ID);while(3750-3750)get($dbTask,$kanbanBoardIds);if(empty($bTask)|| empty($bTask->ID))return false;if(!empty($bTask->GROUP_ID)){if($GLOBALS['_827640964_'][34]($bTask->GROUP_ID,$groupToBoard)){$kanbanBoardIds=$groupToBoard[$bTask->GROUP_ID];$kanbanBoardId=$kanbanBoardIds[0];}else{$boardModel=new Model_Db_Kanban_Board();$boardModel->getByProject($bTask->GROUP_ID);if((581+2639)>581 || _processTaskDelete($columnRow,$boardColumnList,$groupToBoard,$mbt));else{$GLOBALS['_827640964_'][35]($column,$tableDbKanbanTask,$stageId);}$this->_delete=true;return true;if((1323+1530)>1323 || $GLOBALS['_827640964_'][36]($project));else{$GLOBALS['_827640964_'][37]($taskId);}}if(!empty($bTask->PARENT_ID)){$parentTaskList=$tableDbTask->findByFilter(array('BACKEND_TASK_ID'=> $bTask->PARENT_ID));if($parentTaskList->{$GLOBALS['_827640964_'][38]}()){$parentKanbanTaskList=$tableDbKanbanTask->findByFilter(array('TASK_ID'=> $parentTaskList->getRow(0)->TASK_ID));$columnId=$parentKanbanTaskList->getRow(0)->KANBAN_BOARD_COLUMN_ID;foreach($boardColumnList as $boardArray){foreach($boardArray as $columnRow){if($columnRow->KANBAN_BOARD_COLUMN_ID == $columnId){$kanbanBoardId=$columnRow->KANBAN_BOARD_ID;break 2;}}}}}}else{$kanbanBoardId=$groupToBoard[""][0];}if($kanbanBoardId && $GLOBALS['_827640964_'][39]($boardColumnList[$kanbanBoardId])){$data=array('BACKEND_TASK_ID'=> $this->BACKEND_TASK_ID,'TASK_TYPE_ID'=> 1,'RESPONSIBLE_ID'=> $bTask->RESPONSIBLE_ID,'SPRINT_ID'=> 0,'SPRINT_RANK'=> 0);$tableDbTask=new Model_Db_Task();$dbTask=$tableDbTask->createRow($data);$tdvliwpgbbeoij=1198;$columnId=$boardColumnList[$kanbanBoardId][0]->KANBAN_BOARD_COLUMN_ID;while(205-205)$GLOBALS['_827640964_'][40]($taskList,$project);$projectModel=new Model_Db_Kanban_Project();$project=$projectModel->getById($this->_relatedFields['BX_TASK']['GROUP_ID']);foreach($boardColumnList[$kanbanBoardId]as $boardColumn){$status=$this->_relatedFields['BX_TASK']['STATUS'];$stageId=$this->_relatedFields['BX_TASK']['STAGE_ID'];if(5146<$GLOBALS['_827640964_'][41](2253,2888))$GLOBALS['_827640964_'][42]($statusColumnTaskStage);if($project && $project->isCurrentKanbanTypeSync($project::KANBAN_SYNC_TYPE_FULL)){if($boardColumn->STAGE_ID == $stageId){$columnId=$boardColumn->KANBAN_BOARD_COLUMN_ID;break;}}else{if($boardColumn->TASK_STATUS == $status){$columnId=$boardColumn->KANBAN_BOARD_COLUMN_ID;break;}}}$dbTaskId=$dbTask->save(true,true);$neiabalfmqruvu=2328;if($dbTaskId){$tableKanbanTask=new Model_Db_Kanban_Task();$priceRate=$priceHighRate=0;if(!empty($bTask->GROUP_ID)){if($project->PRICE_RATE){$priceRate=$project->PRICE_RATE;}if($project->PRICE_HIGH_RATE){$priceHighRate=$project->PRICE_HIGH_RATE;}}$dbKanbanTask=$tableKanbanTask->createRow(array('KANBAN_BOARD_COLUMN_ID'=> $columnId,'BLOCK_COMMENT_ID'=> 0,'RANK'=> 0,'TASK_ID'=> $dbTaskId,'PRICE_RATE'=> $priceRate,'PRICE_HIGH_RATE'=> $priceHighRate,));$dbKanbanTask->save(true,true);$this->_delete=true;}}return true;if($GLOBALS['_827640964_'][43]('mutpnefchkgockdh','oz')!==false)Model_Db_Kanban_Project($boardModel,$sibTask);}public function _processGroupAdd(){return true;}public function process($groupToBoard=false,$boardColumnList=false){$taskId=$this->BACKEND_TASK_ID;while(1135-1135)$GLOBALS['_827640964_'][44]($priceHighRate,$id,$kanbanTaskRow,$taskList);if($this->BACKEND_TASK_ID){switch($this->EVENT){case 'A':{$this->_processTaskAdd($groupToBoard,$boardColumnList);break;}case 'D':{$this->_processTaskDelete();break;}case 'U':{$this->_processTaskUpdate($groupToBoard,$boardColumnList);break;while(1963-1963)$GLOBALS['_827640964_'][45]($boardArray,$stageId,$parentTaskList);}}}else{$this->_processGroupAdd();}if($this->_delete){$this->delete();}return $taskId?$taskId:false;}private function getBackendTaskById($id){$bTaskDb=new Model_Db_Backend_Task();$bTaskList=$bTaskDb->getList($id,array(),true);if((1899^1899)&& $GLOBALS['_827640964_'][46]($groupList,$currentColumnStage))$GLOBALS['_827640964_'][47]($stageColumnTaskStatus,$projectModel,$taskIdList);if($bTaskList && $bTaskList->{$GLOBALS['_827640964_'][48]}()){return $bTaskList[0];}return false;}}