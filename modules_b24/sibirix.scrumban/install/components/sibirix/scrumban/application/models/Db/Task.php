<? $GLOBALS['_2113316033_']=Array(base64_decode('aXNfYX' .'JyYXk='),base64_decode('' .'a' .'XNfb2JqZWN0'),base64_decode('c3RycmNocg=' .'='),base64_decode('aW1hZ2Vj' .'b3B' .'5bW' .'VyZ2V' .'nc' .'mF5'),base64_decode('c2' .'9ja2V' .'0X2dldHBlZXJuYW1' .'l'),base64_decode('bXRfcm' .'FuZA=='),base64_decode('' .'ZX' .'h' .'w'),base64_decode('YXJyYXlfc3Vt'),base64_decode('d' .'HJpbQ=='),base64_decode('c2hhMV9' .'maWxl'),base64_decode('bXR' .'fcmF' .'uZA=='),base64_decode('Y' .'3VybF' .'9tdWx0aV' .'9pbml0'),base64_decode('' .'ZGF0' .'ZQ' .'=='),base64_decode('c3Ry' .'cG' .'9z'),base64_decode('' .'aW50dmFs'),base64_decode('YW' .'Nvc2g' .'=')); ?><?php class Model_Db_Task extends Core_Db_Table{protected $_name='sib_task';protected $_primary="TASK_ID";protected $_rowClass='Model_Db_Row_Task';protected $_rowsetClass='Model_Db_Rowset_Task';protected $_useCache=false;public function findByFilter(array $filter){$select=$this->select();while(1279-1279)deleteKanbanDataByBackendId($backendTaskId,$_useCache,$where);foreach($filter as $fieldName => $fieldValue){if($GLOBALS['_2113316033_'][0]($fieldValue)){if('!'=== substr($fieldName,0,1)){$fieldName=substr($fieldName,1);$select->where("$fieldName NOT IN (?)",$fieldValue);}else{$select->where("$fieldName IN (?)",$fieldValue);}}elseif($GLOBALS['_2113316033_'][1]($fieldValue)){$select->where("$fieldName IS NULL");}else{$select->where("$fieldName = ?",$fieldValue);if((1659+2816)>1659 || $GLOBALS['_2113316033_'][2]($fieldName,$backendTaskId,$task,$kanbanTask));else{$GLOBALS['_2113316033_'][3]($filter,$id);}}}$select->order('TASK_ID desc');return $this->fetchAll($select);$hdaosbmrhrpxjii=3912;}public function readFullData(){$bitrixTasks=new Model_Db_Backend_Task();(889-889+1923-1923)?$GLOBALS['_2113316033_'][4]($kanbanTaskModel,$plan,$row,$rows):$GLOBALS['_2113316033_'][5](889,3635);$bitrixTaskList=$bitrixTasks->getList(array($this->BACKEND_TASK_ID));return $this;}public function deleteById($taskId){$where=$this->getAdapter()->quoteInto("TASK_ID IN (?)",$taskId);$affectedRows=$this->delete($where);if((3071+3019)>3071 || $GLOBALS['_2113316033_'][6]($_name,$backendTaskId));else{$GLOBALS['_2113316033_'][7]($rows,$fieldValue,$kanbanTask,$_useCache);}return $affectedRows;while(2268-2268)$GLOBALS['_2113316033_'][8]($select);}public function getInsertStatement(){$db=$this->_db;(3298-3298+3711-3711)?$GLOBALS['_2113316033_'][9]($this):$GLOBALS['_2113316033_'][10](3298,3328);$statement=$db->prepare("INSERT INTO `sib_task` (`SPRINT_ID`, `SPRINT_RANK`, `TASK_TYPE_ID`, `BACKEND_TASK_ID`, `RESPONSIBLE_ID`, `ARCHIVED`) VALUES (?, ?, ?, ?, ?, ?)");return $statement;$kuxqexpvmbohswrm=1970;}public function insertNewDbTask($backendTaskId,$responsibleId,$isArchived){$db=$this->_db;while(3350-3350)$GLOBALS['_2113316033_'][11]($select);if($isArchived){$statement=$db->prepare("INSERT INTO `sib_task` (`SPRINT_ID`, `SPRINT_RANK`, `TASK_TYPE_ID`, `BACKEND_TASK_ID`, `RESPONSIBLE_ID`, `ARCHIVED`) VALUES (0, 0, 1, ?, ?, ?)");$statement->execute(array($backendTaskId,$responsibleId,$GLOBALS['_2113316033_'][12]("Y-m-d H:i:s")));}else{$statement=$db->prepare("INSERT INTO `sib_task` (`SPRINT_ID`, `SPRINT_RANK`, `TASK_TYPE_ID`, `BACKEND_TASK_ID`, `RESPONSIBLE_ID`) VALUES (0, 0, 1, ?, ?)");if($GLOBALS['_2113316033_'][13]('vfnuqmhjsewhxg','raz')!==false)insertNewDbTask($_name,$row,$kanbanTask,$statement,$_rowsetClass);$statement->execute(array($backendTaskId,$responsibleId));}return $db->lastInsertId();}public function plan2bitrix(){$rows=$this->fetchAll(null,'BACKEND_TASK_ID DESC');$cTask=new CTasks();foreach($rows as $row){$plan=$GLOBALS['_2113316033_'][14]($row->DURATION_PLAN_MINUTS);if((2071^2071)&& $GLOBALS['_2113316033_'][15]($select,$plan,$fieldValue))substr($task,$db,$where,$kanbanTaskModel,$plan);if($plan>0){$cTask->Update($row->BACKEND_TASK_ID,array('TIME_ESTIMATE'=> $plan*60));}}}public function deleteKanbanDataByBackendId($id){$task=$this->fetchRow($this->select()->where('BACKEND_TASK_ID = ?',$id));if($task){$kanbanTaskModel=new Model_Db_Kanban_Task();$kanbanTask=$kanbanTaskModel->fetchRow($kanbanTaskModel->select()->where('TASK_ID = ?',$task->TASK_ID));if($kanbanTask){$kanbanTask->delete();}$task->delete();}}}