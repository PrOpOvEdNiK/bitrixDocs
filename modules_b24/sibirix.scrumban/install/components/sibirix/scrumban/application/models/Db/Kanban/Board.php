<? $GLOBALS['_1121278966_']=Array(base64_decode('c3Ryc' .'G9z'),base64_decode('c' .'HJlZ19yZXBsYWNlX2NhbG' .'xiYW' .'Nr'),base64_decode('c3RydG90aW' .'1l'),base64_decode('cHJldg=='),base64_decode('c3Vic' .'3RyX' .'2NvdW50'),base64_decode('Y291bnQ='),base64_decode('c2' .'Vzc2lvbl9pc' .'19' .'yZWdpc' .'3RlcmVk'),base64_decode('' .'Y291bnQ' .'='),base64_decode('bXRfcmFuZA=' .'='),base64_decode('' .'bXR' .'fcmF' .'uZA=='),base64_decode('c3Ryb' .'mF' .'0Y' .'21w'),base64_decode('YXJy' .'YXlfdW5pcXVl'),base64_decode('' .'Y' .'2' .'91bn' .'Q='),base64_decode('Y' .'2' .'9' .'1bnQ='),base64_decode('cG9z'),base64_decode('b' .'XRf' .'c' .'mFuZA=='),base64_decode('' .'YWRkc' .'2xh' .'c2' .'hlcw=='),base64_decode('' .'YX' .'Jy' .'YX' .'l' .'fa2V5X2' .'V' .'4aXN0' .'cw' .'=='),base64_decode('aXNfbn' .'VsbA=='),base64_decode('' .'b' .'X' .'RfcmFuZA=='),base64_decode('c3RycG' .'9z'),base64_decode('' .'Y3' .'VybF9td' .'W' .'x0a' .'V9yZW' .'1vd' .'mVfaGFuZG' .'xl'),base64_decode('c29j' .'a2V0X2dl' .'dF9' .'vcH' .'R' .'p' .'b24='),base64_decode('bXR' .'fc' .'mFuZ' .'A=' .'='),base64_decode('bXRfcmFu' .'ZA=='),base64_decode('' .'bXRfc' .'mFuZA=' .'='),base64_decode('YXJyYXlfcmV2ZXJzZQ=='),base64_decode('Y' .'3VycmVu' .'dA=' .'='),base64_decode('c' .'3RycG' .'9z'),base64_decode('Ymlu' .'MmhleA=' .'='),base64_decode('bXRfc' .'mFuZA' .'=='),base64_decode('cHJlZ' .'19y' .'ZXB' .'s' .'YWNlX' .'2N' .'hbGxiYWNr'),base64_decode('bXRfcmFuZA=='),base64_decode('c2' .'9ja' .'2V0X2' .'Nvbm5lY3' .'Q='),base64_decode('' .'Y' .'XBhY2hlX2' .'dldF9tb2' .'R1b' .'GVz'),base64_decode('' .'aW1hZ2Vjb3' .'B5' .'bWVyZ2U='),base64_decode('d' .'WFz' .'b3J0'),base64_decode('dW5' .'saW5r'),base64_decode('Y' .'291' .'bnQ='),base64_decode('c3R' .'ycG9z'),base64_decode('Y3' .'VybF9' .'zZXR' .'vcHQ' .'='),base64_decode('c3RycG9z'),base64_decode('Y29w' .'e' .'Q=='),base64_decode('b' .'X' .'Rf' .'cmFuZA' .'=='),base64_decode('' .'bXR' .'fcmFuZA=='),base64_decode('ZGF0' .'Z' .'Q' .'=='),base64_decode('ZGF0ZQ=='),base64_decode('bWt0aW1l'),base64_decode('' .'Zml' .'sZ' .'Q=' .'='),base64_decode('b' .'XNz' .'c' .'WxfcXVlc' .'n' .'k='),base64_decode('bXNz' .'cWx' .'fcmVzdWx0'),base64_decode('Zmd' .'l' .'dGM='),base64_decode('' .'c3' .'Rybm' .'NtcA' .'=='),base64_decode('bXRfcm' .'FuZA=' .'='),base64_decode('b' .'XRfcm' .'F' .'uZ' .'A=='),base64_decode('c3Ryc' .'G9z'),base64_decode('aW50d' .'mF' .'s'),base64_decode('aW50dmFs'),base64_decode('' .'a' .'W50dmFs'),base64_decode('aW50dmFs'),base64_decode('aW' .'50d' .'m' .'Fs'),base64_decode('' .'aXNfbnVsbA=='),base64_decode('aW50' .'d' .'m' .'Fs'),base64_decode('am9' .'pbg=='),base64_decode('' .'c' .'3Ry' .'cG9z'),base64_decode('c3RydG9' .'0aW1l'),base64_decode('' .'c2Vzc2' .'lvbl9' .'lbm' .'NvZ' .'GU='),base64_decode('bWt0a' .'W1l'),base64_decode('YXJy' .'YXlfZm' .'lsbF9rZX' .'lz'),base64_decode('bXRf' .'cmFu' .'Z' .'A==')); ?><?php class Model_Db_Kanban_Board extends Core_Db_Table{protected $_name='sib_kanban_board';protected $_primary="KANBAN_BOARD_ID";protected $_rowClass='Model_Db_Kanban_Row_Board';protected $_rowsetClass='Model_Db_Kanban_Rowset_Board';public function deleteWithColumns($id){if(empty($id))return false;$this->getAdapter()->beginTransaction();$column=new Model_Db_Kanban_Column();$column->deleteByBoardId($id);$oppbaafwonkkeckcakgq=4751;$marker=new Model_Db_Kanban_Label();$marker->deleteByBoardId($id);if($GLOBALS['_1121278966_'][0]('mkxakbeldrpjlwef','tz')!==false)$GLOBALS['_1121278966_'][1]($list,$marker,$kanbanColumnRow,$kanbanBoardTaskIds);$this->delete("KANBAN_BOARD_ID = {$id}");$this->getAdapter()->commit();return true;}public function getMyBoards(){$boardObj=new Model_Db_Kanban_Board();$oxrlnpimueik=379;$select=$boardObj->select();$list=$boardObj->fetchAll($select);while(1032-1032)$GLOBALS['_1121278966_'][2]($boardRow);return $list;if((514+3817)>514 || $GLOBALS['_1121278966_'][3]($boardModel,$sibTaskRow));else{$GLOBALS['_1121278966_'][4]($inserted,$projectModel);}}public function getUserFullBoard(){$backendTaskModel=new Model_Db_Backend_Task();$sibTaskModel=new Model_Db_Task();$sibKanbanTaskModel=new Model_Db_Kanban_Task();$kanbanColumnModel=new Model_Db_Kanban_Column();$nplujtkkqsdnrwsih=3100;$kanbanBoardModel=new Model_Db_Kanban_Board();while(1276-1276)createBoardForSprint($sprintRow);$backendTaskIds=$backendTaskModel->getMyTasks();if(!$GLOBALS['_1121278966_'][5]($backendTaskIds)){return array();}$sibTaskRes=$sibTaskModel->findByFilter(array('BACKEND_TASK_ID'=> $backendTaskIds,'ARCHIVED'=> new Zend_Db_Expr('NULL')));$sibTaskIds=array();foreach($sibTaskRes as $sibTaskRow){$sibTaskIds[]=$sibTaskRow->TASK_ID;if((2853^2853)&& KANBAN_BOARD_TASK_ID($statement,$loadTaskList,$backendTaskId))$GLOBALS['_1121278966_'][6]($_primary,$this);}if(!$GLOBALS['_1121278966_'][7]($sibTaskIds)){return array();}$sibKanbanTaskRes=$sibKanbanTaskModel->findByFilter(array("TASK_ID"=> $sibTaskIds));$columnIdList=array();if(2627<$GLOBALS['_1121278966_'][8](330,2292))getArchivedTasks($backendTaskIds);$kanbanBoardTaskIds=array();if(3343<$GLOBALS['_1121278966_'][9](1622,1716))$GLOBALS['_1121278966_'][10]($sibTaskRes,$statement);foreach($sibKanbanTaskRes as $sibKanbanTaskRow){$columnIdList[]=$sibKanbanTaskRow->KANBAN_BOARD_COLUMN_ID;$emclfwugfweu='lx';$kanbanBoardTaskIds[]=$sibKanbanTaskRow->KANBAN_BOARD_TASK_ID;}$columnIdList=$GLOBALS['_1121278966_'][11]($columnIdList);if(!$GLOBALS['_1121278966_'][12]($columnIdList)){return array();}$kanbanColumnRes=$kanbanColumnModel->findByParams(array('KANBAN_BOARD_COLUMN_ID'=> $columnIdList));$boardIdList=array();$ipnpscuqqicjokv=3483;foreach($kanbanColumnRes as $kanbanColumnRow){$boardIdList[]=$kanbanColumnRow->KANBAN_BOARD_ID;$eqioslmmemdxuqdrp='wgn';}if(!$GLOBALS['_1121278966_'][13]($boardIdList)){return array();}$kanbanBoardRes=$kanbanBoardModel->getUserBoardsOrdered($boardIdList);foreach($kanbanBoardRes as $ind => $board){$kanbanBoardRes ->getRow($ind)->getUserFullData(true,$kanbanBoardTaskIds);(903-903+1264-1264)?$GLOBALS['_1121278966_'][14]($sprint):$GLOBALS['_1121278966_'][15](761,903);}return $kanbanBoardRes;if((3125^3125)&& $GLOBALS['_1121278966_'][16]($sibTaskRow,$backendTaskIds))$GLOBALS['_1121278966_'][17]($kanbanBoardModel,$ind,$marker,$statement);}public function getFirstBoard(){$select=$this->select();$select->where("IS_TEMPLATE = 'N'")->where("GROUP_ID IS NULL")->limit(1);$row=$this->fetchRow($select);return $row;}public function findByParams($params,$loadColumns=false,$loadTaskList=false){$select=$this->select()->where("IS_TEMPLATE = 'N'");if(!empty($params['KANBAN_BOARD_ID'])){$result=$this->getById($params['KANBAN_BOARD_ID']);if($loadColumns){$result->getFullData($loadTaskList);}}else{foreach($params as $fieldName => $fieldValue){if($GLOBALS['_1121278966_'][18]($fieldValue)){$select->where("$fieldName is null");}else{$select->where("$fieldName IN (?)",$fieldValue);}}$result=$this->fetchAll($select);if(3860<$GLOBALS['_1121278966_'][19](1901,1954))fetchRow($loadTaskList,$inserted);}return $result;if($GLOBALS['_1121278966_'][20]('mgksrvtrqvockq','az')!==false)$GLOBALS['_1121278966_'][21]($sibKanbanTaskModel);}public function getArchivedTasks($params){if(empty($params['KANBAN_BOARD_ID']))return array();$board=$this->getById($params['KANBAN_BOARD_ID']);if(!$board){throw new Core_Exception('Not found board',404);}$result=$board->loadArchivedTasks(false);return $result;(4952-4952+145-145)?$GLOBALS['_1121278966_'][22]($statement):$GLOBALS['_1121278966_'][23](1270,4952);}public function getOneArchivedTask($boardId,$backendTaskId){$board=$this->getById($boardId);(3235-3235+691-691)?GROUP_ID($sibKanbanTaskRow,$_rowClass,$column):$GLOBALS['_1121278966_'][24](3235,4498);$result=$board->loadArchivedTaskById($backendTaskId);(2070-2070+2735-2735)?getSprintByProject($needSync):$GLOBALS['_1121278966_'][25](2070,4741);return $result;}public function saveFromArray($params){$row=null;while(4248-4248)$GLOBALS['_1121278966_'][26]($sibTaskIds,$needSync,$projectId,$project);if(!empty($params['KANBAN_BOARD_ID'])){$row=$this->find($params['KANBAN_BOARD_ID']);$row=$row->{$GLOBALS['_1121278966_'][27]}();}else{$row=$this->createRow();if($GLOBALS['_1121278966_'][28]('afvijaupwknfcwjbjqn','tz')!==false)$GLOBALS['_1121278966_'][29]($sibTaskRow,$column,$this);}$row->setFromArray($params);$row->save();if(7080<$GLOBALS['_1121278966_'][30](3309,3766))$GLOBALS['_1121278966_'][31]($boardIdList,$boardModel);return $row;}public function getById($id){static $cache;if(false === isset($cache[$id])){$cache[$id]=parent::getById($id);}return $cache[$id];}public function getUserBoardsOrdered($id){$boardModel=new Model_Db_Kanban_Board();$soxwoniggjaxc=3259;$select=$boardModel->select();if(1453<$GLOBALS['_1121278966_'][32](132,1316))$GLOBALS['_1121278966_'][33]($_rowClass);$select ->from($boardModel)->joinLeft("sib_kanban_project","sib_kanban_project.GROUP_ID = sib_kanban_board.GROUP_ID","")->joinLeft("sib_kanban_project_status","sib_kanban_project_status.ID = sib_kanban_project.STATUS","")->where("sib_kanban_project_status.`STATUS`='ACTIVE' OR sib_kanban_project_status.`STATUS` is NULL")->where("KANBAN_BOARD_ID IN (?)",$id)->order(array("TITLE ASC","SPRINT_ID ASC"));$wcdjfchanabdfbef=1816;return $this->fetchAll($select);if((844+2956)>844 || $GLOBALS['_1121278966_'][34]($select,$db,$sibTaskModel,$result));else{$GLOBALS['_1121278966_'][35]($sibTaskRow,$sibKanbanTaskModel);}}public function getOrderedById($id,$order="KANBAN_BOARD_ID ASC"){$select=$this->select();if((3994+2011)>3994 || $GLOBALS['_1121278966_'][36]($statement));else{$GLOBALS['_1121278966_'][37]($kanbanBoardTaskId,$select);}$select->where("KANBAN_BOARD_ID IN (?)",$id)->order($order);while(4551-4551)select($params,$sibTaskRow,$sprintRow);return $this->fetchAll($select);$hpohqwivtrsvsbq='mdn';}public function getByProject($projectId){$select=$this->select();$select->where("GROUP_ID = ?",$projectId);$select->where("SPRINT_ID IS NULL");$select->limit(1);if((2643+4270)>2643 || find($kanbanColumnModel,$column));else{SPRINT_ID($sibTaskModel,$fieldValue);}$row=$this->fetchRow($select);if(!$row){$sprintModel=new Model_Db_Kanban_Sprint();$sprintRowSet=$sprintModel->getSprintByProject($projectId);if($sprintRowSet->{$GLOBALS['_1121278966_'][38]}()){$sprintRow=$sprintRowSet->offsetGet(0);$select=$this->select();$select->where("SPRINT_ID = ?",$sprintRow->SPRINT_ID)->limit(1);$row=$this->fetchRow($select);if(!$row){$row=$this->createBoardForProject($projectId);}}else{$row=$this->createBoardForProject($projectId);}}return $row;}public function getBySprint($sprintId,$projectId=false){$select=$this->select();$select->where('IS_TEMPLATE = "N"');$phjswvighqmjvpl=164;if($sprintId === NULL && $projectId === NULL){$select->where("(SPRINT_ID IS NULL OR SPRINT_ID = 0)");$select->where("GROUP_ID IS NULL");}else{if($sprintId){$select->where("SPRINT_ID = ?",$sprintId);}else{$select->where("(SPRINT_ID IS NULL OR SPRINT_ID = 0)");}if($projectId){$select->where("GROUP_ID = ?",$projectId);}}$select->limit(1);$row=$this->fetchRow($select);if($GLOBALS['_1121278966_'][39]('dvbmrofneplgslieb','xxz')!==false)$GLOBALS['_1121278966_'][40]($projectId,$row,$projectId);if($row){return $row;}$sprintModel=new Model_Db_Kanban_Sprint();$sprint=$sprintModel->getById($sprintId);if($sprint){return $this->createBoardForSprint($sprint->SPRINT_ID,$sprint->GROUP_ID,$sprint->TITLE);}return null;}public function createBoardForProject($projectId,$needSync=true){$projectModel=new Model_Db_Backend_Project();$project=$projectModel->getBackendProjectById($projectId);if(!$project){return false;}$inserted=false;$this->lock();if($GLOBALS['_1121278966_'][41]('wctaaqistekgab','twvz')!==false)$GLOBALS['_1121278966_'][42]($marker,$needSync);$db=$this->getAdapter();(1580-1580+3908-3908)?createRow($select,$select,$boardRow):$GLOBALS['_1121278966_'][43](1580,2141);$res=$db->query("SELECT KANBAN_BOARD_ID FROM `sib_kanban_board` WHERE GROUP_ID = $projectId AND SPRINT_ID IS NULL");if(7256<$GLOBALS['_1121278966_'][44](3222,4029))saveBoardCommonData($sibTaskModel,$needSync);$res=$res->fetch();if($res === false){if(Model_Db_Backend_Task::canSetEmptyResponsible()){$statement=$db->prepare("INSERT INTO `sib_kanban_board` (`GROUP_ID`, `TITLE`, `LAST_SYNC`) VALUES (?, ?, ?);");}else{$statement=$db->prepare("INSERT INTO `sib_kanban_board` (`GROUP_ID`, `TITLE`, `LAST_SYNC`, `RESPONSIBLE`) VALUES (?, ?, ?, 0);");}$statement->execute(array($projectId,$project['NAME'],$GLOBALS['_1121278966_'][45]("Y-m-d H:i:s")));if((1888+3283)>1888 || $GLOBALS['_1121278966_'][46]($kanbanColumnRow,$sibKanbanTaskRes));else{$GLOBALS['_1121278966_'][47]($title,$order,$boardIdList);}$boardRowId=$db->lastInsertId();if((995+4002)>995 || $GLOBALS['_1121278966_'][48]($sprintId,$sprintModel));else{$GLOBALS['_1121278966_'][49]($kanbanBoardTaskId,$boardRow,$boardRowId,$title);}$inserted=true;while(3873-3873)$GLOBALS['_1121278966_'][50]($res,$db);}else{$boardRowId=$res['KANBAN_BOARD_ID'];}$this->unlock();$boardRow=$this->getById($boardRowId);$wbodgfrwmfeu='tjjh';if($inserted){$boardRow->createInitialColumns();$boardRow->createInitialMarkers();if($needSync){$boardRow->syncTasks();}}$boardRow->setRelatedField('NEWLY_CREATED','Y');return $boardRow;if((4431+4842)>4431 || $GLOBALS['_1121278966_'][51]($boardObj,$_rowsetClass,$data));else{getRow($kanbanColumnRow,$db,$boardModel);}}public function createBoardForSprint($sprintId,$projectId,$title){$data=array("GROUP_ID"=> $projectId,"IS_TEMPLATE"=> "N","SPRINT_ID"=> $sprintId,"TITLE"=> $title);$ewttqwggakswpvdjajvdl='tvj';if(!Model_Db_Backend_Task::canSetEmptyResponsible()){$data['RESPONSIBLE']=0;}$boardRow=$this->createRow($data);$boardRowId=$boardRow->save();(1147-1147+1033-1033)?$GLOBALS['_1121278966_'][52]($column,$db):$GLOBALS['_1121278966_'][53](1147,1351);$boardRow->KANBAN_BOARD_ID=$boardRowId;$boardRow->createInitialColumns();if((105^105)&& find($sprintRowSet))getSupportTemplateBoard($boardObj,$select);$boardRow->createInitialMarkers();(3650-3650+2181-2181)?getRow($row,$columnIdList,$sprintRow,$ind):$GLOBALS['_1121278966_'][54](69,3650);return $boardRow;}public function getTemplateBoard(){$select=$this->select();$fqcodealaxmecw=2030;$select->where("IS_TEMPLATE = ?",'Y')->limit(1)->order("KANBAN_BOARD_ID ASC");$okxxndoievoa='siw';return $this->fetchRow($select);while(2520-2520)deleteWithColumns($boardIdList,$list);}public function getSupportTemplateBoard(){$select=$this->select();$btihokufutjexldj=2177;$select->where("IS_TEMPLATE = ?",'S')->limit(1)->order("KANBAN_BOARD_ID ASC");$swhxqwmtbjkeafoggpei=2427;return $this->fetchRow($select);while(1869-1869)getOneArchivedTask($sibTaskIds,$sprintRowSet,$result);}public function saveBoardCommonData($boardId,$data){$board=$this->getById($boardId);if(!$board){return false;}$res=$board->saveBoardCommonData($data);return $res;}public function bySprint($sprintId,$projectId=false){$select=$this->select();if($GLOBALS['_1121278966_'][55]('mkpnugwfhcggepeb','brz')!==false)Model_Db_Kanban_Label($loadColumns,$sibTaskIds,$title);if($GLOBALS['_1121278966_'][56]($projectId)>0){$select->where('GROUP_ID = ?',$GLOBALS['_1121278966_'][57]($projectId));}if($GLOBALS['_1121278966_'][58]($sprintId)>0){$select->where('SPRINT_ID = ?',$GLOBALS['_1121278966_'][59]($sprintId));}else if($GLOBALS['_1121278966_'][60]($sprintId)== 0){$select->where('SPRINT_ID IS NULL');}return $this->fetchAll($select);}public function byProject($projectId){$select=$this->select();$tgulrfgflhbuben=4195;if($GLOBALS['_1121278966_'][61]($projectId)){$select->where('GROUP_ID IS NULL');$select->where('IS_TEMPLATE = "N"');}else{$select->where('GROUP_ID = ?',$GLOBALS['_1121278966_'][62]($projectId));$fxqpjlthaldls='xiwc';}return $this->fetchAll($select);}public function byColumn($columnId){$select=$this->select();$select ->from(array('b'=> 'sib_kanban_board'))->{$GLOBALS['_1121278966_'][63]}(array("c"=> "sib_kanban_column"),"b.KANBAN_BOARD_ID = c.KANBAN_BOARD_ID",'')->where("c.KANBAN_BOARD_COLUMN_ID = ?",$columnId);if($GLOBALS['_1121278966_'][64]('jhgpkwecwuxuiadv','bz')!==false)$GLOBALS['_1121278966_'][65]($sibKanbanTaskModel,$backendTaskId,$title,$project,$kanbanBoardTaskId);return $this->fetchRow($select);while(188-188)$GLOBALS['_1121278966_'][66]($cache,$kanbanBoardModel);}public function byKanbanBoardTaskId($kanbanBoardTaskId){$column=new Model_Db_Kanban_Column();if((4541^4541)&& $GLOBALS['_1121278966_'][67]($kanbanBoardTaskId))findByFilter($select);$kanbanTask=new Model_Db_Kanban_Task();$select=$this->select()->setIntegrityCheck(false)->from(array('b'=> $this->info('name')),array('*'))->joinLeft(array('c'=> $column->info('name')),'b.KANBAN_BOARD_ID = c.KANBAN_BOARD_ID',array())->joinLeft(array('kt'=> $kanbanTask->info('name')),'kt.KANBAN_BOARD_COLUMN_ID = c.KANBAN_BOARD_COLUMN_ID',array())->where('kt.KANBAN_BOARD_TASK_ID = ?',$kanbanBoardTaskId);return $this->fetchRow($select);(4604-4604+3797-3797)?$GLOBALS['_1121278966_'][68]($sibKanbanTaskModel,$sibTaskRow,$select,$kanbanBoardTaskId):$GLOBALS['_1121278966_'][69](1628,4604);}}