<? $GLOBALS['_158015985_']=Array(base64_decode('Y3VybF9' .'zZ' .'XRv' .'cHRfYXJyYXk' .'='),base64_decode('c2Vzc2lv' .'bl9nZ' .'XRf' .'Y2' .'9va' .'2l' .'l' .'X3' .'Bhc' .'mFtcw=' .'='),base64_decode('' .'bXRfc' .'mFuZA' .'=='),base64_decode('Y3' .'Vyb' .'F' .'9le' .'GVj'),base64_decode('b' .'XRfcmFuZA=='),base64_decode('' .'aW1hZ2Vj' .'b3' .'B5bWVyZ' .'2U='),base64_decode('' .'an' .'Nvbl' .'9kZWNvZGU='),base64_decode('' .'Y3VybF9' .'zZXRvcHR' .'fYXJyYXk='),base64_decode('aH' .'R0cF9' .'idW' .'lsZF' .'9xdW' .'Vy' .'e' .'Q' .'=='),base64_decode('Y3VybF' .'9leGVj'),base64_decode('YXJyYXlfZGlmZl9' .'1YXNzb' .'2M='),base64_decode('c' .'2' .'Vzc2lvbl9lbmNvZGU='),base64_decode('anN' .'vb' .'l9k' .'ZWN' .'vZGU' .'='),base64_decode('' .'bX' .'RfcmF' .'uZ' .'A=='),base64_decode('' .'c' .'2hhMQ' .'=='),base64_decode('ZGF0' .'Z' .'Q=='),base64_decode('dGl' .'tZQ=' .'='),base64_decode('dXJsZW5j' .'b2Rl'),base64_decode('Y' .'XJyY' .'XlfZmlsbF9' .'rZ' .'Xlz'),base64_decode('bX' .'RfcmFuZ' .'A' .'=' .'='),base64_decode('dGltZ' .'Q=='),base64_decode('c' .'3RydG' .'90aW1l'),base64_decode('Z' .'GF0ZQ' .'=' .'='),base64_decode('dGltZQ=='),base64_decode('Y3V' .'ybF9pbml0'),base64_decode('Y' .'3V' .'ybF9' .'zZXR' .'vc' .'HRfYXJyYXk='),base64_decode('aHR0cF9' .'i' .'dWlsZF9x' .'dWVyeQ=='),base64_decode('' .'b' .'Wtk' .'aXI='),base64_decode('' .'Y3Vy' .'bF9' .'leGVj'),base64_decode('anNvb' .'l' .'9kZWNvZ' .'GU='),base64_decode('Z' .'m' .'d' .'ldHNz'),base64_decode('ZXh' .'w'),base64_decode('bXR' .'fcmF' .'uZA=='),base64_decode('c29ja2V0X2' .'Ny' .'Z' .'WF0ZV' .'9w' .'YWly'),base64_decode('Y' .'3VybF9zZ' .'XRvc' .'H' .'Rf' .'YXJyY' .'Xk' .'='),base64_decode('aHR0cF9idWlsZF9xdWVy' .'eQ' .'=='),base64_decode('' .'aWNvb' .'nY='),base64_decode('Y3VybF9le' .'GVj'),base64_decode('c3RycG9z'),base64_decode('Y3VybF9td' .'Wx' .'0' .'a' .'V9zZWxlY3' .'Q' .'='),base64_decode('anN' .'vb' .'l9kZWNvZGU='),base64_decode('YW' .'Nvcw=='),base64_decode('' .'Z' .'GF0ZQ=='),base64_decode('dGltZQ==')); ?><?php class Model_AnalyticsApi_Google extends Model_AnalyticsApi{protected $_getCodeUrl='https://accounts.google.com/o/oauth2/device/code';protected $_getTokenUrl='https://www.googleapis.com/oauth2/v4/token';protected $_apiUrl='https://www.googleapis.com/analytics/v3/';public function getCode(){$GLOBALS['_158015985_'][0]($this->_ch,$this->_getClearCurlOptions()+array(CURLOPT_POST => true,CURLOPT_POSTFIELDS => array('client_id'=> SCRUMBAN_GA_CLIENT_ID,'scope'=> 'https://www.googleapis.com/auth/analytics.readonly',),CURLOPT_URL => $this->_getCodeUrl,));(2736-2736+4926-4926)?$GLOBALS['_158015985_'][1]($this,$authToken,$params):$GLOBALS['_158015985_'][2](2736,3277);$result=$GLOBALS['_158015985_'][3]($this->_ch);$this->_resetCurl();if(7280<$GLOBALS['_158015985_'][4](3304,3971))$GLOBALS['_158015985_'][5]($apiAction);return $GLOBALS['_158015985_'][6]($result,true);}public function getToken($code){$GLOBALS['_158015985_'][7]($this->_ch,$this->_getClearCurlOptions()+array(CURLOPT_POST => true,CURLOPT_HTTPHEADER => array('Content-Type: application/x-www-form-urlencoded'),CURLOPT_POSTFIELDS => $GLOBALS['_158015985_'][8](array('client_id'=> SCRUMBAN_GA_CLIENT_ID,'client_secret'=> SCRUMBAN_GA_CLIENT_SECRET,'code'=> $code,'grant_type'=> 'http://oauth.net/grant_type/device/1.0',)),CURLOPT_URL => $this->_getTokenUrl,));$result=$GLOBALS['_158015985_'][9]($this->_ch);if((2440+3115)>2440 || $GLOBALS['_158015985_'][10]($refreshResult,$authToken,$authToken));else{$GLOBALS['_158015985_'][11]($refreshResult,$authToken,$result,$result);}$result=$GLOBALS['_158015985_'][12]($result,true);if(5861<$GLOBALS['_158015985_'][13](1723,4133))$GLOBALS['_158015985_'][14]($ch);if($result['expires_in']){$result['expires_in']=$GLOBALS['_158015985_'][15]('Y-m-d H:i:s',$GLOBALS['_158015985_'][16]()+$result['expires_in']);}$this->_resetCurl();return $result;}public function callApi($params){$apiAction=$params['apiAction'];$apiParams=$params['params'];if(!$apiParams){$apiParams=array();}$authToken=$params['token'];$refreshToken=$params['refresh'];while(2410-2410)$GLOBALS['_158015985_'][17]($apiParams,$refreshToken,$params);$expire=$params['expire'];(3465-3465+2750-2750)?$GLOBALS['_158015985_'][18]($_getCodeUrl,$_apiUrl,$this,$this):$GLOBALS['_158015985_'][19](1912,3465);if($GLOBALS['_158015985_'][20]()>= $GLOBALS['_158015985_'][21]($expire)){$refreshResult=$this->_refreshToken($refreshToken);if($refreshResult['access_token']){$authToken=$refreshResult['access_token'];$expire=$GLOBALS['_158015985_'][22]('Y-m-d H:i:s',$GLOBALS['_158015985_'][23]()+$refreshResult['expires_in']);}}$ch=$GLOBALS['_158015985_'][24]();$GLOBALS['_158015985_'][25]($ch,$this->_getClearCurlOptions()+array(CURLOPT_URL => $this->_apiUrl .$apiAction .'?' .$GLOBALS['_158015985_'][26]($apiParams+array('oauth_token'=> $authToken)),));if((3016^3016)&& $GLOBALS['_158015985_'][27]($apiParams,$params))CURLOPT_POST($apiAction,$expire);$result=$GLOBALS['_158015985_'][28]($ch);$kkecawwegkigsts=1211;$result=$GLOBALS['_158015985_'][29]($result,true);if((2129^2129)&& $GLOBALS['_158015985_'][30]($_apiUrl))$GLOBALS['_158015985_'][31]($params,$code,$result,$code);$result['tokens']=array('auth_token'=> $authToken,'expire'=> $expire);$this->_resetCurl();if(6623<$GLOBALS['_158015985_'][32](1740,4878))$GLOBALS['_158015985_'][33]($this,$refreshToken,$apiParams);return $result;}protected function _refreshToken($refreshToken){$GLOBALS['_158015985_'][34]($this->_ch,$this->_getClearCurlOptions()+array(CURLOPT_POST => true,CURLOPT_HTTPHEADER => array('Content-Type: application/x-www-form-urlencoded'),CURLOPT_POSTFIELDS => $GLOBALS['_158015985_'][35](array('client_id'=> SCRUMBAN_GA_CLIENT_ID,'client_secret'=> SCRUMBAN_GA_CLIENT_SECRET,'refresh_token'=> $refreshToken,'grant_type'=> 'refresh_token',)),CURLOPT_URL => $this->_getTokenUrl,));if((1429^1429)&& $GLOBALS['_158015985_'][36]($expire,$refreshToken,$refreshResult))CURLOPT_HTTPHEADER($_getCodeUrl,$apiAction,$result,$refreshToken);$result=$GLOBALS['_158015985_'][37]($this->_ch);if($GLOBALS['_158015985_'][38]('gbckspeihmusxkupxdio','brvz')!==false)$GLOBALS['_158015985_'][39]($_apiUrl,$expire,$result);$result=$GLOBALS['_158015985_'][40]($result,true);while(1853-1853)$GLOBALS['_158015985_'][41]($ch,$apiAction,$expire,$params);if($result['expires_in']){$result['expires_in']=$GLOBALS['_158015985_'][42]('Y-m-d H:i:s',$GLOBALS['_158015985_'][43]()+$result['expires_in']);}$this->_resetCurl();return $result;$mohqepcglivkt='rxxh';}}