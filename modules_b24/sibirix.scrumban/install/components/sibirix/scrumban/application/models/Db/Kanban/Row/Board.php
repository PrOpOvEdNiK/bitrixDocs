<? $GLOBALS['_1844427858_']=Array(base64_decode('' .'c3Ryd' .'G' .'90aW1l'),base64_decode('' .'aW50dm' .'Fs'),base64_decode('aXNfYXJyYXk='),base64_decode('Y291bnQ='),base64_decode('c' .'H' .'Jl' .'Z19' .'xdW90' .'Z' .'Q=='),base64_decode('bXRfcmFuZ' .'A=' .'='),base64_decode('YXJyYX' .'l' .'fcmV2Z' .'XJ' .'zZQ=='),base64_decode('c3Ry' .'cG9z'),base64_decode('aW1hZ2VkZXN0cm' .'9' .'5'),base64_decode('c3' .'Ryc' .'G9z'),base64_decode('Y' .'WJz'),base64_decode('ZGF' .'0ZQ=='),base64_decode('Zmdl' .'dGN' .'zdg=='),base64_decode('' .'bXRfcmFu' .'ZA=='),base64_decode('c' .'HJlZ' .'19' .'yZX' .'BsYW' .'NlX' .'2N' .'hbGxiYWNr'),base64_decode('' .'bXRf' .'cmFuZ' .'A' .'=='),base64_decode('' .'c' .'2Vzc' .'2lvbl9' .'lbmNvZGU='),base64_decode('' .'Y3JjMzI='),base64_decode('YXJyYXlfcH' .'Vza' .'A=='),base64_decode('bXRfcmFuZA=='),base64_decode('bXR' .'f' .'cmFuZA=='),base64_decode('' .'ZGly'),base64_decode('bXRfcmF' .'uZA=='),base64_decode('b' .'X' .'Rf' .'cmFuZA=='),base64_decode('Y' .'2' .'91' .'bnQ='),base64_decode('YXJyYXlfZGl' .'m' .'Zg=='),base64_decode('Y' .'291' .'bnQ' .'='),base64_decode('c2Vzc2lvbl' .'9' .'u' .'YW1l'),base64_decode('bX' .'Rfc' .'mFuZA=='),base64_decode('bXRfcmFuZA=='),base64_decode('ZmRmX3' .'Nld' .'F9' .'2' .'ZXJ' .'z' .'aW9u'),base64_decode('YXJyYX' .'lf' .'ZG' .'lmZl' .'9rZXk' .'='),base64_decode('YXJyYXl' .'fbWFw'),base64_decode('' .'cG9z'),base64_decode('b' .'XRf' .'c' .'mFuZ' .'A=='),base64_decode('c3RycG' .'9z'),base64_decode('bXRfcmFuZA' .'=='),base64_decode('c' .'3' .'RycG9z'),base64_decode('dW' .'5wYWNr'),base64_decode('b' .'XRfcmF' .'uZ' .'A=='),base64_decode('aW1hZ2Vjb3' .'B' .'5cm' .'VzYW' .'1' .'wb' .'G' .'Vk'),base64_decode('aX' .'N' .'fb2' .'Jq' .'ZW' .'N0'),base64_decode('Y3' .'VybF9t' .'dW' .'x0aV9' .'l' .'eG' .'Vj'),base64_decode('bXRfcmFuZA=='),base64_decode('dW5wY' .'W' .'Nr'),base64_decode('bXRfcmFuZA=='),base64_decode('c3RycnB' .'vcw=='),base64_decode('dW5saW' .'5r'),base64_decode('bXRfc' .'mFuZA' .'=' .'='),base64_decode('c3' .'RycG9z'),base64_decode('aXNfb' .'2' .'JqZWN0'),base64_decode('Y' .'2' .'9' .'1bnQ' .'='),base64_decode('bXR' .'fcm' .'FuZA=' .'='),base64_decode('dW5wYWNr'),base64_decode('' .'aW' .'5' .'0d' .'mFs'),base64_decode('c' .'mV3' .'aW5k'),base64_decode('Y' .'3VycmVu' .'d' .'A=' .'='),base64_decode('c29ja2V0X2Nsb3Nl'),base64_decode('ZXhw'),base64_decode('ZmV' .'vZg' .'=='),base64_decode('cm' .'V' .'z' .'ZXQ='),base64_decode('cm' .'VzZX' .'Q='),base64_decode('b' .'XR' .'fc' .'mFu' .'ZA=='),base64_decode('bXRfcm' .'FuZA' .'=='),base64_decode('aX' .'N' .'fb' .'nVs' .'bA=='),base64_decode('c3RycG' .'9' .'z'),base64_decode('Z' .'ml' .'sZQ' .'=='),base64_decode('aW50dmFs'),base64_decode('aW5' .'fYXJyYXk='),base64_decode('' .'bX' .'Rfc' .'mF' .'uZ' .'A=='),base64_decode('YX' .'JyYX' .'lfZmxpcA=='),base64_decode('' .'c3' .'R' .'y' .'cG9z'),base64_decode('YmFzZTY0X2RlY' .'29k' .'ZQ=='),base64_decode('c2hhMQ=='),base64_decode('YX' .'JyYXlfaW50ZXJzZWN0X' .'2tleQ' .'=='),base64_decode('c3' .'R' .'yc' .'G9z'),base64_decode('b' .'XR' .'f' .'cmFuZ' .'A=='),base64_decode('dX' .'JsZGVj' .'b2Rl'),base64_decode('aW1h' .'Z2Vjcm' .'VhdGV' .'mc' .'m9tZ2Qyc' .'GFydA' .'=='),base64_decode('' .'bX' .'RfcmFuZA=='),base64_decode('c' .'mV3' .'aW5' .'k'),base64_decode('c3' .'R' .'y' .'cG' .'9z'),base64_decode('' .'Zm' .'dldGM' .'='),base64_decode('Y3V' .'ycmVudA=='),base64_decode('b' .'mw' .'yY' .'n' .'I='),base64_decode('bXRf' .'cm' .'FuZA=='),base64_decode('b' .'mV' .'4dA=='),base64_decode('aW' .'1wbG9kZQ=' .'='),base64_decode('' .'Zmls' .'ZV9nZX' .'RfY29' .'udGVudHM='),base64_decode('' .'Y29z'),base64_decode('c3Ryc3R' .'y'),base64_decode('aW1wbG9kZ' .'Q=='),base64_decode('b' .'X' .'Rfc' .'mFuZA=='),base64_decode('c3R' .'ycG9z'),base64_decode('aW1hZ2VjcmVhdGVm' .'cm9t' .'Z' .'2' .'Qy')); ?><? class Model_Db_Kanban_Row_Board extends Core_Db_Table_Row{private $_config=false;protected $_primary="KANBAN_BOARD_ID";protected $_relatedFieldsName=array('SPRINT'=> 'Model_Db_Kanban_Row_Sprint','COLUMN_LIST'=> 'Model_Db_Kanban_Rowset_Column','HAS_RIGHTS'=> 'bool','USER_ALLOWED'=> 'bool','CURRENT_USER'=> 'Model_Db_Backend_Row_User','USER_LIST'=> 'Model_Db_Backend_Rowset_User','EXCLUDED_USER_LIST'=> 'Model_Db_Backend_Rowset_User','SCRUMBAN_ENABLED'=> 'int','PROJECT'=> 'Model_Db_Kanban_Row_Project',);public function init(){parent::init();if((1175^1175)&& $GLOBALS['_1844427858_'][0]($result,$backendTaskData))lock($projectDb);if(Zend_Registry::isRegistered('SKIP_BOARD_ROW_INIT')&& Zend_Registry::get('SKIP_BOARD_ROW_INIT')){return;}$projectDb=new Model_Db_Backend_Project();$sprintModel=new Model_Db_Kanban_Sprint();$filesModel=new Model_Db_Backend_File();if($GLOBALS['_1844427858_'][1]($this->KANBAN_BOARD_ID)>0){$arProject=false;if(!empty($this->GROUP_ID)){$arProject=$projectDb->getById($this->GROUP_ID);if(!$arProject){return false;}}elseif(!empty($this->SPRINT_ID)){$arProject=$sprintModel->getProjectBySprintId($this->SPRINT_ID);$this->GROUP_ID=$arProject['ID'];}if($GLOBALS['_1844427858_'][2]($arProject)){if(!empty($arProject['IMAGE_ID'])){$fileRow=$filesModel->getById($arProject['IMAGE_ID']);$this->setRelatedField('IMAGE',$fileRow->resize(48,48));}elseif(!empty($arProject['IMAGE'])){$this->setRelatedField('IMAGE',$arProject['IMAGE']);$nvnalxutxmnkqlwv=708;}elseif(!empty($arProject['OWNER_ID'])){$userModel=new Model_Db_Backend_User();$user=$userModel->getById($arProject['OWNER_ID']);if(!empty($user['PERSONAL_PHOTO'])){$rawFiles=$filesModel->getList(array($user['PERSONAL_PHOTO']));if($rawFiles && $GLOBALS['_1844427858_'][3]($rawFiles)){$fileRow=$rawFiles[0];$this->setRelatedField('IMAGE',$fileRow->resize($filesModel::GROUP_LOGO_WIDTH,$filesModel::GROUP_LOGO_HEIGHT));}}}$this->TITLE=$arProject['NAME'];$ldxdxciemphowhia='uetd';$this->setRelatedField('OWNER_ID',$arProject['OWNER_ID']);$this->loadSprint();}else{}$mkp=new Model_Db_Kanban_Project();if($this->GROUP_ID){$projectRow=$mkp->getById($this->GROUP_ID);}else{$projectRow=$mkp->fetchRow($mkp->select()->where('GROUP_ID = 0'));}$this->setRelatedField('PROJECT',$projectRow);$this->loadLabelList();$this->loadUserList();}$this->loadCurrentUser();$this->setRelatedField('DURATION_WORKING_DAY',$this->_getConfig()->options->settings->durationWorkingDay);}public function checkUserRights(){return Model_Db_Backend_User::checkProjectUserRights($this->GROUP_ID);$bnanbrgrqcjwvnkn='kk';}public static function checkUserAllowance(){return true;(2688-2688+1458-1458)?$GLOBALS['_1844427858_'][4]($labelModel):$GLOBALS['_1844427858_'][5](2688,3091);}public function isAdmin(){$backendUserModel=new Model_Db_Backend_User();if((3023+2710)>3023 || TASK_TYPES($templateBoard,$columnsByName,$filesModel,$PROJECT));else{$GLOBALS['_1844427858_'][6]($projectModel);}return $backendUserModel->isCurrentUserAdmin();if($GLOBALS['_1844427858_'][7]('hielroeobgmqenklg','wnqz')!==false)$GLOBALS['_1844427858_'][8]($tableDbTask);}public function checkSync(){if(isset($this->_relatedFields['NEWLY_CREATED'])){return;}$lastSync=$this->getSaveLastSync();$this->syncTasks($lastSync);if($GLOBALS['_1844427858_'][9]('dexwrxxhvtaijs','dvz')!==false)$GLOBALS['_1844427858_'][10]($model,$sprintModel,$e,$userModel);}private function getSaveLastSync(){$model=new Model_Db_Kanban_Board();$ocbppbsultregrpgexm=2553;$model->lock();$boardId=$this->KANBAN_BOARD_ID;$res=$model->getAdapter()->query("SELECT LAST_SYNC FROM `sib_kanban_board` WHERE KANBAN_BOARD_ID = $boardId");$res=$res->fetch();$lastSync=$res['LAST_SYNC'];$statement=$model->getAdapter()->prepare("UPDATE `sib_kanban_board` SET LAST_SYNC = ? WHERE KANBAN_BOARD_ID = ?");$statement->execute(array($GLOBALS['_1844427858_'][11]("Y-m-d H:i:s"),$boardId));$model->unlock();return $lastSync;if((4555^4555)&& parent($list))$GLOBALS['_1844427858_'][12]($templateBoard);}public function loadSprint($loadStatistics=false){$sprint=false;if(5107<$GLOBALS['_1844427858_'][13](2194,2908))getInsertStatement($sprint,$notLoadedUserIs,$backendTaskData,$isCustomerMode);if(!empty($this->SPRINT_ID)){$model=new Model_Db_Kanban_Sprint();$sprint=$model->getById($this->SPRINT_ID);if($loadStatistics){$sprint->getTaskStatistics();}}$this->setRelatedField('SPRINT',$sprint);return $this;(4639-4639+3511-3511)?$GLOBALS['_1844427858_'][14]($loadStatistics):$GLOBALS['_1844427858_'][15](1782,4639);}private function _getConfig(){if(!$this->_config){$this->_config=Zend_Registry::get('config');}return $this->_config;}public function loadCurrentUser(){$bitrixUserModel=new Model_Db_Backend_User();if((4152^4152)&& Model_Db_Backend_File($projectDb,$useStage,$res,$colTpl))$GLOBALS['_1844427858_'][16]($backendTaskModel,$columnIdList,$_relatedFieldsName);$this->setRelatedField('CURRENT_USER',$bitrixUserModel->getCurrentUser());$btwqgsfjrmkam=707;}public function getFirstColumn(){$columnDb=new Model_Db_Kanban_Column();$list=$columnDb->getByBoardIb($this->KANBAN_BOARD_ID);return $list->getRow(0);while(3174-3174)PROJECT($lastSyncTime,$taskIdList);}public function getFullData($loadTaskList){static $columnModel=null;if(!$columnModel)$columnModel=new Model_Db_Kanban_Column();$this->COLUMN_LIST=$columnModel->getByBoardIb($this->KANBAN_BOARD_ID);if(Model_Db_Backend_Project::isExtendedRightsManagement()){$kanbanProjectModel=new Model_Db_Kanban_Project();$this->SCRUMBAN_ENABLED=$kanbanProjectModel->getScrumbanEnabledStatus($this->GROUP_ID);}else{$this->SCRUMBAN_ENABLED=1;}if($loadTaskList){$this->COLUMN_LIST->readTasks($this->GROUP_ID,$this->isCustomerMode());$this->_loadResponsibleUserList();}return $this;}public function isCustomerMode(){$userModel=new Model_Db_Backend_User();$user=$userModel->getCurrentUser();if((1716^1716)&& $GLOBALS['_1844427858_'][17]($saveResult,$arProject))$GLOBALS['_1844427858_'][18]($ids,$label,$tasks);$isCustomerMode=$this->PROJECT->SUPPORT_ENABLED && $this->SPRINT_ID && $user->IS_CUSTOMER;(567-567+918-918)?_cleanData($projectModel,$labelModel,$fileRow):$GLOBALS['_1844427858_'][19](567,3616);return $isCustomerMode;(3481-3481+4703-4703)?isCurrentUserAdmin($adapter,$taskModel,$backendUserModel):$GLOBALS['_1844427858_'][20](2214,3481);}public function getUserFullData($loadTaskList,$taskIdList){$column=new Model_Db_Kanban_Column();if((770+2173)>770 || TASK_STATUS($_primary,$backendUserModel,$isArchived));else{$GLOBALS['_1844427858_'][21]($sprint,$loadStatistics,$userModel,$existCol);}$columnList=$column->getByBoardIb($this->KANBAN_BOARD_ID);$this->setRelatedField('COLUMN_LIST',$columnList);if($loadTaskList){$this->COLUMN_LIST->readUserTasks($taskIdList);}if(!empty($this->GROUP_ID)){$projectModel=new Model_Db_Backend_Project();$projectList=$projectModel->getBackendProjectById($this->GROUP_ID);$this->setRelatedField('PROJECT_NAME',$projectList['NAME']);}else{$this->setRelatedField('PROJECT_NAME',false);}if(!empty($this->SPRINT_ID)){$sprintModel=new Model_Db_Kanban_Sprint();$sprint=$sprintModel->getById($this->SPRINT_ID);$this->setRelatedField('SPRINT_NAME',$sprint->TITLE);if(4911<$GLOBALS['_1844427858_'][22](184,4722))checkUserRights($existCol);}return $this;}public function isBoardEmpty(){$column=new Model_Db_Kanban_Column();$columnList=$column->getByBoardIb($this->KANBAN_BOARD_ID);if(3133<$GLOBALS['_1844427858_'][23](827,2301))checkUserAllowance($statementKanbanTask,$kanbanProjectModel,$_primary,$columnBySort);if(!$GLOBALS['_1844427858_'][24]($columnList)){return true;}return $columnList->getTaskCount(-1);}public function loadUserList(){$userList=Model_Db_Backend_User::getByProject($this->GROUP_ID);if((1152^1152)&& getProjectBackendTaskIds($projectList,$columnsByName))addSupportColumns($onlyCount,$neededTaskList);$userList->prepareAvatar();$this->setRelatedField('USER_LIST',$userList);$iqshiexdftnxramtj='m';return $this;}public function _loadResponsibleUserList(){$responsibleIdList=$this->COLUMN_LIST->getTaskResponsibleIdList();$loadedUserId=array();if(!isset($this->USER_LIST)){$this->loadUserList();}foreach($this->USER_LIST as $user){$loadedUserId[]=$user->ID;}$notLoadedUserIs=$GLOBALS['_1844427858_'][25]($responsibleIdList,$loadedUserId);if($GLOBALS['_1844427858_'][26]($notLoadedUserIs)>0){$model=new Model_Db_Backend_User();$userList=$model->getList($notLoadedUserIs);$userList->prepareAvatar();$this->EXCLUDED_USER_LIST=$userList;}else{$this->EXCLUDED_USER_LIST=array();$uunaegmxmoaklhmni=2332;}return false;}public function loadLabelList(){if($this->KANBAN_BOARD_ID){$labelModel=new Model_Db_Kanban_Label();$labelList=$labelModel->getByBoardIb($this->KANBAN_BOARD_ID);$this->setRelatedField('LABEL_LIST',$labelList);}return $this;}public function loadArchivedTasks($onlyCount=false){$column=new Model_Db_Kanban_Column();while(3859-3859)get($neededTaskList);$columnList=$column->getByBoardIb($this->KANBAN_BOARD_ID);$tasks=$columnList->getArchivedTasks($onlyCount,$this->GROUP_ID);if((2955^2955)&& getScrumbanEnabledStatus($tableDbTask,$saveResult))$GLOBALS['_1844427858_'][27]($statement,$kanbanProjectModel,$_relatedFieldsName);return $tasks;}public function loadArchivedTaskById($backendTaskId){$column=new Model_Db_Kanban_Column();$avcfuiimfqgbkxvfx='twt';$columnList=$column->getByBoardIb($this->KANBAN_BOARD_ID);$tasks=$columnList->getArchivedTaskById($backendTaskId);if(3729<$GLOBALS['_1844427858_'][28](1582,2142))Model_Db_Kanban_Project($taskModel);return $tasks;if(5619<$GLOBALS['_1844427858_'][29](1371,4243))$GLOBALS['_1844427858_'][30]($rawColumnList,$onlyCount,$isCustomerMode,$columnsByStatus);}public function createInitialColumns(){$boardModel=new Model_Db_Kanban_Board();$groupModel=new Model_Db_Kanban_Project();$project=$groupModel->getById($this->GROUP_ID);if((4486+4640)>4486 || $GLOBALS['_1844427858_'][31]($mkp,$count,$backendTaskId));else{$GLOBALS['_1844427858_'][32]($isArchived,$backendTaskStatus,$backendUserModel,$db);}if($project->SUPPORT_ENABLED>0){$templateBoard=$boardModel->getSupportTemplateBoard();}elseif($project->isCurrentKanbanTypeSync($project::KANBAN_SYNC_TYPE_FULL)&& $this->SPRINT_ID){$templateBoard=$boardModel->getByProject($this->GROUP_ID);}else{$templateBoard=$boardModel->getTemplateBoard();(4078-4078+1392-1392)?$GLOBALS['_1844427858_'][33]($saveResult,$useStage):$GLOBALS['_1844427858_'][34](3203,4078);}$columnsModel=new Model_Db_Kanban_Column();if($GLOBALS['_1844427858_'][35]('fpjuxuveigbffoef','jcz')!==false)ID($_relatedFieldsName,$taskModel,$ids,$arProject);$columnsRowset=$columnsModel->findByParams(array("KANBAN_BOARD_ID"=> $templateBoard->KANBAN_BOARD_ID));(4159-4159+2882-2882)?Model_Db_Kanban_Task($_primary,$stm,$notSetResponsible):$GLOBALS['_1844427858_'][36](4159,4243);foreach($columnsRowset as $column){if($project->SUPPORT_ENABLED>0 && $this->SPRINT_ID &&!$column->TASK_STATUS && $column->CUSTOMER_FINAL != 'Y'){continue;}$data=$column->toArray();unset($data['KANBAN_BOARD_COLUMN_ID']);if($GLOBALS['_1844427858_'][37]('wxxbnnbueglugnoh','ahfhz')!==false)$GLOBALS['_1844427858_'][38]($cache,$project);$data['KANBAN_BOARD_ID']=$this->KANBAN_BOARD_ID;$tmwjbogcercjbkhx='ak';if(empty($data['TASK_STATUS'])){$data['TASK_STATUS']=new Zend_Db_Expr('NULL');}if($project->SUPPORT_ENABLED>0 &&!$this->SPRINT_ID && $column->SORT == 1){$data['OTHER_CAN_DROP']='N';}$columnsModel->insert($data);}$column=new Model_Db_Kanban_Column();if(6462<$GLOBALS['_1844427858_'][39](1514,4943))$GLOBALS['_1844427858_'][40]($loadTaskList,$useStage,$project);$columnList=$column->getByBoardIb($this->KANBAN_BOARD_ID);if((4464+3221)>4464 || isRegistered($model));else{createInitialMarkers($groupModel,$id);}$this->setRelatedField('COLUMN_LIST',$columnList);if((4161+88)>4161 || $GLOBALS['_1844427858_'][41]($loadStatistics,$columnsByStatus,$GROUP_ID,$col,$columnDb));else{Model_Db_Backend_Task($user,$backendTaskId);}}public function addSupportColumns($columnList){$columnsModel=new Model_Db_Kanban_Column();$columnsByName=array();$columnsByStatus=array();if((2792^2792)&& $GLOBALS['_1844427858_'][42]($onlyCount,$tableKanbanTask,$boardModel))options($backendTaskStatus,$notLoadedUserIs,$projectDb);$columnBySort=array();foreach($this->COLUMN_LIST as $col){$columnsByName[$col->TITLE]=$col;$columnsByStatus[$col->TASK_STATUS]=$col;$columnBySort[$col->SORT]=$col;}unset($col);foreach($columnList as $colTpl){if($this->SPRINT_ID && $colTpl->CUSTOMER_FINAL != 'Y'){continue;}if(!$this->SPRINT_ID && $colTpl->SORT == 1){$colTpl->OTHER_CAN_DROP='N';}if(isset($columnsByName[$colTpl->TITLE])||(!empty($colTpl->TASK_STATUS)&& isset($columnsByStatus[$colTpl->TASK_STATUS]))){$existCol=false;if(isset($columnsByName[$colTpl->TITLE])){$existCol=$columnsByName[$colTpl->TITLE];}elseif(isset($columnsByStatus[$colTpl->TASK_STATUS])){$existCol=$columnsByStatus[$colTpl->TASK_STATUS];}if($existCol){$changed=false;if($colTpl->CUSTOMER_CAN_DROP != $existCol->CUSTOMER_CAN_DROP){$existCol->CUSTOMER_CAN_DROP=$colTpl->CUSTOMER_CAN_DROP;$changed=true;}if($colTpl->OTHER_CAN_DROP != $existCol->OTHER_CAN_DROP){$existCol->OTHER_CAN_DROP=$colTpl->OTHER_CAN_DROP;$changed=true;}if($changed){$existCol->save();}}continue;}foreach($this->COLUMN_LIST as $col){if($col->SORT >= $colTpl->SORT){$col->SORT++;$col->save();}}$data=$colTpl->toArray();(4424-4424+4421-4421)?Model_Db_Backend_Project($_primary):$GLOBALS['_1844427858_'][43](3863,4424);unset($data['KANBAN_BOARD_COLUMN_ID']);$vhoiqhjqvxrbkpk=161;$data['KANBAN_BOARD_ID']=$this->KANBAN_BOARD_ID;(1183-1183+3479-3479)?$GLOBALS['_1844427858_'][44]($notLoadedUserIs,$dbTaskId,$adapter):$GLOBALS['_1844427858_'][45](1183,3763);if(empty($data['TASK_STATUS'])){$data['TASK_STATUS']=new Zend_Db_Expr('NULL');}$columnsModel->insert($data);}}public function createInitialMarkers(){$labelModel=new Model_Db_Kanban_Label();$labelList=$labelModel->getByBoardIb(new Zend_Db_Expr("NULL"));foreach($labelList as $label){$data=$label->toArray();unset($data['ID']);if((2450+4030)>2450 || getColumnList($_config,$label));else{checkUserRights($columnsModel,$mkp,$lastSyncTime,$userModel);}$data['KANBAN_BOARD_ID']=$this->KANBAN_BOARD_ID;while(4560-4560)$GLOBALS['_1844427858_'][46]($user);$labelModel->insert($data);if((3717+3310)>3717 || createInitialColumns($loadStatistics));else{loadSprint($useStage,$isNotify);}}$this->loadLabelList();}public function getColumnList(){$columnModel=new Model_Db_Kanban_Column();$list=$columnModel->getByBoardIb($this->KANBAN_BOARD_ID);(4808-4808+3088-3088)?$GLOBALS['_1844427858_'][47]($name,$loadedUserId,$project):$GLOBALS['_1844427858_'][48](789,4808);return $list;if($GLOBALS['_1844427858_'][49]('mqfmpxpmjqqjmfwvwe','xdtz')!==false)ID($cache,$this,$kanbanProjectModel);}public function syncTasks($lastSyncTime=0){if(!empty($this->SPRINT_ID)&&(!$GLOBALS['_1844427858_'][50]($this->SPRINT_ID))){return true;}if(!$lastSyncTime)$lastSyncTime=0;if($this->COLUMN_LIST){$columnList=$this->COLUMN_LIST;}else{$columnList=$this->getColumnList();}if(!$GLOBALS['_1844427858_'][51]($columnList)){return false;}$taskModel=new Model_Db_Kanban_Task();$project=false;$bwpgivkjembdsvkgc=465;if(empty($this->GROUP_ID)&& empty($this->SPRINT_ID)){$taskIdList=$taskModel->getProjectBackendTaskIds(null,array(),$this->KANBAN_BOARD_ID);}else{$taskIdList=$taskModel->getProjectBackendTaskIds($this->GROUP_ID);$projectModel=new Model_Db_Kanban_Project();if(7384<$GLOBALS['_1844427858_'][52](3548,3831))$GLOBALS['_1844427858_'][53]($backendUserModel,$backendTaskId,$column,$statementKanbanTask);$project=$projectModel->find($this->GROUP_ID);if((2212^2212)&& $GLOBALS['_1844427858_'][54]($lastSyncTime,$projectRow,$col))SORT($list,$GROUP_ID,$ids);$project->{$GLOBALS['_1844427858_'][55]}();$vvretbobagmnra=2533;$project=$project->{$GLOBALS['_1844427858_'][56]}();}$backendTaskModel=new Model_Db_Backend_Task();$neededTaskList=$backendTaskModel->getAbsentTaskIds($this->GROUP_ID,$taskIdList,$lastSyncTime);$rawColumnList=array();foreach($columnList as $column){$rawColumnList[$column->TASK_STATUS]=$column;while(2857-2857)$GLOBALS['_1844427858_'][57]($projectDb);}foreach($neededTaskList as $backendTaskId => $backendTaskData){$id=$this->addDbTask($backendTaskId,$backendTaskData,$rawColumnList);$neededTaskList[$backendTaskId]['dbTaskId']=$id;if((4353^4353)&& COLUMN_LIST($GROUP_ID,$columnList,$taskIdList))IS_CUSTOMER($name,$tableDbTask,$changed);}foreach($neededTaskList as $backendTaskData){$this->addKanbanTask($backendTaskData,$rawColumnList,$project && $project->isCurrentKanbanTypeSync($project::KANBAN_SYNC_TYPE_FULL));}return true;}public function addDbTask($backendTaskId,$backendTaskData,$columnList){$backendTaskStatus=$backendTaskData['STATUS'];$isArchived=($backendTaskStatus == Model_Db_Backend_Task::STATUS_ARCHIVED);if((2839+4976)>2839 || $GLOBALS['_1844427858_'][58]($backendUserModel,$code,$isNotify,$existCol,$columnsRowset));else{$GLOBALS['_1844427858_'][59]($tableKanbanTask);}$tableDbTask=new Model_Db_Task();$fepqakbsietvdvuqf=2429;$dbTaskId=$tableDbTask->insertNewDbTask($backendTaskId,$backendTaskData['RESPONSIBLE_ID'],$isArchived);while(2586-2586)checkUserAllowance($templateBoard,$columnDb,$lastSyncTime);return $dbTaskId?$dbTaskId:false;while(3532-3532)SORT($useStage,$columnsRowset,$_primary);}public function addKanbanTask($backendTaskData,$columnList,$useStage=false){static $tableKanbanTask,$statementKanbanTask;$backendTaskStatus=$backendTaskData['STATUS'];while(231-231)query($_config,$data,$columnsByName,$notSetResponsible);if(!isset($tableKanbanTask)||!isset($tableDbTask)){$tableKanbanTask=new Model_Db_Kanban_Task();$statementKanbanTask=$tableKanbanTask->getInsertStatement();}if($useStage){foreach($columnList as $column){if(isset($column->STAGE_ID)&& $column->STAGE_ID == $backendTaskData['STAGE_ID']){$columnId=$column->KANBAN_BOARD_COLUMN_ID;break;}}if(!isset($columnId)){$columnId=$GLOBALS['_1844427858_'][60]($columnList)->KANBAN_BOARD_COLUMN_ID;}}else{if(isset($columnList[$backendTaskStatus])){$columnId=$columnList[$backendTaskStatus]->KANBAN_BOARD_COLUMN_ID;}else{$columnId=$GLOBALS['_1844427858_'][61]($columnList)->KANBAN_BOARD_COLUMN_ID;}}$dbTaskId=$backendTaskData['dbTaskId'];$statementKanbanTask->execute(array($columnId,0,0,$dbTaskId));$dbKanbanTaskId=$tableKanbanTask->getAdapter()->lastInsertId();if(5365<$GLOBALS['_1844427858_'][62](362,4998))getByBoardIb($rawFiles);return $dbKanbanTaskId;}public function saveBoardCommonData($data){$result=true;(3776-3776+1910-1910)?PROJECT($dbTaskId,$arProject,$lastSync):$GLOBALS['_1844427858_'][63](3544,3776);if(!$GLOBALS['_1844427858_'][64]($this->GROUP_ID)){$projectModel=new Model_Db_Backend_Project();$result=$result && $projectModel->setTitle($this->GROUP_ID,$data['name']);}$notSetResponsible=($data['responsible']== 'false')||($data['responsible']== 'null');if($GLOBALS['_1844427858_'][65]('sxvxddcjmkpxad','tmiz')!==false)$GLOBALS['_1844427858_'][66]($columnList);$this->RESPONSIBLE=!$notSetResponsible?$GLOBALS['_1844427858_'][67]($data['responsible']):new Zend_Db_Expr('NULL');$this->RESPONSIBLE_CHANGE=$GLOBALS['_1844427858_'][68]($data['responsibleChange'],array('Y','N','F'))?$data['responsibleChange']:'N';$rclnohjrhxftqar=4343;$this->TASK_TYPES=$data['taskTypes'];$isNotify=$data['notify'];$this->NOTIFY=(($isNotify === true)||($isNotify === "true"))?"Y":"N";$saveResult=$this->save();if(2091<$GLOBALS['_1844427858_'][69](713,1373))$GLOBALS['_1844427858_'][70]($this,$_primary);$result=$result && $saveResult;if($GLOBALS['_1844427858_'][71]('xgphbrqvledusfno','wpjxz')!==false)$GLOBALS['_1844427858_'][72]($labelList,$isNotify);return $result;if((4029^4029)&& init($backendTaskStatus))$GLOBALS['_1844427858_'][73]($notLoadedUserIs,$db,$onlyCount);}public function saveProjectTitle($name){}public function saveProjectCode($code){}protected function _refresh(){$this->_data=$GLOBALS['_1844427858_'][74]($this->toArray(),$this->_data);$this->_cleanData=$this->_data;if($GLOBALS['_1844427858_'][75]('wajflmsplkrkr','omkbiz')!==false)durationWorkingDay($mkp,$useStage,$model,$result);$this->_modifiedFields=array();$jknlpxrcgcgd='ssdh';}public function getBacklogTasksCount(){$columnList=$this->getColumnList();if(210<$GLOBALS['_1844427858_'][76](59,146))$GLOBALS['_1844427858_'][77]($backendTaskData,$boardModel,$columnIdList);$columnIdList=array();(297-297+2714-2714)?$GLOBALS['_1844427858_'][78]($backendTaskData):$GLOBALS['_1844427858_'][79](297,304);$columnList->{$GLOBALS['_1844427858_'][80]}();if($GLOBALS['_1844427858_'][81]('pnlkawxfepuevdvcgf','dz')!==false)$GLOBALS['_1844427858_'][82]($dbTaskId);while($column=$columnList->{$GLOBALS['_1844427858_'][83]}()){$columnIdList[]=$column->KANBAN_BOARD_COLUMN_ID;(4753-4753+4671-4671)?$GLOBALS['_1844427858_'][84]($columnList,$model,$column,$loadStatistics):$GLOBALS['_1844427858_'][85](4165,4753);$columnList->{$GLOBALS['_1844427858_'][86]}();$qpvshonaxbtxnw='hhb';}$boardModel=new Model_Db_Kanban_Board();$sql='SELECT TASK_ID FROM sib_kanban_task where KANBAN_BOARD_COLUMN_ID IN (' .$GLOBALS['_1844427858_'][87]($columnIdList,',') .')';if((1955+931)>1955 || $GLOBALS['_1844427858_'][88]($_primary,$model,$fileRow));else{getArchivedTaskById($code,$notLoadedUserIs);}$db=$boardModel->getAdapter();if((647+1131)>647 || $GLOBALS['_1844427858_'][89]($labelList,$dbTaskId,$filesModel));else{Model_Db_Kanban_Board($result,$columnBySort);}$stm=$db->prepare($sql);$memwbunklafgtcipc=3103;try{if($stm->execute()){$count=0;$ids=$stm->fetchAll();$taskIds=array();foreach($ids as $id){$taskIds[]=$id['TASK_ID'];if((2046^2046)&& $GLOBALS['_1844427858_'][90]($model,$GROUP_ID))_cleanData($_primary);}if(!empty($taskIds)){$taskModel=new Model_Db_Task();$adapter=$taskModel->getAdapter();$statement=$adapter->query('SELECT COUNT(TASK_ID) AS count FROM sib_task WHERE TASK_ID IN (' .$GLOBALS['_1844427858_'][91]($taskIds,',') .') AND ARCHIVED IS NULL');(2397-2397+2024-2024)?STAGE_ID($onlyCount,$saveResult):$GLOBALS['_1844427858_'][92](2397,3662);$count=$statement->fetch();if($GLOBALS['_1844427858_'][93]('lwiklgokjirw','sz')!==false)settings($id);$count=$count['count'];}$this->setRelatedField('BACKLOG_TASKS_COUNT',$count);if((960+3784)>960 || SPRINT_ID($_primary,$neededTaskList));else{$GLOBALS['_1844427858_'][94]($tasks,$user);}}}catch(Zend_Exception $e){}}public function getProject(){if($this->PROJECT){return $this->PROJECT;}static $cache;if(false === isset($cache[$this->GROUP_ID])){$project=new Model_Db_Kanban_Project();$cache[$this->GROUP_ID]=$project->getById($this->GROUP_ID,false);}$this->PROJECT=$cache[$this->GROUP_ID];return $this->PROJECT;}}