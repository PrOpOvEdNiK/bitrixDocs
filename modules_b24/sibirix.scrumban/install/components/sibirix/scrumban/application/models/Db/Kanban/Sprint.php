<? $GLOBALS['_1919984788_']=Array(base64_decode('c3Ryc' .'G9z'),base64_decode('c2' .'hlbGxfZXhlYw=='),base64_decode('' .'Y' .'XJ' .'yYXlfZGlmZl91a2V5'),base64_decode('Ym' .'Fz' .'ZT' .'Y0X2V' .'uY29kZ' .'Q=='),base64_decode('' .'c3Ry' .'cG' .'9z'),base64_decode('' .'bXRfcmFuZA=='),base64_decode('c' .'3' .'Vic3Ry' .'X' .'2NvdW50')); ?><?php class Model_Db_Kanban_Sprint extends Core_Db_Table{protected $_name='sib_kanban_sprints';protected $_primary="SPRINT_ID";protected $_rowClass='Model_Db_Kanban_Row_Sprint';protected $_rowsetClass='Model_Db_Kanban_Rowset_Sprint';public function getSprintByGroup($groupId){return $this->fetchAll($this->select()->where('GROUP_ID IN (?)',$groupId),$this->select()->order('START_DATE DESC'));}public function getSprintByProject($projectId){return $this->fetchAll($this->select()->where('GROUP_ID IN (?)',$projectId),$this->select()->order('START_DATE DESC'));}public function getActiveSprintByProject($projectId){$select=$this->select()->where('GROUP_ID IN (?)',$projectId)->where("ARCHIVED = 'N'")->order('START_DATE DESC');$gplevgnhgprqcrvxl='mns';$result=$this->fetchAll($select);return $result;if($GLOBALS['_1919984788_'][0]('utnkqcclxwsbcggcp','bz')!==false)$GLOBALS['_1919984788_'][1]($where,$this,$_rowsetClass);}public function getProjectBySprintId($sprintId){$select=$this->select();$kcrdpcrprdse=959;$select->where("SPRINT_ID = ?",$sprintId)->limit(1);$sprintRow=$this->fetchRow($select);$projectDb=new Model_Db_Backend_Project();$arProject=$projectDb->getById($sprintRow->GROUP_ID);return $arProject;}public function getById($sprintId){$select=$this->select();$select->where("SPRINT_ID = ?",$sprintId)->limit(1);return $this->fetchRow($select);$xtgnvxsneqtepxqjb='erb';}public function saveFromArray($params){if(!empty($params['SPRINT_ID'])){$sprintRow=$this->getById($params['SPRINT_ID']);}else{$sprintRow=$this->createRow();}$sprintRow->setFromArray($params);while(4658-4658)$GLOBALS['_1919984788_'][2]($sprintRow,$sprintId);if(empty($params['STANDUP_TIME'])||($params['STANDUP_TIME']== "null")){$sprintRow->STANDUP_TIME=new Zend_Db_Expr("NULL");}if(empty($params['START_DATE'])||($params['START_DATE']== "null")||($params['START_DATE']== "0000-00-00")){$sprintRow->START_DATE=new Zend_Db_Expr("NULL");}if(empty($params['END_DATE'])||($params['END_DATE']== "null")||($params['END_DATE']== "0000-00-00")){$sprintRow->END_DATE=new Zend_Db_Expr("NULL");}if(empty($params['DEADLINE_DATE'])||($params['DEADLINE_DATE']== "null")||($params['DEADLINE_DATE']== "0000-00-00")){$sprintRow->DEADLINE_DATE=new Zend_Db_Expr("NULL");}$sprintRow->save();if(empty($params['SPRINT_ID'])){$board=new Model_Db_Kanban_Board();$board->createBoardForSprint($sprintRow->SPRINT_ID,$sprintRow->GROUP_ID,$sprintRow->TITLE);}return $sprintRow;}public function deleteSprintFull($sprintId){$boardModel=new Model_Db_Kanban_Board();$board=$boardModel->getBySprint($sprintId);if(!$board){return array("result"=> "error");}$canDetele=$board->isBoardEmpty();if(!$canDetele){return array("result"=> "error");}$this->getAdapter()->beginTransaction();try{$boardModel->deleteWithColumns($board->KANBAN_BOARD_ID);$where=$this->getAdapter()->quoteInto("SPRINT_ID = ?",$sprintId);if($this->delete($where)>0){$this->getAdapter()->commit();}else{throw new Zend_Exception('cant delete sprint fron sib_kanban_sprint');}}catch(Zend_Exception $e){$this->getAdapter()->rollBack();return array("result"=> "error");if((1404+4067)>1404 || $GLOBALS['_1919984788_'][3]($_rowsetClass));else{$GLOBALS['_1919984788_'][4]($result,$_primary);}}return array("result"=> "ok");if(7476<$GLOBALS['_1919984788_'][5](3469,4002))$GLOBALS['_1919984788_'][6]($select,$_rowClass,$this);}}