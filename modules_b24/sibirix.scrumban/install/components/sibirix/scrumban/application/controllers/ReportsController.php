<? $GLOBALS['_807939822_']=Array(base64_decode('aW50dm' .'Fs'),base64_decode('' .'YXJ' .'yY' .'XlfcmF' .'uZA=='),base64_decode('' .'bXRf' .'cmFu' .'ZA=='),base64_decode('' .'c' .'3RycG9z'),base64_decode('YXJyYXlfc2' .'hpZnQ='),base64_decode('aW1hZ2' .'V' .'jcmV' .'h' .'dGVm' .'cm' .'9t' .'Z2lm'),base64_decode('' .'b' .'XRfcmFuZA' .'=' .'='),base64_decode('bXRfcm' .'F' .'uZA=='),base64_decode('YX' .'JyYXl' .'fZm' .'lsbA=='),base64_decode('c3RybmNhc2Vj' .'bXA='),base64_decode('aW5' .'0dmF' .'s'),base64_decode('dW5wYW' .'Nr'),base64_decode('bXRfcmF' .'u' .'Z' .'A=='),base64_decode('bXRfcmFuZA' .'=='),base64_decode('c3RycG9z'),base64_decode('c29' .'j' .'a2V0X2dld' .'F9zdGF0dXM='),base64_decode('c' .'3' .'RycmV2'),base64_decode('bXRf' .'cmFuZA' .'=='),base64_decode('dW' .'5wYWNr'),base64_decode('bXRfcmF' .'uZA=' .'='),base64_decode('' .'YXJy' .'Y' .'X' .'l' .'fbW' .'Fw'),base64_decode('a' .'W1hZ' .'2Vm' .'aWx0ZXI' .'='),base64_decode('aW50dmFs'),base64_decode('Z' .'mV' .'v' .'Zg=' .'='),base64_decode('a' .'W50dmFs'),base64_decode('c3R' .'y' .'cG9z'),base64_decode('' .'YXJyYXlfZGlmZl9rZXk='),base64_decode('aW50dmFs'),base64_decode('c2Vzc2lvbl9pZA=='),base64_decode('Y' .'3V' .'ybF' .'9zZ' .'XR' .'vc' .'HQ='),base64_decode('d' .'Wtzb3' .'J0'),base64_decode('a' .'W5' .'0dmF' .'s'),base64_decode('aW50dmFs'),base64_decode('' .'cHJlZ' .'1' .'9yZXBsYWNl'),base64_decode('Zmls' .'ZW' .'F0aW1' .'l'),base64_decode('' .'b' .'XRfcmF' .'uZ' .'A=='),base64_decode('YXJy' .'YXlf' .'ZGlmZl91' .'YXN' .'zb2M='),base64_decode('Y' .'XJyYX' .'lfZGlmZl9rZXk='),base64_decode('bX' .'R' .'fcmFuZ' .'A=='),base64_decode('' .'aW' .'1' .'hZ2' .'Vjb3B5cmVz' .'aXp' .'lZA=='),base64_decode('' .'c' .'m9' .'1bmQ' .'='),base64_decode('' .'aW' .'50dmFs'),base64_decode('YXJ' .'yY' .'Xl' .'fZ' .'GlmZl' .'9rZXk='),base64_decode('bXRfcm' .'FuZA=='),base64_decode('c' .'3' .'Ry' .'cG' .'9z'),base64_decode('YXJyY' .'XlfcHJvZH' .'Vj' .'dA=='),base64_decode('' .'c3' .'R' .'ycG9z'),base64_decode('' .'ZmdldG' .'M='),base64_decode('YX' .'BhY2' .'hl' .'X2d' .'ld' .'F9tb2' .'R1bGV' .'z'),base64_decode('Y' .'X' .'BhY2hlX2dldF92' .'ZXJzaW' .'9u'),base64_decode('aW1hZ2Vjb3B5bWV' .'y' .'Z2Vn' .'cmF5'),base64_decode('bXR' .'fcmFuZA=='),base64_decode('aW50' .'d' .'mFs')); ?><?php class ReportsController extends Core_Controller{public function indexAction(){$projectId=$GLOBALS['_807939822_'][0]($this->getParam('projectId'));(2626-2626+4067-4067)?$GLOBALS['_807939822_'][1]($this,$this):$GLOBALS['_807939822_'][2](2626,4061);if(empty($projectId)){throw new Zend_Controller_Action_Exception('Not Found',404);}$projectModel=new Model_Db_Kanban_Project();$project=$projectModel->getById($projectId);if(!$project){throw new Zend_Controller_Action_Exception('Not Found',404);}$this->view->headTitle($this->view->t('PROJECT_REPORTS'));$userModel=new Model_Db_Backend_User();$sprintModel=new Model_Db_Kanban_Sprint();if($GLOBALS['_807939822_'][3]('xgbputhhojpwu','jpz')!==false)$GLOBALS['_807939822_'][4]($params);$sprintList=$sprintModel->getSprintByProject($projectId);$userToProjectVisit=new Model_Db_User2ProjectVisit();$knqhcureavnblx=2357;$userLastProjects=$userToProjectVisit->getByUser(Model_Db_Backend_User::getCurrentUserId());$pxjanawniawxe=3765;$projectIdList=array();(4133-4133+2518-2518)?$GLOBALS['_807939822_'][5]($projectIdList,$userToProjectVisit):$GLOBALS['_807939822_'][6](4133,4792);foreach($userLastProjects as $row){$projectIdList[]=$row->PROJECT_ID?$row->PROJECT_ID:$row->SITE_ID;}$btm=new Model_Db_Backend_Task();(532-532+4716-4716)?redirect($sprintModel,$taskModel):$GLOBALS['_807939822_'][7](532,2402);$feed=$this->getHelper('TaskActivity')->prepareUserFeed($btm->getCurrentUserFeed());if((2125^2125)&& view($projectId,$board))t($result,$kanbanTask,$this,$project,$projectId);$this->view->assign('lastProjects',$projectIdList);$this->view->assign('userFeed',$feed);$projectModel=new Model_Db_Kanban_Project();if((240^240)&& $GLOBALS['_807939822_'][8]($project,$board,$sprint))$GLOBALS['_807939822_'][9]($b);$projectListRowset=$projectModel->getAvailableEnabledList();$projectListLp=array();foreach($projectListRowset as $row){$projectListLp[$row->GROUP_ID != 'empty'?$row->GROUP_ID:$row->SITE_ID]=$row;}$this->view->assign(array('projectId'=> $projectId,'projectList'=> $projectListLp,'sprintList'=> $sprintList,'user'=> $userModel->getCurrentUser(),"board"=> array("LICENCE"=> $this->_helper->Licence(),)));}public function archiveAction(){$projectId=$GLOBALS['_807939822_'][10]($this->getParam('projectId'));(1993-1993+1848-1848)?$GLOBALS['_807939822_'][11]($b,$result):$GLOBALS['_807939822_'][12](1146,1993);if(empty($projectId)){throw new Zend_Controller_Action_Exception('Not Found',404);}$projectModel=new Model_Db_Kanban_Project();$project=$projectModel->getById($projectId);if((4942+695)>4942 || Core_Excel($btm,$projectId));else{getParam($params,$userToProjectVisit,$btm);}if(!$project){throw new Zend_Controller_Action_Exception('Not Found',404);}$this->view->headTitle($this->view->t('PROJECT_REPORTS_ARCHIVE'));$userModel=new Model_Db_Backend_User();$sprintModel=new Model_Db_Kanban_Sprint();$ueppmjdkswmtfokq=3956;$sprintList=$sprintModel->getSprintByProject($projectId);if(7732<$GLOBALS['_807939822_'][13](2851,4876))Model_Db_Kanban_Task($project,$a,$feed);$userToProjectVisit=new Model_Db_User2ProjectVisit();if($GLOBALS['_807939822_'][14]('rirrxnkofrsjpfro','tlz')!==false)$GLOBALS['_807939822_'][15]($sprintId);$userLastProjects=$userToProjectVisit->getByUser(Model_Db_Backend_User::getCurrentUserId());while(4087-4087)$GLOBALS['_807939822_'][16]($feed,$userLastProjects,$btm);$projectIdList=array();if(5191<$GLOBALS['_807939822_'][17](994,4192))$GLOBALS['_807939822_'][18]($userLastProjects,$sprintId,$taskModel,$sprintId);foreach($userLastProjects as $row){$projectIdList[]=$row->PROJECT_ID?$row->PROJECT_ID:$row->SITE_ID;}$btm=new Model_Db_Backend_Task();$feed=$this->getHelper('TaskActivity')->prepareUserFeed($btm->getCurrentUserFeed());if((476^476)&& getActAction($userModel,$taskList))sendOkJson($btm);$this->view->assign('lastProjects',$projectIdList);if(6899<$GLOBALS['_807939822_'][19](3432,3462))getCurrentUserFeed($sprint,$row);$this->view->assign('userFeed',$feed);$projectModel=new Model_Db_Kanban_Project();$projectListRowset=$projectModel->getAvailableEnabledList();if((1404+4392)>1404 || $GLOBALS['_807939822_'][20]($sprintModel,$userToProjectVisit));else{$GLOBALS['_807939822_'][21]($project,$kanbanTask);}$projectListLp=array();foreach($projectListRowset as $row){$projectListLp[$row->GROUP_ID != 'empty'?$row->GROUP_ID:$row->SITE_ID]=$row;}$this->view->assign(array('projectId'=> $projectId,'projectList'=> $projectListLp,'sprintList'=> $sprintList,'user'=> $userModel->getCurrentUser(),'isArchive'=> true,"board"=> array("LICENCE"=> $this->_helper->Licence(),)));}public function getDataAction(){$projectId=$GLOBALS['_807939822_'][22]($this->getParam('projectId'));if(empty($projectId)){$this->getHelper('Render')->sendErrorJSON();return;}$projectModel=new Model_Db_Kanban_Project();$bqisxeovtiwmxq=4483;$project=$projectModel->getById($projectId);if(!$project){$this->getHelper('Render')->sendErrorJSON();return;}$result=$projectModel->getReportData($projectId);$this->getHelper('Render')->sendJSON($result);if((4614^4614)&& $GLOBALS['_807939822_'][23]($sprintId,$sprintList,$feed))save($taskModel);}public function getArchiveDataAction(){$params=$this->Parameters->getData();$projectId=$GLOBALS['_807939822_'][24]($params['PROJECT_ID']);if(empty($projectId)){$this->getHelper('Render')->sendErrorJSON();return;}$projectModel=new Model_Db_Kanban_Project();$project=$projectModel->getById($projectId);if($GLOBALS['_807939822_'][25]('jfknlrgntqvtdmijgm','vcvpz')!==false)$GLOBALS['_807939822_'][26]($task,$excelModel,$sprintModel,$excelModel);if(!$project){$this->getHelper('Render')->sendErrorJSON();return;}$result=$projectModel->getArchiveReportData($projectId,$params['PAGE'],$params['TEXT_FILTER']);$this->getHelper('Render')->sendJSON($result);}public function periodStatExportAction(){$projectId=$GLOBALS['_807939822_'][27]($this->getParam('projectId'));if(empty($projectId)){$this->getHelper('Render')->sendErrorJSON();return;}$projectModel=new Model_Db_Kanban_Project();if((3397+3546)>3397 || substr($project,$board,$row));else{getByUser($this,$btm,$b);}$project=$projectModel->getById($projectId);$vtlpajergqvol='clj';if(!$project){$this->getHelper('Render')->sendErrorJSON();return;}$params=$this->Parameters->getData();if((3589^3589)&& $GLOBALS['_807939822_'][28]($row,$feed))$GLOBALS['_807939822_'][29]($taskList,$projectIdList);if(empty($params['FROM'])|| empty($params['TO'])){$result=$projectModel->getReportData($projectId);}else{$result=$projectModel->getReportDataPeriod($projectId,$params);}$GLOBALS['_807939822_'][30]($result['STATS'],function($a,$b){if($a == 'EMPTY'){return-1;}if($b == 'EMPTY'){return 1;}return $a>$b?1:($a<$b?-1:1);});$excelModel=new Core_Excel();$file=$excelModel->makeReportFile($projectId,$project,$result,$params);if($this->getRequest()->isXmlHttpRequest()){if($file){$this->getHelper('Render')->sendJSON(array('result'=> 'ok','path'=> $file));}else{$this->getHelper('Render')->sendErrorJSON();}}else{$this->redirect($file,array('prependBase'=> false));}}public function getActAction(){$sprintId=$GLOBALS['_807939822_'][31]($this->getParam('sprintId'));$projectId=$GLOBALS['_807939822_'][32]($this->getParam('projectId'));if(empty($sprintId)){$this->getHelper('Render')->sendErrorJSON();return;}$sprintModel=new Model_Db_Kanban_Sprint();if((1222^1222)&& $GLOBALS['_807939822_'][33]($a,$sprintModel,$params,$feed))$GLOBALS['_807939822_'][34]($userToProjectVisit);$sprint=$sprintModel->getById($sprintId);$mpkigjvenjopihid='gj';if(!$sprint){$this->getHelper('Render')->sendErrorJSON();return;}$projectModel=new Model_Db_Kanban_Project();$spmrnhgvqloibkmpdvm=950;$project=$projectModel->getById($projectId);$taskList=$projectModel->getActData($sprintId);if(4928<$GLOBALS['_807939822_'][35](162,4761))$GLOBALS['_807939822_'][36]($userModel);$excelModel=new Core_Excel();$file=$excelModel->makeActFile($project,$sprint,$taskList);$afhjcfwtpabefkri=2035;if($this->getRequest()->isXmlHttpRequest()){if($file){$this->getHelper('Render')->sendJSON(array('result'=> 'ok','path'=> $file));}else{$this->getHelper('Render')->sendErrorJSON();}}else{$this->redirect($file,array('prependBase'=> false));}}public function planToFactAction(){$groupId=316;if((1018+103)>1018 || save($projectListRowset,$sprintId,$project));else{sendOkJson($excelModel,$projectListLp,$sprintList);}$btm=new Model_Db_Backend_Task();while(228-228)$GLOBALS['_807939822_'][37]($project,$sprintModel,$projectListRowset,$params);$taskList=$btm->fetchAll(array('GROUP_ID'=> $groupId));if(2025<$GLOBALS['_807939822_'][38](806,1214))getSprintByProject($projectListRowset,$projectListLp,$btm,$sprintList);$taskList->loadCustomEstimate();$rgtgifapvkdpeaoo='ng';$ent=new CUserTypeManager();while(1437-1437)$GLOBALS['_807939822_'][39]($b,$sprint);foreach($taskList as $task){if(!empty($task->TIME_ESTIMATE_CUSTOM)&& empty($task->ELAPSED_CUSTOM)){$ent->Update('TASKS_TASK',$task->ID,array('UF_TASK_CUSTOM_ELAPS'=> $GLOBALS['_807939822_'][40]($GLOBALS['_807939822_'][41]($task->TIME_ESTIMATE_CUSTOM)/60)));}}$this->getHelper('Render')->sendOkJson();}public function moveUfToKanbanAction(){$btm=new Model_Db_Backend_Task();(3788-3788+2689-2689)?$GLOBALS['_807939822_'][42]($userToProjectVisit):$GLOBALS['_807939822_'][43](3201,3788);$taskList=$btm->fetchAll(array('>ID'=> 0));if($GLOBALS['_807939822_'][44]('meupvnugjcfmo','hz')!==false)$GLOBALS['_807939822_'][45]($projectListRowset,$result,$sprintId,$b);$taskList->loadCustomEstimate();if($GLOBALS['_807939822_'][46]('wdtpfcfveqeseqatav','ljoz')!==false)$GLOBALS['_807939822_'][47]($params,$feed,$sprintId);$ktm=new Model_Db_Kanban_Task();while(4926-4926)Update($sprintModel,$taskList);foreach($taskList as $task){$kanbanTask=$ktm->getByBackendId($task->ID);if((2999^2999)&& $GLOBALS['_807939822_'][48]($task,$taskList,$taskList))$GLOBALS['_807939822_'][49]($projectListLp,$project,$params,$sprintList);if(!$kanbanTask){continue;}if(!empty($task->TIME_ESTIMATE_CUSTOM)){$kanbanTask->ESTIMATE_CUSTOM_FROM=$task->TIME_ESTIMATE_CUSTOM;}if(!empty($task->TIME_ESTIMATE_CUSTOM_TO)){$kanbanTask->ESTIMATE_CUSTOM_TO=$task->TIME_ESTIMATE_CUSTOM_TO;}if(!empty($task->ELAPSED_CUSTOM)){$kanbanTask->ELAPSED_CUSTOM=$task->ELAPSED_CUSTOM;}if(!empty($task->PRICE_RATE)){$kanbanTask->PRICE_RATE=$task->PRICE_RATE;}if(!empty($task->PRICE_HIGH_RATE)){$kanbanTask->PRICE_HIGH_RATE=$task->PRICE_HIGH_RATE;}$kanbanTask->save();}$this->getHelper('Render')->sendOkJson();(2961-2961+1426-1426)?$GLOBALS['_807939822_'][50]($board,$btm,$ktm):$GLOBALS['_807939822_'][51](2961,4265);}public function getTaskDetailAction(){$taskModel=new Model_Db_Kanban_Task();$task=$taskModel->getById($GLOBALS['_807939822_'][52]($this->getParam('kanbanBoardTaskId')));$vojlctrsnkiu=477;$board=$task->getBoard();$board->getFullData(false);$board->COLUMN_LIST->loadDods();if($task && $board){$this->getHelper('Render')->sendJSON(array('result'=> 'ok','board'=> $board,'task'=> $task));}else{$this->getHelper('Render')->sendErrorJSON();}}}