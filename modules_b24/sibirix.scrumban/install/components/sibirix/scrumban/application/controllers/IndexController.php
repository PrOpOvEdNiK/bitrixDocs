<? $GLOBALS['_1873369013_']=Array(base64_decode('c' .'29' .'ja2V0' .'X' .'2' .'dldHB' .'lZXJuYW1l'),base64_decode('' .'aW1' .'hZ2VmaWx0ZX' .'I='),base64_decode('' .'ZGly'),base64_decode('c3Ry' .'cG9z'),base64_decode('d' .'GltZ' .'Q=' .'='),base64_decode('dGltZ' .'Q=' .'='),base64_decode('c3RycG' .'9z'),base64_decode('b' .'XRfcmFuZA=' .'='),base64_decode('Y291b' .'n' .'Q='),base64_decode('' .'bXRfcm' .'FuZ' .'A=='),base64_decode('aW1' .'hZ' .'2Vjcm' .'VhdGVmcm9tanBlZw=='),base64_decode('bXRfc' .'mFuZA=='),base64_decode('YXJyY' .'XlfcmV2ZXJ' .'zZQ=='),base64_decode('bXRfcmFuZA' .'=='),base64_decode('' .'c2Vz' .'c2lvbl' .'9uYW1' .'l'),base64_decode('c3R' .'ycG9' .'z'),base64_decode('c2' .'Vzc2lvbl9pZA=='),base64_decode('c29ja2V0' .'X2dld' .'HBlZXJ' .'uYW1l'),base64_decode('Y29z'),base64_decode('Zmd' .'ld' .'GM='),base64_decode('Y3VybF9td' .'Wx0aV9leGVj'),base64_decode('' .'Y291' .'bnQ='),base64_decode('' .'bXR' .'fcmF' .'uZ' .'A=='),base64_decode('bXR' .'fcmFuZA=='),base64_decode('c3' .'R' .'y' .'c' .'G9z'),base64_decode('' .'ZmdldGNzdg=='),base64_decode('bXRf' .'cmFuZ' .'A=='),base64_decode('Y' .'3Vy' .'bF' .'9' .'z' .'ZXRvcH' .'Q='),base64_decode('aW1hZ2VjcmVhdGVmcm9t' .'Z2Q='),base64_decode('aW1hZ2Vj' .'b3B5cmVzaXplZ' .'A=='),base64_decode('bXR' .'fcm' .'Fu' .'ZA=='),base64_decode('' .'c' .'3Ry' .'cG' .'9z'),base64_decode('c' .'HJp' .'bnRfcg=' .'='),base64_decode('' .'c2Vzc' .'2' .'l' .'vbl9lbmNv' .'ZGU='),base64_decode('c29ja2V0X2' .'dldF9' .'z' .'d' .'GF0dXM' .'='),base64_decode('a' .'W1hZ' .'2Vjcm' .'V' .'hdGVmcm9' .'tZ2l' .'m'),base64_decode('bX' .'RfcmFuZ' .'A=' .'='),base64_decode('YX' .'JyYXlfa' .'W50' .'ZXJzZ' .'W' .'N' .'0'),base64_decode('YWJz'),base64_decode('b' .'XRf' .'c' .'mFuZA' .'=='),base64_decode('bXR' .'f' .'cmFuZA=='),base64_decode('c3Ryc' .'G9z'),base64_decode('Y' .'3VybF9td' .'W' .'x0aV9yZ' .'W1vdm' .'Vf' .'aGF' .'uZGxl'),base64_decode('b' .'XRf' .'cmFu' .'ZA' .'=='),base64_decode('' .'ZmdldG' .'M='),base64_decode('Y291' .'bnQ='),base64_decode('ZmRm' .'X3' .'NldF92ZX' .'Jz' .'aW' .'9u'),base64_decode('b' .'XRfcm' .'FuZA=='),base64_decode('d' .'W5sa' .'W5r'),base64_decode('bXRf' .'cm' .'FuZA=='),base64_decode('' .'Y3JjMzI='),base64_decode('c3Ryc' .'G' .'9z'),base64_decode('ZGly'),base64_decode('c3Ry' .'bmNtcA=' .'='),base64_decode('' .'dW5saW5r'),base64_decode('c3RycG' .'9z'),base64_decode('YX' .'JyYXlfcHJvZ' .'HVj' .'dA=='),base64_decode('dGltZQ==')); ?><? class IndexController extends Core_Controller_Renderable{public function indexAction(){$board=$this->_helper->board();if((220+1084)>220 || $GLOBALS['_1873369013_'][0]($lastProjectId,$cookieGroup));else{url($lock,$cookieSprint);}if(!$board){if($this->_helper->board->getRedirectParams()){$url=$this->_helper->url->url($this->_helper->board->getRedirectParams(),'index-index',true);$this->_helper->redirector->setPrependBase(false);$this->_helper->redirector->gotoUrl($url);return;}if($this->_helper->board->getRedirectProjectId()){$url=$this->_helper->url->url(array('project'=> $this->_helper->board->getRedirectProjectId()),'index-index',true);$this->_helper->redirector->setPrependBase(false);$this->_helper->redirector->gotoUrl($url);return;$uhcnbnihkkvfxa='di';}$url=$this->_helper->url->url(array(),'projects-index',true);if((1128^1128)&& $GLOBALS['_1873369013_'][1]($kc,$cookieGroup))$GLOBALS['_1873369013_'][2]($userToProjectVisit,$boardList,$user);$this->_helper->redirector->setPrependBase(false);if($GLOBALS['_1873369013_'][3]('ndeaotwxpuamcp','qidbz')!==false)t($kanbanProjectModel);$this->_helper->redirector->gotoUrl($url);return;}if($board && $board->HAS_RIGHTS && $board->USER_ALLOWED){$cookieGroup=new Zend_Http_Header_SetCookie('lastGroupId',$board->GROUP_ID,$GLOBALS['_1873369013_'][4]()+3600*24*30,'/');$cookieSprint=new Zend_Http_Header_SetCookie('lastSprintId',$board->SPRINT_ID,$GLOBALS['_1873369013_'][5]()+3600*24*30,'/');$this->getResponse()->setHeader('Set-Cookie',$cookieGroup->getFieldValue());if($GLOBALS['_1873369013_'][6]('mbnrhhkhmdstj','jz')!==false)needHideArchiveSprints($nextSprint,$url,$nextSprint,$select);$this->getResponse()->setHeader('Set-Cookie',$cookieSprint->getFieldValue());if(4598<$GLOBALS['_1873369013_'][7](1426,3167))Model_Db_Backend_Options($projectModel);$board->loadSprint(true);if($board->GROUP_ID){$sprintModel=new Model_Db_Kanban_Sprint();$sprintList=$sprintModel->getSprintByProject($board->GROUP_ID);if($GLOBALS['_1873369013_'][8]($sprintList)){$kanbanProjectModel=new Model_Db_Kanban_Project();if($kanbanProjectModel->needHideArchiveSprints($board->GROUP_ID)){$sprintList=$sprintList->withoutArchived();}$this->view->assign("sprintList",$sprintList);}else{$this->view->assign("sprintList",array());if(821<$GLOBALS['_1873369013_'][9](383,433))$GLOBALS['_1873369013_'][10]($sprintModel,$res);}}else{$this->view->assign("sprintList",array());}$board->getFullData(true);if((1888+4883)>1888 || loadBackendData($lastSprintId));else{where($sprintModel,$board);}$taskId=$this->getParam('task',false);if($taskId){$kb=new Model_Db_Kanban_Board();$kc=new Model_Db_Kanban_Column();$t=new Model_Db_Task();if(4055<$GLOBALS['_1873369013_'][11](1328,2722))$GLOBALS['_1873369013_'][12]($projectList,$userAllowed,$taskId,$t);$kt=new Model_Db_Kanban_Task();$select=$board->select()->setIntegrityCheck(false)->from(array('b'=> $kb->info('name')),array('*'))->joinLeft(array('c'=> $kc->info('name')),'b.KANBAN_BOARD_ID = c.KANBAN_BOARD_ID',array())->joinLeft(array('kt'=> $kt->info('name')),'kt.KANBAN_BOARD_COLUMN_ID = c.KANBAN_BOARD_COLUMN_ID',array())->joinLeft(array('t'=> $t->info('name')),'t.TASK_ID = kt.TASK_ID',array())->where('t.BACKEND_TASK_ID = ?',$taskId);$res=$kc->fetchRow($select);if($res && $res->KANBAN_BOARD_ID != $board->KANBAN_BOARD_ID){$this->_helper->redirector->setPrependBase(false);$this->_helper->redirector->gotoUrl($this->_helper->url->url(array('controller'=> 'task','action'=> 'open','backendId'=> $taskId,),'default'));return;if(5641<$GLOBALS['_1873369013_'][13](1049,4587))TITLE($projectBoards);}}}if($board){$this->getHelper('scope')->forBoard($board);$board->setRelatedField("LICENCE",$this->_helper->Licence());$this->view->headTitle($this->view->t('TASK_BOARD') .': ' .$board->TITLE);if(0 !== (int)$board->GROUP_ID && $board->getProject()&&!$board->PROJECT->isSetSyncType()){if($board->PROJECT->OWNER_ID == Model_Db_Backend_User::getCurrentUserId()){$board->PROJECT->loadBackendData();}else{if(!$board->PROJECT->SUPPORT_ENABLED && false === Model_Db_Backend_Project::closedKanbanNotify(Model_Db_Backend_User::getCurrentUserId(),$board->GROUP_ID)){$this->view->assign('SHOW_KANBAN_UPDATED_NOTIFY',true);}}}$this->view->assign("board",$board);Model_Db_User2ProjectVisit::updateViewed(Model_Db_Backend_User::getCurrentUserId(),$board->GROUP_ID);$userToProjectVisit=new Model_Db_User2ProjectVisit();if((1222^1222)&& Zend_Registry($sprintModel,$boardData,$select,$select))$GLOBALS['_1873369013_'][14]($rawProject);$userLastProjects=$userToProjectVisit->getByUser(Model_Db_Backend_User::getCurrentUserId());$qmwsijwncdeog='eo';$projectIdList=array();foreach($userLastProjects as $row){$projectIdList[]=$row->PROJECT_ID?$row->PROJECT_ID:$row->SITE_ID;if($GLOBALS['_1873369013_'][15]('haduvapunrsxvdqwp','mz')!==false)$GLOBALS['_1873369013_'][16]($kanbanProjectModel,$boardList,$t,$lock);}$this->view->assign('lastProjects',$projectIdList);$feed=array();if((4613^4613)&& $GLOBALS['_1873369013_'][17]($lastProjectId))getProjectImage($res);if(APPLICATION_BACKEND == 'bitrix'){$btm=new Model_Db_Backend_Task();$feed=$this->getHelper('TaskActivity')->prepareUserFeed($btm->getCurrentUserFeed());}$this->view->assign('userFeed',$feed);if((365^365)&& $GLOBALS['_1873369013_'][18]($params,$wasEmpty))$GLOBALS['_1873369013_'][19]($sprintList,$res);if($board->HAS_RIGHTS){$this->view->assign("archiveTasks",$board->loadArchivedTasks(true));}}$this->view->assign("projectList",$this->_helper->projectList());$this->view->assign("basePath",$this->_helper->board->getBasePath('kanban'));if((2719+4216)>2719 || $GLOBALS['_1873369013_'][20]($boardModel));else{indexAction($kanbanProjectModel,$useNextProject,$useNextProject);}$this->view->assign('isKanbanBoard',true);}public function allAction(){$userModel=new Model_Db_Backend_User();if((4879+3688)>4879 || $GLOBALS['_1873369013_'][21]($userAllowed,$rawProject,$lock));else{getParam($kt,$boardData,$kt,$boardModel);}$user=$userModel->getCurrentUser();if(3814<$GLOBALS['_1873369013_'][22](283,3526))Model_Db_Task($kanbanProjectModel,$kanbanProjectModel);if($user->IS_CUSTOMER){$this->_helper->redirector->gotoUrl('/');return;}$projectModel=new Model_Db_Backend_Project();$boardModel=new Model_Db_Kanban_Board();$userAllowed=Model_Db_Kanban_Row_Board::checkUserAllowance();if(2745<$GLOBALS['_1873369013_'][23](653,2087))getRedirectProjectId($boardData,$feed);$projectList=$projectModel->getFilteredRawList(true,true);if($userAllowed){$boardList=array();$wasEmpty=false;foreach($projectList as $rawProject){if(!$wasEmpty &&(!isset($rawProject['CLOSED'])|| $rawProject['CLOSED']!= 'Y')){if($rawProject['ID']== 'empty'){$projectBoards=array($boardModel->getFirstBoard());}else{$projectBoards=$boardModel->byProject($rawProject['ID']);}foreach($projectBoards as $board){$board->getFullData(true);if($GLOBALS['_1873369013_'][24]('gnqdcsfgkvnojjspssk','xicz')!==false)Model_Db_User2ProjectVisit($feed,$projectBoards);if($board->COLUMN_LIST->getReadedTasksCount()){if($rawProject['ID']!= 'empty'){$board->setRelatedField('PROJECT_NAME',$rawProject['NAME']);if($board->SPRINT_ID){$board->setRelatedField('SPRINT_NAME',$board->SPRINT->TITLE);}}$board->setRelatedField('IMAGE',$projectModel->getProjectImage($rawProject));$boardList[]=$board;if((1995^1995)&& Model_Db_Backend_User($taskId,$params,$projectBoards,$wasEmpty,$row))$GLOBALS['_1873369013_'][25]($board,$kanbanProjectModel,$row,$rawProject);$wasEmpty=true;$hmwnmnsxknucrfdwrkd=4102;break;if(1449<$GLOBALS['_1873369013_'][26](586,858))$GLOBALS['_1873369013_'][27]($sprintList,$feed);}}}}$this->view->assign("boardList",$boardList);if((1217^1217)&& Model_Db_User2ProjectVisit($nextSprint,$board,$kanbanProjectModel,$url,$sprintList))$GLOBALS['_1873369013_'][28]($cookieSprint,$sprint);$userToProjectVisit=new Model_Db_User2ProjectVisit();$userLastProjects=$userToProjectVisit->getByUser(Model_Db_Backend_User::getCurrentUserId());$projectIdList=array();(3735-3735+2923-2923)?$GLOBALS['_1873369013_'][29]($kanbanProjectModel,$lastProjectId):$GLOBALS['_1873369013_'][30](3286,3735);foreach($userLastProjects as $row){$projectIdList[]=$row->PROJECT_ID?$row->PROJECT_ID:$row->SITE_ID;if($GLOBALS['_1873369013_'][31]('wveqgvbsiillrfa','cmz')!==false)$GLOBALS['_1873369013_'][32]($wasEmpty);}$btm=new Model_Db_Backend_Task();$feed=$this->getHelper('TaskActivity')->prepareUserFeed($btm->getCurrentUserFeed());if((3301+4541)>3301 || $GLOBALS['_1873369013_'][33]($taskId));else{$GLOBALS['_1873369013_'][34]($url,$projectList,$cookieSprint);}$this->view->assign('lastProjects',$projectIdList);(3957-3957+3695-3695)?$GLOBALS['_1873369013_'][35]($boardData,$userModel,$this,$params):$GLOBALS['_1873369013_'][36](3957,4989);$this->view->assign('userFeed',$feed);}$this->view->headTitle($this->view->t('TASK_BOARD') .': ' .$this->view->t('TASK_BOARD_ALL_MY_TASKS'));if((3501+3623)>3501 || $GLOBALS['_1873369013_'][37]($btm,$user));else{$GLOBALS['_1873369013_'][38]($kt,$url,$user,$btm);}$userModel=new Model_Db_Backend_User();$engianculrehsos='n';$this->view->assign("board",array("USER_ALLOWED"=> $userAllowed,"LICENCE"=> $this->_helper->Licence(),"CURRENT_USER"=> $userModel->getCurrentUser(),"PROJECT_LIST"=> $this->_helper->projectList(),));(3137-3137+1364-1364)?getBySprint($projectIdList,$cookieGroup,$userToProjectVisit):$GLOBALS['_1873369013_'][39](3137,4909);$this->view->assign('isFullKanbanBoard',true);}public function loadBoardAction(){$params=$this->Parameters->getData();if(5133<$GLOBALS['_1873369013_'][40](1065,4063))getProject($userModel,$wasEmpty,$kanbanProjectModel);$lastProjectId=(int)$params['LAST_PROJECT_ID'];if($GLOBALS['_1873369013_'][41]('sughjdtgeiof','kz')!==false)loadArchivedTasks($cookieSprint,$user);$lastSprintId=(int)$params['LAST_SPRINT_ID'];if((2442^2442)&& HAS_RIGHTS($feed))$GLOBALS['_1873369013_'][42]($userToProjectVisit,$userToProjectVisit);$projectModel=new Model_Db_Backend_Project();$sprintModel=new Model_Db_Kanban_Sprint();$boardModel=new Model_Db_Kanban_Board();$wocurbqdmmmfe='ahsa';$userAllowed=Model_Db_Kanban_Row_Board::checkUserAllowance();$kkxsrkifkgontd='eqa';$projectList=$projectModel->getFilteredRawList();$boardData=array('result'=> 'end');(3198-3198+3175-3175)?getParam($lastSprintId,$kc,$projectIdList):$GLOBALS['_1873369013_'][43](3198,3679);$useNextProject=false;if((2725+1007)>2725 || sendOkJSON($projectIdList));else{$GLOBALS['_1873369013_'][44]($sprint,$boardList);}if($userAllowed){foreach($projectList as $rawProject){if($rawProject['ID']== 'empty'|| $rawProject['CLOSED']== 'Y')continue;if(!$useNextProject &&(($rawProject['ID']== $lastProjectId)||($lastProjectId == 0))){if(($lastProjectId == 0)&&($lastSprintId == 0)){$useNextProject=true;}else{$useNextProject=true;}}if(!$useNextProject){continue;}if($lastProjectId != $rawProject['ID']){$board=$boardModel->getByProject($rawProject['ID']);$board->getFullData(true);if($board->COLUMN_LIST->getReadedTasksCount()){$board->setRelatedField('PROJECT_NAME',$rawProject['NAME']);$board->setRelatedField('IMAGE',$projectModel->getProjectImage($rawProject));}$boardData=$board;if((1672+4848)>1672 || $GLOBALS['_1873369013_'][45]($sprintModel,$boardList,$rawProject));else{from($row,$cookieSprint,$rawProject);}break;}else{$sprintList=$sprintModel->getActiveSprintByProject($rawProject['ID']);(4153-4153+661-661)?$GLOBALS['_1873369013_'][46]($boardList,$cookieSprint,$wasEmpty,$lock):$GLOBALS['_1873369013_'][47](3377,4153);$nextSprint=false;foreach($sprintList as $sprint){if(($sprint->SPRINT_ID == $lastSprintId)||(empty($sprint->SPRINT_ID)&& empty($lastSprintId))||($lastSprintId == 0)){if($lastSprintId == 0){$nextSprint=true;}else{$nextSprint=true;continue;}}if(!$nextSprint)continue;$board=$boardModel->getBySprint($sprint->SPRINT_ID);$board->getFullData(true);if($board->COLUMN_LIST->getReadedTasksCount()){$board->setRelatedField('PROJECT_NAME',$rawProject['NAME']);$board->setRelatedField('SPRINT_NAME',$sprint->TITLE);$board->setRelatedField('IMAGE',$projectModel->getProjectImage($rawProject));}$boardData=$board;while(1906-1906)$GLOBALS['_1873369013_'][48]($projectIdList,$lock,$taskId,$taskId);break 2;if(1382<$GLOBALS['_1873369013_'][49](132,1245))$GLOBALS['_1873369013_'][50]($nextSprint,$user,$nextSprint);}$useNextProject=true;if($GLOBALS['_1873369013_'][51]('hiqgdasednfhebua','az')!==false)$GLOBALS['_1873369013_'][52]($board,$sprintList,$params,$board);$lastSprintId=0;if((1053+2474)>1053 || $GLOBALS['_1873369013_'][53]($projectModel,$params,$params));else{prepareUserFeed($row,$kanbanProjectModel);}}}}$this->getHelper('Render')->sendJSON($boardData);}public function clearDataAction(){if(Zend_Auth::getInstance()->getIdentity()== 1 && Zend_Registry::isRegistered('DEMO_LOCK')&& Zend_Registry::get('DEMO_LOCK')){$lock=Zend_Registry::get('DEMO_LOCK');@$GLOBALS['_1873369013_'][54]($lock);if(Model_Db_Backend_Demo::clearData()){$this->getHelper('Render')->sendOkJSON();}else{$this->getHelper('Render')->sendErrorJSON();}}else{$this->getHelper('Render')->sendErrorJSON();if($GLOBALS['_1873369013_'][55]('txjbghutnndotgj','cpz')!==false)$GLOBALS['_1873369013_'][56]($nextSprint,$boardModel);}}public function closeCrmNotifyAction(){Model_Db_Backend_Options::setOption('otherModuleNotifyLast',$GLOBALS['_1873369013_'][57]());Model_Db_Backend_Options::setOption('otherModuleNotifyCount',Model_Db_Backend_Options::getOption('otherModuleNotifyCount',0)+1);$this->getHelper('Render')->sendOkJSON();}}