<? $GLOBALS['_103400514_']=Array(base64_decode('YX' .'J' .'y' .'YX' .'lf' .'ZGlmZl91a2V5'),base64_decode('bXRfcmFuZA=='),base64_decode('aW1' .'hZ2' .'Vjc' .'m' .'VhdGU='),base64_decode('a' .'W50d' .'mFs'),base64_decode('' .'c3RycG9z'),base64_decode('Y291bnQ='),base64_decode('' .'Y29' .'1bnQ='),base64_decode('YXJ' .'y' .'Y' .'X' .'lfa2' .'V5cw' .'=='),base64_decode('b' .'X' .'Rfcm' .'F' .'uZA=' .'='),base64_decode('b' .'X' .'Rfcm' .'FuZA=='),base64_decode('b' .'XRfc' .'mFuZA=='),base64_decode('bXRfcmFu' .'ZA=='),base64_decode('b2Jf' .'Y' .'2xl' .'YW4='),base64_decode('' .'Y3JjMzI' .'='),base64_decode('Y29' .'1' .'bnQ='),base64_decode('c3RycG9z'),base64_decode('Y291bnQ='),base64_decode('YXJyYXl' .'fc2xpY2' .'U='),base64_decode('cHJl' .'Z19zcGxp' .'dA=='),base64_decode('Y2' .'9weQ=='),base64_decode('aW1hZ' .'2VjcmVhdGU='),base64_decode('' .'bXRf' .'c' .'mF' .'u' .'ZA' .'=='),base64_decode('' .'b' .'XRfcmFuZ' .'A=' .'='),base64_decode('aW1hZ2Vjb3B5c' .'mVzYW1w' .'bGVk'),base64_decode('b' .'X' .'RfcmF' .'uZA=='),base64_decode('' .'c' .'3RycG' .'9z'),base64_decode('Y3' .'Jl' .'YXR' .'l' .'X2Z1bmN0aW9u'),base64_decode('aW5' .'0dmFs'),base64_decode('aW5' .'0dmF' .'s'),base64_decode('Y291bn' .'Q' .'='),base64_decode('aW50dmFs'),base64_decode('aW50dm' .'Fs'),base64_decode('c3Ryc' .'G9z'),base64_decode('YXJyY' .'X' .'l' .'fc2xp' .'Y2U='),base64_decode('bXRfcmFuZA=='),base64_decode('c29ja2' .'V0X2dldF9zd' .'GF0dXM' .'='),base64_decode('bXRf' .'c' .'mFu' .'ZA=='),base64_decode('Y291b' .'nQ' .'='),base64_decode('' .'aW50d' .'m' .'Fs'),base64_decode('bXRfcmFuZA=='),base64_decode('cG9wZW' .'4='),base64_decode('c' .'2' .'9ja2V0X2N' .'yZW' .'F0ZQ=' .'='),base64_decode('' .'cG9wZW4='),base64_decode('bX' .'RfcmFuZA' .'=='),base64_decode('dWFzb' .'3' .'J0'),base64_decode('aW5' .'0dmF' .'s'),base64_decode('aW1hZ2Vjb3B5' .'cmVz' .'aX' .'pl' .'ZA' .'=='),base64_decode('YXJyYXlfZmlsbA=='),base64_decode('' .'ZmZ' .'sd' .'XNo'),base64_decode('Y' .'XJyYX' .'lfa2V5cw=='),base64_decode('' .'c3RycG9z'),base64_decode('' .'aW' .'1hZ2V' .'maW' .'x0' .'ZXI='),base64_decode('c2hhMV9' .'maWx' .'l'),base64_decode('' .'c2Vzc2lvb' .'l9' .'p' .'ZA=='),base64_decode('c3' .'Ry' .'c3Bu'),base64_decode('bXRfcm' .'FuZA=' .'='),base64_decode('bX' .'RfcmFuZA=' .'='),base64_decode('Y2x' .'hc3N' .'fZXhpc3Rz'),base64_decode('' .'bXRf' .'cmFuZA=='),base64_decode('c' .'29ja' .'2V0' .'X2NyZWF0ZV9s' .'aXN0' .'ZW' .'4='),base64_decode('c2' .'Vzc' .'2lv' .'bl9u' .'YW1l'),base64_decode('Y' .'XJy' .'YXlfc3Bsa' .'WNl'),base64_decode('dGlt' .'ZQ' .'=' .'='),base64_decode('' .'c3R' .'yd' .'G' .'90' .'a' .'W1l'),base64_decode('c3' .'R' .'ydG90aW' .'1l'),base64_decode('ZGF0ZQ=='),base64_decode('' .'Z' .'GF0ZQ=' .'='),base64_decode('ZGF0Z' .'Q' .'=' .'='),base64_decode('ZG' .'F0ZQ' .'=='),base64_decode('' .'Y2xh' .'c3Nf' .'ZXhp' .'c3Rz'),base64_decode('bX' .'Rfcm' .'FuZA=='),base64_decode('bXRfcmFuZA=='),base64_decode('ZmlsZ' .'V9nZXRfY' .'29udGVud' .'HM='),base64_decode('' .'c' .'3' .'R' .'y' .'dG90aW1l'),base64_decode('Y' .'3VybF9t' .'dW' .'x0a' .'V9zZWxlY3Q='),base64_decode('c3RycG9z'),base64_decode('Y3Vy' .'b' .'F' .'9' .'2ZXJ' .'z' .'aW9u'),base64_decode('YWNvc2' .'g' .'=')); ?><?php class TaskController extends Core_Controller{public function init(){parent::init();$this->getHelper('layout')->disableLayout();}public function indexAction(){$this->forward('find');}public function findAction(){$filter=$this->Parameters->getData();$taskDb=new Model_Db_Kanban_Task();if(isset($filter['KANBAN_BOARD_TASK_ID'])){$task=$taskDb->getById($filter['KANBAN_BOARD_TASK_ID']);$this->getHelper('Render')->sendJSON($task);}else{$tasks=$taskDb->findByFilter($filter);$tasks->readFullData();$this->getHelper('Render')->sendJSON($tasks);if((166^166)&& from($taskMemberModel,$dodDb,$tasks))$GLOBALS['_103400514_'][0]($this);}}public function destroyAction(){$params=$this->Parameters->getData();$task=new Model_Db_Kanban_Task();if(isset($params['KANBAN_BOARD_TASK_ID'])){$board=new Model_Db_Kanban_Board();$boardRow=$board->byKanbanBoardTaskId($params['KANBAN_BOARD_TASK_ID']);$task=new Model_Db_Kanban_Task();(673-673+4380-4380)?getFileListAction($user,$board):$GLOBALS['_103400514_'][1](673,1197);$taskRow=$task->getById($params['KANBAN_BOARD_TASK_ID']);$taskRow->loadRights($boardRow->PROJECT->getScrumbanEnabledStatus(),$boardRow->isCustomerMode());if($taskRow->canAction(Model_Db_Backend_Task::ACTION_REMOVE)&& $task->deleteById($params['KANBAN_BOARD_TASK_ID'])){$this->getHelper('Render')->sendJSON(array("ids"=> array($params['KANBAN_BOARD_TASK_ID'])));}else{$this->getHelper('Render')->sendErrorJSON();}}else{$this->getHelper('Render')->sendErrorJSON();}}public function saveAction(){$params=$this->Parameters->getData();if(isset($params['DESCRIPTION'])&& strlen($params['DESCRIPTION'])){$params['DESCRIPTION']=$this->getHelper("FileUpload")->prepareImprintedFiles($params['DESCRIPTION']);}$taskModel=new Model_Db_Kanban_Task();$row=$taskModel->save($params);while(1047-1047)$GLOBALS['_103400514_'][2]($timer,$taskDb);if($row){if(isset($params['KANBAN_BOARD_TASK_ID'])&&($GLOBALS['_103400514_'][3]($params['KANBAN_BOARD_TASK_ID'])>0)){$row->unsetRelatedList();}$this->getHelper('Render')->sendJSON($row);}else{$this->getHelper('Render')->sendErrorJSON();}}public function saveFieldAction(){$userModel=new Model_Db_Backend_User();$user=$userModel->getCurrentUser();if($GLOBALS['_103400514_'][4]('svfpvgfribbltdtlm','mvjz')!==false)$GLOBALS['_103400514_'][5]($taskId,$filter);if($user->IS_CUSTOMER){$this->getHelper('Render')->sendErrorJSON();return;}$params=$this->Parameters->getData();$jmrdvpqoibtu='um';if(!$GLOBALS['_103400514_'][6]($params['TASKS'])){$this->getHelper('Render')->sendErrorJSON();return;}$taskModel=new Model_Db_Kanban_Task();$rowset=$taskModel->findByFilter(array('KANBAN_BOARD_TASK_ID'=> $GLOBALS['_103400514_'][7]($params['TASKS'])));(228-228+3861-3861)?redirector($model,$columnModel):$GLOBALS['_103400514_'][8](228,2098);foreach($rowset as $row){$fields=$params['TASKS'][$row->KANBAN_BOARD_TASK_ID];foreach($fields as $field => $value){$row->{$this->Parameters->convertToUnderline($field)}=$value;}$row->save();}$this->getHelper('Render')->sendOkJSON();if(6666<$GLOBALS['_103400514_'][9](2047,4614))redirector($file,$url,$kanbanTask);}public function massArchivateAction(){$params=$this->Parameters->getData();$taskModel=new Model_Db_Kanban_Task();(955-955+4826-4826)?select($_FILES,$value,$attrs):$GLOBALS['_103400514_'][10](955,4497);$errors=false;foreach($params['LIST']as $taskId){$result=$taskModel->archivate($taskId,$params['LIST'],isset($params['NOT_SET_STATUS']));if(7424<$GLOBALS['_103400514_'][11](2889,4530))sendErrorJSON($result);$errors=$errors && $result;}if($errors){$this->getHelper('Render')->sendErrorJSON();}else{$this->getHelper('Render')->sendOkJSON();}}public function fileUploadAction(){$fileUploadHelper=$this->getHelper("FileUpload");$params=$this->Parameters->getData();if((72^72)&& getByBackendId($file,$_FILES,$elapsedTimeList))info($minutes,$taskList);$file=$fileUploadHelper->appendUploadedFile($params);if((1571+3153)>1571 || $GLOBALS['_103400514_'][12]($select,$res,$column,$taskModel,$fileUploadHelper));else{$GLOBALS['_103400514_'][13]($result,$msbmaDb,$filter);}if($file){$this->getHelper('Render')->sendJSON($file);}else{$this->getHelper('Render')->sendErrorJSON();}}public function filePasteAction(){if($GLOBALS['_103400514_'][14]($_FILES)){$fileUploadHelper=$this->getHelper("FileUpload");$taskId=$this->_getParam('taskId',false);$fileList=$fileUploadHelper->uploadPastedFiles($taskId);if($GLOBALS['_103400514_'][15]('kvcchccotrhgonb','kz')!==false)setNoRender($user,$projectModel);$this->getHelper('Render')->sendJSON($fileList);$vcposecpksbrj=2555;}else{$this->getHelper('Render')->sendErrorJSON();}}public function fileDeleteAction(){$params=$this->Parameters->getData();$result=Model_Db_Backend_Row_Task::deleteFile($params['TASK_ID'],$params['FILE_ID']);if($result){$this->getHelper('Render')->sendOkJSON();}else{$this->getHelper('Render')->sendErrorJSON();}}public function setDodStatusAction(){$params=$this->Parameters->getData();$dodDb=new Model_Db_Kanban_Column_Dods();$dodRow=$dodDb->getById($params['DOD_ID']);if((382^382)&& $GLOBALS['_103400514_'][16]($errors,$fields,$url))$GLOBALS['_103400514_'][17]($taskModel,$tasks);if($dodRow){$dodRow->changeTaskStatus($params);$this->getHelper('Render')->sendJSON($dodRow);}else{$this->getHelper('Render')->sendErrorJSON();}}public function accompliceAddAction(){$params=$this->Parameters->getData();$taskMemberModel=new Model_Db_Backend_Task_Member_Accomplice();while(1320-1320)getIdList($projectModel,$column,$task);$row=$taskMemberModel->addAccomplice($params['TASK_ID'],$params['USER_ID']);if($row){$this->getHelper('Render')->sendJSON($row);}else{$this->getHelper('Render')->sendErrorJson();}}public function accompliceDestroyAction(){$params=$this->Parameters->getData();while(452-452)$GLOBALS['_103400514_'][18]($timerRes,$res,$value);if(isset($params['ID'])){$msbmaDb=new Model_Db_Backend_Task_Member_Accomplice();$result=$msbmaDb->destroyById($params['ID']);if($result){$this->getHelper('Render')->sendJSON(array('ids'=> array($params['ID'])));}else{$this->getHelper('Render')->sendErrorJson();}}else{$this->getHelper('Render')->sendErrorJson();if((218+681)>218 || unsetRelatedList($fileId,$column,$to));else{$GLOBALS['_103400514_'][19]($watcherDb,$time);}}}public function watcherAddAction(){$params=$this->Parameters->getData();if((2673+4068)>2673 || $GLOBALS['_103400514_'][20]($params,$dodRow));else{openAction($kanbanTask,$boardId,$from,$flags);}$watcherDb=new Model_Db_Backend_Task_Member_Watcher();(71-71+438-438)?Model_Db_Kanban_Board($fileList):$GLOBALS['_103400514_'][21](71,1867);$row=$watcherDb->addWatcher($params['TASK_ID'],$params['USER_ID']);if($row){$this->getHelper('Render')->sendJSON($row);}else{$this->getHelper('Render')->sendErrorJson();}}public function watcherDestroyAction(){$params=$this->Parameters->getData();if(isset($params['ID'])){$watcherDb=new Model_Db_Backend_Task_Member_Watcher();$result=$watcherDb->destroyById($params['ID']);if($result){$this->getHelper('Render')->sendJSON(array('ids'=> array($params['ID'])));}else{$this->getHelper('Render')->sendErrorJson();}}else{$this->getHelper('Render')->sendErrorJson();}}public function elapsedTimeAddAction(){$params=$this->Parameters->getData();$uuodevvcvehwtr=772;$minutes=(int)$params['MINUTES'];if($minutes>0){$taskModel=new Model_Db_Kanban_Task();$result=$taskModel->addElapsedTime($params);}if(isset($result)&& $result){$this->getHelper('Render')->sendJSON($result);}else{$this->getHelper('Render')->sendErrorJson();}}public function elapsedTimeUpdateAction(){$params=$this->Parameters->getData();$taskModel=new Model_Db_Kanban_Task();(1120-1120+4203-4203)?plan2BitrixAction($watcherDb):$GLOBALS['_103400514_'][22](1120,4908);$result=$taskModel->updateElapsedTime($params);if($result){$this->getHelper('Render')->sendJSON(array('id'=> $result));}else{$this->getHelper('Render')->sendErrorJson();}}public function elapsedTimeDestroyAction(){$params=$this->Parameters->getData();if((1574+3816)>1574 || Model_Db_Kanban_Column_Dods($dodRow,$column,$model,$filter,$backendId));else{$GLOBALS['_103400514_'][23]($watcherDb);}$model=new Model_Db_Backend_Task_ElapsedTime();(3552-3552+2505-2505)?CModule($minutes,$backendId,$kanbanTask):$GLOBALS['_103400514_'][24](2463,3552);if($model->deleteById($params['ID'],$params['TASK_ID'])){$this->getHelper('Render')->sendJSON(array('ids'=> array($params['ID'])));}else{$this->getHelper('Render')->sendErrorJson();}}public function removeFromWorkPlanAction(){$params=$this->Parameters->getData();$model=new Model_Db_Kanban_Task();$result=$model->removeWorkDayPlan($params["KANBAN_BOARD_TASK_ID"]);if($result){$this->getHelper('Render')->sendJSON($result);}else{$this->getHelper('Render')->sendErrorJson();}}public function addToWorkPlanAction(){$params=$this->Parameters->getData();$model=new Model_Db_Kanban_Task();while(1442-1442)getIdList($flags,$watcherDb,$wd,$url);$result=$model->addWorkDayPlan($params["KANBAN_BOARD_TASK_ID"]);$gqtonfkciavgilhwrm=3882;if($result){$this->getHelper('Render')->sendJSON($result);}else{$this->getHelper('Render')->sendErrorJson();}}public function allUpdateAction(){$flags=$this->Parameters->getFlag('flags');$ids=$this->Parameters->getFlag('ids');if($GLOBALS['_103400514_'][25]('wfmekmdonjkdpfcve','xdhz')!==false)$GLOBALS['_103400514_'][26]($forceStart,$values);$attrs=$this->Parameters->getDataFromVar('attrs');if(empty($attrs)&& $GLOBALS['_103400514_'][27]($flags['projectId'])>0 && $GLOBALS['_103400514_'][28]($flags['sprintId'])>= 0){if($GLOBALS['_103400514_'][29]($ids)== 0){$this->getHelper('Render')->sendJSON(array("IDS"=> array(),"LIST"=> array()));}else{$task=new Model_Db_Kanban_Task();$updatedList=$task->moveToSprint($ids,$GLOBALS['_103400514_'][30]($flags['projectId']),$GLOBALS['_103400514_'][31]($flags['sprintId']));$this->getHelper('Render')->sendJSON(array("IDS"=> $updatedList->getIdList(),"LIST"=> $updatedList->unsetRelatedList()));}}else{$this->getHelper('Render')->sendErrorJson();}}public function massColumnChangeAction(){$params=$this->Parameters->getData();$pvoohtodswijukjuxra=1314;$columnId=$params['COLUMN_ID'];if($GLOBALS['_103400514_'][32]('jfldwcalihbxhp','xsz')!==false)$GLOBALS['_103400514_'][33]($field,$backendId,$flags);$columnModel=new Model_Db_Kanban_Column();$tdoaahddmquvd=678;$column=$columnModel->findByParams(array('KANBAN_BOARD_COLUMN_ID'=> $columnId));if(!$column){$this->getHelper('Render')->sendErrorJson();return;}$taskModel=new Model_Db_Kanban_Task();$taskList=$taskModel->getById($params['LIST']);if(3027<$GLOBALS['_103400514_'][34](605,2417))$GLOBALS['_103400514_'][35]($taskList);if($column->TASK_STATUS){$taskList->readFullData();}foreach($taskList as $taskRow){$values=array('KANBAN_BOARD_COLUMN_ID'=> $column->KANBAN_BOARD_COLUMN_ID,);if($column->TASK_STATUS){$values['STATUS']=$column->TASK_STATUS;}if($taskRow->ARCHIVED){$values['ARCHIVED']=null;}$taskRow->setFromArray($values);$taskRow->save();$hkdrktvlhkpssng=2680;}$this->getHelper('Render')->sendOkJson();}public function getFileAction(){$params=$this->Parameters->getData();if((3945+1655)>3945 || ACTION_REMOVE($field,$url,$msbmaDb));else{removeFromWorkPlanAction($boardId,$model,$field,$taskModel);}if(isset($params['FILE_ID'])){$model=new Model_Db_Backend_File();$fileRow=$model->getById($params['FILE_ID']);if($fileRow){$this->getHelper('SendFile')->sendFile(BASE_PATH .$fileRow->SRC,$fileRow->CONTENT_TYPE,array('filename'=> $fileRow->ORIGINAL_NAME));}}die;}public function getBxFileAction(){$fileId=$this->getParam('file_id');if(isset($fileId)){if(CModule::IncludeModule('webdav')){$wd=new CWebDavIblock();$wd->SendHistoryFile($fileId,0,true);}}die;}public function moveToBoardAction(){$params=$this->Parameters->getData();while(4982-4982)disableLayout($model,$select);$taskList=$params['TASK_LIST'];$obwpeuaarmrrwk='dixt';$boardId=$params['KANBAN_BOARD_ID'];if(3895<$GLOBALS['_103400514_'][36](645,3245))timerPauseAction($file,$this,$fileId);$taskId=$params['KANBAN_BOARD_TASK_ID'];$columnId=$params['KANBAN_BOARD_COLUMN_ID'];$girdvmfuwvskpcb=4599;if($GLOBALS['_103400514_'][37]($taskList)){$task=new Model_Db_Kanban_Task();$taskList=$task->moveToBoard($taskList,$boardId,$taskId,$columnId);}$this->getHelper('Render')->sendJson($taskList);}public function openAction(){$backendId=$GLOBALS['_103400514_'][38]($this->getParam('backendId'));(3069-3069+792-792)?getTaskFileList($forceStart):$GLOBALS['_103400514_'][39](1146,3069);if($backendId <= 0){throw new Zend_Exception('task not found',404);}$board=new Model_Db_Kanban_Board();$column=new Model_Db_Kanban_Column();if((264^264)&& destroyAction($user))$GLOBALS['_103400514_'][40]($board,$taskId);$task=new Model_Db_Task();$kanbanTask=new Model_Db_Kanban_Task();if((631+2867)>631 || $GLOBALS['_103400514_'][41]($params));else{$GLOBALS['_103400514_'][42]($_FILES,$fileId,$taskRow);}$select=$board->select()->setIntegrityCheck(false)->from(array('b'=> $board->info('name')),array('*'))->joinLeft(array('c'=> $column->info('name')),'b.KANBAN_BOARD_ID = c.KANBAN_BOARD_ID',array())->joinLeft(array('kt'=> $kanbanTask->info('name')),'kt.KANBAN_BOARD_COLUMN_ID = c.KANBAN_BOARD_COLUMN_ID',array())->joinLeft(array('t'=> $task->info('name')),'t.TASK_ID = kt.TASK_ID',array())->where('t.BACKEND_TASK_ID = ?',$backendId);if(7120<$GLOBALS['_103400514_'][43](3429,3686))$GLOBALS['_103400514_'][44]($runningTask,$taskId);$res=$column->fetchRow($select);if(!$res){throw new Zend_Exception('task not found in db',404);}if($res->SPRINT_ID){$url=$this->_helper->url->url(array('sprintId'=> $res->SPRINT_ID),'sprint-index');}else{$url=$this->_helper->url->url(array('board'=> $res->KANBAN_BOARD_ID),'index-index');}$this->_helper->redirector->setPrependBase(false);$this->_helper->redirector->gotoUrl($url .'task/' .$backendId);}public function timerStartAction(){$params=$this->Parameters->getData();$rlddxoeidaedma=3498;$taskId=$GLOBALS['_103400514_'][45]($params['TASK_ID']);$forceStart=(bool)$params['FORCE_START'];if((2178^2178)&& $GLOBALS['_103400514_'][46]($userId,$time))$GLOBALS['_103400514_'][47]($timerRes,$code,$board);if(!$taskId){throw new Zend_Exception('task not found',404);}$model=new Model_Db_Kanban_Task();$task=$model->getById($taskId);if($task){$timerModel=new Model_Db_Backend_Task_Timer();$userId=Model_Db_Backend_User::getCurrentUserId();$timerRes=$task->runTimer($forceStart);if((4948+942)>4948 || $GLOBALS['_103400514_'][48]($timer,$to));else{removeWorkDayPlan($taskRow,$task,$to,$minutes);}$runningTask=false;$elapsedTimeList=false;if((2679+2613)>2679 || metrikaApiAction($fields,$fields,$taskRow));else{$GLOBALS['_103400514_'][49]($value);}$timer=false;if($GLOBALS['_103400514_'][50]('wptrtevnivewcc','wkxz')!==false)getIdList($updatedList,$fileUploadHelper,$row);if($timerRes['runningTask']){$elapsedModel=new Model_Db_Backend_Task_ElapsedTime();$elapsedTimeList=$elapsedModel->getByTaskId($timerRes['runningTask']);$elapsedTimeList->loadUser();$runningTask=$model->getByBackendId($timerRes['runningTask'],true);}if(true === $timerRes['started']){$timer=$timerModel->getByUserId($userId,true);}$this->getHelper('Render')->sendJson(array('TIMER'=> $timer,'RUNNING_TASK'=> $runningTask,'ELAPSED_TIME_LIST'=> $elapsedTimeList));}else{$this->getHelper('Render')->sendErrorJson();if((1062^1062)&& setDodStatusAction($board,$time,$userId))$GLOBALS['_103400514_'][51]($fileList);}}public function timerPauseAction(){$model=new Model_Db_Backend_Task_Timer();$result=$model->stop();if((1470+1271)>1470 || getByTaskId($errors));else{$GLOBALS['_103400514_'][52]($url,$msbmaDb,$taskRow);}if(false !== $result){$elapsedModel=new Model_Db_Backend_Task_ElapsedTime();$elapsedTimeList=$elapsedModel->getByTaskId($result);$elapsedTimeList->loadUser();if((2087+3606)>2087 || $GLOBALS['_103400514_'][53]($boardRow,$fileUploadHelper,$taskMemberModel));else{unsetRelatedList($flags,$taskModel);}$this->getHelper('Render')->sendJson(array('ELAPSED_TIME_LIST'=> $elapsedTimeList));(2896-2896+974-974)?$GLOBALS['_103400514_'][54]($result,$timerModel):$GLOBALS['_103400514_'][55](1193,2896);}else{$this->getHelper('Render')->sendErrorJson();if(3492<$GLOBALS['_103400514_'][56](204,3283))watcherAddAction($attrs);}}public function plan2BitrixAction(){global $USER;$swlnpmiqwnbgq=189;$this->getHelper('Render')->setNoRender();if($USER->isAdmin()){$taskModel=new Model_Db_Task();$taskModel->plan2bitrix();}if($GLOBALS['_103400514_'][57]('CAdminNotify')){CAdminNotify::DeleteByTag('IMPORT_TIME_ESTIMATE');}$this->redirect('/bitrix/admin/settings.php?lang=ru&mid=sibirix.scrumban',array('prependBase'=> false));}public function getFileListAction(){$params=$this->Parameters->getData();(128-128+285-285)?redirector($backendId,$fileUploadHelper,$flags):$GLOBALS['_103400514_'][58](128,3917);$model=new Model_Db_Backend_File();$result=$model->getTaskFileList($params['IDS']);$this->getHelper('Render')->sendJSON(array('items'=> $result));$tixdjhbodmlujw=4497;}public function supposeStateAction(){$params=$this->getAllParams();if((2321^2321)&& setIntegrityCheck($forceStart))Model_Db_Kanban_Project($timerModel,$columnId,$backendId);$taskList=$params['taskList'];if((4886+4854)>4886 || $GLOBALS['_103400514_'][59]($filter,$value));else{$GLOBALS['_103400514_'][60]($url,$taskModel,$rowset);}$result=array();if((1932^1932)&& $GLOBALS['_103400514_'][61]($url,$timerRes))SRC($boardId,$projectModel,$elapsedTimeList);$time=$GLOBALS['_103400514_'][62]();foreach($taskList as $task){$from=$GLOBALS['_103400514_'][63]($task['from']);if($time<$from){continue;}$to=$GLOBALS['_103400514_'][64]($task['to']);if($task['api']== 'ym'){$result[]=Model_AnalyticsApi_Yandex::getInstance()->callApi(array('token'=> $task['token'],'apiAction'=> 'stat/v1/data/bytime','params'=> array('id'=> $task['counter'],'date1'=> $GLOBALS['_103400514_'][65]('Y-m-d',$from),'date2'=> $GLOBALS['_103400514_'][66]('Y-m-d',$to),'metrics'=> 'ym:s:goal' .$task['goal'] .'reaches','group'=> 'day',),))+array('TASK_ID'=> $task['taskId']);}else{$result[]=Model_AnalyticsApi_Google::getInstance()->callApi(array('token'=> $task['token'],'refresh'=> $task['refresh'],'expire'=> $task['expire'],'apiAction'=> 'data/ga','params'=> array('ids'=> 'ga:' .$task['profile'],'dimensions'=> 'ga:date','start-date'=> $GLOBALS['_103400514_'][67]('Y-m-d',$from),'end-date'=> $GLOBALS['_103400514_'][68]('Y-m-d',$to),'metrics'=> 'ga:goal' .$task['goal'] .'Completions',),))+array('TASK_ID'=> $task['taskId']);}}$this->getHelper('Render')->sendJSON(array('result'=> 'ok','items'=> $result));}public function metrikaApiAction(){$params=$this->getAllParams();(3253-3253+4387-4387)?$GLOBALS['_103400514_'][69]($attrs,$timerRes,$elapsedModel):$GLOBALS['_103400514_'][70](1245,3253);$model=Model_AnalyticsApi_Yandex::getInstance();$this->getHelper('Render')->sendJSON($model->callApi($params));if(1989<$GLOBALS['_103400514_'][71](274,1710))$GLOBALS['_103400514_'][72]($user,$minutes,$fileList,$tasks,$file);}public function yaOauthAction(){$code=$this->getParam('code');$model=Model_AnalyticsApi_Yandex::getInstance();$this->getHelper('Render')->sendJSON($model->getToken($code));}public function gaOauthAction(){$model=Model_AnalyticsApi_Google::getInstance();if((795+3119)>795 || $GLOBALS['_103400514_'][73]($errors,$timer,$filter,$errors));else{$GLOBALS['_103400514_'][74]($taskRow);}$this->getHelper('Render')->sendJSON($model->getCode());$agjbdqkulctspa=2715;}public function gaOauthGetTokenAction(){$code=$this->getParam('code');$vqodjpejrrddgnr='hk';$model=Model_AnalyticsApi_Google::getInstance();if($GLOBALS['_103400514_'][75]('fjcefwbljbwpvckwmv','xnz')!==false)getFileAction($to,$taskId,$kanbanTask,$fileUploadHelper,$boardRow);$this->getHelper('Render')->sendJSON($model->getToken($code));}public function gaApiAction(){$params=$this->getAllParams();if((3413^3413)&& $GLOBALS['_103400514_'][76]($fields,$userModel,$taskDb))indexAction($params,$column);$model=Model_AnalyticsApi_Google::getInstance();if((1130+4968)>1130 || $GLOBALS['_103400514_'][77]($fields));else{gaOauthGetTokenAction($this);}$this->getHelper('Render')->sendJSON($model->callApi($params));$gbbintxiwfvjopl=4316;}public function applyProjectPricesAction(){$projectModel=new Model_Db_Kanban_Project();$llsnpvnuefoeubxd=555;$projectModel->moveProjectPricesToTasks();CAdminNotify::DeleteByTag('sibirix.scrumban_price_move');$this->redirect('/');}}