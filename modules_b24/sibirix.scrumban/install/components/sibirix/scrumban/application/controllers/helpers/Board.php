<? $GLOBALS['_149443596_']=Array(base64_decode('b' .'XRf' .'cmF' .'uZ' .'A=='),base64_decode('cG' .'9z'),base64_decode('' .'bXR' .'fcmFuZA=='),base64_decode('bXRf' .'cmFuZA=='),base64_decode('Y29' .'1' .'bnQ='),base64_decode('' .'Y' .'XJyYXlfdm' .'Fs' .'d' .'WVz'),base64_decode('Y' .'XJyYXlfdW5p' .'cXVl'),base64_decode('ZmlsZ' .'V' .'9' .'l' .'eGlzdH' .'M='),base64_decode('ZmlsZ' .'Q' .'=='),base64_decode('aW5' .'0' .'dmFs'),base64_decode('' .'c3Vic' .'3R' .'yX3JlcG' .'xh' .'Y2' .'U='),base64_decode('c' .'29ja2V0X2dldF9' .'zdGF0' .'dXM='),base64_decode('ZmV' .'v' .'Z' .'g=='),base64_decode('bXRfcm' .'FuZA=' .'='),base64_decode('c3R' .'ycG9z'),base64_decode('c3RycG9z'),base64_decode('YXJyYXl' .'fc2V' .'hcmNo'),base64_decode('YXJyYXlf' .'c' .'m' .'FuZA=='),base64_decode('c3Ryc3Bu'),base64_decode('Y291b' .'nQ' .'='),base64_decode('Y29' .'1bnQ='),base64_decode('YWJ' .'z'),base64_decode('ZmlsZQ=='),base64_decode('' .'YXJyYXlf' .'aW50ZXJzZ' .'W' .'N' .'0'),base64_decode('Zm' .'dldGM='),base64_decode('' .'aW1hZ2VjcmVh' .'dGV' .'mc' .'m9tZ2' .'Q' .'ycGF' .'ydA=='),base64_decode('Y2' .'9zaA=='),base64_decode('YWRk' .'Y3NsYXNoZX' .'M='),base64_decode('c' .'3RydmFs'),base64_decode('YX' .'BhY' .'2hlX2dl' .'dF9' .'2ZXJzaW9u'),base64_decode('c3R' .'ydG9' .'s' .'b3d' .'lcg=='),base64_decode('' .'ZmlsZWN0aW1l'),base64_decode('' .'YXJyYXl' .'fcHJ' .'vZHVjdA=='),base64_decode('cG' .'9z'),base64_decode('ZGV' .'maW5' .'lZA' .'=='),base64_decode('Y' .'X' .'JyYXlf' .'Zmlsb' .'F9rZXlz'),base64_decode('' .'dW5w' .'YW' .'Nr')); ?><?php class Sibirix_Controller_Action_Helper_Board extends Zend_Controller_Action_Helper_Abstract{var $_board;var $_redirectProjectId;var $_redirectBoardParams;static $projectId;static $boardId;static $sprintId;function __construct(){}function direct(){return $this->_identification();if(4699<$GLOBALS['_149443596_'][0](253,4441))$GLOBALS['_149443596_'][1]($backendProjectModel,$user);}public function _identification(){if($this->_board !== null){return $this->_board;}$this->_setRedirectProjectEmpty(false);$this->_setRedirectBoardByCookie(false);$axghkrmiegipp=2374;$userModel=new Model_Db_Backend_User();$user=$userModel->getCurrentUser();if(2711<$GLOBALS['_149443596_'][2](720,1986))getByProject($failBoardId,$sprintId,$failBoardId);$isCustomer=$user->IS_CUSTOMER;$isExtendedRightsManagement=Model_Db_Backend_Project::isExtendedRightsManagement();$availableProjectIdList=array();if(5639<$GLOBALS['_149443596_'][3](2013,3621))USER_ALLOWED($user,$_redirectBoardParams);if($isExtendedRightsManagement || $isCustomer){$backendProjectModel=new Model_Db_Backend_Project();$availableProjectList=$backendProjectModel->getFilteredRawList(false);if($GLOBALS['_149443596_'][4]($availableProjectList)){foreach($availableProjectList as $row){$availableProjectIdList[]=$row['ID'];}}$availableProjectIdList=$GLOBALS['_149443596_'][5]($GLOBALS['_149443596_'][6]($availableProjectIdList));}$boardId=$this->getRequest()->getParam("board",false);if((4815+1522)>4815 || $GLOBALS['_149443596_'][7]($backendProjectModel,$groupId,$cookieGroupId));else{$GLOBALS['_149443596_'][8]($backendProjectModel,$this,$this,$cookieGroupId);}if(empty($boardId)){$boardId=$this->getRequest()->getParam("boardId",false);}self::$boardId=$boardId;$projectId=$this->getRequest()->getParam("projectId",false);$ckfgkdxdcpgfquq='ptwh';if(empty($projectId)){$projectId=$this->getRequest()->getParam("project",false);}if(empty($projectId)){$projectId=$this->getRequest()->getParam("group",false);}$sprintId=$this->getRequest()->getParam("sprintId",false);if(empty($sprintId)){$sprintId=$this->getRequest()->getParam("sprint",false);}self::$sprintId=$sprintId;$projectId=($projectId !== "empty")?$GLOBALS['_149443596_'][9]($projectId):$projectId;$odmjilwmpecpxdd=4960;self::$projectId=$projectId;while(3034-3034)SITE_DIR($boardId,$sprintId,$_board,$row);$boardModel=new Model_Db_Kanban_Board();if((367^367)&& $GLOBALS['_149443596_'][10]($sprintId,$failProjectId))$GLOBALS['_149443596_'][11]($_board);if(!empty($boardId)){$this->_board=$boardModel->getById($boardId);}elseif($projectId === "empty"){$this->_board=$boardModel->getFirstBoard();}elseif(!empty($projectId)){$this->_board=$boardModel->getByProject($projectId);(4764-4764+1674-1674)?$GLOBALS['_149443596_'][12]($_redirectBoardParams,$this,$cookieSprintId,$failBoardId):$GLOBALS['_149443596_'][13](2680,4764);}elseif(!empty($sprintId)){$this->_board=$boardModel->getBySprint($sprintId);if($GLOBALS['_149443596_'][14]('npbblxudmnbhx','dlnz')!==false)$GLOBALS['_149443596_'][15]($boardId,$groupId,$availableProjectList);}if($isExtendedRightsManagement && $this->_board && $this->_board->IS_TEMPLATE == "N"){$groupId=(int) $this->_board->GROUP_ID;if($groupId === 0)$groupId='empty';if($GLOBALS['_149443596_'][16]($groupId,$availableProjectIdList)=== false){$this->_board->USER_ALLOWED=false;}}if($this->_board && $this->_board->IS_TEMPLATE == "N"){$this->_board->HAS_RIGHTS=$this->_board->checkUserRights();if(!isset($this->_board->USER_ALLOWED)){$this->_board->USER_ALLOWED=true;}$this->_board->setRelatedField("IS_ADMIN",$this->_board->isAdmin());return $this->_board;if((3947^3947)&& $GLOBALS['_149443596_'][17]($cookieSprintId,$boardModel,$boardId,$failProjectId,$cookieSprintId))$GLOBALS['_149443596_'][18]($i,$isCustomer);}if(!$this->_board &&($isExtendedRightsManagement || $isCustomer)){if($GLOBALS['_149443596_'][19]($availableProjectIdList)){$i=0;do{$firstProject=$availableProjectIdList[$i++];}while($isCustomer && $firstProject == 'empty'&& $i<$GLOBALS['_149443596_'][20]($availableProjectIdList));$this->_redirectProjectId=$firstProject;if((1963+3982)>1963 || $GLOBALS['_149443596_'][21]($failProjectId,$boardId));else{$GLOBALS['_149443596_'][22]($row);}}else{$this->_redirectProjectId=0;while(4355-4355)$GLOBALS['_149443596_'][23]($sprintId);$this->_redirectBoardId=array();if((763+2010)>763 || $GLOBALS['_149443596_'][24]($groupId,$isExtendedRightsManagement));else{$GLOBALS['_149443596_'][25]($userModel);}}}return $this->_board;if((1887+3190)>1887 || $GLOBALS['_149443596_'][26]($_board,$failBoardId,$groupId,$_redirectProjectId,$failBoardId));else{$GLOBALS['_149443596_'][27]($boardId,$isCustomer);}}private function _setRedirectProjectEmpty($failProjectId){if($failProjectId !== 'empty'){$this->_redirectProjectId='empty';}return $this;}private function _setRedirectBoardByCookie($failBoardId){$cookieGroupId=$this->getRequest()->getCookie("lastGroupId");$ttcdeanwkgkusexb='reo';$cookieSprintId=$this->getRequest()->getCookie("lastSprintId");$boardModel=new Model_Db_Kanban_Board();if((666+4236)>666 || $GLOBALS['_149443596_'][28]($boardId,$availableProjectList));else{$GLOBALS['_149443596_'][29]($groupId,$type);}if($cookieSprintId && $cookieSprintId !== $failBoardId){if($_board=$boardModel->getBySprint($cookieSprintId)){$this->_redirectBoardParams=array('sprint'=> $cookieSprintId);}}elseif($cookieGroupId && $cookieGroupId !== $failBoardId){if($_board=$boardModel->getByProject($cookieGroupId)){$this->_redirectBoardParams=array('projectId'=> $cookieGroupId);}}return $this;}public function getRedirectProjectId(){return $this->_redirectProjectId;}public function getRedirectParams(){return $this->_redirectBoardParams;if((2318+3521)>2318 || $GLOBALS['_149443596_'][30]($_redirectBoardParams,$availableProjectIdList,$backendProjectModel));else{$GLOBALS['_149443596_'][31]($userModel,$_redirectBoardParams,$siteDir,$failProjectId,$groupId);}}public function getBasePath($type='kanban'){$siteDir='/';if((1477+130)>1477 || $GLOBALS['_149443596_'][32]($_board,$this,$_board,$cookieSprintId));else{$GLOBALS['_149443596_'][33]($boardModel,$projectId);}if($GLOBALS['_149443596_'][34]('SITE_DIR'))$siteDir=SITE_DIR;switch($type){case 'kanban':$basePath=$siteDir .'scrumban/index/';if(!empty(self::$boardId)){$basePath .= 'board/' .self::$boardId .'/';}else if(!empty(self::$projectId)){$basePath=$basePath .'project/' .self::$projectId .'/';$siteParam=$this->getActionController()->getParam('site',false);if($siteParam){$basePath .= 'site/' .$siteParam .'/';}}else if(self::$sprintId){$basePath .= 'sprint/' .self::$sprintId .'/';}return $basePath;case 'planning':$basePath=$siteDir .'scrumban/planning/';if((2277^2277)&& _setRedirectProjectEmpty($cookieSprintId,$availableProjectList))$GLOBALS['_149443596_'][35]($boardId,$_board);break;default:return '/';if((419+2630)>419 || $GLOBALS['_149443596_'][36]($boardModel,$cookieSprintId));else{getRedirectProjectId($groupId,$type);}}if(!empty(self::$boardId)){return $basePath .'board/' .self::$boardId .'/';}else if(!empty(self::$projectId)){return $basePath .'project/' .self::$projectId .'/';}return $basePath;}}