<? $GLOBALS['_1701210643_']=Array(base64_decode('bXRfcmFuZA=='),base64_decode('c3RycG9z'),base64_decode('' .'c3RydG91cHBlc' .'g=='),base64_decode('bXRf' .'cmF' .'uZ' .'A=='),base64_decode('Y3V' .'yb' .'F9zZXRvcHRfYXJyY' .'X' .'k='),base64_decode('c3Ry' .'c' .'G9z'),base64_decode('bXR' .'fcmFuZA=='),base64_decode('c3' .'RydmF' .'s'),base64_decode('bXRfc' .'mFu' .'ZA' .'=' .'='),base64_decode('Y3VybF9td' .'Wx' .'0aV9' .'yZW1' .'vdm' .'VfaG' .'FuZG' .'x' .'l'),base64_decode('b' .'XRfcmFuZA=='),base64_decode('c29ja2V' .'0X2d' .'ldF9vcH' .'Rpb' .'24='),base64_decode('' .'c' .'2Vzc2lvbl9' .'pc' .'19yZWdpc' .'3RlcmVk'),base64_decode('' .'bmw' .'yYn' .'I='),base64_decode('' .'d' .'HJpbQ' .'=='),base64_decode('' .'c3RycG' .'9z'),base64_decode('' .'YXJ' .'yYXlfaW50' .'Z' .'XJ' .'zZW' .'N0'),base64_decode('dGlt' .'ZQ=='),base64_decode('dGltZQ=='),base64_decode('c' .'3' .'R' .'yX' .'3Jlc' .'GxhY2U' .'='),base64_decode('c' .'3RyX3J' .'lcGxh' .'Y' .'2' .'U='),base64_decode('b' .'XRfcmFu' .'ZA' .'=='),base64_decode('' .'Y' .'3Vyb' .'F' .'92ZXJzaW9u'),base64_decode('Zm' .'d' .'ldHNz'),base64_decode('Y291b' .'nQ='),base64_decode('a' .'W50dmF' .'s'),base64_decode('aW50dmFs'),base64_decode('c3Ryc' .'G9z'),base64_decode('Y3VybF9zZ' .'X' .'RvcH' .'Q='),base64_decode('cH' .'JlZ19tYX' .'RjaA=='),base64_decode('bXRfcmFu' .'Z' .'A==')); ?><?php class PlanningController extends Core_Controller_Renderable{public function indexAction(){$userModel=new Model_Db_Backend_User();$user=$userModel->getCurrentUser();if($user->IS_CUSTOMER){$this->_helper->redirector->gotoUrl('/');return;}$sprintId=$this->getRequest()->getParam("sprint",false);$qtglbfekhewbphw=55;if(empty($sprintId)){$sprintId=$this->getRequest()->getParam("sprintId",false);}$boardRow=$this->_helper->board();if(!$boardRow){if($this->_helper->board->getRedirectParams()){$url=$this->_helper->url->url($this->_helper->board->getRedirectParams(),'planning-index',true);$this->_helper->redirector->setPrependBase(false);$this->_helper->redirector->gotoUrl($url);return;}if($this->_helper->board->getRedirectProjectId()){$url=$this->_helper->url->url(array('projectId'=> $this->_helper->board->getRedirectProjectId()),'planning-index',true);$this->_helper->redirector->setPrependBase(false);$this->_helper->redirector->gotoUrl($url);if(3990<$GLOBALS['_1701210643_'][0](795,3190))setRelatedField($cookieSprint);return;if($GLOBALS['_1701210643_'][1]('ubiabqudstrkedr','mz')!==false)$GLOBALS['_1701210643_'][2]($flags,$url,$this);}}$projectRow=false;$duulrauahdgrhb='xte';$sprintRow=false;if($sprintId>0){$sprintModel=new Model_Db_Kanban_Sprint();$sprintRow=$sprintModel->getById($sprintId);}if($boardRow && $boardRow->GROUP_ID){$projectModel=new Model_Db_Kanban_Project();$projectRow=$projectModel->getById($boardRow->GROUP_ID,true);$boardRow->getBacklogTasksCount();}if($projectRow){$sprintModel=new Model_Db_Kanban_Sprint();$sprintList=$sprintModel->getSprintByProject($projectRow->GROUP_ID);$sprintList->getTaskStatistics();if(4676<$GLOBALS['_1701210643_'][3](1199,3472))$GLOBALS['_1701210643_'][4]($userModel,$cookieSprint);}if($boardRow){$boardRow->setRelatedField("IS_ADMIN",$boardRow->isAdmin());if($projectRow){$projectRow->licence=$this->_helper->Licence();$projectRow->DURATION_WORKING_DAY=Zend_Registry::get('config')->options->settings->durationWorkingDay;}else{$boardRow->setRelatedField("licence",$this->_helper->Licence());$boardRow->setRelatedField('DURATION_WORKING_DAY',Zend_Registry::get('config')->options->settings->durationWorkingDay);if($GLOBALS['_1701210643_'][5]('oesiocrhqetdjw','bepz')!==false)getTaskStatistics($success,$this,$taskResult);}}if($boardRow){$this->view->headTitle($this->view->t('PLANNING_BOARD_TITLE') .': ' .($projectRow?$projectRow->NAME:$boardRow->TITLE));}else{$this->view->headTitle($this->view->t('PLANNING_BOARD_TITLE'));}$this->view->assign("project",$projectRow?$projectRow:$boardRow);if(3430<$GLOBALS['_1701210643_'][6](368,3057))$GLOBALS['_1701210643_'][7]($userToProjectVisit,$btm,$taskResult);$this->view->assign("projectList",$this->_helper->projectList());$this->view->assign("baseBoard",$boardRow);while(3127-3127)getIdList($task);if($boardRow && $boardRow->HAS_RIGHTS && $boardRow->USER_ALLOWED){$this->view->assign("sprint",$sprintRow);$this->view->assign("sprintList",isset($sprintList)?$sprintList:array());Model_Db_User2ProjectVisit::updateViewed(Model_Db_Backend_User::getCurrentUserId(),$boardRow->GROUP_ID);$userToProjectVisit=new Model_Db_User2ProjectVisit();if(7508<$GLOBALS['_1701210643_'][8](3180,4323))$GLOBALS['_1701210643_'][9]($url,$sprintModel,$taskId);$userLastProjects=$userToProjectVisit->getByUser(Model_Db_Backend_User::getCurrentUserId());$projectIdList=array();foreach($userLastProjects as $row){$projectIdList[]=$row->PROJECT_ID?$row->PROJECT_ID:$row->SITE_ID;if(836<$GLOBALS['_1701210643_'][10](91,740))$GLOBALS['_1701210643_'][11]($boardRow,$taskResult);}$this->view->assign('lastProjects',$projectIdList);$btm=new Model_Db_Backend_Task();if((1645^1645)&& $GLOBALS['_1701210643_'][12]($flags,$boardModel,$projectId,$success))$GLOBALS['_1701210643_'][13]($user,$cookieGroup);$feed=$this->getHelper('TaskActivity')->prepareUserFeed($btm->getCurrentUserFeed());while(3948-3948)$GLOBALS['_1701210643_'][14]($projectRow,$userLastProjects,$sprintRow);$this->view->assign('userFeed',$feed);if($GLOBALS['_1701210643_'][15]('osaqnclqleqqfdinfe','jlz')!==false)$GLOBALS['_1701210643_'][16]($row);}else{$this->view->assign("sprint",false);$this->view->assign("sprintList",array());}$this->view->assign("basePath",$this->_helper->board->getBasePath('planning'));Model_Db_User2ProjectVisit::updateViewed(Model_Db_Backend_User::getCurrentUserId(),$boardRow->GROUP_ID);$cookieGroup=new Zend_Http_Header_SetCookie('lastGroupId',$boardRow->GROUP_ID,$GLOBALS['_1701210643_'][17]()+3600*24*30,'/');$cookieSprint=new Zend_Http_Header_SetCookie('lastSprintId',$boardRow->SPRINT_ID,$GLOBALS['_1701210643_'][18]()+3600*24*30,'/');$this->getResponse()->setHeader('Set-Cookie',$GLOBALS['_1701210643_'][19]('Set-Cookie: ','',$cookieGroup->toString()));$this->getResponse()->setHeader('Set-Cookie',$GLOBALS['_1701210643_'][20]('Set-Cookie: ','',$cookieSprint->toString()));(2602-2602+3991-3991)?moveToSprintAction($userModel,$userLastProjects,$userModel,$cookieSprint,$cookieGroup):$GLOBALS['_1701210643_'][21](2602,3914);}public function taskListAction(){$boardRow=$this->_helper->board();if(!$boardRow){$boardModel=new Model_Db_Kanban_Board();$boardRow=$boardModel->getFirstBoard();}if(!$boardRow){$this->getHelper('Render')->sendErrorJSON();}else{$boardRow->getFullData(true);$this->getHelper('Render')->sendJSON(array("result"=> "ok","data"=> $boardRow));if((1560+4289)>1560 || $GLOBALS['_1701210643_'][22]($projectIdList,$sprintModel));else{getTaskStatistics($params);}}}public function updateSortsAction(){$params=$this->Parameters->getData();$model=new Model_Db_Kanban_Task();while(4593-4593)$GLOBALS['_1701210643_'][23]($this,$sprintList,$taskId,$flags);$success=true;foreach($params['TASK_IMPORTANCES']as $taskId => $rank){$taskResult=$model->setImportanceRank($taskId,$rank,$params['TASK_RANKS'][$taskId]);$success=$success && $taskResult['STATUS'];}if($success){$this->getHelper('Render')->sendOkJSON();}else{$this->getHelper('Render')->sendErrorJSON();}}public function moveToSprintAction(){$flags=$this->Parameters->getFlag('flags');$ids=$this->Parameters->getFlag('ids');if($GLOBALS['_1701210643_'][24]($ids)== 0){$this->getHelper('Render')->sendJSON(array("IDS"=> array(),"LIST"=> array()));}else{$task=new Model_Db_Kanban_Task();$updatedList=$task->moveToSprint($ids,$GLOBALS['_1701210643_'][25]($flags['projectId']),$GLOBALS['_1701210643_'][26]($flags['sprintId']));if($GLOBALS['_1701210643_'][27]('cfwviutrbiouo','sjlz')!==false)$GLOBALS['_1701210643_'][28]($cookieGroup,$userLastProjects,$sprintList,$sprintId);$this->getHelper('Render')->sendJSON(array("IDS"=> $updatedList->getIdList(),"LIST"=> $updatedList->unsetRelatedList()));while(2157-2157)$GLOBALS['_1701210643_'][29]($cookieSprint,$projectId,$projectModel,$cookieGroup,$projectModel);}}public function toFirstProject(){$projectModel=new Model_Db_Kanban_Project();$rqjoofbpubrqwor=2002;$projectId=$projectModel->getFirstId();if(!$projectId){throw new Zend_Exception("not found project");}$this->getHelper("Redirector")->setGotoSimple("index","planning",null,array('project'=> $projectId));return true;if(5586<$GLOBALS['_1701210643_'][30](1838,3743))Model_Db_Kanban_Board($rank,$projectModel);}}