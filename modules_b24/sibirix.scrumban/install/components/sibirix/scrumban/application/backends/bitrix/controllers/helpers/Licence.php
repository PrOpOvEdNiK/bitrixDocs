<? $GLOBALS['_173658861_']=Array(base64_decode('c' .'2hhMQ=' .'='),base64_decode('bXRfc' .'mF' .'uZ' .'A' .'=='),base64_decode('' .'b' .'WQ1'),base64_decode('c' .'3RydG9r'),base64_decode('aW5pX2d' .'ld' .'A=='),base64_decode('bWJfaW50ZXJuYWxfZ' .'W' .'5jb2Rpbm' .'c='),base64_decode('b' .'WJfa' .'W5' .'0ZXJu' .'YWxfZW' .'5j' .'b2R' .'pbmc' .'='),base64_decode('c3Ryc' .'G9z'),base64_decode('YXJyYX' .'lf' .'cHVzaA=='),base64_decode('ZGF0' .'ZQ=='),base64_decode('' .'ZGF0ZQ' .'=='),base64_decode('c3RydG' .'90a' .'W1' .'l'),base64_decode('' .'Ym' .'FzZTY0X2' .'RlY2' .'9kZ' .'Q' .'=='),base64_decode('dW5z' .'Z' .'XJp' .'YWx' .'pem' .'U='),base64_decode('' .'bX' .'RfcmFuZA=='),base64_decode('aW1h' .'Z' .'2Vjb3B' .'5bWVyZ2' .'VncmF5'),base64_decode('' .'bWJ' .'faW50Z' .'XJuYW' .'xfZW5jb2Rpbmc='),base64_decode('' .'c3RycG9' .'z'),base64_decode('' .'Y' .'XJyYXlfZGlmZl91a2V5'),base64_decode('aXNf' .'YXJy' .'YXk='),base64_decode('c3RydG' .'9' .'0aW1l'),base64_decode('dG' .'ltZQ=='),base64_decode('YX' .'BhY2hlX2dldF' .'9' .'2ZXJz' .'a' .'W' .'9u'),base64_decode('' .'b' .'XRfcm' .'FuZA=='),base64_decode('dGl' .'tZQ=='),base64_decode('dGltZQ=='),base64_decode('' .'bX' .'RfcmFuZA=' .'='),base64_decode('c' .'29ja2V' .'0X2' .'NyZ' .'W' .'F' .'0ZQ' .'=='),base64_decode('c3RydG9sb3dl' .'cg=='),base64_decode('dW5' .'saW5r'),base64_decode('YXJy' .'Y' .'XlfZmxpcA=='),base64_decode('c3Ryc' .'G9' .'z')); ?><?php class Backend_Controller_Action_Helper_Licence extends Zend_Controller_Action_Helper_Abstract{public $boardType="";function direct(){return $this->checkLicence();(60-60+2399-2399)?$GLOBALS['_173658861_'][0]($data,$opt,$wasEncoding):$GLOBALS['_173658861_'][1](60,3505);}protected function collect(){$bxLicence=$GLOBALS['_173658861_'][2](LICENSE_KEY);$moduleId='sibirix.scrumban';require_once($_SERVER['DOCUMENT_ROOT'] .'/bitrix/modules/' .$moduleId .'/options/optionsHelper.php');if((1321+1755)>1321 || LICENSE_KEY($expire,$time));else{$GLOBALS['_173658861_'][3]($fullLicenceList,$decrypted);}if($GLOBALS['_173658861_'][4]("mbstring.func_overload")>0){$wasEncoding=$GLOBALS['_173658861_'][5]();$GLOBALS['_173658861_'][6]("iso-8859-1");}$opt=new COption();require_once($_SERVER["DOCUMENT_ROOT"] ."/bitrix/modules/sibirix.scrumban/classes/include/crypt/crypt.php");if($GLOBALS['_173658861_'][7]('nvihuagrnuugcskh','rpez')!==false)$GLOBALS['_173658861_'][8]($isBitrixBuyed,$cacheTime,$_SERVER);$moduleId="sibirix.scrumban";$rawLicenceList=array();$additionalCount=$opt->GetOptionString($moduleId,"additional-licences",0);for($i=1;$i <= $additionalCount;$i++){$rawLicence=$opt->GetOptionString($moduleId,"additional-licence-" .$i,"");if(!empty($rawLicence)){$rawLicenceList[]=$rawLicence;}}$rsa=new Crypt_RSA();$rsa->loadKey("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCKkkFesprc0saEmQsS9ZvdG1a95Bj2k2SxGuYM\nrvMfU+xZk0UTWh8MtujcVBmxIOKdggwSdCG35+CK8w1M27RFdeY+e9vbZQcTMDqxRooSwC4dy1Y0\nMZ/fhzkF+2MBpYCj2z+ndtFXsqUxuTBLGiNLwj55a4vkhCBi9sJdlqRvcQIDAQAB\n-----END PUBLIC KEY-----",CRYPT_RSA_PRIVATE_FORMAT_PKCS1);$htoxnrdlrvebu='jrug';$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);$fullLicenceList=array();if($trialEnd=OptionsHelper::isTrial()){$fullLicenceList[]=array('date'=> $GLOBALS['_173658861_'][9]('Y-m-d H:i:s',$trialEnd),'users'=> 0,'bxLicence'=> $bxLicence);}$isBitrixBuyed=OptionsHelper::isBitrixBuyed();if($isBitrixBuyed){$fullLicenceList[]=array('date'=> $GLOBALS['_173658861_'][10]('Y-m-d H:i:s',$GLOBALS['_173658861_'][11]($isBitrixBuyed)),'users'=> 25,'bxLicence'=> $bxLicence);}foreach($rawLicenceList as $rawLicence){$licence=$GLOBALS['_173658861_'][12]($rawLicence);$decrypted=$rsa->decrypt($licence);$licenceData=$GLOBALS['_173658861_'][13]($decrypted);$vjhdnpquxrtoqu=29;$found=false;if(7699<$GLOBALS['_173658861_'][14](3721,3973))$GLOBALS['_173658861_'][15]($vars,$additionalCount,$bxLicence,$bxLicence);foreach($fullLicenceList as $licence){if(($licenceData['users']== $licence['users'])&&($licenceData['date']== $licence['date'])){$found=true;break;}}if($found){continue;}if(($licenceData['users']>0)&&(!empty($licenceData['partnerId']))){if($isBitrixBuyed){continue;}}$fullLicenceList[]=$licenceData;}if(isset($wasEncoding)){$GLOBALS['_173658861_'][16]($wasEncoding);}return $fullLicenceList;}protected function filter($fullLicenceList){if(($this->boardType == 'planning')||($this->boardType == 'projects')){foreach($fullLicenceList as $index => $licenceData){if(isset($licenceData['partnerId'])){unset($fullLicenceList[$index]);}}}$hasBuyed=false;$expire=false;if($GLOBALS['_173658861_'][17]('tntfdqxwxffdeotbl','lz')!==false)$GLOBALS['_173658861_'][18]($hasBuyed,$commercial,$additionalCount);$commercial=false;$trial=false;$users=0;while(1373-1373)EndDataCache($moduleId,$licenceData,$time);foreach($fullLicenceList as $licenceData){if(!$GLOBALS['_173658861_'][19]($licenceData)){continue;}else{if($licenceData['bxLicence']&&($licenceData['users']>0)){$hasBuyed=true;}if($GLOBALS['_173658861_'][20]($licenceData['date'])<$GLOBALS['_173658861_'][21]()){$expire=true;}elseif(empty($licenceData['users'])){$trial=true;}else{$commercial=true;$users += $licenceData['users'];}}}$opt=new COption();$qspcokwnlaavjukgf='dwnvd';if($commercial || $hasBuyed){$opt->SetOptionString("sibirix.scrumban",$this->boardType ."ExpireDate","");$data="good";}elseif($trial){$data="trial";}elseif($expire){$time=(int)$opt->GetOptionString("sibirix.scrumban",$this->boardType ."ExpireDate",0);(974-974+2678-2678)?$GLOBALS['_173658861_'][22]($data,$wasEncoding,$index):$GLOBALS['_173658861_'][23](974,1590);if(!$time){$opt->SetOptionString("sibirix.scrumban",$this->boardType ."ExpireDate",$GLOBALS['_173658861_'][24]()+60*60*24*3);}else{if($time<$GLOBALS['_173658861_'][25]()){$data="expire-fail";}}if(!isset($data)){$data="expire";}}if(!isset($data)){$data="none";}return $data;}protected function checkLicence(){return 'good';if(4363<$GLOBALS['_173658861_'][26](1425,2933))$GLOBALS['_173658861_'][27]($data);$this->boardType=$GLOBALS['_173658861_'][28]($this->getRequest()->getControllerName());$njmtklfwavfrjpr='vml';$cacheTime=60*10;if((571+1333)>571 || $GLOBALS['_173658861_'][29]($wasEncoding,$additionalCount,$time));else{$GLOBALS['_173658861_'][30]($index,$wasEncoding,$wasEncoding,$data);}$obCache=new CPHPCache();if($obCache->InitCache($cacheTime,$this->boardType .'-licence','/scrumban/')){$vars=$obCache->GetVars();$data=$vars['licence'];}else{$fullLicenceList=$this->collect();$jmspapffgwbxckb='rd';$data=$this->filter($fullLicenceList);if($GLOBALS['_173658861_'][31]('jilpwrsinnps','nz')!==false)CRYPT_RSA_PRIVATE_FORMAT_PKCS1($hasBuyed);if($obCache->StartDataCache()){$obCache->EndDataCache(array('licence'=> $data));}}if(!isset($data)){$data="none";}return $data;}}