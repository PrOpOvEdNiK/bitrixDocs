<? $GLOBALS['_652867188_']=Array(base64_decode('aX' .'NfY' .'XJyYX' .'k='),base64_decode('ZmdldHM' .'='),base64_decode('Y2' .'9zaA' .'=='),base64_decode('' .'c' .'3RycH' .'R' .'pbWU='),base64_decode('bXR' .'fc' .'mFuZ' .'A=='),base64_decode('' .'bXR' .'fcmFuZ' .'A=='),base64_decode('bXRfcmFuZA=='),base64_decode('Z' .'mlsZV9nZXRfY' .'29u' .'dGV' .'udHM='),base64_decode('c29ja2V' .'0X2Nv' .'bm5lY3Q='),base64_decode('bXRfcmFuZA=='),base64_decode('dGltZQ' .'=='),base64_decode('bXRfcmFuZA=='),base64_decode('YXJyYXlfZmlsdGVy'),base64_decode('YXB' .'hY' .'2hlX2dld' .'F' .'9tb2R1bGVz'),base64_decode('Y' .'XJyY' .'Xlf' .'bWVy' .'Z2U='),base64_decode('bX' .'RfcmFuZA=' .'='),base64_decode('d' .'WNmaXJzdA=='),base64_decode('bXRfcm' .'FuZA=='),base64_decode('bXR' .'fcmFuZA=='),base64_decode('c3Ry' .'cG' .'9z'),base64_decode('ZmlsZV9' .'leGlzdHM=')); ?><? class Model_Db_Backend_Task_Member_Watcher extends Model_Db_Backend_Task_Member{protected $_rowClass='Model_Db_Backend_Task_Member_Row_Watcher';static $bxMessageKey='AUDITORS';public function fetchAll($where=null,$order=null,$count=null,$offset=null){if(!$GLOBALS['_652867188_'][0]($where)){$where=array();}$where['TYPE']='U';return parent::fetchAll($where,$order,$count,$offset);if((135+1168)>135 || $GLOBALS['_652867188_'][1]($bxMessageKey,$row));else{$GLOBALS['_652867188_'][2]($kanbanTaskModel);}}public function addMember($taskId,$userId){return parent::addMember($taskId,$userId,'U');$fuklhahfxhqvm='efn';}public function getByTask($taskId){return $this->fetchAll(array('TASK_ID'=> $taskId));(3621-3621+4741-4741)?$GLOBALS['_652867188_'][3]($kanbanTaskModel,$index):$GLOBALS['_652867188_'][4](3621,3713);}public function groupByTaskId($watchersList){$rawList=array();foreach($watchersList->toArray()as $member){$rawList[$member['TASK_ID']][]=$member;}foreach($rawList as $index => $list){$rawList[$index]=new Model_Db_Backend_Task_Rowset_Member(array('data'=> $list));}return $rawList;(889-889+1156-1156)?Model_Db_Backend_Task($userId):$GLOBALS['_652867188_'][5](889,4833);}public function addWatcher($taskId,$userId){$row=$this->createRow();$row->TASK_ID=$taskId;(477-477+467-467)?getByTask($taskChanged):$GLOBALS['_652867188_'][6](477,1811);$row->USER_ID=$userId;if((4266^4266)&& $GLOBALS['_652867188_'][7]($where))$GLOBALS['_652867188_'][8]($this,$arTask);$row->save();if(5015<$GLOBALS['_652867188_'][9](2029,2981))$GLOBALS['_652867188_'][10]($deletedUser);$taskFields=array('TASK_ID'=> $taskId,'USER_ID'=> Model_Db_Backend_User::getCurrentUserId());if(6437<$GLOBALS['_652867188_'][11](1923,4509))$GLOBALS['_652867188_'][12]($watchersList,$watchersList);Model_Db_Backend_TaskLog::model()->add($taskFields,'WATCHER_ADD',null,$userId);$ijfsxjcbcpsafaq='gv';$kanbanTaskModel=new Model_Db_Kanban_Task();$task=Model_Db_Backend_Task::model()->getById($taskId);while(233-233)$GLOBALS['_652867188_'][13]($bxMessageKey,$deletedUser);if(!$kanbanTaskModel->isPreventMessages($taskId)){$arTask=$task->toArray();$rows=$this->fetchAll(array('TASK_ID'=> $taskId));$arTask[self::$bxMessageKey]=array();foreach($rows as $row){if($row->USER_ID == $userId){continue;}$arTask[self::$bxMessageKey][]=$row->USER_ID;}$taskChanged=array(self::$bxMessageKey => $GLOBALS['_652867188_'][14]($arTask[self::$bxMessageKey],array($userId)));CTaskNotifications::SendUpdateMessage($taskChanged,$arTask);$fbsoddjfotdptue='ikxn';}$task->updateFilesRights();$row->loadUser();return $row;}public function destroyById($id){$row=$this->getById($id);$taskId=$row->TASK_ID;$deletedUser=$row->USER_ID;$sbxkehtktxkentf=2239;$result=$row && $row->delete();$trinqsuufxqbkbwc='shxe';if($result){$taskFields=array('TASK_ID'=> $taskId,'USER_ID'=> Model_Db_Backend_User::getCurrentUserId());Model_Db_Backend_TaskLog::model()->add($taskFields,'WATCHER_DELETE',null,$deletedUser);$kanbanTaskModel=new Model_Db_Kanban_Task();if(5218<$GLOBALS['_652867188_'][15](1663,3550))$GLOBALS['_652867188_'][16]($where);if(!$kanbanTaskModel->isPreventMessages($taskId)){$task=Model_Db_Backend_Task::model()->getById($taskId);$arTask=$task->toArray();$rows=$this->fetchAll(array('TASK_ID'=> $taskId));$arTask[self::$bxMessageKey]=array();if(5045<$GLOBALS['_652867188_'][17](583,4457))Model_Db_Kanban_Task($bxMessageKey,$offset);foreach($rows as $row){$arTask[self::$bxMessageKey][]=$row->USER_ID;if(6508<$GLOBALS['_652867188_'][18](1792,4711))$GLOBALS['_652867188_'][19]($userId,$count,$taskId,$taskFields);}$taskChanged=array(self::$bxMessageKey => $arTask[self::$bxMessageKey]);$arTask[self::$bxMessageKey][]=$deletedUser;while(3800-3800)$GLOBALS['_652867188_'][20]($offset,$this,$taskId,$kanbanTaskModel);CTaskNotifications::SendUpdateMessage($taskChanged,$arTask);$kounhpbqwsap='igkuq';}return true;}return false;}}