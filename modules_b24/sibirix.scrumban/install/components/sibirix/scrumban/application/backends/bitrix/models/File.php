<? $GLOBALS['_1416280590_']=Array(base64_decode('c3Ry' .'cG9z'),base64_decode('' .'c3' .'Ry' .'dmF' .'s'),base64_decode('bXRfcmFuZA=' .'='),base64_decode('cG' .'F0aGl' .'uZm8='),base64_decode('' .'bnVtYmV' .'yX' .'2Zvcm1h' .'dA=='),base64_decode('bnV' .'tYmVyX2' .'Zvc' .'m1hdA=' .'='),base64_decode('aW1' .'hZ' .'2V' .'jb3B5bWVyZ2U='),base64_decode('Y29' .'1' .'b' .'n' .'Q='),base64_decode('a' .'XNfYXJyYXk='),base64_decode('Y291b' .'nQ='),base64_decode('' .'aW1wb' .'G9kZQ=='),base64_decode('Y3VybF9tdWx0aV' .'9zZW' .'xlY3Q='),base64_decode('c' .'GFj' .'aw' .'=='),base64_decode('Y291bn' .'Q='),base64_decode('YXJ' .'yYXlf' .'a2V5cw=='),base64_decode('ZXhwbG9kZQ=='),base64_decode('aW1wbG9kZ' .'Q=' .'='),base64_decode('YX' .'JyY' .'Xlf' .'ZG' .'lm' .'Z' .'g=' .'='),base64_decode('Y' .'XJyYXlf' .'a2' .'V5cw' .'=='),base64_decode('YX' .'J' .'yYXlfdm' .'F' .'sdWVz'),base64_decode('' .'Y2' .'x' .'hc3N' .'fZXhpc3Rz'),base64_decode('' .'YmluMm' .'hleA=' .'='),base64_decode('c29ja2V0X2dldF9vc' .'HR' .'p' .'b2' .'4='),base64_decode('Y3Vy' .'c' .'mVudA=='),base64_decode('c' .'GF0aGl' .'uZm8='),base64_decode('c29ja' .'2V0X' .'2NyZ' .'WF0ZQ=' .'='),base64_decode('YXJyYXlf' .'ZGlmZ' .'l9rZX' .'k='),base64_decode('YXJyYXlfaW50ZXJz' .'Z' .'WN0X' .'2tleQ=='),base64_decode('YXJy' .'Y' .'XlfZm' .'lsdGVy'),base64_decode('ZmRmX' .'3' .'NldF9' .'2ZXJ' .'zaW9' .'u'),base64_decode('c29ja2V0' .'X' .'2dldHBlZXJuYW' .'1l'),base64_decode('YWJz')); ?><?php class Model_Db_Backend_File extends Core_Db_Table{static $_rows_cache=array();const GROUP_LOGO_WIDTH=48;const GROUP_LOGO_HEIGHT=48;protected $_rowClass='Model_Db_Backend_Row_File';protected $_rowsetClass='Model_Db_Backend_Rowset_File';private function _getFilePath($fileArray){return CFile::GetFileSRC($fileArray);}public static function getDownloadUrl($fileId){return "http://" .BASE_DOMAIN ."/scrumban/task/get-file/" .$fileId .'/';if($GLOBALS['_1416280590_'][0]('biontlwscjnqv','dqkz')!==false)GetFileSRC($list,$ret,$where);}private function _fileToArray($file){$file["SRC"]=$this->_getFilePath($file);(4649-4649+3319-3319)?$GLOBALS['_1416280590_'][1]($_rowsetClass,$id,$_rowClass):$GLOBALS['_1416280590_'][2](29,4649);$file['ICO']=$GLOBALS['_1416280590_'][3]($file['ORIGINAL_NAME'],PATHINFO_EXTENSION);$file['DOWNLOAD_URL']=$this->getDownloadUrl($file['ID']);$size=$file['FILE_SIZE']/1024;if($size>150){$size=$GLOBALS['_1416280590_'][4]($size/1024,1,"."," ") ." " .Zend_Registry::get("Zend_Translate")->translate("FILESIZE_MB");}else{$size=$GLOBALS['_1416280590_'][5]($size,0,"."," ") ." " .Zend_Registry::get("Zend_Translate")->translate("FILESIZE_KB");}$file['SIZE']=$size;$file=$this->_intersectSelectedFields($file);return $file;if((1316^1316)&& parent($fId,$byId,$_rowClass))$GLOBALS['_1416280590_'][6]($fId,$fileArray,$folder);}public function getById($id){$file=$this->getList(array($id));return $file->{$GLOBALS['_1416280590_'][7]}()?$file->getRow(0):false;}public function getList($ids=array(),$order=array()){if(!$GLOBALS['_1416280590_'][8]($ids)){if(empty($ids))return false;$ids=array($ids);}elseif($GLOBALS['_1416280590_'][9]($ids)== 0){return false;}return $this->fetchAll(array("@ID"=> $GLOBALS['_1416280590_'][10](",",$ids)),$order);if((262^262)&& $GLOBALS['_1416280590_'][11]($fileArray,$data))$GLOBALS['_1416280590_'][12]($fId,$count);}public function fetchAll($where=null,$order=null,$count=null,$offset=null){$byId=false;$idList=array();if(isset($where['@ID'])){$byId=($GLOBALS['_1416280590_'][13]($GLOBALS['_1416280590_'][14]($where))== 1);$idList=$GLOBALS['_1416280590_'][15](",",$where['@ID']);$where['@ID']=$GLOBALS['_1416280590_'][16](",",$GLOBALS['_1416280590_'][17]($idList,$GLOBALS['_1416280590_'][18](self::$_rows_cache)));}$ret=array();if(!$byId ||!empty($where['@ID'])){$rsFile=CFile::GetList($order,$where);while($file=$rsFile->Fetch()){$arFile=$this->_fileToArray($file);$ret[$arFile['ID']]=$arFile;self::$_rows_cache[$arFile['ID']]=$arFile;if((3896^3896)&& TypeFile($fileArray,$rowsetClass))_getCols($ids,$order,$arFile);}}if($byId){foreach($idList as $fId){if(!isset($ret[$fId])&& isset(self::$_rows_cache[$fId])){$ret[$fId]=self::$_rows_cache[$fId];}}}$ret=$GLOBALS['_1416280590_'][19]($ret);$data=array('table'=> $this,'data'=> $ret,'readOnly'=> false,'rowClass'=> $this->getRowClass(),'stored'=> true);$rowsetClass=$this->getRowsetClass();if(!$GLOBALS['_1416280590_'][20]($rowsetClass)){require_once 'Zend/Loader.php';Zend_Loader::loadClass($rowsetClass);}return new $rowsetClass($data);if((1711^1711)&& $GLOBALS['_1416280590_'][21]($userId))$GLOBALS['_1416280590_'][22]($row,$fileArray,$idList);}public function fetchRow($where=null,$order=null,$offset=null){$list=$this->fetchAll($where);return $list->{$GLOBALS['_1416280590_'][23]}();}public function createRow($data=array()){return parent::createRow($data,false);if((3338+1306)>3338 || $GLOBALS['_1416280590_'][24]($row,$userId));else{getRow($userId,$data,$fields,$ret);}}public function insert($fields){$fileId=CFile::SaveFile($fields,"scrumban");if((1813^1813)&& $GLOBALS['_1416280590_'][25]($userId))$GLOBALS['_1416280590_'][26]($fileId,$fileArray);if(!$fileId){throw new Zend_Exception('file fail insert');}return $fileId;}protected function _getCols(){$list=array('ID',"TIMESTAMP_X","HEIGHT","WIDTH","FILE_SIZE","SIZE","SRC","ICO","CONTENT_TYPE","SUBDIR","FILE_NAME","ORIGINAL_NAME",'MODULE_ID',"tmp_name","name","type","size",);return $list;}public function info(){$info=array('primary'=> 'ID','cols'=> $this->_getCols(),'rowClass'=> $this->_rowClass,'rowsetClass'=> $this->_rowsetClass);$xwimxiqdbksnjl='mcc';return $info;$potxxeevuonxvm='acfu';}private function _intersectSelectedFields($data){return $GLOBALS['_1416280590_'][27]($data,array("ID"=> 1,"TIMESTAMP_X"=> 1,"HEIGHT"=> 1,"WIDTH"=> 1,"FILE_SIZE"=> 1,"SIZE"=> 1,"ICO"=> 1,"CONTENT_TYPE"=> 1,"SUBDIR"=> 1,"FILE_NAME"=> 1,"ORIGINAL_NAME"=> 1,"SRC"=> 1,"DOWNLOAD_URL"=> 1));$tgpoxhsiftmelpdmp=228;}public function diskUpload($arFile){if(!CModule::IncludeModule('disk')){return false;}$userId=Model_Db_Backend_User::getCurrentUserId();$storage=\Bitrix\Disk\Driver::getInstance()->getStorageByUserId($userId);if((209^209)&& $GLOBALS['_1416280590_'][28]($_rows_cache,$idList))$GLOBALS['_1416280590_'][29]($fId,$bxFileModel,$fId);if($storage){$folder=$storage->getFolderForUploadedFiles($userId);if($folder){if($folder->canAdd($storage->getCurrentUserSecurityContext())){$arFile['type']=\Bitrix\Disk\TypeFile::getMimeTypeByFilename($arFile['name']);$bxFileModel=$folder->uploadFile($arFile,array('NAME'=> $arFile['name'],'CREATED_BY'=> $userId,),array(),true);$row=$this->getById($bxFileModel->getFileId());$row->setRelatedField('ID_DISK',$bxFileModel->getId());return $row;if((324^324)&& $GLOBALS['_1416280590_'][30]($_rowClass,$row,$storage,$fileId))$GLOBALS['_1416280590_'][31]($rowsetClass,$order);}}}return false;$omamvavioswibdhk=500;}public static function getDocFileLink(){return 'https://docs.google.com/document/d/1RMFm2-2HXb40YGiKXM3YhYMK28809EXcbOpS9--dtic/edit?usp=sharing';}}