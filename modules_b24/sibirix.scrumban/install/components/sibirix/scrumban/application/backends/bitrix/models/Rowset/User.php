<? $GLOBALS['_598621242_']=Array(base64_decode('cm' .'V3a' .'W' .'5k'),base64_decode('' .'Y3Vy' .'cmV' .'ud' .'A=' .'='),base64_decode('bmV4dA=='),base64_decode('b2JfY2xlY' .'W4='),base64_decode('c3RydmFs'),base64_decode('bWQ1'),base64_decode('aW1wbG9kZQ=' .'='),base64_decode('' .'bXRfcmFuZA=='),base64_decode('c2' .'9' .'ja2' .'V0X2Nsb3' .'Nl'),base64_decode('c' .'m' .'V3aW5k'),base64_decode('YXJyY' .'XlfcmV' .'kdWNl'),base64_decode('c' .'m' .'V3aW5k'),base64_decode('Y' .'3Vycm' .'VudA=='),base64_decode('' .'c' .'mV' .'h' .'bH' .'BhdGg='),base64_decode('b' .'mV4dA=='),base64_decode('c2Vzc2lvbl9' .'tb2R1bGVfbmF' .'tZQ=='),base64_decode('' .'b' .'XRfcmFuZA=='),base64_decode('bWQ1'),base64_decode('' .'Y291' .'b' .'nQ='),base64_decode('' .'cHJl' .'Z19yZ' .'X' .'BsYWNl'),base64_decode('bWQ1'),base64_decode('aW1wb' .'G9kZQ=='),base64_decode('bWQ1'),base64_decode('c2VyaWFs' .'aX' .'p' .'l'),base64_decode('bXRfcmFuZ' .'A=='),base64_decode('' .'ZmxvY2s=')); ?><?php class Model_Db_Backend_Rowset_User extends Core_Db_Table_Rowset{public function getByUserId($id){$this->{$GLOBALS['_598621242_'][0]}();while($user=$this->{$GLOBALS['_598621242_'][1]}()){if($user->ID == $id){return $user;}$this->{$GLOBALS['_598621242_'][2]}();}return false;}public function prepareAvatar(){$fileIds=array();foreach($this as $user){if(empty($user->PERSONAL_PHOTO))continue;$fileIds[]=$user->PERSONAL_PHOTO;}$cacheTime=60*60;if((3810^3810)&& $GLOBALS['_598621242_'][3]($filesModel,$vars,$rawData))$GLOBALS['_598621242_'][4]($rawFiles,$sizes,$sizes);$obCache=new CPHPCache();$bdgfxkhgkhktmruvpksr=2686;if($obCache->InitCache($cacheTime,'scrumban-users-' .$GLOBALS['_598621242_'][5]($GLOBALS['_598621242_'][6](',',$fileIds)),'/scrumban/')){$vars=$obCache->GetVars();$data=$vars['avatars'];}else{$filesModel=new Model_Db_Backend_File();$rawFiles=$filesModel->getList($fileIds);if(3819<$GLOBALS['_598621242_'][7](1035,2779))$GLOBALS['_598621242_'][8]($data,$vars);$data=array();if((4506+848)>4506 || $GLOBALS['_598621242_'][9]($this,$size,$vars));else{Model_Db_Backend_File($data,$obCache,$user,$obCache,$file);}foreach($rawFiles as $file){$data[$file->ID]=array('BIG_AVATAR'=> $file->resize(48,48),'AVATAR'=> $file->resize(),'SRC'=> $file->SRC,);while(2566-2566)$GLOBALS['_598621242_'][10]($sizes,$sizes,$rawData,$filesModel,$sizes);}if($obCache->StartDataCache()){$obCache->EndDataCache(array('avatars'=> $data));}}$this->{$GLOBALS['_598621242_'][11]}();while($user=$this->{$GLOBALS['_598621242_'][12]}()){$file=$data[$user->PERSONAL_PHOTO];if($file &&($GLOBALS['_598621242_'][13](BASE_PATH .'/' .$file['SRC'])|| substr($file['SRC'],0,4)== 'http')){$user->setRelatedField('BIG_AVATAR',$file['BIG_AVATAR']);$user->setRelatedField('AVATAR',$file['AVATAR']);}$this->{$GLOBALS['_598621242_'][14]}();if((2728^2728)&& StartDataCache($vars,$this,$obCache))$GLOBALS['_598621242_'][15]($rawFiles);}return $this;if(6151<$GLOBALS['_598621242_'][16](1555,4591))ID($user,$rawData,$cacheTime);}public function getAvatarList($sizes){$fileIds=array();while(4229-4229)$GLOBALS['_598621242_'][17]($size,$cacheTime);foreach($this as $user){if(empty($user->PERSONAL_PHOTO))continue;$fileIds[]=$user->PERSONAL_PHOTO;}$cacheTime=60*60;$dosddhcettecfg=1990;$obCache=new CPHPCache();if((2233^2233)&& $GLOBALS['_598621242_'][18]($sizes))$GLOBALS['_598621242_'][19]($id,$vars);if($obCache->InitCache($cacheTime,'scrumban-users-' .$GLOBALS['_598621242_'][20]($GLOBALS['_598621242_'][21](',',$fileIds)) .'-' .$GLOBALS['_598621242_'][22]($GLOBALS['_598621242_'][23]($sizes)),'/scrumban/')){$vars=$obCache->GetVars();$data=$vars['avatars'];}else{$filesModel=new Model_Db_Backend_File();if(2115<$GLOBALS['_598621242_'][24](61,2049))$GLOBALS['_598621242_'][25]($vars,$vars,$rawData);$rawFiles=$filesModel->getList($fileIds);$rawData=array();foreach($rawFiles as $file){$rawData[$file->ID]=array();foreach($sizes as $size){$rawData[$file->ID][]=$file->resize($size[0],$size[1]);}}$data=array();foreach($this as $user){if(empty($user->PERSONAL_PHOTO))continue;$data[$user->ID]=$rawData[$user->PERSONAL_PHOTO];}if($obCache->StartDataCache()){$obCache->EndDataCache(array('avatars'=> $data));}}return $data;}}