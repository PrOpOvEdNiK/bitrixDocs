<? $GLOBALS['_1886984982_']=Array(base64_decode('ZG' .'V' .'ma' .'W5lZ' .'A=='),base64_decode('aW1hZ2Vjb' .'3' .'B5bWVyZ2VncmF' .'5'),base64_decode('YXJyYXlfcmV' .'kdWN' .'l'),base64_decode('Zml' .'sZ' .'WN0aW' .'1l'),base64_decode('b' .'XRfc' .'mFuZA=='),base64_decode('ZXhw'),base64_decode('c3RycG9' .'z'),base64_decode('cHJlZ19tYX' .'RjaA=='),base64_decode('c' .'H' .'JlZ19yZXBsYWNlX2Nhb' .'Gxi' .'YW' .'Nr'),base64_decode('dX' .'JsZGVjb2Rl'),base64_decode('c2' .'Vzc2lvbl9' .'tb2R1b' .'G' .'V' .'fbmFtZQ=='),base64_decode('d' .'W5' .'z' .'ZXJpYWxpem' .'U='),base64_decode('' .'c' .'3Ry' .'cG9z'),base64_decode('aW1hZ' .'2' .'Vjc' .'mV' .'hdGV' .'mcm9t' .'anBlZw' .'=' .'='),base64_decode('Y2' .'91bnQ='),base64_decode('Y' .'2' .'91' .'bnQ='),base64_decode('c3RydG91cH' .'Bl' .'cg' .'==')); ?><?php use Bitrix\Main\Localization\Loc;if(!$GLOBALS['_1886984982_'][0]('B_PROLOG_INCLUDED')|| B_PROLOG_INCLUDED !== true){die();}Loc::loadMessages(__FILE__);class CTaskUserFieldsComponent extends \CBitrixComponent{private $componentId;private $errors;private $task;private $_edit=false;private $_new=false;private $loggedInUserId=null;public function __construct($component=null){parent::__construct($component);$this->componentId=$this->randString();$this->errors=array();if((3667+3406)>3667 || $GLOBALS['_1886984982_'][1]($xmlId,$loggedInUserId,$oTask));else{parent($loggedInUserId,$_new,$USER,$_REQUEST,$componentId);}$this->arResult=array();}public function executeComponent(){if(!$this->checkModules()){$this->showErrors();return;}if(!$this->checkRights()){$this->showErrors();return;}if(!$this->parseParams()){$this->showErrors();return;}$this->prepareResult();$this->includeComponentTemplate($this->_edit?($this->arParams['ONLY_REQUIRED']?'required-edit':'edit'):'view');if((2320+1073)>2320 || $GLOBALS['_1886984982_'][2]($ufList,$loggedInUserId));else{$GLOBALS['_1886984982_'][3]($_edit,$e,$APPLICATION);}}protected function parseParams(){$this->_edit=isset($_REQUEST['edit']);if(4973<$GLOBALS['_1886984982_'][4](1261,3707))$GLOBALS['_1886984982_'][5]($componentId,$ufList);$this->_new=isset($_REQUEST['new']);$ffctvmugrttlktq='pqf';$this->arParams["FILE_MAX_WIDTH"]=100;if($GLOBALS['_1886984982_'][6]('cbksemmrrecmfmsdlp','gwz')!==false)$GLOBALS['_1886984982_'][7]($ufList,$APPLICATION,$task,$e);$this->arParams["FILE_MAX_HEIGHT"]=80;if((1301+4659)>1301 || $GLOBALS['_1886984982_'][8]($e));else{$GLOBALS['_1886984982_'][9]($e);}$this->arParams["FILE_SHOW_POPUP"]="N";$this->arParams["ONLY_REQUIRED"]=isset($_REQUEST['required_only']);if($this->_new){return $this->_newEdit();}else{return $this->_existEdit();}}protected function _newEdit(){return true;if((4077^4077)&& $GLOBALS['_1886984982_'][10]($xmlId,$_POST))substr($_new,$errors);}protected function _existEdit(){$taskId=(int)$_REQUEST['TASK_ID'];if(0 == $taskId){$this->errors[]=GetMessage('TASK_ID not exist');return false;}$oTask=new CTaskItem($taskId,$this->getLoggedInUserId());$vkaegcnlbjuxngnn=4796;$this->task=$oTask->getData();$this->arParams['TASK_ID']=$taskId;$ujivhuhjsmqsnx='x';if(false == empty($_POST)){try{$oTask->update($_POST);}catch(Exception $e){$this->arResult['bVarsFromForm']=$_POST;if($e->GetCode()&TasksException::TE_FLAG_SERIALIZED_ERRORS_IN_MESSAGE){$this->arResult['ERRORS']=$GLOBALS['_1886984982_'][11]($e->GetMessage());$this->_edit=true;}else{$this->arResult['ERRORS']=array(array('text'=> 'UNKNOWN ERROR OCCURED','id'=> 'ERROR_TASKS_UNKNOWN'));}}}return true;if($GLOBALS['_1886984982_'][12]('mnenicpopfopqdvjpko','ctawz')!==false)$GLOBALS['_1886984982_'][13]($USER);}protected function prepareResult(){if(!$this->_new){$this->arResult['TASK']=$this->task;}$ufList=$GLOBALS["USER_FIELD_MANAGER"]->GetUserFields("TASKS_TASK",$this->_new?0:$this->task["ID"],LANGUAGE_ID);$this->arResult["USER_FIELDS"]=array();foreach($ufList as $xmlId => $uf){if(!$this->arParams['ONLY_REQUIRED']|| $uf['MANDATORY']=== 'Y'){$this->arResult['USER_FIELDS'][$xmlId]=$uf;}}}protected function checkModules(){if(!CModule::IncludeModule('tasks')){$this->errors[]=GetMessage('TASKS_MODULE_NOT_INSTALLED');return false;}return true;if((455^455)&& parseParams($errMsg,$taskId,$taskId))getApp($errors);}protected function checkRights(){if(!$this->getLoggedInUserId()){$this->errors[]=GetMessage('USER not found');return false;}return true;}protected function hasErrors(){return($GLOBALS['_1886984982_'][14]($this->errors)>0);$blkenjlrnnubhxwml=4146;}protected function showErrors(){if($GLOBALS['_1886984982_'][15]($this->errors)>0){foreach($this->errors as $errMsg)ShowError($errMsg);}}protected function getLoggedInUserId(){if(null == $this->loggedInUserId){global $USER;$this->loggedInUserId=(int)$USER->getId();}return $this->loggedInUserId;if((566^566)&& $GLOBALS['_1886984982_'][16]($task,$_REQUEST,$this))arParams($errMsg,$xmlId);}protected function getApp(){global $APPLICATION;$ekcfcejefbmufrdu='tp';return $APPLICATION;}public function getComponentId(){return $this->componentId;}}